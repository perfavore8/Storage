"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[958],{9240:function(e,s,t){t.d(s,{Z:function(){return p}});var a=t(3396);const l={class:"z-[46]"};function o(e,s,t,o,r,i){const n=(0,a.up)("NavBar"),d=(0,a.up)("HomeMenu"),c=(0,a.up)("HomeModals");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",l,[(0,a.Wm)(n),(0,a.Wm)(d,{class:"z-[46]"})]),(0,a.Wm)(c,{selectedWH:t.selectedWH},null,8,["selectedWH"])],64)}var r=t(3768),i=t(2692),n=t(1621),d={components:{NavBar:r.Z,HomeMenu:i.Z,HomeModals:n.Z},props:{selectedWH:{type:Object,required:!1}},setup(){}},c=t(89);const u=(0,c.Z)(d,[["render",o],["__scopeId","data-v-bb6a9f2e"]]);var p=u},8373:function(e,s,t){t.r(s),t.d(s,{default:function(){return Ae}});var a=t(3396),l=t(7139);const o=e=>((0,a.dD)("data-v-bbc10b16"),e=e(),(0,a.Cn)(),e),r={class:"wrapper p-6 w-screen"},i={class:"header pb-8"},n={class:"mt-20 max-w-7xl mx-auto"},d={class:"flex flex-row justify-between items-center mb-8"},c={class:"text-2xl text-gray-900 font-semibold"},u={class:"main flex flex-col gap-8 items-center rounded-lg ring-1 ring-slate-900/10 px-8 py-32 sm:px-6 sm:py-32 lg:px-8"},p={class:"pagination flex justify-center"},m={key:0,class:"w-4 h-4 rounded-full flex items-center justify-center absolute -top-1 -right-0 z-10",style:{"background-color":"#fb718570"}},f=o((()=>(0,a._)("div",{class:"w-2 h-2 rounded-full",style:{"background-color":"#fb7185ff"}},null,-1))),w=[f],h={class:"max-w-2xl w-full"},g={class:"mt-8 flex items-center justify-end gap-x-6"},v={type:"button",class:"text-sm font-semibold leading-6 text-gray-900"},b=["disabled"];function y(e,s,t,o,f,y){const x=(0,a.up)("AppHeader"),k=(0,a.up)("AppRadioBtnsGroup"),_=(0,a.up)("router-link"),P=(0,a.up)("ProfileChangeModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[(0,a._)("div",i,[(0,a.Wm)(x,{selectedWH:{name:"Заказы",value:"orders"}})]),(0,a._)("div",n,[(0,a._)("div",d,[(0,a._)("h1",c,(0,l.zw)(e.$t("Profile.header")),1)]),(0,a._)("div",u,[(0,a._)("div",p,[(0,a.Wm)(k,{selected:o.pagination.selected,list:o.pagination.list,onSelect:s[0]||(s[0]=e=>o.pagination.select(e))},(0,a.Nv)({_:2},[(0,a.Ko)(o.pagination.list,((e,s)=>({name:`item${s}`,fn:(0,a.w5)((()=>[e.haveErrors&&o.trySubmit?((0,a.wg)(),(0,a.iD)("div",m,w)):(0,a.kq)("",!0)]))})))]),1032,["selected","list"])]),(0,a._)("div",h,[((0,a.wg)(),(0,a.j4)(a.Ob,null,[((0,a.wg)(),(0,a.j4)((0,a.LL)(o.pagination.selected.component),{user:o.user.data,trySubmit:o.trySubmit,ref:e=>o.pagination.saveRef(e,o.pagination.selected.value),onShowChangeModal:s[1]||(s[1]=(e,s)=>o.type.setType(e,s))},null,40,["user","trySubmit"]))],1024)),(0,a._)("div",g,[(0,a.Wm)(_,{to:"/"},{default:(0,a.w5)((()=>[(0,a._)("button",v,(0,l.zw)(e.$t("global.сancel2")),1)])),_:1}),(0,a._)("button",{type:"submit",class:"btn max-h-[34px] pointer-events-auto relative inline-flex whitespace-nowrap w-fit rounded-md bg-white text-[0.8125rem] !font-medium leading-5 text-slate-700 shadow-sm ring-1 ring-slate-700/10 hover:bg-slate-50 hover:text-slate-900 hover:disabled:bg-white disabled:opacity-30 disabled:cursor-not-allowed",disabled:o.isLocked,onClick:s[2]||(s[2]=e=>o.submit())},(0,l.zw)(e.$t("global.save")),9,b)])])])])]),o.showProfileChangeModal?((0,a.wg)(),(0,a.j4)(P,{key:0,type:o.type.selected,login:o.type.value,skipFirstStep:o.type.skipFirstStep,onClose:s[3]||(s[3]=e=>o.toggleProfileChangeModal(!1)),onSubmit:s[4]||(s[4]=()=>o.user.setData())},null,8,["type","login","skipFirstStep"])):(0,a.kq)("",!0)],64)}var x=t(9240),k=t(1970),_=t(9242);const P={class:"relative"},C={class:"grid gap-6"},U={class:"relative mb-2 flex gap-2 items-center"},T={key:1,class:"input",disabled:""},q={class:"flex gap-2 items-center"},D=["disabled"],M={class:"absolute flex flex-col gap-1 -bottom-1 left-1/3 translate-x-6 translate-y-full"},N={key:0,class:"text-red-700 text-sm origin-top"};function S(e,s,t,o,r,i){const n=(0,a.up)("MaskEmail");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.kq)("",!0),(0,a.kq)("",!0),(0,a._)("div",P,[(0,a._)("form",C,[(0,a._)("span",null,(0,l.zw)(e.$t("EditUserProfile.name")),1),(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":s[0]||(s[0]=e=>o.copyUser.name=e)},null,512),[[_.nr,o.copyUser.name]]),(0,a._)("span",null,(0,l.zw)(e.$t("EditUserProfile.email")),1),(0,a._)("div",U,[t.user.email?((0,a.wg)(),(0,a.j4)(n,{key:0,value:o.copyUser.email,"onUpdate:value":s[1]||(s[1]=e=>o.copyUser.email=e),placeholder:"Email@example.com",class:"mask-email input"},null,8,["value"])):((0,a.wg)(),(0,a.iD)("input",T)),(0,a._)("button",{type:"button",class:"text-sm font-semibold leading-6 text-gray-900 disabled:text-gray-500 disabled:cursor-default disabled:font-medium",onClick:s[2]||(s[2]=e=>o.showChangeModal("email",t.user.email))},(0,l.zw)(t.user.email?e.$t("EditUserProfile.change"):e.$t("EditUserProfile.add")),1)]),(0,a._)("span",null,(0,l.zw)(e.$t("EditUserProfile.phone")),1),(0,a._)("div",q,[(0,a.wy)((0,a._)("input",{type:"text",class:"input","onUpdate:modelValue":s[3]||(s[3]=e=>o.copyUser.phone=e),disabled:!t.user.phone},null,8,D),[[_.nr,o.copyUser.phone]]),(0,a._)("button",{type:"button",class:"text-sm font-semibold leading-6 text-gray-900 disabled:text-gray-500 disabled:cursor-default disabled:font-medium",onClick:s[4]||(s[4]=e=>o.showChangeModal("phone",t.user.phone))},(0,l.zw)(t.user.phone?e.$t("EditUserProfile.change"):e.$t("EditUserProfile.add")),1)])]),(0,a._)("div",M,[(0,a.Wm)(_.uT,{name:"fade"},{default:(0,a.w5)((()=>[o.errors.value?((0,a.wg)(),(0,a.iD)("small",N,(0,l.zw)(o.errors.text||e.$t("global.somethingWrong")),1)):(0,a.kq)("",!0)])),_:1})])])],64)}var j=t(4870),E=t(4581),z={props:{user:Object},setup(e,s){const t=(0,j.qj)({}),l=()=>{Object.assign(t,{...e.user}),t.isActive=Boolean(t.is_active)};(0,a.YP)((()=>e.user),(()=>l()),{deep:!0});const o=(0,a.Fl)((()=>e.user.name===t.name)),r=(0,j.qj)({value:!1,text:""}),i=async()=>{let e=!0;if(e&&!o.value){const{success:s,message:a}=await E.Z.dispatch("updateUser",{name:t.name});e=e&&s,r.text=a,r.value=!s}else e=!1;return o.value&&(e=!0),e},n=(e,t)=>{s.emit("showChangeModal",e,t)};return{copyUser:t,submit:i,showChangeModal:n,errors:r}}},F=t(89);const W=(0,F.Z)(z,[["render",S],["__scopeId","data-v-031a8174"]]);var Z=W;const $=e=>((0,a.dD)("data-v-5bd76a03"),e=e(),(0,a.Cn)(),e),H={class:"relative"},B={class:"grid gap-6"},Y={class:"relative"},V=["type"],A={for:"visibility",class:"text-slate-400"},L={key:0,class:"material-icons-outlined icon"},O={key:1,class:"material-icons-outlined icon"},I=["type"],R=["type"],G=$((()=>(0,a._)("span",null,null,-1))),K={for:"showNewPasswords",class:"w-fit"},Q={class:"absolute flex flex-col gap-1 -bottom-1 left-1/3 translate-x-6 translate-y-full"},J={key:0,class:"text-red-700 text-sm origin-top"};function X(e,s,t,o,r,i){return(0,a.wg)(),(0,a.iD)("div",H,[(0,a._)("form",B,[(0,a._)("span",null,(0,l.zw)(e.$t("EditUserChangePassword.currentPassword")),1),(0,a._)("div",Y,[(0,a.wy)((0,a._)("input",{type:o.showCurrentPassword?"text":"password",autocomplete:"off",class:(0,l.C_)(["input",{input_error:o.form.errors.currentPassword&&t.trySubmit}]),"onUpdate:modelValue":s[0]||(s[0]=e=>o.form.currentPassword=e)},null,10,V),[[_.YZ,o.form.currentPassword]]),(0,a.wy)((0,a._)("input",{type:"checkbox",class:"checkbox visibility","onUpdate:modelValue":s[1]||(s[1]=e=>o.showCurrentPassword=e),id:"visibility"},null,512),[[_.e8,o.showCurrentPassword]]),(0,a._)("label",A,[(0,a.Wm)(_.uT,{name:"modal",mode:"out-in"},{default:(0,a.w5)((()=>[o.showCurrentPassword?((0,a.wg)(),(0,a.iD)("span",L," visibility ")):((0,a.wg)(),(0,a.iD)("span",O," visibility_off "))])),_:1})])]),(0,a._)("span",null,(0,l.zw)(e.$t("EditUserChangePassword.newPassword")),1),(0,a.wy)((0,a._)("input",{type:o.showNewPasswords?"text":"password",autocomplete:"off",class:(0,l.C_)(["input",{input_error:o.form.errors.newPassword&&t.trySubmit}]),"onUpdate:modelValue":s[2]||(s[2]=e=>o.form.newPassword=e)},null,10,I),[[_.YZ,o.form.newPassword]]),(0,a._)("span",null,(0,l.zw)(e.$t("EditUserChangePassword.confirmNewPassword")),1),(0,a.wy)((0,a._)("input",{type:o.showNewPasswords?"text":"password",autocomplete:"off",class:(0,l.C_)(["input",{input_error:o.form.errors.confirmNewPassword}]),"onUpdate:modelValue":s[3]||(s[3]=e=>o.form.confirmNewPassword=e)},null,10,R),[[_.YZ,o.form.confirmNewPassword]]),G,(0,a.wy)((0,a._)("input",{type:"checkbox",id:"showNewPasswords",class:"checkbox","onUpdate:modelValue":s[4]||(s[4]=e=>o.showNewPasswords=e)},null,512),[[_.e8,o.showNewPasswords]]),(0,a._)("label",K,(0,l.zw)(e.$t("EditUserChangePassword.showPassword")),1)]),(0,a._)("div",Q,[(0,a.Wm)(_.uT,{name:"fade"},{default:(0,a.w5)((()=>[o.errors.value?((0,a.wg)(),(0,a.iD)("small",J,(0,l.zw)(o.errors.text||e.$t("global.somethingWrong")),1)):(0,a.kq)("",!0)])),_:1})])])}var ee=t(6413),se=t(2524),te=t(2489),ae={props:{trySubmit:Boolean},setup(){const[e,s]=(0,ee.OT)(!1),[t,l]=(0,ee.OT)(!1),{addNotification:o}=(0,se.l)(),{t:r}=(0,te.j)(),i=(0,j.qj)({currentPassword:"",newPassword:"",confirmNewPassword:"",errors:{confirmNewPassword:(0,a.Fl)((()=>i.newPassword!==i.confirmNewPassword)),currentPassword:(0,a.Fl)((()=>!i.currentPassword)),newPassword:(0,a.Fl)((()=>!i.newPassword))},dontNeedSave:(0,a.Fl)((()=>!i.currentPassword&&!i.newPassword&&!i.confirmNewPassword))}),n=()=>{i.currentPassword="",i.newPassword="",i.confirmNewPassword=""};(0,a.se)((()=>n()));const d=(0,j.qj)({value:!1,text:""}),c=async()=>{let e=!0;if(i.dontNeedSave)return!0;if(Object.keys(i.errors).forEach((s=>e=e&&!i.errors[s])),e&&!i.dontNeedSave){const{success:s,message:t}=await E.Z.dispatch("updateUser",{password:i.currentPassword,password_new:i.newPassword,password_new_confirm:i.confirmNewPassword});e=e&&s,d.text=t,d.value=!s,s&&(o(1,r("EditUserChangePassword.changePassword"),t),n())}else e=!1;return i.dontNeedSave&&(e=!0),e};return{showCurrentPassword:e,toggleCurrentPassword:s,showNewPasswords:t,toggleNewPasswords:l,form:i,submit:c,errors:d}}};const le=(0,F.Z)(ae,[["render",X],["__scopeId","data-v-5bd76a03"]]);var oe=le;const re=e=>((0,a.dD)("data-v-88ae9306"),e=e(),(0,a.Cn)(),e),ie={class:"wrapper"},ne={class:"container p-8 rounded-xl mt-7 min-w-[50%]"},de={class:"header flex flex-row justify-between"},ce={class:"text-lg text-slate-800 font-semibold"},ue=re((()=>(0,a._)("div",{class:"icon"},null,-1))),pe=[ue],me={class:"main flex flex-col gap-8"},fe={class:"grid gap-6 items-center"},we=["onUpdate:modelValue","disabled"],he={class:"absolute flex flex-col gap-1 -bottom-1 left-1 translate-y-full"},ge={key:0,class:"text-red-700 text-sm origin-top"},ve={key:0,class:"relative"},be={class:"flex gap-2 items-center"},ye=["onUpdate:modelValue","placeholder","disabled"],xe=["disabled","onClick"],ke={class:"absolute flex flex-col gap-1 -bottom-1 left-1 translate-y-full"},_e={key:0,class:"text-red-700 text-sm origin-top"},Pe={key:1,class:"flex gap-2 items-center relative"},Ce=["disabled","onClick"],Ue={class:"absolute flex flex-col gap-1 -bottom-1 left-1 translate-y-full"},Te={key:0,class:"text-red-700 text-sm origin-top"},qe={class:"footer flex flex-row justify-end gap-4"};function De(e,s,t,o,r,i){const n=(0,a.up)("SelectorVue"),d=(0,a.up)("AppCountDown"),c=(0,a.up)("MaskEmail"),u=(0,a.Q2)("mask");return(0,a.wg)(),(0,a.iD)("div",ie,[(0,a._)("div",{class:"backdrop_with_filter",onClick:s[0]||(s[0]=e=>o.close())}),(0,a._)("div",ne,[(0,a._)("div",de,[(0,a._)("h5",ce,(0,l.zw)(e.$t("ProfileChangeModal.header",{type:o.types.selected.forTitle})),1),(0,a._)("button",{class:"close",onClick:s[1]||(s[1]=e=>o.close())},pe)]),(0,a._)("div",me,[(0,a._)("form",fe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.params.order,((s,r)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:s},[o.params[s].isCode&&(0===r&&!t.skipFirstStep||o.params[o.params.order[r-1]]?.success)?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("span",null,(0,l.zw)(e.$t("ProfileChangeModal.codeText",{source:"phone"===o.types.selected.value?o.t("ProfileChangeModal.WhatsApp"):"",login:r>0?o.params[o.params.order[r-1]]?.value:t.login})),1),(0,a._)("div",{class:(0,l.C_)(["pinBox relative justify-self-center",{pinBoxDisabled:o.params[s].success}])},[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e=>o.params[s].value=e,class:"pinEntry",name:"token",type:"number",min:"0",autocomplete:"off",disabled:o.params[s].success},null,8,we),[[_.nr,o.params[s].value]]),(0,a._)("div",he,[(0,a.Wm)(_.uT,{name:"fade"},{default:(0,a.w5)((()=>[o.params[s].errors.value?((0,a.wg)(),(0,a.iD)("small",ge,(0,l.zw)(o.params[s].errors.text||o.t("global.somethingWrong")),1)):(0,a.kq)("",!0)])),_:2},1024)])],2)],64)):(0,a.kq)("",!0),o.params[s].isCode||0!==r&&!o.params[o.params.order[r-1]]?.success?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("span",null,(0,l.zw)(e.$t("ProfileChangeModal.inputText",{source:o.types.selected.textForField})),1),"phone"===o.types.selected.value?((0,a.wg)(),(0,a.iD)("div",ve,[(0,a.Wm)(n,{options_props:o.codes.list,selected_option:o.codes.selected,onSelect:o.selectPhone,disabled:o.params[s].success},null,8,["options_props","selected_option","onSelect","disabled"]),(0,a._)("div",be,[(0,a.wy)((0,a._)("input",{class:(0,l.C_)(["input",{input_error:o.params[s].errors.value}]),type:"tel",name:"phone-number","onUpdate:modelValue":e=>o.params[s].value=e,masked:"false",autocomplete:"off",placeholder:o.imask?.mask,disabled:o.params[s].success},null,10,ye),[[_.nr,o.params[s].value],[u,o.imask?.mask]]),o.params[s].errors.showReqBtn?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"text-sm font-semibold leading-6 text-gray-900 disabled:text-gray-500 disabled:cursor-default disabled:font-medium",disabled:o.isLocked||o.params[s].success,onClick:e=>o.params[s].req()},[(0,a.Uk)((0,l.zw)(e.$t("global.send"))+" ",1),o.isLocked?((0,a.wg)(),(0,a.j4)(d,{key:0,initialTime:o.globalDelay},null,8,["initialTime"])):(0,a.kq)("",!0)],8,xe)):(0,a.kq)("",!0)]),(0,a._)("div",ke,[(0,a.Wm)(_.uT,{name:"fade"},{default:(0,a.w5)((()=>[o.params[s].errors.value?((0,a.wg)(),(0,a.iD)("small",_e,(0,l.zw)(o.params[s].errors.text||o.t("global.somethingWrong")),1)):(0,a.kq)("",!0)])),_:2},1024)])])):"email"===o.types.selected.value?((0,a.wg)(),(0,a.iD)("div",Pe,[(0,a.Wm)(c,{class:(0,l.C_)([{"mask-email--error":o.params[s].errors.value},"mask-email input"]),value:o.params[s].value,"onUpdate:value":e=>o.params[s].value=e,placeholder:"Example@email.com",disabled:o.params[s].success},null,8,["class","value","onUpdate:value","disabled"]),o.params[s].errors.showReqBtn?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"text-sm font-semibold leading-6 text-gray-900 disabled:text-gray-500 disabled:cursor-default disabled:font-medium",disabled:o.isLocked||o.params[s].success,onClick:e=>o.params[s].req()},[(0,a.Uk)((0,l.zw)(e.$t("global.send"))+" ",1),o.isLocked?((0,a.wg)(),(0,a.j4)(d,{key:0,initialTime:o.globalDelay},null,8,["initialTime"])):(0,a.kq)("",!0)],8,Ce)):(0,a.kq)("",!0),(0,a._)("div",Ue,[(0,a.Wm)(_.uT,{name:"fade"},{default:(0,a.w5)((()=>[o.params[s].errors.value?((0,a.wg)(),(0,a.iD)("small",Te,(0,l.zw)(o.params[s].errors.text||o.t("global.somethingWrong")),1)):(0,a.kq)("",!0)])),_:2},1024)])])):(0,a.kq)("",!0)],64))],64)))),128))])]),(0,a._)("div",qe,[(0,a._)("button",{class:"btn order-0 max-h-[34px] pointer-events-auto relative inline-flex items-center gap-2 whitespace-nowrap w-fit rounded-md bg-white text-[0.8125rem] font-medium leading-5 text-slate-700 shadow-sm ring-1 ring-slate-700/10 hover:bg-slate-50 hover:text-slate-900 hover:disabled:bg-white disabled:opacity-30 disabled:cursor-not-allowed",onClick:s[2]||(s[2]=e=>o.close())},(0,l.zw)(e.$t("global.back")),1)])])])}var Me=t(7720);const Ne={class:"block"};function Se(e,s,t,o,r,i){return(0,a.wg)(),(0,a.iD)("span",Ne,(0,l.zw)(o.countdownNormalized)+" c.",1)}var je={props:{initialTime:Number},setup(e){const s=(0,j.iH)(e.initialTime),t=(0,j.iH)(null);(0,a.bv)((()=>t.value=setInterval((()=>{s.value>0?s.value-=100:clearInterval(t)}),100)));const l=(0,a.Fl)((()=>{const e=Math.floor(s.value/1e3),t=Math.floor(s.value%1e3/100);return e+"."+t}));return{countdownNormalized:l}}};const Ee=(0,F.Z)(je,[["render",Se]]);var ze=Ee,Fe=t(9737),We=t(5970),Ze=t(7614),$e={components:{SelectorVue:Me.Z,AppCountDown:ze},props:{type:{type:String,required:!0},login:String,skipFirstStep:{type:Boolean,required:!1}},setup(e,s){const{addNotification:t}=(0,se.l)(),{validateEmail:l}=(0,We._)(),o=3e4,{isLocked:r,lockBtn:i,handleUnLock:n}=(0,Ze.M)("timer",o),{t:d}=(0,te.j)(),c=(0,j.qj)({selected:{},list:[{id:1,forTitle:d("ProfileChangeModal.email.forTitle"),textForField:d("ProfileChangeModal.email.textForField"),value:"email",countAuthentication:2},{id:2,forTitle:d("ProfileChangeModal.phone.forTitle"),textForField:d("ProfileChangeModal.phone.textForField"),value:"phone",countAuthentication:2}],select:function(e){const s=this.list.find((s=>s.value===e));s&&(this.selected=s)}});c.select(e.type);const u=(0,j.qj)({code1:{value:null,isCode:!0,success:e.skipFirstStep||!1,errors:{value:!1,text:""},countTry:0,req:async function(){const{success:s,message:t}=await E.Z.dispatch("profileCheckChange",{mode:c.selected.value,code:this.value,login:e.login,isNew:!1,isConfirm:!0});this.errors.text=t||"",this.errors.value=!s,s&&(this.success=!0,1===c.selected.countAuthentication&&g())},setWatcher:function(){(0,a.YP)((()=>this.value),(()=>{this.value>999999&&(this.value=Math.floor(this.value/10))})),(0,ee.H)((()=>this.value),(()=>{6===this.value?.toString()?.length&&(this.countTry>9&&(t(3,d("ProfileChangeModal.header",{type:c.selected.forTitle}),d("ProfileChangeModal.notificationTextFail")),g()),this.req(),this.countTry+=1)}),{throttle:3e3})}},field:{value:"",success:!1,errors:{showReqBtn:(0,a.Fl)((()=>"phone"===c.selected.value?w(u.field.value).length===w(f.selected.phone).length:"email"===c.selected.value&&l(u.field.value))),value:!1,text:""},req:async function(){i();const{success:e,message:s}=await E.Z.dispatch("profileCheckChange",{mode:c.selected.value,login:"phone"===c.selected.value?w(this.value):this.value,isNew:!0,isConfirm:!1});this.errors.text=s||"",this.errors.value=!e,e?this.success=!0:n()}},code2:{value:null,isCode:!0,success:!1,errors:{value:!1,text:""},countTry:0,req:async function(){const{success:e,message:s}=await E.Z.dispatch("profileCheckChange",{mode:c.selected.value,code:this.value,login:"phone"===c.selected.value?w(u.field.value):u.field.value,isNew:!0,isConfirm:!0});this.errors.text=s||"",this.errors.value=!e,e&&(this.success=!0,2===c.selected.countAuthentication&&(t(1,d("ProfileChangeModal.header",{type:c.selected.forTitle}),d("ProfileChangeModal.notificationTextSuccess")),v()))},setWatcher:function(){(0,a.YP)((()=>this.value),(()=>{this.value>999999&&(this.value=Math.floor(this.value/10))})),(0,ee.H)((()=>this.value),(()=>{6===this.value?.toString()?.length&&(this.countTry>9&&(t(3,d("ProfileChangeModal.header",{type:c.selected.forTitle}),d("ProfileChangeModal.notificationTextFail")),g()),this.req(),this.countTry+=1)}),{throttle:3e3})}},order:["code1","field","code2"]});(0,a.bv)((()=>{e.skipFirstStep||E.Z.dispatch("profileCheckChange",{mode:c.selected.value,login:"phone"===c.selected.value?w(e.login):e.login,isNew:!1,isConfirm:!1})}));const p=()=>{Object.keys(u).forEach((e=>{const s=u[e];u[e].isCode&&s?.setWatcher()}))};p();const m=(0,j.qj)({mask:Number}),{codes:f,deleteOther:w}=(0,Fe.a)(),h=e=>{f.selected={...e,value:1},u.field.value="",m.mask=e.phone};h(f.list[0]);const g=()=>s.emit("close"),v=()=>{s.emit("submit"),g()};return{types:c,close:g,submit:v,params:u,imask:m,codes:f,selectPhone:h,isLocked:r,globalDelay:o,t:d}}};const He=(0,F.Z)($e,[["render",De],["__scopeId","data-v-88ae9306"]]);var Be=He,Ye={components:{AppHeader:x.Z,AppRadioBtnsGroup:k.Z,EditUserProfile:Z,EditUserChangePassword:oe,ProfileChangeModal:Be},setup(){const{isLocked:e,lockBtn:s}=(0,Ze.M)(),{t:t}=(0,te.j)(),l=(0,j.qj)({selected:{},list:[{name:t("Profile.profile"),value:"profile",component:"EditUserProfile",ref:null,haveErrors:!1,default:!0},{name:t("Profile.changePassword"),value:"changePassword",component:"EditUserChangePassword",ref:null,haveErrors:!1}],select:function(e){this.selected=e},dropToDefault:function(){const e=this.list.find((e=>e.default));this.select(e)},saveRef:function(e,s){if(!e)return;const t=this.list.find((e=>e.value===s));t.ref||(t.ref=e,this.selected.ref=e)}});l.dropToDefault();const o=(0,j.qj)({data:{},setData:async function(){const e=await E.Z.dispatch("getUser",{id:E.Z.state.account.user?.id});this.data=e}});o.setData();const[r,i]=(0,ee.OT)(!1),n=(0,j.qj)({selected:"",value:"",skipFirstStep:!1,setType:function(e,s){this.selected=e,this.value=s,s||(this.skipFirstStep=!0),i(!0)}});(0,a.YP)(r,(e=>{e||(n.selected="",n.value="",n.skipFirstStep=!1)}));const[d,c]=(0,ee.OT)(!1),u=async()=>{s();let e=!0;const t=[];l.list.forEach((s=>{t.push(new Promise((t=>{(async()=>{s.ref?(s.haveErrors=!await(s.ref?.submit()),e=e&&!s.haveErrors,t()):t()})()})))})),await Promise.all(t),e?o.setData():c(!0)};return{pagination:l,user:o,trySubmit:d,toggleTrySubmit:c,showProfileChangeModal:r,toggleProfileChangeModal:i,close:close,submit:u,type:n,isLocked:e}}};const Ve=(0,F.Z)(Ye,[["render",y],["__scopeId","data-v-bbc10b16"]]);var Ae=Ve}}]);
//# sourceMappingURL=958.f04aba72.js.map