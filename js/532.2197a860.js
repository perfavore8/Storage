"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[532],{9935:function(e,t,i){i.d(t,{Z:function(){return h}});var o=i(6252),n=i(3577),s=i(9963);const l={class:"v-select"},a={class:"options",key:"a1"},r=["onClick"];function c(e,t,i,c,d,u){return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",{class:(0,n.C_)(["title",{title_checked:c.show_options,disabled:i.disabled}]),onClick:t[0]||(t[0]=e=>c.open_close_options()),onFocusout:t[1]||(t[1]=(...e)=>c.handleFocusOut&&c.handleFocusOut(...e)),tabindex:"0"},[(0,o._)("p",null,(0,n.zw)(i.selected_option.name),1),i.disabled?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,n.C_)(["arrow",{rotate_arrow:c.show_options}])},null,2))],34),(0,o.Wm)(s.uT,{name:"list"},{default:(0,o.w5)((()=>[c.show_options?((0,o.wg)(),(0,o.iD)("div",a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.options,(e=>((0,o.wg)(),(0,o.iD)("p",{key:e.value,onClick:t=>c.select_option(e)},(0,n.zw)(e.name),9,r)))),128))])):(0,o.kq)("",!0)])),_:1})])}var d=i(2262),u={props:{options_props:{type:Array,default(){return[]},required:!0},selected_option:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},idx:{type:Number,required:!1}},emits:{select:null},setup(e,{emit:t}){const i=(0,d.iH)([]);(0,o.bv)((()=>{i.value=[],e.options_props.forEach((e=>i.value.push(e)))}));const n=(0,d.iH)(!1),s=()=>{n.value=!1},l=()=>{e.disabled||(n.value=!n.value)},a=()=>{s()},r=i=>{t("select",i,e.idx),s()};return{open_close_options:l,handleFocusOut:a,show_options:n,options:i,select_option:r}}},p=i(3744);const _=(0,p.Z)(u,[["render",c],["__scopeId","data-v-6e6fe5a6"]]);var h=_},6532:function(e,t,i){i.r(t),i.d(t,{default:function(){return qa}});var o=i(6252),n=i(3577),s=i(9963);const l=e=>((0,o.dD)("data-v-01580879"),e=e(),(0,o.Cn)(),e),a={class:"table_setings"},r={key:0,class:"edit_staff"},c={key:1,class:"new_position"},d={key:2,class:"cancel_position"},u={class:"header_left"},p={class:"btns"},_=["onClick"],h=(0,o.uE)('<div class="radio_btns" data-v-01580879><div class="radio_btn" data-v-01580879><input type="radio" name="store1" id="store1" data-v-01580879><label for="store1" data-v-01580879>Все остатки </label></div><div class="radio_btn" data-v-01580879><input type="radio" name="store1" id="store2" checked data-v-01580879><label for="store2" data-v-01580879>Склад 1</label></div><div class="radio_btn" data-v-01580879><input type="radio" name="store1" id="store3" data-v-01580879><label for="store3" data-v-01580879>Склад 2</label></div><div class="radio_btn" data-v-01580879><input type="radio" name="store1" id="store4" data-v-01580879><label for="store4" data-v-01580879>Услуги</label></div></div>',1),m={class:"header_right"},f=l((()=>(0,o._)("div",{class:"ref"},[(0,o._)("div",{class:"ref_1_logo"}),(0,o._)("a",{class:"links"},"Выгрузка в эксель")],-1))),v={class:"ref"},g=l((()=>(0,o._)("div",{class:"ref_2_logo"},null,-1))),b={class:"modal_settings modal_sync"},w=l((()=>(0,o._)("a",null,[(0,o._)("div",{class:"modal_container"},"AmoCrm -> Склад")],-1))),y=l((()=>(0,o._)("a",null,[(0,o._)("div",{class:"modal_container"},"Склад -> AmoCrm")],-1))),x=[w,y],D={class:"modal_settings"},C=l((()=>(0,o._)("a",null,[(0,o._)("div",{class:"modal_container"}," Синхронизация склада с товарами amoCrm ")],-1))),k=l((()=>(0,o._)("a",null,[(0,o._)("div",{class:"modal_container"},"Документы")],-1))),S={class:"filters_left"},E={class:"date"},O=l((()=>(0,o._)("input",{type:"date",id:"start",name:"trip-start",value:"2018-07-22",min:"2018-01-01",max:"2032-12-31","aria-required":"true","aria-invalid":"false"},null,-1))),V={class:"buttons"},I={class:"filters_right"},T={class:"filter_group"},q=l((()=>(0,o._)("label",{for:"filter"},"Фильтр",-1))),A=["disabled"],M={class:"grid"};function N(e,t,i,l,w,y){const N=(0,o.up)("table-setings"),j=(0,o.up)("edit-stuff"),U=(0,o.up)("new-position"),P=(0,o.up)("cancel-position"),Y=(0,o.up)("main-grid");return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["app",{disabled:y.disabled_for_modals}]),onClick:t[9]||(t[9]=t=>{e.show_settings&&y.close_settings(),e.show_sync&&y.close_sync()})},[(0,o.wy)((0,o._)("div",a,[(0,o.Wm)(N,{names:w.paginatedParams,data:w.paginatedData,collval:w.collumn_value,onReturnData1:y.getData},null,8,["names","data","collval","onReturnData1"])],512),[[s.F8,e.show_table_settings]]),e.show_edit_stuff?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(j)])):(0,o.kq)("",!0),e.show_new_position?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(U,{rows:y.rows.arr,idxes:y.rows.idxes},null,8,["rows","idxes"])])):(0,o.kq)("",!0),e.show_cancel_position?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(P,{rows:y.rows_to_cancel.arr,idxes:y.rows_to_cancel.idxes},null,8,["rows","idxes"])])):(0,o.kq)("",!0),(0,o._)("div",{class:(0,n.C_)(["header",{blur:y.disabled_for_modals}])},[(0,o._)("div",u,[(0,o._)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.catalog,(t=>((0,o.wg)(),(0,o.iD)("button",{class:(0,n.C_)(["btns_btn",{selected_catalog:e.$route.name===t.value}]),onClick:e=>y.route(t.value),key:t},(0,n.zw)(t.name),11,_)))),128))]),h]),(0,o._)("div",m,[f,(0,o._)("div",v,[g,(0,o._)("a",{class:"links",onClick:t[0]||(t[0]=(0,s.iM)((e=>y.open_close_sync()),["stop"]))}," Синхронизировать товары "),(0,o.Wm)(s.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",b,x,512),[[s.F8,e.show_sync]])])),_:1})]),(0,o._)("button",{class:"settings_btn",onClick:t[3]||(t[3]=(0,s.iM)((e=>y.open_close_settings()),["stop"]))},[(0,o.Wm)(s.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",D,[(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:t[1]||(t[1]=e=>y.open_table_settings())}," Настройка таблицы ")]),(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:t[2]||(t[2]=e=>y.open_edit_stuff())}," Настройка товаров ")]),C,k],512),[[s.F8,e.show_settings]])])),_:1})])])],2),(0,o._)("div",{class:(0,n.C_)(["wrapper",{blur:e.show_table_settings||e.show_edit_stuff||e.show_new_position}])},[(0,o._)("div",{class:(0,n.C_)(["filters",{blur:e.show_edit_modal}])},[(0,o._)("div",S,[(0,o._)("div",E,[O,(0,o._)("p",null,"Найдено: "+(0,n.zw)(e.data.length),1)]),(0,o.Wm)(s.uT,{name:"btns"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",V,[(0,o._)("button",{class:"button button_1 smallBtn",onClick:t[4]||(t[4]=e=>y.archive_data())}," Архивировать "),(0,o._)("button",{class:"button button_2 smallBtn",onClick:t[5]||(t[5]=e=>y.open_close_new_position(!0))}," Добавить "),(0,o._)("button",{class:"button button_3 smallBtn",onClick:t[6]||(t[6]=e=>y.open_close_cancel_position(!0))}," Списать ")],512),[[s.F8,e.show_buttons]])])),_:1})]),(0,o._)("div",I,[(0,o._)("div",T,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>w.filter_value=e),name:"filter",id:"filter",class:"checkbox"},null,512),[[s.e8,w.filter_value]]),q]),(0,o._)("button",{class:"button button_4 smallBtn",onClick:t[8]||(t[8]=e=>y.open_close_new_position(!0)),disabled:y.rows.arr.length>0}," Новая позиция ",8,A)])],2),(0,o._)("div",M,[(0,o.Wm)(Y,{data:w.paginatedData,params:w.paginatedParams,collval:w.collumn_value,onUpdate_changeValue:y.update_changeValue},null,8,["data","params","collval","onUpdate_changeValue"])])],2)],2)}const j=e=>((0,o.dD)("data-v-4ede0934"),e=e(),(0,o.Cn)(),e),U={class:"wrapper"},P={class:"bar_row"},Y={class:"bar_item_group"},$={class:"bar_item_icon"},F={class:"filters"},W={class:"item",key:"b1"},R={class:"item",key:"2b"},H={class:"item"},X=["id","onUpdate:modelValue"],z=["for"],B={class:"dublitem"},L=["onClick"],Z=["onClick"],K={class:"item"},G=["onClick"],Q={style:{margin:"5px"}},J=j((()=>(0,o._)("option",null,"3",-1))),ee=j((()=>(0,o._)("option",null,"5",-1))),te=j((()=>(0,o._)("option",null,"10",-1))),ie=j((()=>(0,o._)("option",null,"20",-1))),oe=[J,ee,te,ie];function ne(e,t,i,l,a,r){const c=(0,o.up)("edit-item"),d=(0,o.up)("filter-number"),u=(0,o.up)("filter-text"),p=(0,o.up)("filter-list"),_=(0,o.up)("filter-date"),h=(0,o.up)("filter-flag");return(0,o.wg)(),(0,o.iD)("div",U,[e.show_edit_modal?((0,o.wg)(),(0,o.j4)(c,{key:0,edit_data:a.edit_data},null,8,["edit_data"])):(0,o.kq)("",!0),((0,o.wg)(),(0,o.iD)("table",{class:(0,n.C_)(["table",{blur:e.show_edit_modal}]),key:a.updateKey},[(0,o._)("thead",null,[(0,o._)("tr",P,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.params,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("th",{class:"bar_item item",style:(0,n.j5)({minWidth:0===t?"17px":t===i.params.length-1?"20px":0!=r.width[t]?r.width[t]+"px":(r.collsCount>=8?100:r.collsCount>3?90:80)/r.collsCount+"%"}),key:e},[(0,o._)("div",Y,[(0,o._)("div",null,(0,n.zw)(e),1),(0,o.wy)((0,o._)("button",$,null,512),[[s.F8,e]])])],4)),[[s.F8,!1!==i.collval[t-1]]]))),128))]),(0,o._)("tr",F,[(0,o.Wm)(s.W3,{name:"mdl"},{default:(0,o.w5)((()=>[(0,o.Wm)(s.uT,{name:"mdl",key:"1b"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("th",W,null,512),[[s.F8,e.show_filter]])])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.filtersValue,((t,n)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("th",{class:"item",key:n},[1==t.type||2==t.type?((0,o.wg)(),(0,o.j4)(d,{key:0,item:t,idx:n,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),3==t.type||4==t.type?((0,o.wg)(),(0,o.j4)(u,{key:1,item:t,idx:n,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),5==t.type||6==t.type?((0,o.wg)(),(0,o.j4)(p,{key:2,item:t,idx:n,selector_options:t.selector_options,onChange_filter_value:r.change_filter_value},null,8,["item","idx","selector_options","onChange_filter_value"])):(0,o.kq)("",!0),7==t.type||8==t.type?((0,o.wg)(),(0,o.j4)(_,{key:3,item:t,idx:n,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),9==t.type?((0,o.wg)(),(0,o.j4)(h,{key:4,item:t,idx:n,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0)])),[[s.F8,e.show_filter&&!1!==i.collval[n-1]]]))),128)),(0,o.wy)((0,o._)("th",R,null,512),[[s.F8,e.show_filter]])])),_:1})])]),(0,o._)("tbody",null,[(0,o.Wm)(s.W3,{name:"rows"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.paginatedData,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:e},[(0,o._)("td",H,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:t+"a","onUpdate:modelValue":t=>a.changeValue[i.data.indexOf(e)]=t},null,8,X),[[s.e8,a.changeValue[i.data.indexOf(e)]]]),(0,o._)("label",{for:t+"a"},null,8,z)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.entries(e),((e,l)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("td",{class:(0,n.C_)([{open_dublitem:a.duplicate[t+a.idxes[a.page-1][0]]},"item"]),key:e},[(0,o._)("div",B,[(0,o.Uk)((0,n.zw)(e[1])+" ",1),l==i.params.indexOf("Название")-1&&a.showduplicate[t+a.idxes[a.page-1][0]+1]&&!a.duplicate[t+a.idxes[a.page-1][0]]?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:e=>r.showduble(t+a.idxes[a.page-1][0]),class:"buttonDuwn btn"},null,8,L)):(0,o.kq)("",!0),l!=i.params.indexOf("Название")-1||a.showduplicate[t+a.idxes[a.page-1][0]+1]||a.duplicate[t+a.idxes[a.page-1][0]]||!a.duplicate[t+a.idxes[a.page-1][0]+1]?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:1,onClick:e=>r.hideduble(t+a.idxes[a.page-1][0]),class:"buttonUp btn"},null,8,Z))])],2)),[[s.F8,!1!==i.collval[l]]]))),128)),(0,o._)("td",K,[(0,o._)("div",{class:"edit_icon",onClick:i=>r.open_edit_modal(e,t)},null,8,G)])])),[[s.F8,!a.showduplicate[t+a.idxes[a.page-1][0]]]]))),128))])),_:1})])],2)),(0,o._)("div",{class:(0,n.C_)(["bottom",{blur:e.show_edit_modal}])},[a.page>1?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>a.page-=1)},(0,n.zw)("<"))):(0,o.kq)("",!0),(0,o._)("span",Q,(0,n.zw)(a.page),1),a.page*a.count<i.data.length-r.countHideRows?((0,o.wg)(),(0,o.iD)("button",{key:1,onClick:t[1]||(t[1]=e=>a.page+=1)},(0,n.zw)(">"))):(0,o.kq)("",!0),(0,o.wy)((0,o._)("select",{name:"count",id:"count",class:"count","onUpdate:modelValue":t[2]||(t[2]=e=>a.count=e)},oe,512),[[s.bM,a.count]])],2)])}const se=(0,o._)("div",{class:"background_edit_modal"},null,-1),le={class:"app_edit_modal"},ae={class:"header"},re={class:"header_left"},ce={class:"header_right"},de={class:"btns"},ue=(0,o._)("button",{class:"btn2"},"Архивировать",-1),pe=(0,o._)("div",{class:"hr"},null,-1),_e={class:"main"},he={class:"row"},me=(0,o._)("label",null,"Тип:",-1),fe=(0,o._)("div",{class:"hr"},null,-1),ve={class:"footer"},ge={class:"btns"},be=(0,o._)("button",{class:"btn2"},"Архивировать",-1);function we(e,t,i,s,l,a){const r=(0,o.up)("SelectorVue"),c=(0,o.up)("edit-integer"),d=(0,o.up)("edit-float"),u=(0,o.up)("edit-string"),p=(0,o.up)("edit-text"),_=(0,o.up)("edit-selector"),h=(0,o.up)("edit-multi-selector"),m=(0,o.up)("edit-date"),f=(0,o.up)("edit-date-time"),v=(0,o.up)("edit-flag");return(0,o.wg)(),(0,o.iD)(o.HY,null,[se,(0,o._)("div",le,[(0,o._)("div",ae,[(0,o._)("div",re," Редактирование "+(0,n.zw)(i.edit_data[e.params.indexOf("Название")-1]),1),(0,o._)("div",ce,[(0,o._)("div",de,[(0,o._)("button",{class:"btn1",onClick:t[0]||(t[0]=e=>a.close_edit_modal())},"Отмена"),ue,(0,o._)("button",{class:"btn3",onClick:t[1]||(t[1]=e=>a.save_data())},"Сохранить")])])]),pe,(0,o._)("div",_e,[(0,o._)("div",he,[me,(0,o.Wm)(r,{options_props:l.options_1,onSelect:a.option_select_1,selected_option:l.selected_option_1},null,8,["options_props","onSelect","selected_option"])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.fields,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:t.id},[1==t.type.value?((0,o.wg)(),(0,o.j4)(c,{key:0,item:t.field,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),2==t.type.value?((0,o.wg)(),(0,o.j4)(d,{key:1,item:t.field,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),3==t.type.value?((0,o.wg)(),(0,o.j4)(u,{key:2,item:t.field,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),4==t.type.value?((0,o.wg)(),(0,o.j4)(p,{key:3,item:t.field,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),5==t.type.value?((0,o.wg)(),(0,o.j4)(_,{key:4,item:t,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),6==t.type.value?((0,o.wg)(),(0,o.j4)(h,{key:5,item:t,selected_options:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_options","idx","onChange_value"])):(0,o.kq)("",!0),7==t.type.value?((0,o.wg)(),(0,o.j4)(m,{key:6,item:t.field,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),8==t.type.value?((0,o.wg)(),(0,o.j4)(f,{key:7,item:t.field,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),9==t.type.value?((0,o.wg)(),(0,o.j4)(v,{key:8,item:t.field,selected_option:l.new_edit_data[e.params.indexOf(t.field)-1],idx:e.params.indexOf(t.field)-1,onChange_value:a.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0)])))),128))]),fe,(0,o._)("div",ve,[(0,o._)("div",ge,[(0,o._)("button",{class:"btn1",onClick:t[2]||(t[2]=e=>a.close_edit_modal())},"Отмена"),be,(0,o._)("button",{class:"btn3",onClick:t[3]||(t[3]=e=>a.save_data())},"Сохранить")])])])],64)}var ye=i(9935);const xe={class:"row"};function De(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",xe,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"number",step:"1",onchange:"this.value = parseInt(this.value);","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e)},null,512),[[s.nr,a.copy_selected_option]])])}var Ce={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.copy_selected_option=`${this.copy_selected_option}`,this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}},ke=i(3744);const Se=(0,ke.Z)(Ce,[["render",De],["__scopeId","data-v-5ad09574"]]);var Ee=Se;const Oe={class:"row"};function Ve(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",Oe,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e)},null,512),[[s.nr,a.copy_selected_option]])])}var Ie={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.copy_selected_option=`${this.copy_selected_option}`,this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const Te=(0,ke.Z)(Ie,[["render",Ve],["__scopeId","data-v-2af56a93"]]);var qe=Te;const Ae={class:"row"};function Me(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",Ae,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e)},null,512),[[s.nr,a.copy_selected_option]])])}var Ne={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const je=(0,ke.Z)(Ne,[["render",Me],["__scopeId","data-v-565bc7e4"]]);var Ue=je;const Pe={class:"row"};function Ye(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",Pe,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("textarea",{class:"text_area",cols:"30",rows:"10","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e)},null,512),[[s.nr,a.copy_selected_option]])])}var $e={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const Fe=(0,ke.Z)($e,[["render",Ye],["__scopeId","data-v-d4016114"]]);var We=Fe;const Re={class:"row"};function He(e,t,i,s,l,a){const r=(0,o.up)("SelectorVue");return(0,o.wg)(),(0,o.iD)("div",Re,[(0,o._)("label",null,(0,n.zw)(i.item.field)+":",1),(0,o.Wm)(r,{options_props:i.item.selector_options,onSelect:a.option_select,selected_option:l.copy_selected_option},null,8,["options_props","onSelect","selected_option"])])}var Xe={components:{SelectorVue:ye.Z},props:{item:{type:Object,required:!0,default(){return{}}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:{}}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()}},methods:{change_value(){let e={};(0,o.Y3)((()=>{this.item.selector_options.forEach((t=>{t.name==this.selected_option&&(e=t)})),Object.assign(this.copy_selected_option,e)}))},option_select(e){this.$emit("change_value",e.name,this.idx)}}};const ze=(0,ke.Z)(Xe,[["render",He],["__scopeId","data-v-7478762c"]]);var Be=ze;const Le={class:"row"};function Ze(e,t,i,s,l,a){const r=(0,o.up)("multi-selector");return(0,o.wg)(),(0,o.iD)("div",Le,[(0,o._)("label",null,(0,n.zw)(i.item.field)+":",1),(0,o.Wm)(r,{options_props:i.item.selector_options,onSelect:a.option_select,selected_options:l.copy_selected_options},null,8,["options_props","onSelect","selected_options"])])}i(6699);const Ke={class:"multi_selector"},Ge=["onClick"];function Qe(e,t,i,s,l,a){return(0,o.wg)(),(0,o.iD)("div",Ke,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.options_props,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["item",{selected:i.selected_options[t]}]),key:e.value,onClick:e=>a.select(t)},(0,n.zw)(e.name),11,Ge)))),128))])}var Je={name:"MultiSelector",props:{options_props:{type:Array,required:!0,default(){return[]}},selected_options:{type:Array,required:!0,default(){return[!0]}}},data(){return{options_value:[]}},mounted(){this.selected_options.forEach((e=>this.options_value.push(e)))},methods:{select(e){0==e&&(this.options_value=[]),1==this.options_value[0]&&(this.options_value[0]=!1),this.options_value[e]=!this.options_value[e],this.options_value.includes(!0)||(this.options_value[0]=!0),this.$emit("select",this.options_value)}}};const et=(0,ke.Z)(Je,[["render",Qe],["__scopeId","data-v-39baddff"]]);var tt=et,it={components:{MultiSelector:tt},props:{item:{type:Object,required:!0,default(){return{}}},selected_options:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_options:[]}},mounted(){this.change_value()},watch:{selected_options(){this.change_value()}},methods:{change_value(){let e=[];(0,o.Y3)((()=>{const t=this.selected_options.split(", ");this.item.selector_options.forEach((i=>{t.includes(i.name)?e.push(!0):e.push(!1)})),this.copy_selected_options=[],this.copy_selected_options=this.copy_selected_options.concat(e)}))},option_select(e){let t=[];e.forEach(((e,i)=>{e&&t.push(this.item.selector_options[i].name)})),t=t.join(", "),this.$emit("change_value",t,this.idx)}}};const ot=(0,ke.Z)(it,[["render",Ze],["__scopeId","data-v-1de3bc0e"]]);var nt=ot;const st={class:"row"};function lt(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",st,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"date",class:"date_input","aria-required":"true","aria-invalid":"false","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e)},null,512),[[s.nr,a.copy_selected_option]])])}var at={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const rt=(0,ke.Z)(at,[["render",lt],["__scopeId","data-v-3510c506"]]);var ct=rt;const dt={class:"row"};function ut(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",dt,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"datetime-local",class:"date_input","aria-required":"true","aria-invalid":"false","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e)},null,512),[[s.nr,a.copy_selected_option]])])}var pt={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const _t=(0,ke.Z)(pt,[["render",ut],["__scopeId","data-v-d77c5ab6"]]);var ht=_t;const mt={class:"row"},ft=["id"],vt=["for"];function gt(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",mt,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:i.idx+"za","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e)},null,8,ft),[[s.e8,a.copy_selected_option]]),(0,o._)("label",{for:i.idx+"za"},(0,n.zw)(i.item),9,vt)])}var bt={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0}},data(){return{copy_selected_option:Boolean}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){let e="";e=this.copy_selected_option?"Да":"Нет",this.option_select(e)}},methods:{change_value(){(0,o.Y3)((()=>{"Да"==this.selected_option?this.copy_selected_option=!0:this.copy_selected_option=!1}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const wt=(0,ke.Z)(bt,[["render",gt],["__scopeId","data-v-3e3912dc"]]);var yt=wt,xt=i(3907),Dt={components:{SelectorVue:ye.Z,EditInteger:Ee,EditFloat:qe,EditString:Ue,EditText:We,EditSelector:Be,EditMultiSelector:nt,EditDate:ct,EditDateTime:ht,EditFlag:yt},props:{edit_data:{type:Array,required:!0}},computed:{...(0,xt.Se)(["data"]),...(0,xt.Se)(["params"]),...(0,xt.Se)(["fields"]),...(0,xt.Se)(["idx_edit_modal"])},data(){return{options_1:[{name:"Товар",value:1},{name:"Услуга",value:2}],selected_option_1:{name:"Товар",value:1},options_2:[{name:"Не выбрано",value:1},{name:"шт",value:2},{name:"л (литры)",value:3},{name:"м3 (кубические метры)",value:4},{name:"кг (килограммы)",value:5},{name:"т (тонны)",value:6},{name:"комплект",value:7},{name:"услуга",value:8}],selected_option_2:{name:"Не выбрано",value:1},options_3:[{name:"Не выбрано",value:1},{name:"шт",value:2},{name:"л (литры)",value:3},{name:"м3 (кубические метры)",value:4},{name:"кг (килограммы)",value:5},{name:"т (тонны)",value:6},{name:"комплект",value:7},{name:"услуга",value:8}],selected_options_3:[!0],new_edit_data:[]}},mounted(){this.new_edit_data=[],this.new_edit_data=this.new_edit_data.concat(this.edit_data),""!=this.new_edit_data.a1&&this.options_2.forEach((e=>{e.name==this.new_edit_data.a1&&Object.assign(this.selected_option_2,e)}))},methods:{change_value(e,t){this.new_edit_data[t]=e},option_select_1(e){Object.assign(this.selected_option_1,e)},option_select_2(e){Object.assign(this.selected_option_2,e)},option_select_multi(e){this.selected_options_3=e},close_edit_modal(){this.$store.commit("close_edit_modal")},save_data(){const e={idx:this.idx_edit_modal,data:this.new_edit_data};this.$store.commit("update_data_idx",e),this.close_edit_modal()},search_selector_options(e){let t=[];return this.fields.forEach((i=>{i.field==e&&(t=i.selector_options)})),t}}};const Ct=(0,ke.Z)(Dt,[["render",we]]);var kt=Ct;const St={class:"filter"};function Et(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",St,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>5==a.option?a.option=1:a.option+=1)},[(0,o._)("div",{class:(0,n.C_)(["icon",{equal:1==a.option,more:2==a.option,more_or_equal:3==a.option,less:4==a.option,less_or_equal:5==a.option}])},null,2)]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.filterValue=e),type:"number"},null,512),[[s.nr,a.filterValue]])])}var Ot={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:1,filterValue:null}},computed:{type_value(){return{option:this.option,value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.option=this.item.option,this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}};const Vt=(0,ke.Z)(Ot,[["render",Et],["__scopeId","data-v-e13322ce"]]);var It=Vt;const Tt={class:"filter"};function qt(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",Tt,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>2==a.option?a.option=1:a.option+=1)},[(0,o._)("div",{class:(0,n.C_)(["icon",{equal:1==a.option,tilde:2==a.option}])},null,2)]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.filterValue=e),type:"text"},null,512),[[s.nr,a.filterValue]])])}var At={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:1,filterValue:null}},computed:{option_value(){return{option:this.option,value:this.filterValue}}},watch:{type_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.option=this.item.option,this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}};const Mt=(0,ke.Z)(At,[["render",qt],["__scopeId","data-v-356c0657"]]);var Nt=Mt;const jt={class:"filter"};function Ut(e,t,i,s,l,a){const r=(0,o.up)("multi-selector");return(0,o.wg)(),(0,o.iD)("div",jt,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>a.open_selector())},[(0,o._)("div",{class:(0,n.C_)(["arrow",{rotate_arrow:l.show_selector}])},null,2)]),l.show_selector?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"selector",id:"selector123",options_props:i.selector_options,onSelect:a.option_select_multi,selected_options:l.filterValue,onFocusout:a.handleFocusOut,tabindex:"1"},null,8,["options_props","onSelect","selected_options","onFocusout"])):(0,o.kq)("",!0)])}var Pt={components:{MultiSelector:tt},props:{item:{type:Object,required:!0},idx:{type:Number,required:!0},selector_options:{type:Array,required:!0}},data(){return{filterValue:[],show_selector:!1}},computed:{option_value(){return{value:this.filterValue}}},watch:{type_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.filterValue=[],this.item.value.forEach(((e,t)=>{this.filterValue[t]=e}))}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)},option_select_multi(e){this.filterValue=e},open_selector(){this.show_selector=!0,(0,o.Y3)((()=>{this.show_selector&&document.getElementById("selector123").focus()}))},handleFocusOut(){setTimeout((()=>{(0,o.Y3)((()=>{this.show_selector=!1}))}),150)}}};const Yt=(0,ke.Z)(Pt,[["render",Ut],["__scopeId","data-v-645e8fe4"]]);var $t=Yt;const Ft={key:0,class:"filter"},Wt={key:1,class:"filter"};function Rt(e,t,i,n,l,a){return(0,o.wg)(),(0,o.iD)(o.HY,null,[7==i.item.type?((0,o.wg)(),(0,o.iD)("div",Ft,[(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>l.date_start=e)},null,512),[[s.nr,l.date_start]]),(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>l.date_end=e)},null,512),[[s.nr,l.date_end]])])):(0,o.kq)("",!0),8==i.item.type?((0,o.wg)(),(0,o.iD)("div",Wt,[(0,o.wy)((0,o._)("input",{type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=e=>l.date_start=e)},null,512),[[s.nr,l.date_start]]),(0,o.wy)((0,o._)("input",{type:"datetime-local","onUpdate:modelValue":t[3]||(t[3]=e=>l.date_end=e)},null,512),[[s.nr,l.date_end]])])):(0,o.kq)("",!0)],64)}var Ht={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{date_start:"",date_end:""}},computed:{date(){return{value:this.date_start+"~"+this.date_end}}},watch:{type_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},emits:{change_filter_value:null},methods:{change_value(){(0,o.Y3)((()=>{if(null!=this.item.value){const e=this.item.value.split("~");this.date_start=e[0],this.date_end=e[1]}}))},emit_value(){this.$emit("change_filter_value",this.date,this.idx)}}};const Xt=(0,ke.Z)(Ht,[["render",Rt],["__scopeId","data-v-f1f06996"]]);var zt=Xt;const Bt={class:"filter"};function Lt(e,t,i,n,s,l){const a=(0,o.up)("selector-vue");return(0,o.wg)(),(0,o.iD)("div",Bt,[(0,o.Wm)(a,{options_props:s.options,onSelect:l.option_select,selected_option:s.options[s.filterValue-1]},null,8,["options_props","onSelect","selected_option"])])}var Zt={components:{SelectorVue:ye.Z},props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{options:[{name:"Все",value:1},{name:"Да",value:2},{name:"Нет",value:3}],filterValue:1}},watch:{type_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.filterValue,this.idx)},option_select(e){this.filterValue=e.value}}};const Kt=(0,ke.Z)(Zt,[["render",Lt],["__scopeId","data-v-743d51c8"]]);var Gt=Kt,Qt={name:"Main_grid",components:{EditItem:kt,FilterNumber:It,FilterText:Nt,FilterList:$t,FilterDate:zt,FilterFlag:Gt},props:{params:{type:Array,required:!0},data:{type:Array,required:!0},collval:{type:Array,required:!0}},data(){return{coll:[],count:20,page:1,filtersValue:[],updateKey:0,changeValue:[],duplicate:[],showduplicate:[],startIdx:0,idxes:[[0,6]],edit_data:[]}},watch:{count(){this.startIdx=0,this.feelIdxes(),this.page=1},paginatedData:{handler:function(){this.updateKey+=1,this.changeValue=[]},deep:!0},changeValue:{handler:function(){this.$emit("update_changeValue",this.changeValue)},deep:!0},data:{handler:function(){this.filtersValue=[],this.calcDuplicate(),this.feelFilters()},deep:!0},show_buttons:function(){this.$store.commit("open_close_buttons",this.show_buttons)},show_edit_modal:function(){this.$emit("show_edit_mod",this.show_edit_modal)},countHideRows:function(){this.feelIdxes()}},computed:{show_buttons(){let e=!1;return this.changeValue.forEach((t=>{void 0!=t&&(e=t||e)})),e},paginatedData(){const e=this.data.slice(this.idxes[this.page-1][0],this.idxes[this.page-1][1]);return e},collsCount(){let e=0;return this.collval.forEach((t=>t?e+=1:null)),e},countPage(){return this.count*(this.page-1)},countHideRows(){let e=0;return this.duplicate.forEach((t=>t?e+=1:null)),e},endidx(){return this.endId(this.startIdx)},width(){let e=[];return this.params.forEach((t=>{let i=0;this.fields.forEach((e=>{t===e.field&&(9==e.type.value&&(i=70),7!=e.type.value&&8!=e.type.value||(i=130))})),e.push(i)})),e},...(0,xt.Se)(["show_edit_modal"]),...(0,xt.Se)(["show_filter"]),...(0,xt.Se)(["fields"])},mounted(){this.calcDuplicate(),this.feelIdxes(),this.feelFilters()},methods:{calcDuplicate(){let e="",t="";this.duplicate=[],this.showduplicate=[];const i=this.params.indexOf("Название")-1,o=this.params.indexOf("Артикул")-1;this.data.forEach((n=>{n[i]==e&&n[o]==t?this.duplicate.push(!0):this.duplicate.push(!1),e=n[i],t=n[o]})),this.duplicate.forEach((e=>this.showduplicate.push(e)))},showduble(e){while(this.duplicate[e+1])this.showduplicate[e+1]=!1,e+=1},hideduble(e){while(this.duplicate[e+1])this.showduplicate[e+1]=!0,e+=1},endId(e){let t=0;while(t!=this.count)this.duplicate[e]||(t+=1),e+=1;while(this.duplicate[e])e+=1;return e},feelIdxes(){this.idxes=[];while(this.startIdx<this.data.length)this.idxes.push([this.startIdx,this.endId(this.startIdx)]),this.startIdx=this.endId(this.startIdx);this.startIdx=0},open_edit_modal(e,t){this.edit_data=[],this.edit_data=this.edit_data.concat(e),this.$store.commit("open_edit_modal",t)},change_filter_value(e,t){Object.assign(this.filtersValue[t],e)},feelFilters(){this.params.forEach(((e,t)=>{if(0!=t&&t!=this.params.length-1){let t=null,i=[];this.fields.forEach((o=>o.field==e?(t=o.type.value,i=o.selector_options):null));let o=null;5!=t&&6!=t||(o=[!0]),9==t&&(o=1);const n={type:t,option:1,selector_options:i,value:o};this.filtersValue.push(n)}}))}}};const Jt=(0,ke.Z)(Qt,[["render",ne],["__scopeId","data-v-4ede0934"]]);var ei=Jt;const ti=e=>((0,o.dD)("data-v-71e45dab"),e=e(),(0,o.Cn)(),e),ii={class:"modal"},oi={class:"wrapper"},ni=ti((()=>(0,o._)("div",{class:"modal-header"},[(0,o._)("div",{class:"head-text"},"Настройка таблицы")],-1))),si={class:"modal-body"},li=ti((()=>(0,o._)("div",{class:"text"},[(0,o._)("small",{class:"small-text"},"Перетаскивайте колонки для изменения очередности")],-1))),ai=["onUpdate:modelValue","id","disabled"],ri=["for"],ci={class:"modal-footer"};function di(e,t,i,l,a,r){const c=(0,o.up)("draggable");return(0,o.wg)(),(0,o.iD)("div",ii,[(0,o._)("div",oi,[ni,(0,o._)("div",si,[li,(0,o.Wm)(c,{class:"dragArea",list:e.list,onChange:e.changeData},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.list,((t,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"item",key:t},[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.checkbox_value[i]=t,id:i,class:"checkbox",disabled:"Название"==t},null,8,ai),[[s.e8,e.checkbox_value[i]]]),(0,o._)("label",{for:i},null,8,ri),(0,o.Uk)(" "+(0,n.zw)(t),1)])))),128))])),_:1},8,["list","onChange"])]),(0,o._)("div",ci,[(0,o._)("button",{onClick:t[0]||(t[0]=t=>e.closeComp()),class:"unAcceptButton btn"},"Отмена"),(0,o._)("button",{onClick:t[1]||(t[1]=t=>e.returnData()),class:"acceptButton btn"}," Сохранить ")])])])}
/*!
  * vue-draggable-next v2.1.0
  * (c) 2021 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function ui(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function pi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(i),!0).forEach((function(t){hi(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ui(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _i(e){return _i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_i(e)}function hi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mi(){return mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},mi.apply(this,arguments)}function fi(e,t){if(null==e)return{};var i,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)i=s[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}function vi(e,t){if(null==e)return{};var i,o,n=fi(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var gi="1.14.0";function bi(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var wi=bi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yi=bi(/Edge/i),xi=bi(/firefox/i),Di=bi(/safari/i)&&!bi(/chrome/i)&&!bi(/android/i),Ci=bi(/iP(ad|od|hone)/i),ki=bi(/chrome/i)&&bi(/android/i),Si={capture:!1,passive:!1};function Ei(e,t,i){e.addEventListener(t,i,!wi&&Si)}function Oi(e,t,i){e.removeEventListener(t,i,!wi&&Si)}function Vi(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(i){return!1}return!1}}function Ii(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ti(e,t,i,o){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&Vi(e,t):Vi(e,t))||o&&e===i)return e;if(e===i)break}while(e=Ii(e))}return null}var qi,Ai=/\s+/g;function Mi(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(Ai," ").replace(" "+t+" "," ");e.className=(o+(i?" "+t:"")).replace(Ai," ")}}function Ni(e,t,i){var o=e&&e.style;if(o){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=i+("string"===typeof i?"":"px")}}function ji(e,t){var i="";if("string"===typeof e)i=e;else do{var o=Ni(e,"transform");o&&"none"!==o&&(i=o+" "+i)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function Ui(e,t,i){if(e){var o=e.getElementsByTagName(t),n=0,s=o.length;if(i)for(;n<s;n++)i(o[n],n);return o}return[]}function Pi(){var e=document.scrollingElement;return e||document.documentElement}function Yi(e,t,i,o,n){if(e.getBoundingClientRect||e===window){var s,l,a,r,c,d,u;if(e!==window&&e.parentNode&&e!==Pi()?(s=e.getBoundingClientRect(),l=s.top,a=s.left,r=s.bottom,c=s.right,d=s.height,u=s.width):(l=0,a=0,r=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||i)&&e!==window&&(n=n||e.parentNode,!wi))do{if(n&&n.getBoundingClientRect&&("none"!==Ni(n,"transform")||i&&"static"!==Ni(n,"position"))){var p=n.getBoundingClientRect();l-=p.top+parseInt(Ni(n,"border-top-width")),a-=p.left+parseInt(Ni(n,"border-left-width")),r=l+s.height,c=a+s.width;break}}while(n=n.parentNode);if(o&&e!==window){var _=ji(n||e),h=_&&_.a,m=_&&_.d;_&&(l/=m,a/=h,u/=h,d/=m,r=l+d,c=a+u)}return{top:l,left:a,bottom:r,right:c,width:u,height:d}}}function $i(e,t,i){var o=zi(e,!0),n=Yi(e)[t];while(o){var s=Yi(o)[i],l=void 0;if(l="top"===i||"left"===i?n>=s:n<=s,!l)return o;if(o===Pi())break;o=zi(o,!1)}return!1}function Fi(e,t,i,o){var n=0,s=0,l=e.children;while(s<l.length){if("none"!==l[s].style.display&&l[s]!==nn.ghost&&(o||l[s]!==nn.dragged)&&Ti(l[s],i.draggable,e,!1)){if(n===t)return l[s];n++}s++}return null}function Wi(e,t){var i=e.lastElementChild;while(i&&(i===nn.ghost||"none"===Ni(i,"display")||t&&!Vi(i,t)))i=i.previousElementSibling;return i||null}function Ri(e,t){var i=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===nn.clone||t&&!Vi(e,t)||i++;return i}function Hi(e){var t=0,i=0,o=Pi();if(e)do{var n=ji(e),s=n.a,l=n.d;t+=e.scrollLeft*s,i+=e.scrollTop*l}while(e!==o&&(e=e.parentNode));return[t,i]}function Xi(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[i][o])return Number(i);return-1}function zi(e,t){if(!e||!e.getBoundingClientRect)return Pi();var i=e,o=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Ni(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i.getBoundingClientRect||i===document.body)return Pi();if(o||t)return i;o=!0}}}while(i=i.parentNode);return Pi()}function Bi(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Li(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Zi(e,t){return function(){if(!qi){var i=arguments,o=this;1===i.length?e.call(o,i[0]):e.apply(o,i),qi=setTimeout((function(){qi=void 0}),t)}}}function Ki(){clearTimeout(qi),qi=void 0}function Gi(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function Qi(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var Ji="Sortable"+(new Date).getTime();function eo(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==Ni(e,"display")&&e!==nn.ghost){t.push({target:e,rect:Yi(e)});var i=pi({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=ji(e,!0);o&&(i.top-=o.f,i.left-=o.e)}e.fromRect=i}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(Xi(t,{target:e}),1)},animateAll:function(i){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof i&&i());var n=!1,s=0;t.forEach((function(e){var t=0,i=e.target,l=i.fromRect,a=Yi(i),r=i.prevFromRect,c=i.prevToRect,d=e.rect,u=ji(i,!0);u&&(a.top-=u.f,a.left-=u.e),i.toRect=a,i.thisAnimationDuration&&Li(r,a)&&!Li(l,a)&&(d.top-a.top)/(d.left-a.left)===(l.top-a.top)/(l.left-a.left)&&(t=io(d,r,c,o.options)),Li(a,l)||(i.prevFromRect=l,i.prevToRect=a,t||(t=o.options.animation),o.animate(i,d,a,t)),t&&(n=!0,s=Math.max(s,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),n?e=setTimeout((function(){"function"===typeof i&&i()}),s):"function"===typeof i&&i(),t=[]},animate:function(e,t,i,o){if(o){Ni(e,"transition",""),Ni(e,"transform","");var n=ji(this.el),s=n&&n.a,l=n&&n.d,a=(t.left-i.left)/(s||1),r=(t.top-i.top)/(l||1);e.animatingX=!!a,e.animatingY=!!r,Ni(e,"transform","translate3d("+a+"px,"+r+"px,0)"),this.forRepaintDummy=to(e),Ni(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Ni(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Ni(e,"transition",""),Ni(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}function to(e){return e.offsetWidth}function io(e,t,i,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*o.animation}var oo=[],no={initializeByDefault:!0},so={mount:function(e){for(var t in no)no.hasOwnProperty(t)&&!(t in e)&&(e[t]=no[t]);oo.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),oo.push(e)},pluginEvent:function(e,t,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var n=e+"Global";oo.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][n]&&t[o.pluginName][n](pi({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](pi({sortable:t},i)))}))},initializePlugins:function(e,t,i,o){for(var n in oo.forEach((function(o){var n=o.pluginName;if(e.options[n]||o.initializeByDefault){var s=new o(e,t,e.options);s.sortable=e,s.options=e.options,e[n]=s,mi(i,s.defaults)}})),e.options)if(e.options.hasOwnProperty(n)){var s=this.modifyOption(e,n,e.options[n]);"undefined"!==typeof s&&(e.options[n]=s)}},getEventProperties:function(e,t){var i={};return oo.forEach((function(o){"function"===typeof o.eventProperties&&mi(i,o.eventProperties.call(t[o.pluginName],e))})),i},modifyOption:function(e,t,i){var o;return oo.forEach((function(n){e[n.pluginName]&&n.optionListeners&&"function"===typeof n.optionListeners[t]&&(o=n.optionListeners[t].call(e[n.pluginName],i))})),o}};function lo(e){var t=e.sortable,i=e.rootEl,o=e.name,n=e.targetEl,s=e.cloneEl,l=e.toEl,a=e.fromEl,r=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,p=e.originalEvent,_=e.putSortable,h=e.extraEventProperties;if(t=t||i&&i[Ji],t){var m,f=t.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||wi||yi?(m=document.createEvent("Event"),m.initEvent(o,!0,!0)):m=new CustomEvent(o,{bubbles:!0,cancelable:!0}),m.to=l||i,m.from=a||i,m.item=n||i,m.clone=s,m.oldIndex=r,m.newIndex=c,m.oldDraggableIndex=d,m.newDraggableIndex=u,m.originalEvent=p,m.pullMode=_?_.lastPutMode:void 0;var g=pi(pi({},h),so.getEventProperties(o,t));for(var b in g)m[b]=g[b];i&&i.dispatchEvent(m),f[v]&&f[v].call(t,m)}}var ao=["evt"],ro=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.evt,n=vi(i,ao);so.pluginEvent.bind(nn)(e,t,pi({dragEl:uo,parentEl:po,ghostEl:_o,rootEl:ho,nextEl:mo,lastDownEl:fo,cloneEl:vo,cloneHidden:go,dragStarted:To,putSortable:Co,activeSortable:nn.active,originalEvent:o,oldIndex:bo,oldDraggableIndex:yo,newIndex:wo,newDraggableIndex:xo,hideGhostForTarget:Jo,unhideGhostForTarget:en,cloneNowHidden:function(){go=!0},cloneNowShown:function(){go=!1},dispatchSortableEvent:function(e){co({sortable:t,name:e,originalEvent:o})}},n))};function co(e){lo(pi({putSortable:Co,cloneEl:vo,targetEl:uo,rootEl:ho,oldIndex:bo,oldDraggableIndex:yo,newIndex:wo,newDraggableIndex:xo},e))}var uo,po,_o,ho,mo,fo,vo,go,bo,wo,yo,xo,Do,Co,ko,So,Eo,Oo,Vo,Io,To,qo,Ao,Mo,No,jo=!1,Uo=!1,Po=[],Yo=!1,$o=!1,Fo=[],Wo=!1,Ro=[],Ho="undefined"!==typeof document,Xo=Ci,zo=yi||wi?"cssFloat":"float",Bo=Ho&&!ki&&!Ci&&"draggable"in document.createElement("div"),Lo=function(){if(Ho){if(wi)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Zo=function(e,t){var i=Ni(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=Fi(e,0,t),s=Fi(e,1,t),l=n&&Ni(n),a=s&&Ni(s),r=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Yi(n).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Yi(s).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&l["float"]&&"none"!==l["float"]){var d="left"===l["float"]?"left":"right";return!s||"both"!==a.clear&&a.clear!==d?"horizontal":"vertical"}return n&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||r>=o&&"none"===i[zo]||s&&"none"===i[zo]&&r+c>o)?"vertical":"horizontal"},Ko=function(e,t,i){var o=i?e.left:e.top,n=i?e.right:e.bottom,s=i?e.width:e.height,l=i?t.left:t.top,a=i?t.right:t.bottom,r=i?t.width:t.height;return o===l||n===a||o+s/2===l+r/2},Go=function(e,t){var i;return Po.some((function(o){var n=o[Ji].options.emptyInsertThreshold;if(n&&!Wi(o)){var s=Yi(o),l=e>=s.left-n&&e<=s.right+n,a=t>=s.top-n&&t<=s.bottom+n;return l&&a?i=o:void 0}})),i},Qo=function(e){function t(e,i){return function(o,n,s,l){var a=o.options.group.name&&n.options.group.name&&o.options.group.name===n.options.group.name;if(null==e&&(i||a))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"===typeof e)return t(e(o,n,s,l),i)(o,n,s,l);var r=(i?o:n).options.group.name;return!0===e||"string"===typeof e&&e===r||e.join&&e.indexOf(r)>-1}}var i={},o=e.group;o&&"object"==_i(o)||(o={name:o}),i.name=o.name,i.checkPull=t(o.pull,!0),i.checkPut=t(o.put),i.revertClone=o.revertClone,e.group=i},Jo=function(){!Lo&&_o&&Ni(_o,"display","none")},en=function(){!Lo&&_o&&Ni(_o,"display","")};Ho&&document.addEventListener("click",(function(e){if(Uo)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Uo=!1,!1}),!0);var tn=function(e){if(uo){e=e.touches?e.touches[0]:e;var t=Go(e.clientX,e.clientY);if(t){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Ji]._onDragOver(i)}}},on=function(e){uo&&uo.parentNode[Ji]._isOutsideThisEl(e.target)};function nn(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=mi({},t),e[Ji]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Zo(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==nn.supportPointer&&"PointerEvent"in window&&!Di,emptyInsertThreshold:5};for(var o in so.initializePlugins(this,e,i),i)!(o in t)&&(t[o]=i[o]);for(var n in Qo(t),this)"_"===n.charAt(0)&&"function"===typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Bo,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ei(e,"pointerdown",this._onTapStart):(Ei(e,"mousedown",this._onTapStart),Ei(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ei(e,"dragover",this),Ei(e,"dragenter",this)),Po.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),mi(this,eo())}function sn(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ln(e,t,i,o,n,s,l,a){var r,c,d=e[Ji],u=d.options.onMove;return!window.CustomEvent||wi||yi?(r=document.createEvent("Event"),r.initEvent("move",!0,!0)):r=new CustomEvent("move",{bubbles:!0,cancelable:!0}),r.to=t,r.from=e,r.dragged=i,r.draggedRect=o,r.related=n||t,r.relatedRect=s||Yi(t),r.willInsertAfter=a,r.originalEvent=l,e.dispatchEvent(r),u&&(c=u.call(d,r,l)),c}function an(e){e.draggable=!1}function rn(){Wo=!1}function cn(e,t,i){var o=Yi(Fi(i.el,0,i.options,!0)),n=10;return t?e.clientX<o.left-n||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-n||e.clientY<o.bottom&&e.clientX<o.left}function dn(e,t,i){var o=Yi(Wi(i.el,i.options.draggable)),n=10;return t?e.clientX>o.right+n||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+n}function un(e,t,i,o,n,s,l,a){var r=o?e.clientY:e.clientX,c=o?i.height:i.width,d=o?i.top:i.left,u=o?i.bottom:i.right,p=!1;if(!l)if(a&&Mo<c*n){if(!Yo&&(1===Ao?r>d+c*s/2:r<u-c*s/2)&&(Yo=!0),Yo)p=!0;else if(1===Ao?r<d+Mo:r>u-Mo)return-Ao}else if(r>d+c*(1-n)/2&&r<u-c*(1-n)/2)return pn(t);return p=p||l,p&&(r<d+c*s/2||r>u-c*s/2)?r>d+c/2?1:-1:0}function pn(e){return Ri(uo)<Ri(e)?1:-1}function _n(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,o=0;while(i--)o+=t.charCodeAt(i);return o.toString(36)}function hn(e){Ro.length=0;var t=e.getElementsByTagName("input"),i=t.length;while(i--){var o=t[i];o.checked&&Ro.push(o)}}function mn(e){return setTimeout(e,0)}function fn(e){return clearTimeout(e)}nn.prototype={constructor:nn,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(qo=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,uo):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,o=this.options,n=o.preventOnFilter,s=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(l||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=o.filter;if(hn(i),!uo&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||o.disabled)&&!r.isContentEditable&&(this.nativeDraggable||!Di||!a||"SELECT"!==a.tagName.toUpperCase())&&(a=Ti(a,o.draggable,i,!1),(!a||!a.animated)&&fo!==a)){if(bo=Ri(a),yo=Ri(a,o.draggable),"function"===typeof c){if(c.call(this,e,a,this))return co({sortable:t,rootEl:r,name:"filter",targetEl:a,toEl:i,fromEl:i}),ro("filter",t,{evt:e}),void(n&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=Ti(r,o.trim(),i,!1),o)return co({sortable:t,rootEl:o,name:"filter",targetEl:a,fromEl:i,toEl:i}),ro("filter",t,{evt:e}),!0})),c))return void(n&&e.cancelable&&e.preventDefault());o.handle&&!Ti(r,o.handle,i,!1)||this._prepareDragStart(e,l,a)}}},_prepareDragStart:function(e,t,i){var o,n=this,s=n.el,l=n.options,a=s.ownerDocument;if(i&&!uo&&i.parentNode===s){var r=Yi(i);if(ho=s,uo=i,po=uo.parentNode,mo=uo.nextSibling,fo=i,Do=l.group,nn.dragged=uo,ko={target:uo,clientX:(t||e).clientX,clientY:(t||e).clientY},Vo=ko.clientX-r.left,Io=ko.clientY-r.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,uo.style["will-change"]="all",o=function(){ro("delayEnded",n,{evt:e}),nn.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!xi&&n.nativeDraggable&&(uo.draggable=!0),n._triggerDragStart(e,t),co({sortable:n,name:"choose",originalEvent:e}),Mi(uo,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){Ui(uo,e.trim(),an)})),Ei(a,"dragover",tn),Ei(a,"mousemove",tn),Ei(a,"touchmove",tn),Ei(a,"mouseup",n._onDrop),Ei(a,"touchend",n._onDrop),Ei(a,"touchcancel",n._onDrop),xi&&this.nativeDraggable&&(this.options.touchStartThreshold=4,uo.draggable=!0),ro("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(yi||wi))o();else{if(nn.eventCanceled)return void this._onDrop();Ei(a,"mouseup",n._disableDelayedDrag),Ei(a,"touchend",n._disableDelayedDrag),Ei(a,"touchcancel",n._disableDelayedDrag),Ei(a,"mousemove",n._delayedDragTouchMoveHandler),Ei(a,"touchmove",n._delayedDragTouchMoveHandler),l.supportPointer&&Ei(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(o,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){uo&&an(uo),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Oi(e,"mouseup",this._disableDelayedDrag),Oi(e,"touchend",this._disableDelayedDrag),Oi(e,"touchcancel",this._disableDelayedDrag),Oi(e,"mousemove",this._delayedDragTouchMoveHandler),Oi(e,"touchmove",this._delayedDragTouchMoveHandler),Oi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Ei(document,"pointermove",this._onTouchMove):Ei(document,t?"touchmove":"mousemove",this._onTouchMove):(Ei(uo,"dragend",this),Ei(ho,"dragstart",this._onDragStart));try{document.selection?mn((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(e,t){if(jo=!1,ho&&uo){ro("dragStarted",this,{evt:t}),this.nativeDraggable&&Ei(document,"dragover",on);var i=this.options;!e&&Mi(uo,i.dragClass,!1),Mi(uo,i.ghostClass,!0),nn.active=this,e&&this._appendGhost(),co({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(So){this._lastX=So.clientX,this._lastY=So.clientY,Jo();var e=document.elementFromPoint(So.clientX,So.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(So.clientX,So.clientY),e===t)break;t=e}if(uo.parentNode[Ji]._isOutsideThisEl(e),t)do{if(t[Ji]){var i=void 0;if(i=t[Ji]._onDragOver({clientX:So.clientX,clientY:So.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);en()}},_onTouchMove:function(e){if(ko){var t=this.options,i=t.fallbackTolerance,o=t.fallbackOffset,n=e.touches?e.touches[0]:e,s=_o&&ji(_o,!0),l=_o&&s&&s.a,a=_o&&s&&s.d,r=Xo&&No&&Hi(No),c=(n.clientX-ko.clientX+o.x)/(l||1)+(r?r[0]-Fo[0]:0)/(l||1),d=(n.clientY-ko.clientY+o.y)/(a||1)+(r?r[1]-Fo[1]:0)/(a||1);if(!nn.active&&!jo){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(_o){s?(s.e+=c-(Eo||0),s.f+=d-(Oo||0)):s={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Ni(_o,"webkitTransform",u),Ni(_o,"mozTransform",u),Ni(_o,"msTransform",u),Ni(_o,"transform",u),Eo=c,Oo=d,So=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!_o){var e=this.options.fallbackOnBody?document.body:ho,t=Yi(uo,!0,Xo,!0,e),i=this.options;if(Xo){No=e;while("static"===Ni(No,"position")&&"none"===Ni(No,"transform")&&No!==document)No=No.parentNode;No!==document.body&&No!==document.documentElement?(No===document&&(No=Pi()),t.top+=No.scrollTop,t.left+=No.scrollLeft):No=Pi(),Fo=Hi(No)}_o=uo.cloneNode(!0),Mi(_o,i.ghostClass,!1),Mi(_o,i.fallbackClass,!0),Mi(_o,i.dragClass,!0),Ni(_o,"transition",""),Ni(_o,"transform",""),Ni(_o,"box-sizing","border-box"),Ni(_o,"margin",0),Ni(_o,"top",t.top),Ni(_o,"left",t.left),Ni(_o,"width",t.width),Ni(_o,"height",t.height),Ni(_o,"opacity","0.8"),Ni(_o,"position",Xo?"absolute":"fixed"),Ni(_o,"zIndex","100000"),Ni(_o,"pointerEvents","none"),nn.ghost=_o,e.appendChild(_o),Ni(_o,"transform-origin",Vo/parseInt(_o.style.width)*100+"% "+Io/parseInt(_o.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,o=e.dataTransfer,n=i.options;ro("dragStart",this,{evt:e}),nn.eventCanceled?this._onDrop():(ro("setupClone",this),nn.eventCanceled||(vo=Qi(uo),vo.draggable=!1,vo.style["will-change"]="",this._hideClone(),Mi(vo,this.options.chosenClass,!1),nn.clone=vo),i.cloneId=mn((function(){ro("clone",i),nn.eventCanceled||(i.options.removeCloneOnHide||ho.insertBefore(vo,uo),i._hideClone(),co({sortable:i,name:"clone"}))})),!t&&Mi(uo,n.dragClass,!0),t?(Uo=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Oi(document,"mouseup",i._onDrop),Oi(document,"touchend",i._onDrop),Oi(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",n.setData&&n.setData.call(i,o,uo)),Ei(document,"drop",i),Ni(uo,"transform","translateZ(0)")),jo=!0,i._dragStartId=mn(i._dragStarted.bind(i,t,e)),Ei(document,"selectstart",i),To=!0,Di&&Ni(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,o,n,s=this.el,l=e.target,a=this.options,r=a.group,c=nn.active,d=Do===r,u=a.sort,p=Co||c,_=this,h=!1;if(!Wo){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=Ti(l,a.draggable,s,!0),V("dragOver"),nn.eventCanceled)return h;if(uo.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||_._ignoreWhileAnimating===l)return T(!1);if(Uo=!1,c&&!a.disabled&&(d?u||(o=po!==ho):Co===this||(this.lastPutMode=Do.checkPull(this,c,uo,e))&&r.checkPut(this,c,uo,e))){if(n="vertical"===this._getDirection(e,l),t=Yi(uo),V("dragOverValid"),nn.eventCanceled)return h;if(o)return po=ho,I(),this._hideClone(),V("revert"),nn.eventCanceled||(mo?ho.insertBefore(uo,mo):ho.appendChild(uo)),T(!0);var m=Wi(s,a.draggable);if(!m||dn(e,n,this)&&!m.animated){if(m===uo)return T(!1);if(m&&s===e.target&&(l=m),l&&(i=Yi(l)),!1!==ln(ho,s,uo,t,l,i,e,!!l))return I(),s.appendChild(uo),po=s,q(),T(!0)}else if(m&&cn(e,n,this)){var f=Fi(s,0,a,!0);if(f===uo)return T(!1);if(l=f,i=Yi(l),!1!==ln(ho,s,uo,t,l,i,e,!1))return I(),s.insertBefore(uo,f),po=s,q(),T(!0)}else if(l.parentNode===s){i=Yi(l);var v,g,b=0,w=uo.parentNode!==s,y=!Ko(uo.animated&&uo.toRect||t,l.animated&&l.toRect||i,n),x=n?"top":"left",D=$i(l,"top","top")||$i(uo,"top","top"),C=D?D.scrollTop:void 0;if(qo!==l&&(v=i[x],Yo=!1,$o=!y&&a.invertSwap||w),b=un(e,l,i,n,y?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,$o,qo===l),0!==b){var k=Ri(uo);do{k-=b,g=po.children[k]}while(g&&("none"===Ni(g,"display")||g===_o))}if(0===b||g===l)return T(!1);qo=l,Ao=b;var S=l.nextElementSibling,E=!1;E=1===b;var O=ln(ho,s,uo,t,l,i,e,E);if(!1!==O)return 1!==O&&-1!==O||(E=1===O),Wo=!0,setTimeout(rn,30),I(),E&&!S?s.appendChild(uo):l.parentNode.insertBefore(uo,E?S:l),D&&Gi(D,0,C-D.scrollTop),po=uo.parentNode,void 0===v||$o||(Mo=Math.abs(v-Yi(l)[x])),q(),T(!0)}if(s.contains(uo))return T(!1)}return!1}function V(a,r){ro(a,_,pi({evt:e,isOwner:d,axis:n?"vertical":"horizontal",revert:o,dragRect:t,targetRect:i,canSort:u,fromSortable:p,target:l,completed:T,onMove:function(i,o){return ln(ho,s,uo,t,i,Yi(i),e,o)},changed:q},r))}function I(){V("dragOverAnimationCapture"),_.captureAnimationState(),_!==p&&p.captureAnimationState()}function T(t){return V("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(_),_!==p&&(Mi(uo,Co?Co.options.ghostClass:c.options.ghostClass,!1),Mi(uo,a.ghostClass,!0)),Co!==_&&_!==nn.active?Co=_:_===nn.active&&Co&&(Co=null),p===_&&(_._ignoreWhileAnimating=l),_.animateAll((function(){V("dragOverAnimationComplete"),_._ignoreWhileAnimating=null})),_!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(l===uo&&!uo.animated||l===s&&!l.animated)&&(qo=null),a.dragoverBubble||e.rootEl||l===document||(uo.parentNode[Ji]._isOutsideThisEl(e.target),!t&&tn(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function q(){wo=Ri(uo),xo=Ri(uo,a.draggable),co({sortable:_,name:"change",toEl:s,newIndex:wo,newDraggableIndex:xo,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Oi(document,"mousemove",this._onTouchMove),Oi(document,"touchmove",this._onTouchMove),Oi(document,"pointermove",this._onTouchMove),Oi(document,"dragover",tn),Oi(document,"mousemove",tn),Oi(document,"touchmove",tn)},_offUpEvents:function(){var e=this.el.ownerDocument;Oi(e,"mouseup",this._onDrop),Oi(e,"touchend",this._onDrop),Oi(e,"pointerup",this._onDrop),Oi(e,"touchcancel",this._onDrop),Oi(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;wo=Ri(uo),xo=Ri(uo,i.draggable),ro("drop",this,{evt:e}),po=uo&&uo.parentNode,wo=Ri(uo),xo=Ri(uo,i.draggable),nn.eventCanceled||(jo=!1,$o=!1,Yo=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),fn(this.cloneId),fn(this._dragStartId),this.nativeDraggable&&(Oi(document,"drop",this),Oi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Di&&Ni(document.body,"user-select",""),Ni(uo,"transform",""),e&&(To&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),_o&&_o.parentNode&&_o.parentNode.removeChild(_o),(ho===po||Co&&"clone"!==Co.lastPutMode)&&vo&&vo.parentNode&&vo.parentNode.removeChild(vo),uo&&(this.nativeDraggable&&Oi(uo,"dragend",this),an(uo),uo.style["will-change"]="",To&&!jo&&Mi(uo,Co?Co.options.ghostClass:this.options.ghostClass,!1),Mi(uo,this.options.chosenClass,!1),co({sortable:this,name:"unchoose",toEl:po,newIndex:null,newDraggableIndex:null,originalEvent:e}),ho!==po?(wo>=0&&(co({rootEl:po,name:"add",toEl:po,fromEl:ho,originalEvent:e}),co({sortable:this,name:"remove",toEl:po,originalEvent:e}),co({rootEl:po,name:"sort",toEl:po,fromEl:ho,originalEvent:e}),co({sortable:this,name:"sort",toEl:po,originalEvent:e})),Co&&Co.save()):wo!==bo&&wo>=0&&(co({sortable:this,name:"update",toEl:po,originalEvent:e}),co({sortable:this,name:"sort",toEl:po,originalEvent:e})),nn.active&&(null!=wo&&-1!==wo||(wo=bo,xo=yo),co({sortable:this,name:"end",toEl:po,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ro("nulling",this),ho=uo=po=_o=mo=vo=fo=go=ko=So=To=wo=xo=bo=yo=qo=Ao=Co=Do=nn.dragged=nn.ghost=nn.clone=nn.active=null,Ro.forEach((function(e){e.checked=!0})),Ro.length=Eo=Oo=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":uo&&(this._onDragOver(e),sn(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],i=this.el.children,o=0,n=i.length,s=this.options;o<n;o++)e=i[o],Ti(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||_n(e));return t},sort:function(e,t){var i={},o=this.el;this.toArray().forEach((function(e,t){var n=o.children[t];Ti(n,this.options.draggable,o,!1)&&(i[e]=n)}),this),t&&this.captureAnimationState(),e.forEach((function(e){i[e]&&(o.removeChild(i[e]),o.appendChild(i[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ti(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var o=so.modifyOption(this,e,t);i[e]="undefined"!==typeof o?o:t,"group"===e&&Qo(i)},destroy:function(){ro("destroy",this);var e=this.el;e[Ji]=null,Oi(e,"mousedown",this._onTapStart),Oi(e,"touchstart",this._onTapStart),Oi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Oi(e,"dragover",this),Oi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Po.splice(Po.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!go){if(ro("hideClone",this),nn.eventCanceled)return;Ni(vo,"display","none"),this.options.removeCloneOnHide&&vo.parentNode&&vo.parentNode.removeChild(vo),go=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(go){if(ro("showClone",this),nn.eventCanceled)return;uo.parentNode!=ho||this.options.group.revertClone?mo?ho.insertBefore(vo,mo):ho.appendChild(vo):ho.insertBefore(vo,uo),this.options.group.revertClone&&this.animate(uo,vo),Ni(vo,"display",""),go=!1}}else this._hideClone()}},Ho&&Ei(document,"touchmove",(function(e){(nn.active||jo)&&e.cancelable&&e.preventDefault()})),nn.utils={on:Ei,off:Oi,css:Ni,find:Ui,is:function(e,t){return!!Ti(e,t,e,!1)},extend:Bi,throttle:Zi,closest:Ti,toggleClass:Mi,clone:Qi,index:Ri,nextTick:mn,cancelNextTick:fn,detectDirection:Zo,getChild:Fi},nn.get=function(e){return e[Ji]},nn.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(nn.utils=pi(pi({},nn.utils),e.utils)),so.mount(e)}))},nn.create=function(e,t){return new nn(e,t)},nn.version=gi;var vn,gn,bn,wn,yn,xn,Dn=[],Cn=!1;function kn(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Ei(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ei(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Ei(document,"touchmove",this._handleFallbackAutoScroll):Ei(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Oi(document,"dragover",this._handleAutoScroll):(Oi(document,"pointermove",this._handleFallbackAutoScroll),Oi(document,"touchmove",this._handleFallbackAutoScroll),Oi(document,"mousemove",this._handleFallbackAutoScroll)),En(),Sn(),Ki()},nulling:function(){yn=gn=vn=Cn=xn=bn=wn=null,Dn.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,o=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(o,n);if(yn=e,t||this.options.forceAutoScrollFallback||yi||wi||Di){On(e,this.options,s,t);var l=zi(s,!0);!Cn||xn&&o===bn&&n===wn||(xn&&En(),xn=setInterval((function(){var s=zi(document.elementFromPoint(o,n),!0);s!==l&&(l=s,Sn()),On(e,i.options,s,t)}),10),bn=o,wn=n)}else{if(!this.options.bubbleScroll||zi(s,!0)===Pi())return void Sn();On(e,this.options,zi(s,!1),!1)}}},mi(e,{pluginName:"scroll",initializeByDefault:!0})}function Sn(){Dn.forEach((function(e){clearInterval(e.pid)})),Dn=[]}function En(){clearInterval(xn)}var On=Zi((function(e,t,i,o){if(t.scroll){var n,s=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,r=t.scrollSpeed,c=Pi(),d=!1;gn!==i&&(gn=i,Sn(),vn=t.scroll,n=t.scrollFn,!0===vn&&(vn=zi(i,!0)));var u=0,p=vn;do{var _=p,h=Yi(_),m=h.top,f=h.bottom,v=h.left,g=h.right,b=h.width,w=h.height,y=void 0,x=void 0,D=_.scrollWidth,C=_.scrollHeight,k=Ni(_),S=_.scrollLeft,E=_.scrollTop;_===c?(y=b<D&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),x=w<C&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(y=b<D&&("auto"===k.overflowX||"scroll"===k.overflowX),x=w<C&&("auto"===k.overflowY||"scroll"===k.overflowY));var O=y&&(Math.abs(g-s)<=a&&S+b<D)-(Math.abs(v-s)<=a&&!!S),V=x&&(Math.abs(f-l)<=a&&E+w<C)-(Math.abs(m-l)<=a&&!!E);if(!Dn[u])for(var I=0;I<=u;I++)Dn[I]||(Dn[I]={});Dn[u].vx==O&&Dn[u].vy==V&&Dn[u].el===_||(Dn[u].el=_,Dn[u].vx=O,Dn[u].vy=V,clearInterval(Dn[u].pid),0==O&&0==V||(d=!0,Dn[u].pid=setInterval(function(){o&&0===this.layer&&nn.active._onTouchMove(yn);var t=Dn[this.layer].vy?Dn[this.layer].vy*r:0,i=Dn[this.layer].vx?Dn[this.layer].vx*r:0;"function"===typeof n&&"continue"!==n.call(nn.dragged.parentNode[Ji],i,t,e,yn,Dn[this.layer].el)||Gi(Dn[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=zi(p,!1)));Cn=d}}),30),Vn=function(e){var t=e.originalEvent,i=e.putSortable,o=e.dragEl,n=e.activeSortable,s=e.dispatchSortableEvent,l=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var r=i||n;l();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);a(),r&&!r.el.contains(d)&&(s("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function In(){}function Tn(){}function qn(){return"undefined"!==typeof window?window.console:i.g.console}In.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=Fi(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:Vn},mi(In,{pluginName:"revertOnSpill"}),Tn.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:Vn},mi(Tn,{pluginName:"removeOnSpill"}),nn.mount(new kn),nn.mount(Tn,In);const An=qn();function Mn(e){const t=Object.create(null);return function(i){const o=t[i];return o||(t[i]=e(i))}}const Nn=/-(\w)/g,jn=Mn((e=>e.replace(Nn,((e,t)=>t?t.toUpperCase():""))));function Un(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function Pn(e,t,i){const o=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,o)}function Yn(e,t){return Object.values(e).indexOf(t)}function $n(e,t,i,o){if(!e)return[];const n=Object.values(e),s=t.length-o,l=[...t].map(((e,t)=>t>=s?n.length:n.indexOf(e)));return l}function Fn(e,t){this.$nextTick((()=>this.$emit(e.toLowerCase(),t)))}function Wn(e){return t=>{null!==this.realList&&this["onDrag"+e](t),Fn.call(this,e,t)}}function Rn(e){return["transition-group","TransitionGroup"].includes(e)}function Hn(e){if(!e||1!==e.length)return!1;const[{type:t}]=e;return!!t&&Rn(t.name)}function Xn(e,t){return t?{...t.props,...t.attrs}:e}const zn=["Start","Add","Remove","Update","End"],Bn=["Choose","Unchoose","Sort","Filter","Clone"],Ln=["Move",...zn,...Bn].map((e=>"on"+e));let Zn=null;const Kn={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},Gn=(0,o.aZ)({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...zn.map((e=>e.toLowerCase())),...Bn.map((e=>e.toLowerCase()))],props:Kn,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const e=this.$slots.default?this.$slots.default():null,t=Xn(this.$attrs,this.componentData);return e?(this.transitionMode=Hn(e),(0,o.h)(this.getTag(),t,e)):(0,o.h)(this.getTag(),t,[])},created(){null!==this.list&&null!==this.modelValue&&An.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};zn.forEach((t=>{e["on"+t]=Wn.call(this,t)})),Bn.forEach((t=>{e["on"+t]=Fn.bind(this,t)}));const t=Object.keys(this.$attrs).reduce(((e,t)=>(e[jn(t)]=this.$attrs[t],e)),{}),i=Object.assign({},t,e,{onMove:(e,t)=>this.onDragMove(e,t)});!("draggable"in i)&&(i.draggable=">*");const o=1===this.$el.nodeType?this.$el:this.$el.parentElement;this._sortable=new nn(o,i),o.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{void 0!==this._sortable&&this._sortable.destroy()}catch(e){}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?(0,o.up)(this.component):this.tag},updateOptions(e){for(var t in e){const i=jn(t);-1===Ln.indexOf(i)&&this._sortable.option(i,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=$n(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(e){const t=Yn(this.getChildrenNodes()||[],e);if(-1===t)return null;const i=this.realList[t];return{index:t,element:i}},emitChanges(e){this.$nextTick((()=>{this.$emit("change",e)}))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=e=>e.splice(...arguments);this.alterList(e)},updatePosition(e,t){const i=i=>i.splice(t,0,i.splice(e,1)[0]);this.alterList(i)},getVmIndex(e){const t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;var t=this.getChildrenNodes();t[e].data=null;const i=this.getComponent();i.children=[],i.kept=void 0},onDragStart(e){this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),Zn=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;Un(e.item);const i=this.getVmIndex(e.newIndex);this.spliceList(i,0,t),this.computeIndexes();const o={element:t,newIndex:i};this.emitChanges({added:o})},onDragRemove(e){if(Pn(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void Un(e.clone);if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const i={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:i})},onDragUpdate(e){Un(e.item),Pn(e.from,e.item,e.oldIndex);const t=this.context.index,i=this.getVmIndex(e.newIndex);this.updatePosition(t,i);const o={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:o})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const i=this.move;if(!i||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(e),n=this.context,s=this.computeFutureIndex(o,e);Object.assign(n,{futureIndex:s});const l=Object.assign({},e,{relatedContext:o,draggedContext:n});return i(l,t)},onDragEnd(){this.computeIndexes(),Zn=null},getTrargetedComponent(e){return e.__draggable_component__},getRelatedContextFromMoveEvent({to:e,related:t}){const i=this.getTrargetedComponent(e);if(!i)return{component:i};const o=i.realList,n={list:o,component:i};if(e!==t&&o&&i.getUnderlyingVm){const e=i.getUnderlyingVm(t);if(e)return Object.assign(e,n)}return n},computeFutureIndex(e,t){const i=[...t.to.children].filter((e=>"none"!==e.style["display"]));if(0===i.length)return 0;const o=i.indexOf(t.related),n=e.component.getVmIndex(o),s=-1!==i.indexOf(Zn);return s||!t.willInsertAfter?n:n+1}}});var Qn=(0,o.aZ)({components:{draggable:Gn},props:{names:{type:Array,required:!0},data:{type:Array,required:!0},collval:{type:Array,required:!0}},data(){return{list:[],data_list:[],checkbox_value:[],enabled:!0,dragging:!0}},watch:{data:{handler:function(){this.getData()},deep:!0}},mounted(){this.getData()},emits:{returnData1:(e,t,i)=>{const o=e!=[]&&t!=[]&&i!=[],n=Array.isArray(e)&&Array.isArray(t)&&Array.isArray(i);return!(!n||!o)||(console.warn("Некорректные данные для генерации события returnData1!"),!1)}},methods:{changeData(e){const t=e.moved.oldIndex,i=e.moved.newIndex;this.data_list.map((e=>{const o=e[t];e.splice(t,1),e.splice(i,0,o)})),this.change_value_checkbox(t,i)},change_value_checkbox(e,t){const i=this.checkbox_value[e];this.checkbox_value.splice(e,1),this.checkbox_value.splice(t,0,i)},returnData(){this.$emit("returnData1",this.data_list,this.list,this.checkbox_value),this.$store.commit("close_table_settings")},closeComp(){this.$store.commit("close_table_settings"),this.getData()},getData(){this.list=[],this.data_list=[],this.checkbox_value=[],this.names.forEach((e=>this.list.push(e))),this.data.forEach((()=>this.data_list.push([]))),this.data.forEach(((e,t)=>{e.forEach((e=>{this.data_list[t].push(e)}))})),this.list.pop(),this.list.shift(),this.collval.forEach(((e,t)=>this.checkbox_value[t]=e))}}});const Jn=(0,ke.Z)(Qn,[["render",di],["__scopeId","data-v-71e45dab"]]);var es=Jn;const ts=e=>((0,o.dD)("data-v-7c034e36"),e=e(),(0,o.Cn)(),e),is={class:"wrapper"},os={class:"bgc"},ns={class:"container"},ss={class:"header"},ls={class:"top"},as=ts((()=>(0,o._)("label",null,"Настройки товаров",-1))),rs={class:"btns"},cs=ts((()=>(0,o._)("br",null,null,-1))),ds={class:"bottom"},us=(0,o.uE)('<div class="permits" data-v-7c034e36><div class="permit" data-v-7c034e36><input type="checkbox" class="checkbox" id="q1" data-v-7c034e36><label for="q1" data-v-7c034e36>Разрешать добавлять товары из резерва в другие сделки</label></div><div class="permit" data-v-7c034e36><input type="checkbox" class="checkbox" id="q2" data-v-7c034e36><label for="q2" data-v-7c034e36>Изменить цену у товаров в открытых сделках (по умолчанию)</label></div><div class="permit" data-v-7c034e36><input type="checkbox" class="checkbox" id="q3" data-v-7c034e36><label for="q3" data-v-7c034e36>Разрешать добавлять в сделки товар с нулевым остатком</label></div></div>',1),ps={class:"sync"},_s=ts((()=>(0,o._)("label",null,"Синхронизация товаров на складе с товарами amoCRM",-1))),hs={class:"list"},ms={class:"label_input"},fs=ts((()=>(0,o._)("label",null,"Выберите список товаров из amoCRM для синхронизации",-1))),vs={class:"label_input"},gs=ts((()=>(0,o._)("label",null,"Скрытие штатной вкладки amoCRM с товарами. В штатной вкладке с товарами так же можно прикреплять товары к сделкам, но количество товара на складе учитываться учитываться не будет.",-1))),bs={class:"content"},ws=ts((()=>(0,o._)("h6",null,"Поля товаров в сделке",-1))),ys={class:"rows"},xs=ts((()=>(0,o._)("tr",{class:"row"},[(0,o._)("th",{class:"item"},"Поле"),(0,o._)("th",{class:"item"},"Тип"),(0,o._)("th",{class:"item"},"Видимость"),(0,o._)("th",{class:"item"},"Редактирование"),(0,o._)("th",{class:"item"})],-1))),Ds={class:"item"},Cs={class:"item selectors"},ks={key:0,class:"type_selector_options"},Ss=["onUpdate:modelValue"],Es=["onClick"],Os=["onClick"],Vs={class:"box item"},Is=["id","onUpdate:modelValue"],Ts=["for"],qs={class:"box item"},As=["id","onUpdate:modelValue"],Ms=["for"],Ns={class:"item"},js=["onClick"],Us={class:"item"},Ps=["onUpdate:modelValue"],Ys={class:"item selectors"},$s={key:0,class:"type_selector_options"},Fs=["onUpdate:modelValue"],Ws=["onClick"],Rs=["onClick"],Hs={class:"box item"},Xs=["id","onUpdate:modelValue"],zs=["for"],Bs={class:"box item"},Ls=["id","onUpdate:modelValue"],Zs=["for"],Ks={class:"item"},Gs=["onClick"],Qs=ts((()=>(0,o._)("h6",null,"Этапы резервирования товаров со склада",-1))),Js=ts((()=>(0,o._)("div",{class:"small"}," Внимание! В рамках одной воронки этап резерирования должен быть раньше этапа списания. Если этап презервирования не выбран, то резерирование будет происходить в момент добавления товара в сделку. ",-1))),el={class:"steps"},tl={class:"label_input"},il=ts((()=>(0,o._)("h6",null,"Этапы списания товаров со склада",-1))),ol=ts((()=>(0,o._)("div",{class:"small"}," Внимание! В рамках одной воронки этап списания должен быть позже этапа резерирования. ",-1))),nl={class:"steps"},sl={class:"label_input"},ll=ts((()=>(0,o._)("h6",null,"Привязка полей сделок",-1))),al={class:"steps"},rl={class:"label_input"},cl={class:"footer"},dl={class:"btns"};function ul(e,t,i,l,a,r){const c=(0,o.up)("SelectorVue"),d=(0,o.up)("edit-stuff-list");return(0,o.wg)(),(0,o.iD)("div",is,[(0,o._)("div",os,[(0,o._)("div",ns,[(0,o._)("div",ss,[(0,o._)("div",ls,[as,(0,o._)("div",rs,[(0,o._)("button",{class:"btn btn1",onClick:t[0]||(t[0]=e=>r.close_edit_stuff())}," Назад "),(0,o._)("button",{class:"btn btn2",onClick:t[1]||(t[1]=e=>r.save())},"Сохранить")])]),cs,(0,o._)("div",ds,[us,(0,o._)("div",ps,[_s,(0,o._)("div",hs,[(0,o._)("div",ms,[fs,(0,o.Wm)(c,{options_props:e.sync_list_stuff_options,onSelect:r.option_select_sync_list_stuff,selected_option:e.sync_list_stuff_selected_option},null,8,["options_props","onSelect","selected_option"])]),(0,o._)("div",vs,[gs,(0,o.Wm)(c,{options_props:e.sync_list_hide_tab_options,onSelect:r.option_select_sync_list_hide_tab,selected_option:e.sync_list_hide_tab_selected_option},null,8,["options_props","onSelect","selected_option"])])])])])]),(0,o._)("div",bs,[ws,(0,o._)("table",ys,[xs,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.copy_fields,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:t.id},[(0,o._)("td",Ds,(0,n.zw)(t.field),1),(0,o._)("td",Cs,[(0,o.Wm)(c,{options_props:e.types,onSelect:r.option_select_type,selected_option:a.copy_fields[i].type,disabled:a.copy_fields[i].disable_change_type,idx:i},null,8,["options_props","onSelect","selected_option","disabled","idx"]),5==a.copy_fields[i].type.value||6==a.copy_fields[i].type.value?((0,o.wg)(),(0,o.iD)("div",ks,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.copy_fields[i].selector_options,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"type_selector_option",key:t},[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e=>a.copy_fields[i].selector_options[t].name=e},null,8,Ss),[[s.nr,a.copy_fields[i].selector_options[t].name]]),(6==a.copy_fields[i].type.value?0!=t:a.copy_fields[i].selector_options.length>1)?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"del_button",onClick:e=>r.remove_selector_option(i,t)}," x ",8,Es)):(0,o.kq)("",!0)])))),128)),(0,o._)("button",{onClick:e=>r.add_selector_option(i),class:"add_button"}," + ",8,Os)])):(0,o.kq)("",!0)]),(0,o._)("td",Vs,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:i+"b","onUpdate:modelValue":e=>a.copy_fields[i].visibility=e},null,8,Is),[[s.e8,a.copy_fields[i].visibility]]),(0,o._)("label",{for:i+"b"},null,8,Ts)]),(0,o._)("td",qs,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:i+"c","onUpdate:modelValue":e=>a.copy_fields[i].editing=e},null,8,As),[[s.e8,a.copy_fields[i].editing]]),(0,o._)("label",{for:i+"c"},null,8,Ms)]),(0,o._)("td",Ns,[(0,o.wy)((0,o._)("button",{class:"del_btn",onClick:e=>r.delete_field(i)}," X ",8,js),[[s.F8,a.copy_fields[i].delete]])])])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.new_fields,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:t.id},[(0,o._)("td",Us,[(0,o.wy)((0,o._)("input",{type:"text",class:"input new_item_input","onUpdate:modelValue":e=>a.new_fields[i].field=e},null,8,Ps),[[s.nr,a.new_fields[i].field]])]),(0,o._)("td",Ys,[(0,o.Wm)(c,{options_props:e.types,onSelect:r.option_select_new_field_type,selected_option:a.new_fields[i].type,idx:i},null,8,["options_props","onSelect","selected_option","idx"]),5==a.new_fields[i].type.value||6==a.new_fields[i].type.value?((0,o.wg)(),(0,o.iD)("div",$s,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.new_fields[i].selector_options,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"type_selector_option",key:t},[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e=>a.new_fields[i].selector_options[t].name=e},null,8,Fs),[[s.nr,a.new_fields[i].selector_options[t].name]]),(6==a.new_fields[i].type.value?0!=t:a.new_fields[i].selector_options.length>1)?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"del_button",onClick:e=>r.remove_new_fields_selector_option(i,t)}," x ",8,Ws)):(0,o.kq)("",!0)])))),128)),(0,o._)("button",{onClick:e=>r.add_new_fields_selector_option(i),class:"add_button"}," + ",8,Rs)])):(0,o.kq)("",!0)]),(0,o._)("td",Hs,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:i+"nb","onUpdate:modelValue":e=>a.new_fields[i].visibility=e},null,8,Xs),[[s.e8,a.new_fields[i].visibility]]),(0,o._)("label",{for:i+"nb"},null,8,zs)]),(0,o._)("td",Bs,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:i+"n","onUpdate:modelValue":e=>a.new_fields[i].editing=e},null,8,Ls),[[s.e8,a.new_fields[i].editing]]),(0,o._)("label",{for:i+"n"},null,8,Zs)]),(0,o._)("td",Ks,[(0,o.wy)((0,o._)("button",{class:"del_btn",onClick:e=>r.delete_new_field(i)}," X ",8,Gs),[[s.F8,a.new_fields[i].delete]])])])))),128))]),(0,o._)("button",{onClick:t[2]||(t[2]=e=>r.add_new_field()),class:"add_new_button"},"+"),Qs,Js,(0,o._)("div",el,[(0,o.Wm)(d,{items:a.copy_items_from_storage},{item:(0,o.w5)((({item:e,idx:t})=>[(0,o._)("div",tl,[(0,o._)("label",null,' Воронка "'+(0,n.zw)(e.name)+'" ',1),(0,o.Wm)(c,{options_props:e.reserve_selector_options,onSelect:r.option_select_reverse,selected_option:e.reserve_selected_option,idx:t,disabled:e.reserve_disable_change},null,8,["options_props","onSelect","selected_option","idx","disabled"])])])),_:1},8,["items"])]),il,ol,(0,o._)("div",nl,[(0,o.Wm)(d,{items:a.copy_items_from_storage},{item:(0,o.w5)((({item:e,idx:t})=>[(0,o._)("div",sl,[(0,o._)("label",null,' Воронка "'+(0,n.zw)(e.name)+'" ',1),(0,o.Wm)(c,{options_props:e.cancellation_selector_options,onSelect:r.option_select_cancellation,selected_option:e.cancellation_selected_option,idx:t,disabled:e.cancellation_disable_change},null,8,["options_props","onSelect","selected_option","idx","disabled"])])])),_:1},8,["items"])]),ll,(0,o._)("div",al,[(0,o.Wm)(d,{items:a.copy_binding_fields_deals},{item:(0,o.w5)((({item:e,idx:t})=>[(0,o._)("div",rl,[(0,o._)("label",null,' Поле "'+(0,n.zw)(e.name)+'" ',1),(0,o.Wm)(c,{options_props:e.binding_selector_options,onSelect:r.option_select_deals,selected_option:e.binding_selected_option,idx:t,disabled:e.binding_disable_change},null,8,["options_props","onSelect","selected_option","idx","disabled"])])])),_:1},8,["items"])])]),(0,o._)("div",cl,[(0,o._)("div",dl,[(0,o._)("button",{class:"btn btn1",onClick:t[3]||(t[3]=e=>r.close_edit_stuff())},"Назад"),(0,o._)("button",{class:"btn btn2",onClick:t[4]||(t[4]=e=>r.save())},"Сохранить")])])])])])}function pl(e,t,i,n,s,l){return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.items,((t,i)=>((0,o.wg)(),(0,o.iD)("div",{key:t.id},[(0,o.WI)(e.$slots,"item",{item:t,idx:i})])))),128)}var _l={props:{items:{type:Array,required:!0}}};const hl=(0,ke.Z)(_l,[["render",pl]]);var ml=hl,fl={components:{SelectorVue:ye.Z,EditStuffList:ml},data(){return{copy_fields:[],new_fields:[],copy_items_from_storage:[],copy_binding_fields_deals:[],idx_to_delete:[],copy_sync_list_stuff_selected_option:{},copy_sync_list_hide_tab_selected_option:{},copy_binding_selected_option:{}}},mounted(){this.copy_fields=[],this.idx_to_delete=[],this.copy_fields=this.fields.map(((e,t)=>Object.assign({index:t},e))),this.copy_items_from_storage=[],this.copy_items_from_storage=this.items_from_storage.map(((e,t)=>Object.assign({index:t},e))),Object.assign(this.copy_sync_list_stuff_selected_option,this.sync_list_stuff_selected_option),Object.assign(this.copy_sync_list_hide_tab_selected_option,this.sync_list_hide_tab_selected_option),this.copy_binding_fields_deals=this.binding_fields_deals.map(((e,t)=>Object.assign({index:t},e))),Object.assign(this.copy_binding_selected_option,this.binding_selected_option)},computed:{...(0,xt.Se)(["types"]),...(0,xt.Se)(["fields"]),...(0,xt.Se)(["sync_list_stuff_options"]),...(0,xt.Se)(["sync_list_hide_tab_options"]),...(0,xt.Se)(["sync_list_stuff_selected_option"]),...(0,xt.Se)(["sync_list_hide_tab_selected_option"]),...(0,xt.Se)(["items_from_storage"]),...(0,xt.Se)(["binding_fields_deals"])},methods:{save(){this.copy_fields.forEach((e=>{let t=1;e.selector_options.forEach((e=>{Object.assign(e,{value:t}),t+=1}))})),this.new_fields.forEach((e=>this.copy_fields.push(e))),this.$store.commit("update_fields",this.copy_fields),this.$store.commit("update_items_from_storage",this.copy_items_from_storage),this.$store.commit("update_binding_fields_deals",this.copy_binding_fields_deals),this.$store.commit("update_sync_list_stuff_selected_option",this.copy_sync_list_stuff_selected_option),this.$store.commit("update_sync_list_hide_tab_selected_option",this.copy_sync_list_hide_tab_selected_option),this.$store.commit("delete_data_idx",this.idx_to_delete),this.new_fields_push();const e=[];this.fields.forEach((t=>e.push(t.field))),e.unshift(""),e.push(""),this.$store.commit("update_params",e),this.new_fields=[],this.close_edit_stuff()},new_fields_push(){let e=new Date;const t=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear(),n=e.getHours(),s=e.getMinutes(),l=o+"-"+i+"-"+t,a=o+"-"+i+"-"+t+"T"+n+":"+s;this.new_fields.forEach((e=>{let t="";1!=e.type.value&&2!=e.type.value||(t="0"),6==e.type.value&&(t="Не выбрано"),7==e.type.value&&(t=l),8==e.type.value&&(t=a),9==e.type.value&&(t="Нет"),this.$store.commit("update_all_data",t)}))},add_new_field(){this.new_fields.push({id:this.copy_fields.length+1+this.new_fields.length,field:"",type:{name:"Строка",value:3},selector_options:[{name:"Не выбрано"}],disable_change_type:!1,visibility:!1,edit:!1,editing:!1,delete:!0})},delete_new_field(e){this.new_fields.splice(e,1)},delete_field(e){this.copy_fields.splice(e,1),this.idx_to_delete.push(e)},option_select_type(e,t){this.copy_fields[t].type=e},option_select_new_field_type(e,t){this.new_fields[t].type=e},add_selector_option(e){this.copy_fields[e].selector_options.push({name:""})},remove_selector_option(e,t){this.copy_fields[e].selector_options.splice(t,1)},add_new_fields_selector_option(e){this.new_fields[e].selector_options.push({name:""})},remove_new_fields_selector_option(e,t){this.new_fields[e].selector_options.splice(t,1)},option_select_sync_list_stuff(e){Object.assign(this.copy_sync_list_stuff_selected_option,e)},option_select_sync_list_hide_tab(e){Object.assign(this.copy_sync_list_hide_tab_selected_option,e)},option_select_reverse(e,t){this.copy_items_from_storage[t].reserve_selected_option=e},option_select_cancellation(e,t){this.copy_items_from_storage[t].cancellation_selected_option=e},option_select_deals(e,t){this.copy_binding_fields_deals[t].binding_selected_option=e},close_edit_stuff(){this.$store.commit("open_close_show_edit_stuff",!1)}}};const vl=(0,ke.Z)(fl,[["render",ul],["__scopeId","data-v-7c034e36"]]);var gl=vl;const bl=e=>((0,o.dD)("data-v-05b1fbec"),e=e(),(0,o.Cn)(),e),wl={class:"wrapper"},yl={class:"container"},xl=bl((()=>(0,o._)("div",{class:"header"},[(0,o._)("label",null,"Добавление товаров")],-1))),Dl={class:"content"},Cl={class:"table"},kl={class:"row title"},Sl=bl((()=>(0,o._)("td",{class:"item"},null,-1))),El={class:"item"},Ol={class:"item"},Vl=["onUpdate:modelValue","disabled"],Il={class:"item"},Tl=["onUpdate:modelValue","disabled"],ql={class:"item"},Al={class:"select_input"},Ml=["onUpdate:modelValue","disabled"],Nl={class:"item"},jl={class:"item"},Ul=["onUpdate:modelValue","disabled"],Pl={class:"item"},Yl={class:"item"},$l=["onUpdate:modelValue","disabled"],Fl={class:"item"},Wl=["onUpdate:modelValue"],Rl={class:"item"},Hl={class:"nds"},Xl=["onUpdate:modelValue","id"],zl=["for"],Bl={key:0,class:"hiden"},Ll=["onUpdate:modelValue","id"],Zl=["for"],Kl=["onUpdate:modelValue","id"],Gl=["for"],Ql=["onUpdate:modelValue"],Jl={class:"item"},ea=["onClick"],ta={class:"footer"},ia={class:"btns"};function oa(e,t,i,l,a,r){const c=(0,o.up)("selector-vue");return(0,o.wg)(),(0,o.iD)("div",wl,[(0,o._)("div",yl,[xl,(0,o._)("div",Dl,[(0,o._)("table",Cl,[(0,o._)("thead",null,[(0,o._)("tr",kl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},(0,n.zw)(e),1)))),128)),Sl])]),(0,o._)("tbody",null,[(0,o.Wm)(s.W3,{name:"row"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.new_items,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:e},[(0,o._)("td",El,[(0,o.Wm)(c,{options_props:a.options2,onSelect:r.option_select2,selected_option:e[0],idx:t,disabled:i.rows.length>t},null,8,["options_props","onSelect","selected_option","idx","disabled"])]),(0,o._)("td",Ol,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.new_items[t][1]=e,class:(0,n.C_)(["input",{not_valid:""==a.new_items[t][1]&&a.try_accept}]),disabled:i.rows.length>t},null,10,Vl),[[s.nr,a.new_items[t][1]]])]),(0,o._)("td",Il,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.new_items[t][2]=e,class:(0,n.C_)(["input",{not_valid:""==a.new_items[t][2]&&a.try_accept}]),disabled:i.rows.length>t},null,10,Tl),[[s.nr,a.new_items[t][2]]])]),(0,o._)("td",ql,[(0,o._)("div",Al,[(0,o.Wm)(c,{options_props:a.options1[t],onSelect:r.option_select1,selected_option:e[3],idx:t,disabled:2==e[0].value},null,8,["options_props","onSelect","selected_option","idx","disabled"]),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.new_items[t][4]=e,class:(0,n.C_)(["input",{not_valid:""==a.new_items[t][4]&&a.try_accept}]),disabled:i.rows.length>t||2==e[0].value},null,10,Ml),[[s.nr,a.new_items[t][4]]])])]),(0,o._)("td",Nl,[(0,o.Wm)(c,{options_props:a.options[0],onSelect:r.option_select3,selected_option:e[5],idx:t,disabled:2==e[0].value},null,8,["options_props","onSelect","selected_option","idx","disabled"])]),(0,o._)("td",jl,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>a.new_items[t][6]=e,class:(0,n.C_)(["input",{not_valid:(""==a.new_items[t][6]||void 0==a.new_items[t][6])&&a.try_accept}]),disabled:2==e[0].value,min:"0"},null,10,Ul),[[s.nr,a.new_items[t][6]]])]),(0,o._)("td",Pl,[(0,o.Wm)(c,{options_props:a.options[1],onSelect:r.option_select4,selected_option:e[7],idx:t,disabled:2==e[0].value},null,8,["options_props","onSelect","selected_option","idx","disabled"])]),(0,o._)("td",Yl,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>a.new_items[t][8]=e,class:(0,n.C_)(["input",{not_valid:""==a.new_items[t][8]&&a.try_accept}]),min:"0",disabled:i.rows.length>t},null,10,$l),[[s.nr,a.new_items[t][8]]])]),(0,o._)("td",Fl,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>a.new_items[t][9]=e,class:(0,n.C_)(["input",{not_valid:""==a.new_items[t][9]&&a.try_accept}]),min:"0"},null,10,Wl),[[s.nr,a.new_items[t][9]]])]),(0,o._)("td",Rl,[(0,o._)("div",Hl,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e=>a.new_items[t][10]=e,class:"checkbox",id:t+"nq"},null,8,Xl),[[s.e8,a.new_items[t][10]]]),(0,o._)("label",{for:t+"nq"},null,8,zl),a.new_items[t][10]?((0,o.wg)(),(0,o.iD)("div",Bl,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e=>a.new_items[t][11]=e,class:"checkbox",id:t+"nw"},null,8,Ll),[[s.e8,a.new_items[t][11]]]),(0,o._)("label",{for:t+"nw"},"включен в цену",8,Zl),(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e=>a.new_items[t][12]=e,class:"checkbox",id:t+"ne"},null,8,Kl),[[s.e8,a.new_items[t][12]]]),(0,o._)("label",{for:t+"ne"},"менеджер может менять %",8,Gl),(0,o.wy)((0,o._)("input",{type:"number",class:"input","onUpdate:modelValue":e=>a.new_items[t][13]=e,placeholder:"% НДС",min:"0"},null,8,Ql),[[s.nr,a.new_items[t][13]]])])):(0,o.kq)("",!0)])]),(0,o.Wm)(s.uT,{name:"row"},{default:(0,o.w5)((()=>[(0,o._)("td",Jl,[(0,o.wy)((0,o._)("button",{class:"del_btn",onClick:e=>r.del_item(t)}," X ",8,ea),[[s.F8,a.new_items.length>1]])])])),_:2},1024)])))),128))])),_:1})])]),(0,o._)("button",{class:"add_new_button",onClick:t[0]||(t[0]=e=>r.push_new_item())},"+")]),(0,o._)("div",ta,[(0,o._)("div",ia,[(0,o._)("button",{class:"btn btn1",onClick:t[1]||(t[1]=e=>r.close_modal())},"Отмена"),(0,o._)("button",{class:"btn btn2",onClick:t[2]||(t[2]=e=>r.save())},"Сохранить")])])])])}var na={components:{SelectorVue:ye.Z},props:{rows:{type:Array,required:!1,default(){return[]}},idxes:{type:Array,required:!1}},data(){return{title:["Тип","Артикул","Название","№ партии","Склад","Кол-во","Единицы измерений","Себестоимость","Цена","НДС"],new_items:[],options1:[],options2:[{name:"Товар",value:1},{name:"Услуга",value:2}],options:[],try_accept:!1}},computed:{...(0,xt.Se)(["options_from_name"])},mounted(){this.start()},watch:{new_items:{handler:function(){this.new_items.forEach(((e,t)=>{const i=this.title.indexOf("Тип"),o=this.title.indexOf("Кол-во")+1,n=this.title.indexOf("№ партии"),s=this.title.indexOf("Склад")+1,l=this.title.indexOf("Единицы измерений")+1,a={name:"",value:999},r=e=>{Object.assign(this.new_items[t][n],e[0]),Object.assign(this.new_items[t][s],e[1]),Object.assign(this.new_items[t][l],e[2])};2==e[i].value&&(this.new_items[t][o]=0,r([a,a,a])),2!=e[i].value&&e[n].value==a.value&&r([this.options1[t][0],this.options[0][0],this.options[1][0]]),e[5]<0&&(this.new_items[t][5]=0),e[6]<0&&(this.new_items[t][6]=0),e[7]<0&&(this.new_items[t][7]=0),e[11]<0&&(this.new_items[t][11]=0)}))},deep:!0}},methods:{push_new_item(){this.new_items.push([{name:"Товар",value:1},"","",{name:"Новая",value:1},"",{},"",{},"","",!1,!1,!1,""]),Object.assign(this.new_items[this.new_items.length-1][5],this.options[0][0]),Object.assign(this.new_items[this.new_items.length-1][7],this.options[1][0]),this.options1.push([{name:"Новая",value:1}])},push_current_item(){this.rows.forEach(((e,t)=>{this.new_items.push([]);const i=(e,t)=>{let i={};return e.forEach((e=>{e.name==t&&Object.assign(i,e)})),i};e.forEach((e=>{this.new_items[t].push(e)})),this.options1.push([{name:this.new_items[t][3],value:2}]),this.new_items[t][3]={name:this.new_items[t][3],value:2},this.new_items[t][5]=i(this.options[0],this.new_items[t][5]),this.new_items[t][7]=i(this.options[1],this.new_items[t][7]),this.new_items[t][0]={name:"Товар",value:1}}))},del_item(e){this.new_items.splice(e,1)},save(){this.try_accept=!0;let e=!0;this.new_items.forEach((t=>{e=e&&""!=t[1]&&""!=t[2]&&""!=t[6]&&""!=t[7]&&""!=t[8]&&void 0!=t[1]&&void 0!=t[2]&&void 0!=t[6]&&void 0!=t[7]&&void 0!=t[8]})),e&&(this.new_items.forEach(((e,t)=>{e.forEach(((e,i)=>{this.new_items[t][i]=`${e}`,"object"==typeof e&&(this.new_items[t][i]=e.name),!0===e&&(this.new_items[t][i]="Да"),!1===e&&(this.new_items[t][i]="Нет")}))})),this.new_items.forEach((e=>{let t=[];this.title.forEach((e=>{"Кол-во"===e&&(e="На складе"),"№ партии"===e&&t.push(""),t.push(e)})),t.push("НДС включен в цену"),t.push("Менеджер может менять % НДС"),t.push("НДС %");const i={new_data:e,title:t};this.$store.commit("add_new_data",i)})),this.close_modal())},close_modal(){this.new_items=[],this.try_accept=!1,this.$store.commit("open_close_new_position",!1)},option_select1(e,t){Object.assign(this.new_items[t][3],e)},option_select2(e,t){Object.assign(this.new_items[t][0],e)},option_select3(e,t){Object.assign(this.new_items[t][5],e)},option_select4(e,t){Object.assign(this.new_items[t][7],e)},start(){(0,o.Y3)((()=>{this.options.push(this.options_from_name["Склад"]),this.options.push(this.options_from_name["Единицы измерений"]),this.rows.length>0?this.push_current_item():this.push_new_item()}))}}};const sa=(0,ke.Z)(na,[["render",oa],["__scopeId","data-v-05b1fbec"]]);var la=sa;const aa=e=>((0,o.dD)("data-v-68cfc12b"),e=e(),(0,o.Cn)(),e),ra={class:"wrapper"},ca={class:"container"},da=aa((()=>(0,o._)("div",{class:"header"},[(0,o._)("label",null,"Списание товаров")],-1))),ua={class:"content"},pa={class:"table"},_a={class:"row title"},ha={class:"item"},ma=["onUpdate:modelValue"],fa={class:"item"},va=["onUpdate:modelValue"],ga={class:"item"},ba={class:"select_input"},wa={class:"item"},ya=["onUpdate:modelValue"],xa={class:"item"},Da=["onUpdate:modelValue"],Ca={class:"footer"},ka={class:"btns"};function Sa(e,t,i,l,a,r){const c=(0,o.up)("selector-vue");return(0,o.wg)(),(0,o.iD)("div",ra,[(0,o._)("div",ca,[da,(0,o._)("div",ua,[(0,o._)("table",pa,[(0,o._)("thead",null,[(0,o._)("tr",_a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},(0,n.zw)(e),1)))),128))])]),(0,o._)("tbody",null,[(0,o.Wm)(s.W3,{name:"row"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.items_to_cancel,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:e},[(0,o._)("td",ha,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.items_to_cancel[t][0]=e,class:"input",disabled:""},null,8,ma),[[s.nr,a.items_to_cancel[t][0]]])]),(0,o._)("td",fa,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.items_to_cancel[t][1]=e,class:"input",disabled:""},null,8,va),[[s.nr,a.items_to_cancel[t][1]]])]),(0,o._)("td",ga,[(0,o._)("div",ba,[(0,o.Wm)(c,{options_props:a.options1[t],onSelect:r.option_select1,selected_option:a.items_to_cancel[t][2],idx:t,disabled:!0},null,8,["options_props","onSelect","selected_option","idx"])])]),(0,o._)("td",wa,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>a.items_to_cancel[t][3]=e,class:(0,n.C_)(["input",{not_valid:""==a.items_to_cancel[t][3]&&a.try_accept}])},null,10,ya),[[s.nr,a.items_to_cancel[t][3]]])]),(0,o._)("td",xa,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.items_to_cancel[t][4]=e,class:(0,n.C_)(["input",{not_valid:""==a.items_to_cancel[t][4]&&a.try_accept}])},null,10,Da),[[s.nr,a.items_to_cancel[t][4]]])])])))),128))])),_:1})])])]),(0,o._)("div",Ca,[(0,o._)("div",ka,[(0,o._)("button",{class:"btn btn1",onClick:t[0]||(t[0]=e=>r.close_modal())},"Отмена"),(0,o._)("button",{class:"btn btn2",onClick:t[1]||(t[1]=e=>r.save())},"Сохранить")])])])])}var Ea={components:{SelectorVue:ye.Z},props:{rows:{type:Array,required:!0,default(){return[]}},idxes:{type:Array,required:!0}},data(){return{title:["Артикул","Название","№ партии","Кол-во","Причина списания"],items_to_cancel:[],options1:[],try_accept:!1,max_count_to_cancel:[]}},watch:{items_to_cancel:{handler:function(){this.items_to_cancel.forEach(((e,t)=>{e[3]<0&&(this.items_to_cancel[t][3]=0),e[3]>this.max_count_to_cancel[t]&&(this.items_to_cancel[t][3]=this.max_count_to_cancel[t])}))},deep:!0}},mounted(){(0,o.Y3)((()=>{this.push_current_item(),this.items_to_cancel.forEach((e=>{this.max_count_to_cancel.push(e[3])}))}))},methods:{push_current_item(){this.rows.forEach(((e,t)=>{this.items_to_cancel.push([]),e.forEach((e=>{this.items_to_cancel[t].push(e)})),this.options1.push([{name:this.items_to_cancel[t][2],value:1}]),this.items_to_cancel[t][2]=this.options1[t][0]}))},save(){this.try_accept=!0;let e=!0;this.items_to_cancel.forEach((t=>{e=e&&""!=t[3]&&""!=t[4]&&void 0!=t[3]&&void 0!=t[4]})),e&&(this.items_to_cancel.forEach(((e,t)=>{const i={name:"На складе",idx:this.idxes[t],count:e[3]};this.$store.commit("cancel_item_in_data",i)})),this.close_modal())},close_modal(){this.items_to_cancel=[],this.try_accept=!1,this.$store.commit("open_close_cancel_position",!1)},option_select1(e,t){this.items_to_cancel[t][2]=e}}};const Oa=(0,ke.Z)(Ea,[["render",Sa],["__scopeId","data-v-68cfc12b"]]);var Va=Oa,Ia={components:{MainGrid:ei,TableSetings:es,EditStuff:gl,NewPosition:la,CancelPosition:Va},data(){return{filter_value:!1,paginatedData:[],paginatedParams:[],collumn_value:[],changeValue:[],old_data_length:null}},created:function(){this.old_data_length=this.data[0].length,this.paginate()},computed:{show_modals(){return this.show_edit_modal||this.show_settings||this.show_table_settings||this.show_edit_stuff||this.show_new_position},disabled_for_modals(){return this.show_edit_modal||this.show_table_settings||this.show_edit_stuff||this.show_new_position},rows(){let e=[],t=[];const i=["Тип","Артикул","Название","№ партии","Склад","На складе","Единицы измерений","Себестоимость","Цена","НДС","НДС включен в цену","Менеджер может менять % НДС","НДС %"];return this.changeValue.forEach(((o,n)=>{if(o){let o=[];i.forEach((e=>{let t="";const i=this.data[n][this.params.indexOf(e)-1];t=i,"Да"==i&&(t=!0),"Нет"==i&&(t=!1),o.push(t),"№ партии"==e&&o.push(t)})),e.push(o),t.push(n)}})),{arr:e,idxes:t}},rows_to_cancel(){let e=[],t=[];const i=["Артикул","Название","№ партии","На складе","Причина списания"];return this.changeValue.forEach(((o,n)=>{if(o){let o=[];i.forEach((e=>{let t="";const i=this.data[n][this.params.indexOf(e)-1];void 0!=i&&(t=i),o.push(t)})),e.push(o),t.push(n)}})),{arr:e,idxes:t}},...(0,xt.Se)(["data"]),...(0,xt.Se)(["params"]),...(0,xt.Se)(["show_edit_modal"]),...(0,xt.Se)(["show_settings"]),...(0,xt.Se)(["show_table_settings"]),...(0,xt.Se)(["show_buttons"]),...(0,xt.Se)(["show_filter"]),...(0,xt.Se)(["show_edit_stuff"]),...(0,xt.Se)(["show_sync"]),...(0,xt.Se)(["show_new_position"]),...(0,xt.Se)(["show_cancel_position"]),...(0,xt.Se)(["catalog"])},watch:{data:{handler:function(){this.paginate()},deep:!0},filter_value(){this.$store.commit("open_close_filter",this.filter_value)},show_modals(){this.show_modals?(window.scrollBy(-99999,0),document.body.style.overflowX="hidden"):document.body.style.overflowX="auto"}},methods:{archive_data(){let e=[];this.changeValue.forEach(((t,i)=>{t&&e.push(i)})),this.$store.commit("archive_data",e),this.changeValue=[]},getData(e,t,i){this.paginatedData=[],this.paginatedParams=[],this.collumn_value=[],e.forEach((e=>this.paginatedData.push(e))),t.forEach((e=>this.paginatedParams.push(e))),i.forEach((e=>this.collumn_value.push(e))),this.paginatedParams.unshift(""),this.paginatedParams.push(""),this.filter_value=!1},open_table_settings(){this.$store.commit("open_table_settings")},open_close_new_position(e){this.$store.commit("open_close_new_position",e)},open_close_cancel_position(e){this.$store.commit("open_close_cancel_position",e)},open_close_settings(){this.$store.commit("open_close_settings")},close_settings(){this.$store.commit("close_settings")},close_sync(){this.$store.commit("close_sync")},open_close_sync(){this.$store.commit("open_close_sync")},open_edit_stuff(){this.$store.commit("open_close_show_edit_stuff",!0)},update_changeValue(e){this.changeValue=[],e.forEach(((e,t)=>{this.changeValue[t]=e}))},route(e){this.$router.push("/"+e)},paginate(){if(this.paginatedData=[],this.paginatedParams=[],this.data.forEach((e=>this.paginatedData.push(e))),this.params.forEach((e=>this.paginatedParams.push(e))),this.data.length)if(this.old_data_length==this.data[0].length)this.collumn_value=[],this.paginatedParams.forEach((()=>this.collumn_value.push(!0))),this.collumn_value.pop(),this.collumn_value.pop();else{const e=this.data[0].length-this.old_data_length;if(e>0)for(let t=0;t!=e;t++)this.collumn_value.push(!1)}}}};const Ta=(0,ke.Z)(Ia,[["render",N],["__scopeId","data-v-01580879"]]);var qa=Ta}}]);
//# sourceMappingURL=532.2197a860.js.map