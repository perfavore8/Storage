"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[489],{8513:function(e,t,l){l.d(t,{Z:function(){return p}});var o=l(6252);const i={class:"btns"},s=(0,o.Uk)("Отмена"),a=(0,o.Uk)("Сохранить");function n(e,t,l,n,c,d){return(0,o.wg)(),(0,o.iD)("div",i,[l.show_close?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"btn btn1",onClick:t[0]||(t[0]=e=>d.close())},[(0,o.WI)(e.$slots,"close",{},(()=>[s]),!0)])):(0,o.kq)("",!0),(0,o.WI)(e.$slots,"other_btns",{},void 0,!0),l.show_save?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn btn2",onClick:t[1]||(t[1]=e=>d.save())},[(0,o.WI)(e.$slots,"save",{},(()=>[a]),!0)])):(0,o.kq)("",!0)])}var c={props:{show_close:{type:Boolean,required:!1,default(){return!0}},show_save:{type:Boolean,required:!1,default(){return!0}}},emits:{close:null,save:null},methods:{close(){this.$emit("close")},save(){this.$emit("save")}}},d=l(3744);const r=(0,d.Z)(c,[["render",n],["__scopeId","data-v-fcfb56ae"]]);var p=r},9489:function(e,t,l){l.r(t),l.d(t,{default:function(){return ae}});var o=l(6252),i=l(3577);const s={class:"app"},a={class:"btns"},n=["onClick"],c={class:"content"},d={class:"btns"};function r(e,t,l,r,p,u){const m=(0,o.up)("RepotFIlters"),v=(0,o.up)("ReportGrid");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",{class:(0,i.C_)(["header",{blur:p.openSelectedReportModal}])},[(0,o._)("div",a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.catalog,(t=>((0,o.wg)(),(0,o.iD)("button",{class:(0,i.C_)(["btns_btn",{selected_catalog:e.$route.name===t.value}]),onClick:e=>u.route(t.value),key:t},(0,i.zw)(t.name),11,n)))),128))])],2),(0,o._)("div",c,[(0,o._)("div",d,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>u.clients()),class:(0,i.C_)(["btn",{selected_report:p.isClient}])}," Отчет по клиентам ",2),(0,o._)("button",{onClick:t[1]||(t[1]=e=>u.sales()),class:(0,i.C_)(["btn",{selected_report:!p.isClient}])}," Отчет по продажам ",2)]),(0,o.Wm)(m,{isClient:p.isClient},null,8,["isClient"]),(0,o.Wm)(v,{title:p.title,reports:p.reports,onUpdateOpenSelectedReportModal:u.updateOpenSelectedReportModal},null,8,["title","reports","onUpdateOpenSelectedReportModal"])])])}var p=l(3907),u=l(9963);const m={class:"count"},v={class:"row title"},h={key:0},_=["onClick"],b={key:0},y={key:0,class:"space"};function w(e,t,l,s,a,n){const c=(0,o.up)("ReportGridModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("p",m,"Найдено: "+(0,i.zw)(a.count),1),(0,o._)("table",{class:(0,i.C_)(["table",{blur:n.openSelectedReportModal}])},[(0,o._)("thead",null,[(0,o._)("tr",v,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},(0,i.zw)(e.name),1)))),128))])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.copyReports,((e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e.id},[(0,o._)("tr",{class:(0,i.C_)(["row",{row_odd:t%2==0}])},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.title,(t=>((0,o.wg)(),(0,o.iD)("td",{class:(0,i.C_)(["item",{center:t.type}]),key:t},[t.type?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"btn",onClick:l=>e[t.code].value=!e[t.code].value},(0,i.zw)(e[t.code].value?"Скрыть":"Показать"),9,_)):((0,o.wg)(),(0,o.iD)("span",h,(0,i.zw)(e[t.code]),1))],2)))),128))],2),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e[n.buttonInTitle.code].list,(t=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("tr",{class:"hiden",key:t.id},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},[t[e.code]?((0,o.wg)(),(0,o.iD)("span",b,(0,i.zw)(t[e.code]),1)):(0,o.kq)("",!0)])))),128))])),[[u.F8,e[n.buttonInTitle.code].value]]))),128)),e[n.buttonInTitle.code].value?((0,o.wg)(),(0,o.iD)("tr",y)):(0,o.kq)("",!0)],64)))),128))])],2),((0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[n.selectedReport.value?((0,o.wg)(),(0,o.j4)(c,{key:0,title:n.selectedReport?.title,list:n.selectedReport?.list,company:n.selectedReport?.company,onClose:n.closeReportGridModal},null,8,["title","list","company","onClose"])):(0,o.kq)("",!0)]))],64)}const g=e=>((0,o.dD)("data-v-97a38768"),e=e(),(0,o.Cn)(),e),f={class:"bgc"},k={class:"container"},C={class:"header"},S=g((()=>(0,o._)("div",{class:"icon"},null,-1))),D=[S],R=g((()=>(0,o._)("div",{class:"hr"},null,-1))),I={class:"content"},z={class:"table"},L={class:"row title"},A=g((()=>(0,o._)("div",{class:"hr"},null,-1))),Y={class:"footer"};function H(e,t,l,s,a,n){const c=(0,o.up)("BtnsSaveClose");return(0,o.wg)(),(0,o.iD)("div",f,[(0,o._)("div",k,[(0,o._)("div",C,[(0,o._)("h5",null,'Позиции компании "'+(0,i.zw)(l.company)+'"',1),(0,o._)("button",{class:"btn_del",onClick:t[0]||(t[0]=e=>n.close())},D)]),R,(0,o._)("div",I,[(0,o._)("table",z,[(0,o._)("thead",null,[(0,o._)("tr",L,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},(0,i.zw)(e.name),1)))),128))])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.list,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{class:(0,i.C_)(["row",{row_odd:t%2==0}]),key:e.id},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.title,(t=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:t},(0,i.zw)(e[t.code]),1)))),128))],2)))),128))])])]),A,(0,o._)("div",Y,[(0,o.Wm)(c,{show_save:!1,onClose:n.close},null,8,["onClose"])])])])}var K=l(8513),M={components:{BtnsSaveClose:K.Z},props:{title:{type:Array,required:!0},list:{type:Array,required:!0},company:{type:String,required:!0}},methods:{close(){this.$emit("close")}}},q=l(3744);const T=(0,q.Z)(M,[["render",H],["__scopeId","data-v-97a38768"]]);var F=T,$={components:{ReportGridModal:F},props:{title:{type:Array,required:!0},reports:{type:Array,required:!0}},data(){return{copyReports:[],count:421}},mounted(){this.copy()},computed:{buttonInTitle(){return this.title?.filter((e=>1==e?.type))[0]},modalInTitle(){return this.title?.filter((e=>2==e?.type))[0]},selectedReport(){const e=this.copyReports.filter((e=>{if(e[this.modalInTitle?.code])return e[this.modalInTitle?.code].value}))[0];let t={value:!1};return e&&(t={company:e.company,value:e[this.modalInTitle?.code].value,list:e[this.modalInTitle?.code].list,title:e[this.modalInTitle?.code]?.title}),t},openSelectedReportModal(){return this.selectedReport.value}},watch:{openSelectedReportModal(){this.$emit("updateOpenSelectedReportModal",this.openSelectedReportModal)},reports:{handler:function(){this.copy()},deep:!0}},methods:{copy(){this.copyReports=JSON.parse(JSON.stringify(this.reports))},closeReportGridModal(){this.copyReports[this.copyReports.indexOf(this.copyReports.filter((e=>{if(e[this.modalInTitle?.code])return e[this.modalInTitle?.code].value}))[0])][this.modalInTitle?.code].value=!1}}};const O=(0,q.Z)($,[["render",w],["__scopeId","data-v-7e9835b0"]]);var U=O;const x=e=>((0,o.dD)("data-v-4d56d6f7"),e=e(),(0,o.Cn)(),e),E={class:"row"},Z={class:"left"},G={class:"date_range"},W=["onUpdate:modelValue","placeholder","onFocusin","onFocusout","onInput"],B={class:"btns"},V=x((()=>(0,o._)("button",{class:"btn"},"Применить",-1))),N={class:"row selected_row"},j=["onClick"],J=x((()=>(0,o._)("div",{class:"icon"},null,-1))),P={key:0,class:"autocomplete_teleport"},X=["onClick"],Q={key:1,class:"autocomplete_teleport"};function ee(e,t,l,s,a,n){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",E,[(0,o._)("div",Z,[(0,o._)("div",G,[(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>a.dateStart=e)},null,512),[[u.nr,a.dateStart]]),(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>a.dateEnd=e)},null,512),[[u.nr,a.dateEnd]])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.fields,(t=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{key:t.id,class:"field"},[l.isClient&&t?.clientShow||!l.isClient&&t?.salesShow?((0,o.wg)(),(0,o.iD)("div",{key:0,ref_for:!0,ref:l=>a.selected_field_autocomplete.field==t.name?e.targetAutocomplete=l:null,class:"ref"},[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":e=>t.value=e,placeholder:t.placeholder,onFocusin:e=>n.set_selected_field_autocomplete(t.name,t.value,t.minLength),onFocusout:e=>n.set_selected_field_autocomplete("","",t.minLength),onInput:e=>n.set_selected_field_autocomplete(t.name,t.value,t.minLength)},null,40,W),[[u.nr,t.value]])],512)):(0,o.kq)("",!0)])),[[u.F8,l.isClient&&t.clientShow||!l.isClient&&t.salesShow]]))),128))]),(0,o._)("div",B,[V,(0,o._)("button",{class:"btn",onClick:t[2]||(t[2]=e=>n.clearAllFields())},"Очистить")])]),(0,o._)("div",N,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.fields,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"selected",key:e.id},[(0,o._)("span",null,(0,i.zw)(e.placeholder)+": ",1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.selected,((e,l)=>((0,o.wg)(),(0,o.iD)("div",{key:e,class:"item",onClick:e=>n.deleteField(t,l)},[(0,o.Uk)((0,i.zw)(e.value)+" ",1),J],8,j)))),128))])),[[u.F8,e.selected.length]]))),128))]),a.selected_field_autocomplete_list.length||a.isLoading?((0,o.wg)(),(0,o.j4)(o.lR,{key:0,to:e.targetAutocomplete},[a.isLoading?((0,o.wg)(),(0,o.iD)("ul",Q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.autocompletePlaceholderList,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e,class:"placeholder"},(0,i.zw)(e),1)))),128))])):((0,o.wg)(),(0,o.iD)("ul",P,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.selected_field_autocomplete_list,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e,onClick:t=>n.selectField(e,a.selected_field_autocomplete.field),class:"item"},(0,i.zw)(e.value),9,X)))),128))]))],8,["to"])):(0,o.kq)("",!0)],64)}l(7686),l(4506);var te={props:{isClient:{type:Boolean,required:!0}},data(){return{isLoading:!1,selected_field_autocomplete:{idx:null,field:"",value:"",minLength:0},selected_field_autocomplete_list:[],autocompletePlaceholderList:["...","...","...","..."],dateStart:"",dateEnd:"",fields:[{id:0,name:"product",value:"",minLength:3,placeholder:"Артикулы/Названия",clientShow:!1,salesShow:!0,selected:[]},{id:4,name:"responsible",value:"",minLength:0,placeholder:"Ответственные",clientShow:!0,salesShow:!0,selected:[]},{id:1,name:"pipeline",value:"",minLength:0,placeholder:"Воронки",clientShow:!0,salesShow:!1,selected:[]},{id:2,name:"company",value:"",minLength:3,placeholder:"Компании",clientShow:!0,salesShow:!1,selected:[]},{id:3,name:"contact",value:"",minLength:3,placeholder:"Контакты",clientShow:!0,salesShow:!1,selected:[]}]}},watch:{selected_field_autocomplete:{async handler(){clearTimeout(this.timer);const e=()=>{const e=this.selected_field_autocomplete;return""!==e.field&&e.value.length>=e.minLength&&" "!=e.value.split("").at(-1)&&" "!=e.value.split("")[0]};(0,o.Y3)((()=>{e()&&(this.isLoading=!0)})),this.timer=setTimeout((async()=>{if(this.selected_field_autocomplete_list=[],e()){const e=this.selected_field_autocomplete;await this.$store.dispatch("getAutocompleteAnalytics",{field:e.field,value:{query:e.value}});const t=this.$store.state.analytics.autocomplete;void 0!=t&&(this.selected_field_autocomplete_list=[...t])}this.isLoading=!1}),500)},deep:!0}},methods:{set_selected_field_autocomplete(e,t,l){setTimeout((()=>{this.selected_field_autocomplete={field:e,value:t,minLength:l}}),200)},selectField(e,t){this.fields.forEach((l=>{l.name!==t||l.selected.filter((t=>t.value==e.value)).length||l.selected.push(e)}))},deleteField(e,t){this.fields[e].selected.splice(t,1)},clearAllFields(){this.fields.map((e=>e.selected=[]))}}};const le=(0,q.Z)(te,[["render",ee],["__scopeId","data-v-4d56d6f7"]]);var oe=le,ie={name:"AnalyticsView",components:{ReportGrid:U,RepotFIlters:oe},data(){return{openSelectedReportModal:!1,title:[],reports:[],isClient:!0}},computed:{...(0,p.Se)(["catalog"])},mounted(){this.clients()},methods:{route(e){this.$router.push("/"+e)},updateOpenSelectedReportModal(e){this.openSelectedReportModal=e},clients(){this.isClient=!0,this.title=[{name:"Компания",code:"company",type:0},{name:"Контакт",code:"contact",type:0},{name:"Сделки",code:"deals",type:0},{name:"Оборот",code:"ob",type:0},{name:"Прибыль",code:"prib",type:0},{name:"Ответственные",code:"otv",type:1},{name:"Позиции",code:"poz",type:2}],this.reports=[{id:0,otv:{value:!1,list:[{id:0,deals:1,ob:"62 900.00 р.",prib:"38 273.00 р.",otv:"Абашина Ольга"},{id:1,deals:1,ob:"62 900.00 р.",prib:"38 273.00 р.",otv:"Абашина Ольга"},{id:2,deals:1,ob:"62 900.00 р.",prib:"38 273.00 р.",otv:"Абашина Ольга"}]},poz:{value:!1,list:[{name:"Концентрат растительных экстрактов для лица и тела Cleopine ampoule",count:"10",ob:"25 500.00 р.",prib:"17 500.00 р."},{name:"Маска - лифтинг для лица и тела «Multi EX-Lifting» торговой марки Elysien",count:"1",ob:"3 600.00 р.",prib:"2 455.00 р."},{name:"Лимфодренажный тоник линии Active Line торговой марки Skindex",count:"1",ob:"1 650.00 р.\t",prib:"1 200.00 р."},{name:"Обновляющий гель для умывания линии Active Line торговой марки Skindex",count:"1",ob:"1 200.00 р.",prib:"\t820.00 р."},{name:"Гоммаж-скатка с Keratoline™️ и алоэ линии Active Line торговой марки Skindex",count:"1",ob:"\t1 200.00 р.",prib:"\t814.00 р."},{name:"Крем для век мультивосстановление линии Active Line торговой марки Skindex",count:"1",ob:"2 130.00 р.\t  ",prib:"\t1 680.00 р."},{name:"Крем для лица интенсивное преображение линии Active Line торговой марки Skindex",count:"1",ob:"\t2 175.00 р.",prib:"1 735.00 р."}],title:[{name:"Название",code:"name"},{name:"Кол-во",code:"count"},{name:"Оборот",code:"ob"},{name:"Прибыль",code:"prib"}]},company:"Kasatka Elena ф/л",contact:" Kasatka Elena\t",deals:1,ob:"37 455.00 р.",prib:"26 204.00 р."},{id:1,otv:{value:!1,list:[]},poz:{value:!1,list:[]},company:"Nekrasova Oksana ф/л",contact:" Nekrasova Oksana",deals:1,ob:"73 900.00 р.",prib:"45 878.00 р."},{id:2,otv:{value:!1,list:[]},poz:{value:!1,list:[]},company:"Абашина Ольга Александровна ф/л",contact:"Абашина Ольга Александровна",deals:1,ob:"62 900.00 р.",prib:"38 273.00 р."},{id:3,otv:{value:!1,list:[]},poz:{value:!1,list:[]},company:"Абдурахманов Абдухалил Дилшодович ф/л",contact:"Эльмира (InterCharm 2022)\t",deals:1,ob:"145 710.00 р.\t",prib:"77 898.00 р."},{id:4,otv:{value:!1,list:[]},poz:{value:!1,list:[]},company:"Агаджанова Ануш ф/л",contact:" Агаджанова Ануш\t",deals:1,ob:"1 200.00 р.\t",prib:"814.00 р."}]},sales(){this.isClient=!1,this.title=[{name:"Название",code:"name",type:0},{name:"Кол-во",code:"count",type:0},{name:"Оборот",code:"ob",type:0},{name:"Себестоимость",code:"ceb",type:0},{name:"Прибыль",code:"prib",type:0},{name:"Сделки",code:"deals",type:0},{name:"Позиции",code:"poz",type:1}],this.reports=[{id:0,poz:{value:!1,list:[{id:0,name:"Артикул: 86, партия: 52022",count:"1",ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"},{id:1,name:"Артикул: 86, партия: 52022",count:"1",ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"},{id:2,name:"Артикул: 86, партия: 52022",count:"1",ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"}]},name:"AS19 rotor (вал для компрессора)",count:1,ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"},{id:1,poz:{value:!1,list:[]},name:"AS19 rotor (вал для компрессора)",count:1,ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"},{id:2,poz:{value:!1,list:[]},name:"AS19 rotor (вал для компрессора)",count:1,ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"},{id:3,poz:{value:!1,list:[]},name:"AS19 rotor (вал для компрессора)",count:1,ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"},{id:4,poz:{value:!1,list:[]},name:"AS19 rotor (вал для компрессора)",count:1,ob:"1 950.00 р.",ceb:"751.00 р.",prib:"1 199.00 р.",deals:"17864295"}]}}};const se=(0,q.Z)(ie,[["render",r],["__scopeId","data-v-65d541bb"]]);var ae=se}}]);
//# sourceMappingURL=489.a80579b0.js.map