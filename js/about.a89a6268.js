"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[443],{129:function(t,e,o){o.d(e,{Z:function(){return Z}});var s=o(6252),n=o(3577),i=o(9963);const c=t=>((0,s.dD)("data-v-68cfc12b"),t=t(),(0,s.Cn)(),t),l={class:"wrapper"},a={class:"container"},_=c((()=>(0,s._)("div",{class:"header"},[(0,s._)("label",null,"Списание товаров")],-1))),d={class:"content"},r={class:"table"},u={class:"row title"},p={class:"item"},h=["onUpdate:modelValue"],m={class:"item"},w=["onUpdate:modelValue"],v={class:"item"},f={class:"select_input"},y={class:"item"},b=["onUpdate:modelValue"],k={class:"item"},x=["onUpdate:modelValue"],C={class:"footer"},g={class:"btns"};function D(t,e,o,c,D,V){const q=(0,s.up)("selector-vue");return(0,s.wg)(),(0,s.iD)("div",l,[(0,s._)("div",a,[_,(0,s._)("div",d,[(0,s._)("table",r,[(0,s._)("thead",null,[(0,s._)("tr",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.title,(t=>((0,s.wg)(),(0,s.iD)("td",{class:"item",key:t},(0,n.zw)(t),1)))),128))])]),(0,s._)("tbody",null,[(0,s.Wm)(i.W3,{name:"row"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(D.items_to_cancel,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{class:"row",key:t},[(0,s._)("td",p,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t=>D.items_to_cancel[e][0]=t,class:"input",disabled:""},null,8,h),[[i.nr,D.items_to_cancel[e][0]]])]),(0,s._)("td",m,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t=>D.items_to_cancel[e][1]=t,class:"input",disabled:""},null,8,w),[[i.nr,D.items_to_cancel[e][1]]])]),(0,s._)("td",v,[(0,s._)("div",f,[(0,s.Wm)(q,{options_props:D.options1[e],onSelect:V.option_select1,selected_option:D.items_to_cancel[e][2],idx:e,disabled:!0},null,8,["options_props","onSelect","selected_option","idx"])])]),(0,s._)("td",y,[(0,s.wy)((0,s._)("input",{type:"number","onUpdate:modelValue":t=>D.items_to_cancel[e][3]=t,class:(0,n.C_)(["input",{not_valid:""==D.items_to_cancel[e][3]&&D.try_accept}])},null,10,b),[[i.nr,D.items_to_cancel[e][3]]])]),(0,s._)("td",k,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t=>D.items_to_cancel[e][4]=t,class:(0,n.C_)(["input",{not_valid:""==D.items_to_cancel[e][4]&&D.try_accept}])},null,10,x),[[i.nr,D.items_to_cancel[e][4]]])])])))),128))])),_:1})])])]),(0,s._)("div",C,[(0,s._)("div",g,[(0,s._)("button",{class:"btn btn1",onClick:e[0]||(e[0]=t=>V.close_modal())},"Отмена"),(0,s._)("button",{class:"btn btn2",onClick:e[1]||(e[1]=t=>V.save())},"Сохранить")])])])])}var V=o(2376),q={components:{SelectorVue:V.Z},props:{rows:{type:Array,required:!0,default(){return[]}},idxes:{type:Array,required:!0}},data(){return{title:["Артикул","Название","№ партии","Кол-во","Причина списания"],items_to_cancel:[],options1:[],try_accept:!1,max_count_to_cancel:[]}},watch:{items_to_cancel:{handler:function(){this.items_to_cancel.forEach(((t,e)=>{t[3]<0&&(this.items_to_cancel[e][3]=0),t[3]>this.max_count_to_cancel[e]&&(this.items_to_cancel[e][3]=this.max_count_to_cancel[e])}))},deep:!0}},mounted(){(0,s.Y3)((()=>{this.push_current_item(),this.items_to_cancel.forEach((t=>{this.max_count_to_cancel.push(t[3])}))}))},methods:{push_current_item(){this.rows.forEach(((t,e)=>{this.items_to_cancel.push([]),t.forEach((t=>{this.items_to_cancel[e].push(t)})),this.options1.push([{name:this.items_to_cancel[e][2],value:1}]),this.items_to_cancel[e][2]=this.options1[e][0]}))},save(){this.try_accept=!0;let t=!0;this.items_to_cancel.forEach((e=>{t=t&&""!=e[3]&&""!=e[4]&&void 0!=e[3]&&void 0!=e[4]})),t&&(this.items_to_cancel.forEach(((t,e)=>{const o={name:"На складе",idx:this.idxes[e],count:t[3]};this.$store.commit("cancel_item_in_data",o)})),this.close_modal())},close_modal(){this.items_to_cancel=[],this.try_accept=!1,this.$store.commit("open_close_cancel_position",!1)},option_select1(t,e){this.items_to_cancel[e][2]=t}}},U=o(3744);const E=(0,U.Z)(q,[["render",D],["__scopeId","data-v-68cfc12b"]]);var Z=E},2376:function(t,e,o){o.d(e,{Z:function(){return p}});var s=o(6252),n=o(3577),i=o(9963);const c={class:"v-select"},l={key:0,class:"options"},a=["onClick"];function _(t,e,o,_,d,r){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",{class:(0,n.C_)(["title",{title_checked:d.show_options,disabled:o.disabled}]),onClick:e[0]||(e[0]=t=>r.open_close_options()),onFocusout:e[1]||(e[1]=(...t)=>r.handleFocusOut&&r.handleFocusOut(...t)),tabindex:"0"},[(0,s._)("p",null,(0,n.zw)(o.selected_option.name),1),o.disabled?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,n.C_)(["arrow",{rotate_arrow:d.show_options}])},null,2))],34),(0,s.Wm)(i.uT,{name:"list"},{default:(0,s.w5)((()=>[d.show_options?((0,s.wg)(),(0,s.iD)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.options,(t=>((0,s.wg)(),(0,s.iD)("p",{key:t.value,onClick:e=>r.select_option(t)},(0,n.zw)(t.name),9,a)))),128))])):(0,s.kq)("",!0)])),_:1})])}var d={name:"SelectorVue",props:{options_props:{type:Array,default(){return[]},required:!0},selected_option:{type:Object,required:!0},disabled:{type:Boolean,required:!1,default:!1},idx:{type:Number,required:!1}},data(){return{show_options:!1,options:[]}},mounted(){this.options=[],this.options_props.forEach((t=>this.options.push(t)))},methods:{select_option(t){this.$emit("select",t,this.idx),this.hide_select()},hide_select(){this.show_options=!1},open_close_options(){this.disabled||(this.show_options=!this.show_options)},handleFocusOut(){this.hide_select()}}},r=o(3744);const u=(0,r.Z)(d,[["render",_],["__scopeId","data-v-47580c00"]]);var p=u},1931:function(t,e,o){o.r(e),o.d(e,{default:function(){return _}});var s=o(6252);function n(t,e,o,n,i,c){const l=(0,s.up)("CancelPosition");return(0,s.wg)(),(0,s.j4)(l)}var i=o(129),c={components:{CancelPosition:i.Z}},l=o(3744);const a=(0,l.Z)(c,[["render",n]]);var _=a}}]);
//# sourceMappingURL=about.a89a6268.js.map