"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[734],{9240:function(e,t,s){s.d(t,{Z:function(){return p}});var o=s(3396);const l={class:"z-[46]"};function a(e,t,s,a,c,i){const n=(0,o.up)("NavBar"),d=(0,o.up)("HomeMenu"),u=(0,o.up)("HomeModals");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("header",l,[(0,o.Wm)(n),(0,o.Wm)(d,{class:"z-[46]"})]),(0,o.Wm)(u,{selectedWH:s.selectedWH},null,8,["selectedWH"])],64)}var c=s(3768),i=s(2692),n=s(1621),d={components:{NavBar:c.Z,HomeMenu:i.Z,HomeModals:n.Z},props:{selectedWH:{type:Object,required:!1}},setup(){}},u=s(89);const r=(0,u.Z)(d,[["render",a],["__scopeId","data-v-bb6a9f2e"]]);var p=r},9734:function(e,t,s){s.r(t),s.d(t,{default:function(){return Qe}});var o=s(3396),l=s(7139);const a=e=>((0,o.dD)("data-v-7b5c62ce"),e=e(),(0,o.Cn)(),e),c={class:"app"},i={class:"header"},n={class:"top"},d={class:"flex flex-col items-center"},u={class:"flex flex-col items-start w-fit"},r={class:"text-3xl font-bold text-slate-700"},p={key:0,class:"flex gap-4"},_=["href"],m=a((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"},[(0,o._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.5 10.5L21 3m-5 0h5v5m0 6v5a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5"})],-1))),h={class:"bottom"},f={class:"content"};function v(e,t,s,a,v,g){const y=(0,o.up)("AppHeader"),b=(0,o.up)("AppRadioBtnsGroupUnderlined");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",i,[(0,o._)("div",n,[(0,o.Wm)(y)]),(0,o._)("div",d,[(0,o._)("div",u,[(0,o._)("h1",r,(0,l.zw)(e.$t("Amo.header")),1),a.inFrame?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("span",null,(0,l.zw)(e.$t("Amo.office")),1),(0,o._)("a",{href:`https://${a.subdomain}.amocrm.ru/`,target:"blank",class:"flex items-center gap-1 font-medium text-indigo-600 underline dark:text-indigo-500 hover:no-underline focus:outline-offset-4"},[m,(0,o.Uk)(" "+(0,l.zw)(a.subdomain),1)],8,_)]))])]),(0,o._)("div",h,[(0,o.Wm)(b,{list:a.tabs.list,selected:a.tabs.selected,onSelect:t[0]||(t[0]=e=>a.tabs.select(e))},null,8,["list","selected"])])]),(0,o._)("div",f,[((0,o.wg)(),(0,o.j4)((0,o.LL)(a.tabs.selected.component)))])])}var g=s(9240),y=s(969),b=s(9242);const S=e=>((0,o.dD)("data-v-e1bf24ae"),e=e(),(0,o.Cn)(),e),L={class:"bgc"},w={class:"container"},A=S((()=>(0,o._)("div",{class:"header"},[(0,o._)("div",{class:"top"})],-1))),k={class:"content space-y-12"},D={class:"border-b border-gray-900/10 pb-12"},F={style:{"margin-top":"0"}},C={class:"small"},$={class:"mt-4"},P={for:"lock_reserved_products_edit"},V={class:"steps"},G={class:"border-b border-gray-900/10 pb-12"},H={class:"small"},z={class:"steps"},E={class:"border-b border-gray-900/10 pb-12"},Z={class:"steps"},j={class:"label_input"},W=S((()=>(0,o._)("label",{for:"not_fill_budget"},null,-1))),x={key:0},O={class:"footer"};function U(e,t,s,a,c,i){const n=(0,o.up)("AppMultiSelect"),d=(0,o.up)("SelectorVue"),u=(0,o.up)("btns-save-close");return(0,o.wg)(),(0,o.iD)("div",L,[(0,o._)("div",w,[A,(0,o._)("div",k,[(0,o._)("div",D,[(0,o._)("h6",F,(0,l.zw)(e.$t("Amo.GenSett.stepResH")),1),(0,o._)("div",C,(0,l.zw)(e.$t("Amo.GenSett.stepResT")),1),(0,o._)("div",$,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:"lock_reserved_products_edit","onUpdate:modelValue":t[0]||(t[0]=e=>c.lock_reserved_products_edit=e)},null,512),[[b.e8,c.lock_reserved_products_edit]]),(0,o._)("label",P,(0,l.zw)(e.$t("Amo.GenSett.block")),1)]),(0,o._)("div",V,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.copyPipelinesListV2,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"label_input",key:t},[(0,o._)("label",null,(0,l.zw)(e.$t("Amo.GenSett.hopper",{name:t?.name})),1),(0,o.Wm)(n,{list:[{name:a.t("global.all"),value:"all"},...t?.statuses],placeholder:a.t("EditStuff.stepsRes.placeholder",{count:t?.statuses.filter((e=>e.selected&&"all"!==e.value)).length}),onSelect:e=>i.optionSelectSteps(e,t?.value,"reserve_off")},null,8,["list","placeholder","onSelect"])])))),128))])]),(0,o._)("div",G,[(0,o._)("h6",null,(0,l.zw)(e.$t("Amo.GenSett.stepWOH")),1),(0,o._)("div",H,(0,l.zw)(e.$t("Amo.GenSett.stepWOT")),1),(0,o._)("div",z,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.copyPipelinesListV2,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"label_input",key:t},[(0,o._)("label",null,(0,l.zw)(e.$t("Amo.GenSett.hopper",{name:t?.name})),1),(0,o.Wm)(d,{options_props:[{name:a.t("global.notSelected"),value:-1},...t?.statuses],onSelect:e=>i.optionSelectSteps(e,t?.value,"write_off"),selected_option:t.selectedWriteOff},null,8,["options_props","onSelect","selected_option"])])))),128))])]),(0,o._)("div",E,[(0,o._)("h6",null,(0,l.zw)(e.$t("Amo.GenSett.linkFH")),1),(0,o._)("div",Z,[(0,o._)("div",j,[(0,o._)("label",null,(0,l.zw)(e.$t("Amo.GenSett.linkFBudjet")),1),(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:"not_fill_budget","onUpdate:modelValue":t[1]||(t[1]=e=>c.not_fill_budget=e)},null,512),[[b.e8,c.not_fill_budget]]),W]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.leadsDeals,((t,s)=>((0,o.wg)(),(0,o.iD)("div",{class:"label_input",key:t},[(0,o._)("label",null,[(0,o.Uk)((0,l.zw)(e.$t("Amo.GenSett.field",{name:t?.name}))+" ",1),s>=2?((0,o.wg)(),(0,o.iD)("span",x,(0,l.zw)(e.$t("Amo.GenSett.number")),1)):(0,o.kq)("",!0)]),(0,o.Wm)(d,{options_props:c.leadsDealsList,onSelect:e=>i.optionSelectLeadsDeals(e,t?.code),selected_option:t?.selected},null,8,["options_props","onSelect","selected_option"])])))),128))])])]),(0,o._)("div",O,[(0,o.Wm)(u,{onClose:i.close,onSave:i.save,show_close:!1},{close:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("global.back")),1)])),_:1},8,["onClose","onSave"])])])])}var T=s(7720),B=s(2518),N=s(8711),q=s(2489);const{t:Y}=(0,q.j)();var I={components:{SelectorVue:T.Z,BtnsSaveClose:N.Z,AppMultiSelect:B.Z},setup(){return{t:Y}},data(){return{copyConfing:{reserve_off:[],write_off:[]},copyPipelinesListV2:[],copyLeadFieldsList:[],leadsDeals:[{name:Y("Amo.GenSett.leadsDeals.field_products"),code:"field_products",selected:{name:Y("global.notSelected"),value:-1}},{name:Y("Amo.GenSett.leadsDeals.field_search_products"),code:"field_search_products",selected:{name:Y("global.notSelected"),value:-1}},{name:Y("Amo.GenSett.leadsDeals.field_cost_price"),code:"field_cost_price",selected:{name:Y("global.notSelected"),value:-1}},{name:Y("Amo.GenSett.leadsDeals.field_profit"),code:"field_profit",selected:{name:Y("global.notSelected"),value:-1}},{name:Y("Amo.GenSett.leadsDeals.field_budget"),code:"field_budget",selected:{name:Y("global.notSelected"),value:-1}},{name:Y("Amo.GenSett.leadsDeals.field_nds_sum"),code:"field_nds_sum",selected:{name:Y("global.notSelected"),value:-1}}],leadsDealsList:[],not_fill_budget:!1,lock_reserved_products_edit:!1}},async mounted(){await Promise.all([this.$store.dispatch("get_account"),this.$store.dispatch("getPipelinesListV2"),this.$store.dispatch("getLeadFieldsList")]),this.copyConfing=JSON.parse(JSON.stringify(this.$store.state.account.account.config)),this.copyConfing.reserve_off_v2||(this.copyConfing.reserve_off_v2=[]),this.not_fill_budget=Boolean(this.copyConfing?.not_fill_budget),this.lock_reserved_products_edit=Boolean(this.copyConfing?.lock_reserved_products_edit),this.copyPipelinesListV2=this.pipelinesListV2,this.copyLeadFieldsList=this.leadFieldsList,this.fillLeadsDealsList(),this.searchSelectedPipelines(),this.searchSelectedLeadsDeals()},computed:{pipelinesListV2(){const e=[];return Object.entries(this.$store.state.account.pipelinesListV2).map((t=>{const s=[];t[1].statuses.forEach((e=>s.push({name:e.name,value:e.id,color:e.color,selected:!1}))),t[1].statuses=[...s],t[1].selectedWriteOff={name:Y("global.notSelected"),value:-1},e.push({value:t[0],...t[1]})})),e},leadFieldsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldsList).map((t=>{const s=[];Object.entries(t[1].fields).forEach((e=>s.push({name:e[1],value:e[0]}))),t[1].fields=s,t[1].fields.unshift({name:Y("global.notSelected"),value:-1}),t[1].selected={name:Y("global.notSelected"),value:-1},e.push({value:t[0],...t[1]})})),e}},methods:{save(){const e={not_fill_budget:this.not_fill_budget,lock_reserved_products_edit:this.lock_reserved_products_edit},t=this.$store.state.account.account.config;Object.entries(this.copyConfing).forEach((s=>{t[s[0]]!==s[1]&&(e[s[0]]=s[1])})),this.$store.dispatch("update_account",e),this.close()},close(){this.$store.commit("open_close_edit_stuff",!1)},optionSelectLeadsDeals(e,t){-1==e.value?this.copyConfing[t]="0":this.copyConfing[t]=e.value,this.leadsDeals.map((s=>{s.code==t&&(s.selected=e)}))},include(e,t,s){let o=!1;return e.forEach((e=>{e[s]==t&&(o=!0)})),o},optionSelectSteps(e,t,s){let o=!0;if("reserve_off"!==s){this.include(this.copyConfing[s],t,"field")&&(this.copyConfing[s].map((s=>{s.field==t&&(s.value=e.value)})),o=!1);const l={field:t,value:e.value};o&&this.copyConfing[s].push(l),-1==e.value&&this.copyConfing[s].forEach(((e,o)=>{e.field==t&&this.copyConfing[s].splice(o,1)}))}if(this.copyPipelinesListV2.map((o=>{o.value==t&&"write_off"==s&&(o.selectedWriteOff=e),o.value==t&&"reserve_off"==s&&("all"===e.value&&o.statuses?.forEach((t=>{"all"!==t.value&&(t.selected=!e.selected)})),e.selected=!e.selected)})),"reserve_off"===s){const e=this.copyPipelinesListV2.find((e=>e.value===t)),s=[];if(e?.statuses?.forEach((e=>e.selected&&"all"!=e.value?s.push(e.value):null)),this.copyConfing.reserve_off_v2.find((e=>e.field===t))&&(o=!1),o)this.copyConfing.reserve_off_v2.push({field:t,values:s});else{const e=this.copyConfing.reserve_off_v2.find((e=>e.field===t));e&&(e.values=s)}}},searchSelectedInArr(e,t,s){let o={name:Y("global.notSelected"),value:-1};return t.forEach((t=>{t[s]==e&&(o=t)})),o},searchSelectedPipelines(){this.copyPipelinesListV2.map((e=>{const t=this.copyConfing.write_off.find((t=>t.field==e.value));t&&(e.selectedWriteOff=this.searchSelectedInArr(t.value,e.statuses,"value"));const s=this.copyConfing?.reserve_off_v2?.find((t=>t.field==e.value));e.statuses.map((e=>{s?.values?.includes(e.value)&&(e.selected=!0)}));const o=e.statuses.filter((e=>!e.selected));1===o.length&&"all"===o[0].value&&(e.statuses.find((e=>"all"===e.value)).selected=!0)}))},fillLeadsDealsList(){this.leadsDealsList.push({name:Y("global.notSelected"),value:-1}),this.copyLeadFieldsList.forEach((e=>{const t=e.name;this.leadsDealsList.push({name:t,value:"optgroup"});const s=e.fields.splice(1,999);s.forEach((e=>this.leadsDealsList.push({...e,optgroup:!0})))}))},searchSelectedLeadsDeals(){this.leadsDeals.map((e=>{e.selected=this.searchSelectedInArr(this.copyConfing[e.code],this.leadsDealsList,"value")}))}}},M=s(89);const K=(0,M.Z)(I,[["render",U],["__scopeId","data-v-e1bf24ae"]]);var R=K;const J=e=>((0,o.dD)("data-v-4e13146b"),e=e(),(0,o.Cn)(),e),Q={class:"bgc"},X={class:"container"},ee=J((()=>(0,o._)("div",{class:"header"},null,-1))),te={class:"content space-y-12"},se={class:"sync border-b border-gray-900/10 pb-12"},oe={class:"list"},le={class:"label_input"},ae={class:"label_input"},ce={class:"autosync border-b border-gray-900/10 pb-12"},ie=["id","onUpdate:modelValue"],ne=["for"],de={class:"fields"},ue={class:"small"},re={class:"row"},pe={class:"center"},_e=["onUpdate:modelValue"],me={class:"checkbox_input"},he=["id","onUpdate:modelValue","disabled"],fe=["for"],ve={class:"footer"};function ge(e,t,s,a,c,i){const n=(0,o.up)("SelectorVue"),d=(0,o.up)("btns-save-close");return(0,o.wg)(),(0,o.iD)("div",Q,[(0,o._)("div",X,[ee,(0,o._)("div",te,[(0,o._)("div",se,[(0,o._)("div",oe,[(0,o._)("div",le,[(0,o._)("label",null,(0,l.zw)(e.$t("Amo.SyncSett.header")),1),(0,o.Wm)(n,{options_props:c.copyProductLists,onSelect:t[0]||(t[0]=e=>i.optionSelectSync(e,"amo_product_list")),selected_option:c.selectedAmoProductList},null,8,["options_props","selected_option"])]),(0,o._)("div",ae,[(0,o._)("label",null,(0,l.zw)(e.$t("Amo.SyncSett.hide")),1),(0,o.Wm)(n,{options_props:[{name:a.t("global.notSelected"),value:""},...c.copyLeadFieldGroupsList],onSelect:t[1]||(t[1]=e=>i.optionSelectSync(e,"amo_leads_group_hide")),selected_option:c.selectedAmoLeadsGroupHide},null,8,["options_props","selected_option"])])])]),-1!=c.selectedAmoProductList.value?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",ce,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.autosyncValues,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"list",key:e},[!e.test?.value||a.isTest2?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("h6",null,(0,l.zw)(e.label),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.autosyncProducts,(t=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:t.id},[e.test?.id!==t.id||a.isTest2?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:t.id+e.value,"onUpdate:modelValue":s=>t[e.value]=s},null,8,ie),[[b.e8,t[e.value]]]),(0,o._)("label",{for:t.id+e.value},(0,l.zw)(t.label),9,ne)],64)):(0,o.kq)("",!0)])))),128))],64)):(0,o.kq)("",!0)])))),128))]),(0,o._)("div",de,[(0,o._)("h6",null,(0,l.zw)(e.$t("Amo.SyncSett.corrH")),1),(0,o._)("p",ue,(0,l.zw)(e.$t("Amo.SyncSett.corrT")),1),(0,o._)("div",re,[(0,o._)("span",null,(0,l.zw)(e.$t("Amo.SyncSett.amoName")),1),(0,o._)("span",null,(0,l.zw)(e.$t("Amo.SyncSett.goName")),1),(0,o._)("span",pe,(0,l.zw)(e.$t("Amo.SyncSett.comparison.header")),1)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.copySyncFields.amoFields,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:e.field},[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.name=t,disabled:""},null,8,_e),[[b.nr,e.name]]),(0,o.Wm)(n,{class:"selector",options_props:e.fields,onSelect:e=>i.select(e,t),selected_option:e.selected,disabled:e.disabled},null,8,["options_props","onSelect","selected_option","disabled"]),(0,o._)("div",me,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:e.field,"onUpdate:modelValue":t=>e.product_comparison=t,disabled:e?.product_comparison_disabled},null,8,he),[[b.e8,e.product_comparison]]),(0,o._)("label",{for:e.field},null,8,fe)])])))),128))])],64)):(0,o.kq)("",!0)]),(0,o._)("div",ve,[(0,o.Wm)(d,{onClose:i.close,onSave:i.save,show_close:!1},(0,o.Nv)({close:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.$t("global.back")),1)])),_:2},[void 0]),1032,["onClose","onSave"])])])])}var ye=s(3704);const{t:be}=(0,q.j)();var Se={components:{BtnsSaveClose:N.Z,SelectorVue:T.Z},setup(){return{t:be,isTest2:ye.h}},data(){return{copySyncFields:{fields:[],amoFields:[]},copyConfing:{reserve_off:[],write_off:[]},copyLeadFieldGroupsList:[],copyProductLists:[],selectedAmoProductList:{name:be("global.notSelected"),value:-1},amoLeadsGroupHide:[],selectedAmoLeadsGroupHide:{name:be("global.notSelected"),value:""},fieldsProductComparison:[{name:be("Amo.SyncSett.comparison.name"),value:1},{name:be("Amo.SyncSett.comparison.art"),value:2},{name:be("Amo.SyncSett.comparison.batch"),value:3}],productComparisonSelectedField:{name:be("Amo.SyncSett.comparison.name"),value:1},autosyncProducts:[{id:1,productValue:!1,listProductValue:!1,label:be("Amo.SyncSett.goAmo")},{id:2,productValue:!1,listProductValue:!1,label:be("Amo.SyncSett.amoGo")}],autosyncValues:[{value:"productValue",label:be("Amo.SyncSett.autoSync")},{value:"listProductValue",label:be("Amo.SyncSett.autoSyncOrder"),test:{value:!1,id:2}}]}},async mounted(){await Promise.all([this.$store.dispatch("get_account"),this.$store.dispatch("getProductLists"),this.$store.dispatch("getLeadFieldsList"),this.$store.dispatch("getLeadFieldGroupsList")]),this.copyLeadFieldsList=this.leadFieldsList,this.copyLeadFieldGroupsList=this.leadFieldGroupsList,this.copyConfing=this.$store.state.account.account.config,this.updateFields(),this.fillCopyProductLists(),this.fillAmoLeadsGroupHide(),this.searchSelectedAmoProductList(),this.searchSelectedAmoLeadsGroupHide(),this.searchAutosyncProducts()},computed:{account(){return this.$store.state.account.account},productLists(){return this.$store.state.account.productLists},leadFieldsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldsList).map((t=>{const s=[];Object.entries(t[1].fields).forEach((e=>s.push({name:e[1],value:e[0]}))),t[1].fields=s,t[1].fields.unshift({name:be("global.notSelected"),value:-1}),t[1].selected={name:be("global.notSelected"),value:-1},e.push({value:t[0],...t[1]})})),e},leadFieldGroupsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldGroupsList).forEach((t=>e.push({name:t[1],value:t[0]}))),e}},methods:{save(){const e={auto_sync_products_gs_amo:this.autosyncProducts[0].productValue?1:0,auto_sync_products_amo_gs:this.autosyncProducts[1].productValue?1:0,auto_sync_orders_gs_amo:this.autosyncProducts[0].listProductValue?1:0,auto_sync_orders_amo_gs:this.autosyncProducts[1].listProductValue?1:0};if(-1!=this.selectedAmoProductList.value){const t=[];this.copySyncFields.amoFields.forEach((e=>-1!=e.selected.value?t.push({field:e.field,value:e.selected.value,compare:e.product_comparison?1:0}):null)),t.length&&(e.sync_products_fields=t)}this.$store.dispatch("update_account",Object.assign(this.copyConfing,e)),this.close()},close(){this.$store.commit("openCloseSyncSettings",!1)},async updateFields(){await Promise.all([this.$store.dispatch("getSyncFields"),this.$store.dispatch("get_account")]),this.fillCopySyncFields(),this.searchSelectedSyncFields()},select(e,t){this.copySyncFields.amoFields[t].selected=e},searchSelectedSyncFields(){this.copySyncFields.amoFields.map((e=>{this.$store.state.account.account?.config?.sync_products_fields?.forEach((t=>{if(t.field==e.field){const s=this.copySyncFields.fields[e.type].filter((e=>e.value==t.value));s.length&&(e.selected=s[0],e.product_comparison=!!t?.compare)}}))}))},fillCopySyncFields(){const e=this.$store.state.account.syncFields,t=e.fields,s=[];Object.entries(t).forEach((e=>{const t=[{name:be("global.notSelected"),value:-1}];Object.entries(e[1]).forEach((e=>t.push({name:e[1],value:e[0]}))),s[e[0]]=t})),this.copySyncFields.fields=s;const o=e.amo_fields,l=[];Object.entries(o).forEach((e=>l.push({name:e[1].name,type:e[1].type,fields:s[e[1].type],field:e[0],selected:{name:be("global.notSelected"),value:-1},disabled:0,product_comparison:!1}))),this.copySyncFields.amoFields=l},fillCopyProductLists(){const e=[{name:be("global.notSelected"),value:-1}];Object.entries(this.productLists).forEach((t=>e.push({name:t[1],value:t[0]}))),this.copyProductLists=e},searchSelectedAmoProductList(){this.copyProductLists.forEach((e=>{e.value==this.copyConfing.amo_product_list&&(this.selectedAmoProductList=e)}))},optionSelectSync(e,t){-1==e.value?this.copyConfing[t]="0":this.copyConfing[t]=e.value,"amo_leads_group_hide"==t&&(this.selectedAmoLeadsGroupHide=e),"amo_product_list"==t&&(this.selectedAmoProductList=e)},fillAmoLeadsGroupHide(){this.amoLeadsGroupHide.push({name:be("global.notSelected"),value:""}),this.copyLeadFieldsList.forEach((e=>{this.amoLeadsGroupHide.push({name:e.name,value:e.value})}))},searchSelectedAmoLeadsGroupHide(){this.leadFieldGroupsList.forEach((e=>{e.value==this.copyConfing?.amo_leads_group_hide&&(this.selectedAmoLeadsGroupHide=e)}))},searchAutosyncProducts(){this.autosyncProducts[0].productValue=!!this.account?.config?.auto_sync_products_gs_amo,this.autosyncProducts[1].productValue=!!this.account?.config?.auto_sync_products_amo_gs,this.autosyncProducts[0].listProductValue=!!this.account?.config?.auto_sync_orders_gs_amo,this.autosyncProducts[1].listProductValue=!!this.account?.config?.auto_sync_orders_amo_gs},selectProductComparisonField(e){this.productComparisonSelectedField=e}}};const Le=(0,M.Z)(Se,[["render",ge],["__scopeId","data-v-4e13146b"]]);var we=Le;const Ae=e=>((0,o.dD)("data-v-12405498"),e=e(),(0,o.Cn)(),e),ke={class:"bgc"},De={class:"container"},Fe=Ae((()=>(0,o._)("div",{class:"header"},null,-1))),Ce={class:"content"},$e={class:"binding space-y-12"},Pe={class:"header mb-2"},Ve={class:"patterns border-b border-gray-900/10 pb-12"},Ge={class:"main"},He={class:"column"},ze={class:"label_select"},Ee={class:"label_select"},Ze={class:"header mb-2"},je={class:"main mb-4 border-b border-gray-900/10 pb-12"},We={class:"column"},xe={class:"grid grid-cols-[3fr_4fr] items-center gap-2"},Oe={class:"grid grid-cols-[3fr_4fr] items-center gap-2"},Ue={class:"footer"},Te={class:"save"};function Be(e,t,s,a,c,i){const n=(0,o.up)("SelectorVue"),d=(0,o.up)("btns-save-close");return(0,o.wg)(),(0,o.iD)("div",ke,[(0,o._)("div",De,[Fe,(0,o._)("div",Ce,[(0,o._)("div",$e,[(0,o._)("div",null,[(0,o._)("div",Pe,(0,l.zw)(e.$t("DocumentSetting.templLink")),1),(0,o._)("div",Ve,[(0,o._)("div",Ge,[(0,o._)("div",He,[(0,o._)("div",ze,[(0,o._)("label",null,(0,l.zw)(e.$t("DocumentSetting.docField")),1),(0,o.Wm)(n,{options_props:a.leadFields.list,onSelect:t[0]||(t[0]=e=>a.leadFields.select(e)),selected_option:a.leadFields.selected},null,8,["options_props","selected_option"])]),(0,o._)("div",Ee,[(0,o._)("label",null,(0,l.zw)(e.$t("DocumentSetting.contOrder")),1),(0,o.Wm)(n,{options_props:a.contactNameType.list,onSelect:t[1]||(t[1]=e=>a.contactNameType.select(e)),selected_option:a.contactNameType.selected},null,8,["options_props","selected_option"])])])])])]),(0,o._)("div",null,[(0,o._)("div",Ze,(0,l.zw)(e.$t("DocumentSetting.hooks")),1),(0,o._)("div",je,[(0,o._)("div",We,[(0,o._)("div",xe,[(0,o._)("label",null,(0,l.zw)(e.$t("DocumentSetting.hookDown")),1),(0,o.wy)((0,o._)("input",{type:"text",class:"input inputhuk my-2","onUpdate:modelValue":t[2]||(t[2]=e=>a.hooks.download=e)},null,512),[[b.nr,a.hooks.download]])]),(0,o._)("div",Oe,[(0,o._)("label",null,(0,l.zw)(e.$t("DocumentSetting.hookGen")),1),(0,o.wy)((0,o._)("input",{type:"text",class:"input inputhuk my-2","onUpdate:modelValue":t[3]||(t[3]=e=>a.hooks.generateDoc=e)},null,512),[[b.nr,a.hooks.generateDoc]])])])])])])]),(0,o._)("div",Ue,[(0,o._)("div",Te,[(0,o.Wm)(d,{onSave:a.save,show_close:!1},null,8,["onSave"])])])])])}var Ne=s(4870),qe=s(4581),Ye={components:{SelectorVue:T.Z,BtnsSaveClose:N.Z},setup(){const{t:e}=(0,q.j)(),t=(0,Ne.qj)({selected:{name:e("global.notSelected"),value:1},list:[],itialList:(0,o.Fl)((()=>{const t=[];return Object.entries(qe.Z.state.account.leadFieldsList).map((s=>{const o=[];Object.entries(s[1].fields).forEach((e=>o.push({name:e[1],value:e[0]}))),s[1].fields=o,s[1].fields.unshift({name:e("global.notSelected"),value:-1}),s[1].selected={name:e("global.notSelected"),value:-1},t.push({value:s[0],...s[1]})})),t})),select:function(e){this.selected=e},setList:function(){this.list.push({name:e("global.notSelected"),value:-1}),this.itialList.forEach((e=>{const t=e.name;this.list.push({name:t,value:"optgroup"});const s=e.fields.splice(1,999);s.forEach((e=>this.list.push({...e,optgroup:!0})))})),this.list.forEach((e=>e.value==qe.Z.state.documents.config.field_docs?this.selected=e:null))}}),s=(0,Ne.qj)({selected:{name:e("global.notSelected"),value:-1},list:[],select:function(e){this.selected=e},setList:function(){qe.Z.state.documents.config.contact_name_types?.forEach(((e,t)=>this.list.push({name:e,value:t}))),this.list?.forEach((e=>e.value==qe.Z.state.account.account?.config?.contact_name_type?this.selected=e:null))}}),l=(0,Ne.qj)({download:"",generateDoc:""}),a=(0,o.Fl)((()=>qe.Z.state.account.account));(0,o.bv)((async()=>{await Promise.all([qe.Z.dispatch("get_account"),qe.Z.dispatch("get_documents_v2"),qe.Z.dispatch("getLeadFieldsList")]),l.download=a.value.config?.hook_download,l.generateDoc=a.value.config?.hook_generate_doc,t.setList(),s.setList()}));const c=()=>{qe.Z.dispatch("update_account",{hook_download:l.download,hook_generate_doc:l.generateDoc,field_docs:t.selected.value,contact_name_type:s.selected.value})};return{leadFields:t,contactNameType:s,save:c,hooks:l}}};const Ie=(0,M.Z)(Ye,[["render",Be],["__scopeId","data-v-12405498"]]);var Me=Ie,Ke=s(1952),Re={name:"InstructionsView",components:{AppHeader:g.Z,AppRadioBtnsGroupUnderlined:y.Z,AmoCrmGeneralSettings:R,AmoCrmSyncSettings:we,AmoCrmDocumentsSettings:Me},setup(){const{t:e}=(0,q.j)(),t=(0,Ne.qj)({selected:{},list:[{name:e("Amo.tabs.general"),value:"general",component:"AmoCrmGeneralSettings",default:!0},{name:e("Amo.tabs.sync"),value:"sync",component:"AmoCrmSyncSettings"},{name:e("Amo.tabs.docs"),value:"docs",component:"AmoCrmDocumentsSettings"}],select:function(e){this.selected=e},dropToDefault:function(){const e=this.list.find((e=>e.default));e&&this.select(e)}});t.dropToDefault();const s=(0,o.Fl)((()=>qe.Z.state.account.account?.subdomain));return{tabs:t,subdomain:s,inFrame:Ke.V}}};const Je=(0,M.Z)(Re,[["render",v],["__scopeId","data-v-7b5c62ce"]]);var Qe=Je}}]);
//# sourceMappingURL=734.87d62033.js.map