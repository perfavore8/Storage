(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[211],{6135:function(e,t,s){"use strict";var a=s(4948),l=s(3070),r=s(9114);e.exports=function(e,t,s){var o=a(t);o in e?l.f(e,o,r(0,s)):e[o]=s}},2914:function(e,t,s){var a=s(7293),l=s(9114);e.exports=!a((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",l(1,7)),7!==e.stack)}))},9974:function(e,t,s){var a=s(1702),l=s(9662),r=s(4374),o=a(a.bind);e.exports=function(e,t){return l(e),void 0===t?e:r?o(e,t):function(){return e.apply(t,arguments)}}},1246:function(e,t,s){var a=s(648),l=s(8173),r=s(7497),o=s(5112),n=o("iterator");e.exports=function(e){if(void 0!=e)return l(e,n)||l(e,"@@iterator")||r[a(e)]}},8554:function(e,t,s){var a=s(6916),l=s(9662),r=s(9670),o=s(6330),n=s(1246),i=TypeError;e.exports=function(e,t){var s=arguments.length<2?n(e):t;if(l(s))return r(a(s,e));throw i(o(e)+" is not iterable")}},7659:function(e,t,s){var a=s(5112),l=s(7497),r=a("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(l.Array===e||o[r]===e)}},4411:function(e,t,s){var a=s(1702),l=s(7293),r=s(614),o=s(648),n=s(5005),i=s(2788),c=function(){},p=[],u=n("Reflect","construct"),d=/^\s*(?:class|function)\b/,y=a(d.exec),m=!d.exec(c),h=function(e){if(!r(e))return!1;try{return u(c,p,e),!0}catch(t){return!1}},v=function(e){if(!r(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!y(d,i(e))}catch(t){return!0}};v.sham=!0,e.exports=!u||l((function(){var e;return h(h.call)||!h(Object)||!h((function(){e=!0}))||e}))?v:h},408:function(e,t,s){var a=s(9974),l=s(6916),r=s(9670),o=s(6330),n=s(7659),i=s(6244),c=s(7976),p=s(8554),u=s(1246),d=s(9212),y=TypeError,m=function(e,t){this.stopped=e,this.result=t},h=m.prototype;e.exports=function(e,t,s){var v,g,f,w,A,b,R,_=s&&s.that,F=!(!s||!s.AS_ENTRIES),k=!(!s||!s.IS_ITERATOR),S=!(!s||!s.INTERRUPTED),T=a(t,_),D=function(e){return v&&d(v,"normal",e),new m(!0,e)},C=function(e){return F?(r(e),S?T(e[0],e[1],D):T(e[0],e[1])):S?T(e,D):T(e)};if(k)v=e;else{if(g=u(e),!g)throw y(o(e)+" is not iterable");if(n(g)){for(f=0,w=i(e);w>f;f++)if(A=C(e[f]),A&&c(h,A))return A;return new m(!1)}v=p(e,g)}b=v.next;while(!(R=l(b,v)).done){try{A=C(R.value)}catch(I){d(v,"throw",I)}if("object"==typeof A&&A&&c(h,A))return A}return new m(!1)}},9212:function(e,t,s){var a=s(6916),l=s(9670),r=s(8173);e.exports=function(e,t,s){var o,n;l(e);try{if(o=r(e,"return"),!o){if("throw"===t)throw s;return s}o=a(o,e)}catch(i){n=!0,o=i}if("throw"===t)throw s;if(n)throw o;return l(o),s}},7497:function(e){e.exports={}},7066:function(e,t,s){"use strict";var a=s(9670);e.exports=function(){var e=a(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},4706:function(e,t,s){var a=s(6916),l=s(2597),r=s(7976),o=s(7066),n=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in n||l(e,"flags")||!r(n,e)?t:a(o,e)}},8053:function(e){var t=TypeError;e.exports=function(e,s){if(e<s)throw t("Not enough arguments");return e}},1295:function(e,t,s){var a=s(1913),l=s(2109),r=s(7854),o=s(5005),n=s(1702),i=s(7293),c=s(9711),p=s(614),u=s(4411),d=s(111),y=s(2190),m=s(408),h=s(9670),v=s(648),g=s(2597),f=s(6135),w=s(8880),A=s(6244),b=s(8053),R=s(4706),_=s(2914),F=r.Object,k=r.Date,S=r.Error,T=r.EvalError,D=r.RangeError,C=r.ReferenceError,I=r.SyntaxError,L=r.TypeError,x=r.URIError,M=r.PerformanceMark,q=r.WebAssembly,E=q&&q.CompileError||S,O=q&&q.LinkError||S,P=q&&q.RuntimeError||S,j=o("DOMException"),z=o("Set"),B=o("Map"),$=B.prototype,H=n($.has),Z=n($.get),Y=n($.set),U=n(z.prototype.add),G=o("Object","keys"),V=n([].push),N=n((!0).valueOf),W=n(1..valueOf),K=n("".valueOf),J=n(k.prototype.getTime),Q=c("structuredClone"),X="DataCloneError",ee="Transferring",te=function(e){return!i((function(){var t=new r.Set([7]),s=e(t),a=e(F(7));return s==t||!s.has(7)||"object"!=typeof a||7!=a}))&&e},se=function(e){return!i((function(){var t=new S,s=e({a:t,b:t});return!(s&&s.a===s.b&&s.a instanceof S)}))},ae=function(e){return!i((function(){var t=e(new r.AggregateError([1],Q,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=Q||3!=t.cause}))},le=r.structuredClone,re=a||!se(le)||!ae(le),oe=!le&&te((function(e){return new M(Q,{detail:e}).detail})),ne=te(le)||oe,ie=function(e){throw new j("Uncloneable type: "+e,X)},ce=function(e,t){throw new j((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",X)},pe=function(e,t){if(y(e)&&ie("Symbol"),!d(e))return e;if(t){if(H(t,e))return Z(t,e)}else t=new B;var s,a,l,n,i,c,m,h,b,M,q=v(e),$=!1;switch(q){case"Array":l=[],$=!0;break;case"Object":l={},$=!0;break;case"Map":l=new B,$=!0;break;case"Set":l=new z,$=!0;break;case"RegExp":l=new RegExp(e.source,R(e));break;case"Error":switch(a=e.name,a){case"AggregateError":l=o("AggregateError")([]);break;case"EvalError":l=T();break;case"RangeError":l=D();break;case"ReferenceError":l=C();break;case"SyntaxError":l=I();break;case"TypeError":l=L();break;case"URIError":l=x();break;case"CompileError":l=E();break;case"LinkError":l=O();break;case"RuntimeError":l=P();break;default:l=S()}$=!0;break;case"DOMException":l=new j(e.message,e.name),$=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":s=r[q],d(s)||ce(q),l=new s(pe(e.buffer,t),e.byteOffset,"DataView"===q?e.byteLength:e.length);break;case"DOMQuad":try{l=new DOMQuad(pe(e.p1,t),pe(e.p2,t),pe(e.p3,t),pe(e.p4,t))}catch(V){ne?l=ne(e):ce(q)}break;case"FileList":if(s=r.DataTransfer,u(s)){for(n=new s,i=0,c=A(e);i<c;i++)n.items.add(pe(e[i],t));l=n.files}else ne?l=ne(e):ce(q);break;case"ImageData":try{l=new ImageData(pe(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(V){ne?l=ne(e):ce(q)}break;default:if(ne)l=ne(e);else switch(q){case"BigInt":l=F(e.valueOf());break;case"Boolean":l=F(N(e));break;case"Number":l=F(W(e));break;case"String":l=F(K(e));break;case"Date":l=new k(J(e));break;case"ArrayBuffer":s=r.DataView,s||"function"==typeof e.slice||ce(q);try{if("function"==typeof e.slice)l=e.slice(0);else for(c=e.byteLength,l=new ArrayBuffer(c),b=new s(e),M=new s(l),i=0;i<c;i++)M.setUint8(i,b.getUint8(i))}catch(V){throw new j("ArrayBuffer is detached",X)}break;case"SharedArrayBuffer":l=e;break;case"Blob":try{l=e.slice(0,e.size,e.type)}catch(V){ce(q)}break;case"DOMPoint":case"DOMPointReadOnly":s=r[q];try{l=s.fromPoint?s.fromPoint(e):new s(e.x,e.y,e.z,e.w)}catch(V){ce(q)}break;case"DOMRect":case"DOMRectReadOnly":s=r[q];try{l=s.fromRect?s.fromRect(e):new s(e.x,e.y,e.width,e.height)}catch(V){ce(q)}break;case"DOMMatrix":case"DOMMatrixReadOnly":s=r[q];try{l=s.fromMatrix?s.fromMatrix(e):new s(e)}catch(V){ce(q)}break;case"AudioData":case"VideoFrame":p(e.clone)||ce(q);try{l=e.clone()}catch(V){ie(q)}break;case"File":try{l=new File([e],e.name,e)}catch(V){ce(q)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ce(q);default:ie(q)}}if(Y(t,e,l),$)switch(q){case"Array":case"Object":for(m=G(e),i=0,c=A(m);i<c;i++)h=m[i],f(l,h,pe(e[h],t));break;case"Map":e.forEach((function(e,s){Y(l,pe(s,t),pe(e,t))}));break;case"Set":e.forEach((function(e){U(l,pe(e,t))}));break;case"Error":w(l,"message",pe(e.message,t)),g(e,"cause")&&w(l,"cause",pe(e.cause,t)),"AggregateError"==a&&(l.errors=pe(e.errors,t));case"DOMException":_&&w(l,"stack",pe(e.stack,t))}return l},ue=le&&!i((function(){var e=new ArrayBuffer(8),t=le(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),de=function(e,t){if(!d(e))throw L("Transfer option cannot be converted to a sequence");var s=[];m(e,(function(e){V(s,h(e))}));var a,l,o,n,i,c,y,g=0,f=A(s);if(ue){n=le(s,{transfer:s});while(g<f)Y(t,s[g],n[g++])}else while(g<f){if(a=s[g++],H(t,a))throw new j("Duplicate transferable",X);switch(l=v(a),l){case"ImageBitmap":o=r.OffscreenCanvas,u(o)||ce(l,ee);try{c=new o(a.width,a.height),y=c.getContext("bitmaprenderer"),y.transferFromImageBitmap(a),i=c.transferToImageBitmap()}catch(w){}break;case"AudioData":case"VideoFrame":p(a.clone)&&p(a.close)||ce(l,ee);try{i=a.clone(),a.close()}catch(w){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ce(l,ee)}if(void 0===i)throw new j("This object cannot be transferred: "+l,X);Y(t,a,i)}};l({global:!0,enumerable:!0,sham:!ue,forced:re},{structuredClone:function(e){var t,s=b(arguments.length,1)>1&&null!=arguments[1]?h(arguments[1]):void 0,a=s?s.transfer:void 0;return void 0!==a&&(t=new B,de(a,t)),pe(e,t)}})},9378:function(e,t,s){"use strict";s.d(t,{I:function(){return o}});var a=s(1120),l=s(4870);const r=(0,l.qj)({type:"",value:""});function o(){const e=()=>{r.type="",r.value=""},t=(e,t)=>{r.type=e,r.value=t,a.Z.push("/analytics")},s=(t,s,a)=>{const l=t.find((e=>e.name===r.type));void 0!==l&&r.type&&r.value?(s({name:r.value,value:r.value},l.name,l.id),a(),e()):e()};return{followStep1:t,followStep2:s}}},1897:function(e,t,s){"use strict";s.d(t,{Z:function(){return y}});var a=s(3396);const l=e=>((0,a.dD)("data-v-580fb103"),e=e(),(0,a.Cn)(),e),r={class:"date_range"},o=["value"],n=l((()=>(0,a._)("span",null," - ",-1))),i=["value"];function c(e,t,s,l,c,p){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("input",{type:"date",value:s.dateStart?l.pattern("/","-",s.dateStart):l.pattern("/","-",s.dateRange?.split("-")[0]),onInput:t[0]||(t[0]=t=>(e.$emit("update:dateStart",l.pattern("-","/",t.target.value)?.split("-").join("/")),e.$emit("update:dateRange",l.pattern("-","/",t.target.value)?.split("-").join("/")+"-"+s.dateRange?.split("-")[1])))},null,40,o),n,(0,a._)("input",{type:"date",value:s.dateEnd?l.pattern("/","-",s.dateEnd):l.pattern("/","-",s.dateRange?.split("-")[1]),onInput:t[1]||(t[1]=t=>(e.$emit("update:dateEnd",l.pattern("-","/",t.target.value)?.split("-").join("/")),e.$emit("update:dateRange",s.dateRange?.split("-")[0]+"-"+l.pattern("-","/",t.target.value)?.split("-").join("/"))))},null,40,i)])}var p={props:{dateStart:{type:String,required:!1},dateEnd:{type:String,required:!1},dateRange:{type:String,required:!1}},setup(){const e=(e,t,s)=>s?.split(e)?.join(t);return{pattern:e}}},u=s(89);const d=(0,u.Z)(p,[["render",c],["__scopeId","data-v-580fb103"]]);var y=d},9240:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(3396);const l={class:"z-[46]"};function r(e,t,s,r,o,n){const i=(0,a.up)("NavBar"),c=(0,a.up)("HomeMenu"),p=(0,a.up)("HomeModals");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("header",l,[(0,a.Wm)(i),(0,a.Wm)(c,{class:"z-[46]"})]),(0,a.Wm)(p,{selectedWH:s.selectedWH},null,8,["selectedWH"])],64)}var o=s(3768),n=s(2692),i=s(1621),c={components:{NavBar:o.Z,HomeMenu:n.Z,HomeModals:i.Z},props:{selectedWH:{type:Object,required:!1}},setup(){}},p=s(89);const u=(0,p.Z)(c,[["render",r],["__scopeId","data-v-bb6a9f2e"]]);var d=u},7570:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(3396),l=s(7139);const r={class:"grid gap-3"},o=["disabled"],n={class:"current d"};function i(e,t,s,i,c,p){return(0,a.wg)(),(0,a.iD)("div",r,[s.page.current!=s.page.first&&null!=s.page.prev?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>i.prev()),disabled:s.disabled,class:"a"},(0,l.zw)("<"),8,o)):(0,a.kq)("",!0),s.page.current!=s.page.first&&s.page.prev!=s.page.first&&null!=s.page.first?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:t[1]||(t[1]=e=>i.first()),class:"b"},(0,l.zw)(s.page.first),1)):(0,a.kq)("",!0),s.page.current!=s.page.first&&null!=s.page.prev?((0,a.wg)(),(0,a.iD)("button",{key:2,onClick:t[2]||(t[2]=e=>i.prev()),class:"c"},(0,l.zw)(s.page.prev),1)):(0,a.kq)("",!0),(0,a._)("button",n,(0,l.zw)(s.page.current),1),s.page.current!=s.page.last&&null!=s.page.next?((0,a.wg)(),(0,a.iD)("button",{key:3,onClick:t[3]||(t[3]=e=>i.next()),class:"e"},(0,l.zw)(s.page.next),1)):(0,a.kq)("",!0),s.page.current!=s.page.last&&s.page.next!=s.page.last&&null!=s.page.last?((0,a.wg)(),(0,a.iD)("button",{key:4,onClick:t[4]||(t[4]=e=>i.last()),class:"f"},(0,l.zw)(s.page.last),1)):(0,a.kq)("",!0),s.page.current!=s.page.last&&null!=s.page.next?((0,a.wg)(),(0,a.iD)("button",{key:5,onClick:t[5]||(t[5]=e=>i.next()),class:"g"},(0,l.zw)(">"))):(0,a.kq)("",!0)])}var c={props:{page:Object,disabled:Boolean},emits:{changePage(e){return e>0&&"number"===typeof e}},setup(e,t){const s=()=>t.emit("changePage",e.page.first),a=()=>t.emit("changePage",e.page.current-1),l=()=>t.emit("changePage",e.page.current+1),r=()=>t.emit("changePage",e.page.last);return{prev:a,first:s,next:l,last:r}}},p=s(89);const u=(0,p.Z)(c,[["render",i],["__scopeId","data-v-3934a00d"]]);var d=u},1970:function(e,t,s){"use strict";s.d(t,{Z:function(){return p}});var a=s(3396),l=s(7139);const r=["onClick","disabled"];function o(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",{class:(0,l.C_)(["btns_group",{small:s.small}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.list,((t,n)=>((0,a.wg)(),(0,a.iD)("button",{class:(0,l.C_)(["btn relative flex justify-center items-center",{selected:s.selected.value===t.value,small_btn:s.small}]),key:t.value,onClick:e=>o.select(t),disabled:s.disabled},[(0,a.Uk)((0,l.zw)(t.name)+" ",1),(0,a.WI)(e.$slots,"item"+n,{},void 0,!0)],10,r)))),128))],2)}var n={props:{list:Array,selected:Object,disabled:{type:Boolean,required:!1},small:{type:Boolean,required:!1}},setup(e,t){const s=e=>t.emit("select",e);return{select:s}}},i=s(89);const c=(0,i.Z)(n,[["render",o],["__scopeId","data-v-1e6958a2"]]);var p=c},8701:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(3396),l=s(7139),r=s(9242);const o={class:"filter"},n=["placeholder"];function i(e,t,s,i,c,p){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("button",{onClick:t[0]||(t[0]=e=>4==c.option?c.option=0:c.option+=1),class:"type_btn"},[(0,a._)("span",{class:(0,l.C_)({big:0==c.option})},(0,l.zw)(c.options[c.option]),3)]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.filterValue=e),type:"number",placeholder:s.item.placeholder},null,8,n),[[r.nr,c.filterValue,void 0,{number:!0}]])])}var c={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:0,filterValue:null,options:["=",">",">=","<","<="]}},computed:{option_value(){return{option:this.options[this.option],value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,a.Y3)((()=>{this.filterValue=this.item.value,null==this.item.value&&(this.option=0)}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}},p=s(89);const u=(0,p.Z)(c,[["render",i],["__scopeId","data-v-0224ed7d"]]);var d=u},6515:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(3396),l=s(7139);function r(e,t,s,r,o,n){const i=(0,a.up)("AppPaginator"),c=(0,a.up)("selector-vue");return s.show?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,l.C_)(["bottom",{blur:s.blur}])},[s.showBtns?((0,a.wg)(),(0,a.j4)(i,{key:0,page:s.page,disabled:s.disabled,onChangePage:n.changePage},null,8,["page","disabled","onChangePage"])):(0,a.kq)("",!0),s.showSelector?((0,a.wg)(),(0,a.j4)(c,{key:1,disabled:s.disabled,class:"count",options_props:o.count_values,selected_option:{name:s.count,value:-1},onSelect:n.change_count},null,8,["disabled","options_props","selected_option","onSelect"])):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)}var o=s(7720),n=s(7570),i={components:{SelectorVue:o.Z,AppPaginator:n.Z},props:{previous:{type:Boolean,required:!1},next:{type:Boolean,required:!1},page:{type:Object,required:!1,default(){return{first:1,prev:null,current:1,next:null,last:1}}},count:{type:Number,required:!0},blur:{type:Boolean,required:!1,default:!1},show:{type:Boolean,required:!1,default:!0},showBtns:{type:Boolean,required:!1,default:!0},showSelector:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1}},emits:{changePage:null,changeCount:null},data(){return{count_values:[]}},async mounted(){await this.$store.dispatch("get_account"),this.$store.state.account.user.config.per_pages&&(this.count_values=[...this.$store.state.account.user.config.per_pages].map(((e,t)=>({name:e,value:t}))))},computed:{},methods:{changePage(e){this.$emit("changePage",e)},change_count(e){this.$emit("changeCount",e.name)}}},c=s(89);const p=(0,c.Z)(i,[["render",r],["__scopeId","data-v-4bee144d"]]);var u=p},6211:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return yt}});var a=s(3396),l=s(7139);const r=e=>((0,a.dD)("data-v-4f26cb74"),e=e(),(0,a.Cn)(),e),o={class:"header"},n={class:"content"},i={class:"top"},c={class:"filters"},p={class:"row"},u={class:"type self-start items-center"},d=["onClick"],y={key:0,class:"material-icons-round"},m=r((()=>(0,a._)("span",{class:"material-icons-outlined"}," upload_file ",-1))),h=[m],v={key:0},g=["href"],f={key:0,class:"inline-flex items-center gap-2"};function w(e,t,s,r,m,w){const A=(0,a.up)("ReportCreateModal"),b=(0,a.up)("AppHeader"),R=(0,a.up)("AppRadioBtnsGroupUnderlined"),_=(0,a.up)("ReportFIlters"),F=(0,a.up)("ReportChartsFilter"),k=(0,a.up)("ReportGrid"),S=(0,a.up)("GridBottom"),T=(0,a.up)("ReportCharts"),D=(0,a.up)("AppRadioBtnsGroup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.showReportCreate?((0,a.wg)(),(0,a.j4)(A,{key:0})):(0,a.kq)("",!0),(0,a._)("div",{class:(0,l.C_)(["app",{blur:m.openSelectedReportModal}])},[(0,a._)("div",o,[(0,a.Wm)(b)]),(0,a._)("div",n,[(0,a._)("div",i,[w.isChartsView?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(R,{key:0,class:"w-full",list:m.reportType.list.filter((e=>!r.currentExeptions.analytics.tabs[e.value]?.deny)),selected:m.reportType.selected,onSelect:w.changeReportType},null,8,["list","selected","onSelect"]))]),(0,a._)("div",c,[(0,a._)("div",p,[(0,a._)("div",u,[r.isTest?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(m.view.list,((e,t)=>((0,a.wg)(),(0,a.iD)("button",{class:(0,l.C_)(["btn",{selected:m.view.selected.value===e.value}]),key:e.value,onClick:t=>m.view.select(e)},[(m.view.list.indexOf(m.view.list.find((e=>e.value===m.view.selected.value)))+1)%m.view.list.length==t?((0,a.wg)(),(0,a.iD)("span",y,(0,l.zw)(e.class),1)):(0,a.kq)("",!0)],10,d)))),128)):(0,a.kq)("",!0),(0,a._)("button",{class:"test_btn",title:"Экспорт в xlsx",onClick:t[0]||(t[0]=e=>w.exportXlsx())},h)]),(0,a.Wm)(_,{reportType:m.reportType.selected.value,ref:"filters",onGetFilter:w.getFilter},null,8,["reportType","onGetFilter"])]),w.isChartsView?((0,a.wg)(),(0,a.j4)(F,{key:0,ref:"ChartsFilters",onGetFilter:w.getFilter},null,8,["onGetFilter"])):(0,a.kq)("",!0)]),"table"===m.view.selected.value?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)(k,{title:m.title,reportsData:m.reports,reportType:m.reportType.selected.value,isLoading:m.isLoading,total:m.total,onUpdateOpenSelectedReportModal:w.updateOpenSelectedReportModal,onUpdateOpenedRows:w.updateOpenedRows,onUpdateSelectedReport:w.updateSelectedReport,onSort:w.sort,ref:"grid"},(0,a.Nv)({_:2},["stuffMove"===m.reportType.selected.value?{name:"item_title",fn:(0,a.w5)((({title:e,item:t})=>[e?.type||"customers"!==m.reportType.selected.value&&"leads"==e?.code?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",v,[t.amo_lead_id&&w.accountSubdomain?((0,a.wg)(),(0,a.iD)("a",{key:0,class:"underline text-[#8cb4ff] decoration-[#3f3f3faf] underline-offset-2 hover:no-underline",target:"black",href:"https://"+w.accountSubdomain+".amocrm.ru/leads/detail/"+t.amo_lead_id},(0,l.zw)(t?.[e?.code]),9,g)):((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Uk)((0,l.zw)(t?.[e?.code]),1)],64))]))])),key:"0"}:void 0]),1032,["title","reportsData","reportType","isLoading","total","onUpdateOpenSelectedReportModal","onUpdateOpenedRows","onUpdateSelectedReport","onSort"]),(0,a.Wm)(S,{page:w.page,show:0!=m.reports.data?.length,count:e.count,showBtns:w.showGridBottom,showSelector:!1,onChangePage:w.changePage,onChangeCount:e.changeCount},null,8,["page","show","count","showBtns","onChangePage","onChangeCount"])],64)):((0,a.wg)(),(0,a.j4)(T,{key:1,chartType:m.view.selected.value},null,8,["chartType"]))])],2),((0,a.wg)(),(0,a.j4)(a.lR,{to:"#report_count_area"},["customers"===m.reportType.selected.value?((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("span",null,(0,l.zw)(e.$t("Analytics.group")),1),(0,a.Wm)(D,{list:m.groupBy.list,selected:m.groupBy.selected,small:!0,onSelect:m.groupBy.select},null,8,["list","selected","onSelect"])])):(0,a.kq)("",!0)]))],64)}var A=s(65),b=s(9242);const R=e=>((0,a.dD)("data-v-46e5a8a6"),e=e(),(0,a.Cn)(),e),_={class:"flex flex-col gap-5 w-full"},F={class:"row"},k={class:"left"},S={class:"flex flex-col w-full gap-3"},T={class:"filters"},D=R((()=>(0,a._)("span",{class:"material-icons-outlined"}," add ",-1))),C=[D],I={class:"btns"},L={class:"row selected_row"},x=["onClick"],M=R((()=>(0,a._)("div",{class:"icon"},null,-1)));function q(e,t,s,r,o,n){const i=(0,a.up)("AppDateRange"),c=(0,a.up)("AppInputSelect"),p=(0,a.up)("AppMultiSelect"),u=(0,a.up)("FilterNumber"),d=(0,a.up)("SelectorVue");return(0,a.wg)(),(0,a.iD)("div",_,[(0,a._)("div",F,[(0,a._)("div",k,[(0,a._)("div",S,[(0,a._)("div",T,[(0,a.Wm)(i,{dateStart:r.dateStart,"onUpdate:dateStart":t[0]||(t[0]=e=>r.dateStart=e),dateEnd:r.dateEnd,"onUpdate:dateEnd":t[1]||(t[1]=e=>r.dateEnd=e)},null,8,["dateStart","dateEnd"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.fields,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{list:r.selected_field_autocomplete_list,countLettersReq:e.minLength,placeholder:e.placeholder,onChangeInputValue:t=>r.changeInputValue(t,e.name),onSelect:t=>r.selectField(t,e.name,e.id),onFocusin:t=>r.selected_field_autocomplete=e.name,onFocusout:t[2]||(t[2]=e=>r.selected_field_autocomplete=null),key:e.id},null,8,["list","countLettersReq","placeholder","onChangeInputValue","onSelect","onFocusin"])),[[b.F8,e.typesShow.includes(s.reportType)]]))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.multiSelectorData,(e=>((0,a.wg)(),(0,a.j4)(p,{key:e.id,list:e.list,placeholder:e.placeholder,onSelect:t=>e.select(t,e.id)},null,8,["list","placeholder","onSelect"])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.numberData,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(u,{key:e.id,idx:e.id,item:e.selected,onChange_filter_value:t=>e.select(t,e.id)},null,8,["idx","item","onChange_filter_value"])),[[b.F8,e.typesShow.includes(s.reportType)]]))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.selectorData,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.id,options_props:e.list,selected_option:e.selected,onSelect:t=>e.select(t,e.id)},null,8,["options_props","selected_option","onSelect"])))),128))]),r.isTest?((0,a.wg)(!0),(0,a.iD)(a.HY,{key:0},(0,a.Ko)(r.filteringSystems,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{class:"filters",key:e},[s===r.filteringSystems.length-1?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"add_new_button",onClick:t[3]||(t[3]=e=>r.addFilteringSystem())},C)):(0,a.kq)("",!0),(0,a.Wm)(c,{list:e.filterList(e.SystemInputValue,e.systems),selected:e.selectedSystem,countLettersReq:0,placeholder:r.t("Analytics.reportFilters.system"),requestDelay:0,SelectedInTitle:!0,onFocusOut:()=>e.changeSystemInputValue(""),onChangeInputValue:e.changeSystemInputValue,onSelect:t=>e.selectSystem(t)},null,8,["list","selected","placeholder","onFocusOut","onChangeInputValue","onSelect"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.selectedSystem?.filtersList,(t=>(0,a.wy)(((0,a.wg)(),(0,a.j4)((0,a.LL)(t.type),{key:t.id,list:e.filterList(t.value,t.list),selected:t.selected,countLettersReq:t.minLength,placeholder:t.placeholder,requestDelay:0,SelectedInTitle:!0,dateRange:t.selected,"onUpdate:dateRange":e=>t.selected=e,onChangeInputValue:e=>t.value=e,onSelect:s=>"AppMultiSelect"===t.type?e.selectMulti(s,t.id):t.selected=s},null,40,["list","selected","countLettersReq","placeholder","dateRange","onUpdate:dateRange","onChangeInputValue","onSelect"])),[[b.F8,t.show?.value]]))),128))])))),128)):(0,a.kq)("",!0)]),(0,a._)("div",I,[(0,a._)("button",{class:"btn btn_blue",onClick:t[4]||(t[4]=e=>r.apply())},(0,l.zw)(e.$t("global.apply2")),1),!r.coincideSelectedItems&&r.isTest?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn_yellow",style:{"border-radius":"0"},onClick:t[5]||(t[5]=e=>r.createReport())},(0,l.zw)(e.$t("Analytics.reportFilters.createTempl")),1)):(0,a.kq)("",!0),(0,a._)("button",{class:"btn btn_grey",onClick:t[6]||(t[6]=e=>r.clearAllFields())},(0,l.zw)(e.$t("global.clear")),1)])])]),(0,a._)("div",L,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.fields,((e,t)=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"selected",key:e.id},[(0,a._)("span",null,(0,l.zw)(e.placeholder)+": ",1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.selected,((e,s)=>((0,a.wg)(),(0,a.iD)("div",{key:e,class:"item",onClick:e=>r.deleteField(t,s)},[(0,a.Uk)((0,l.zw)(e.name)+" ",1),M],8,x)))),128))])),[[b.F8,e.selected.length]]))),128))])])}s(2801),s(1295);var E=s(1897),O=s(8890),P=s(7720),j=s(2518),z=s(8701),B=s(4870),$=s(2489);function H(){const{t:e}=(0,$.j)(),t=(0,B.qj)([{id:0,name:"amoCRM",value:"amoCRM",filtersList:[{id:1235674,name:"entities",type:"AppInputSelect",value:"",minLength:0,show:{value:!0},placeholder:e("Analytics.systemsForReports.entities.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.entities.trade"),value:"trade"},{name:e("Analytics.systemsForReports.entities.contact"),value:"contact"},{name:e("Analytics.systemsForReports.entities.company"),value:"company"}]},{id:0,name:"data",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"any")))},placeholder:e("Analytics.systemsForReports.data.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.data.event"),value:"event"},{name:e("Analytics.systemsForReports.data.data"),value:"data"}]},{id:1,name:"trade",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"trade")&&s(0,"event")))},placeholder:e("Analytics.systemsForReports.trade.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.trade.1"),value:1},{name:e("Analytics.systemsForReports.trade.2"),value:2},{name:e("Analytics.systemsForReports.trade.3"),value:3},{name:e("Analytics.systemsForReports.trade.4"),value:4},{name:e("Analytics.systemsForReports.trade.5"),value:5},{name:e("Analytics.systemsForReports.trade.6"),value:6},{name:e("Analytics.systemsForReports.trade.7"),value:7}]},{id:2,name:"trade",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"trade")&&s(0,"data")))},placeholder:e("Analytics.systemsForReports.trade2.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.trade2.1"),value:1},{name:e("Analytics.systemsForReports.trade2.2"),value:2},{name:e("Analytics.systemsForReports.trade2.3"),value:3},{name:e("Analytics.systemsForReports.trade2.4"),value:4},{name:e("Analytics.systemsForReports.trade2.5"),value:5},{name:e("Analytics.systemsForReports.trade2.6"),value:6},{name:e("Analytics.systemsForReports.trade2.7"),value:7}]},{id:3,name:"contact",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"contact")&&s(0,"event")))},placeholder:e("Analytics.systemsForReports.contact.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.contact.1"),value:1},{name:e("Analytics.systemsForReports.contact.2"),value:2},{name:e("Analytics.systemsForReports.contact.3"),value:3},{name:e("Analytics.systemsForReports.contact.4"),value:4},{name:e("Analytics.systemsForReports.contact.5"),value:5},{name:e("Analytics.systemsForReports.contact.6"),value:6},{name:e("Analytics.systemsForReports.contact.7"),value:7},{name:e("Analytics.systemsForReports.contact.8"),value:8},{name:e("Analytics.systemsForReports.contact.9"),value:9}]},{id:4,name:"contact",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"contact")&&s(0,"data")))},placeholder:e("Analytics.systemsForReports.contact4.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.contact4.1"),value:1},{name:e("Analytics.systemsForReports.contact4.2"),value:2},{name:e("Analytics.systemsForReports.contact4.3"),value:3},{name:e("Analytics.systemsForReports.contact4.4"),value:4},{name:e("Analytics.systemsForReports.contact4.5"),value:5},{name:e("Analytics.systemsForReports.contact4.6"),value:6},{name:e("Analytics.systemsForReports.contact4.7"),value:7},{name:e("Analytics.systemsForReports.contact4.8"),value:8},{name:e("Analytics.systemsForReports.contact4.9"),value:9},{name:e("Analytics.systemsForReports.contact4.10"),value:10}]},{id:5,name:"company",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"company")&&s(0,"event")))},placeholder:e("Analytics.systemsForReports.company.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.company.1"),value:1},{name:e("Analytics.systemsForReports.company.2"),value:2},{name:e("Analytics.systemsForReports.company.3"),value:3},{name:e("Analytics.systemsForReports.company.4"),value:4},{name:e("Analytics.systemsForReports.company.5"),value:5},{name:e("Analytics.systemsForReports.company.6"),value:6}]},{id:6,name:"company",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"company")&&s(0,"data")))},placeholder:e("Analytics.systemsForReports.company6.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.company6.1"),value:1},{name:e("Analytics.systemsForReports.company6.2"),value:2},{name:e("Analytics.systemsForReports.company6.3"),value:3},{name:e("Analytics.systemsForReports.company6.4"),value:4},{name:e("Analytics.systemsForReports.company6.5"),value:5},{name:e("Analytics.systemsForReports.company6.6"),value:6},{name:e("Analytics.systemsForReports.company6.7"),value:7},{name:e("Analytics.systemsForReports.company6.8"),value:8},{name:e("Analytics.systemsForReports.company6.9"),value:9},{name:e("Analytics.systemsForReports.company6.10"),value:10}]},{id:7,name:"task",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"contact")&&s(0,"data1")))},placeholder:e("Analytics.systemsForReports.task.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.task.1"),value:1},{name:e("Analytics.systemsForReports.task.2"),value:2},{name:e("Analytics.systemsForReports.task.3"),value:3},{name:e("Analytics.systemsForReports.task.4"),value:4},{name:e("Analytics.systemsForReports.task.5"),value:5}]},{id:8,name:"task",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>s(1235674,"contact")&&s(0,"data1")))},placeholder:e("Analytics.systemsForReports.task8.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.task8.1"),value:1},{name:e("Analytics.systemsForReports.task8.2"),value:2},{name:e("Analytics.systemsForReports.task8.3"),value:3},{name:e("Analytics.systemsForReports.task8.4"),value:4},{name:e("Analytics.systemsForReports.task8.5"),value:5},{name:e("Analytics.systemsForReports.task8.6"),value:6},{name:e("Analytics.systemsForReports.task8.7"),value:7},{name:e("Analytics.systemsForReports.task8.8"),value:8}]},{id:200,name:"date",type:"AppDateRange",value:"",minLength:0,show:{value:(0,a.Fl)((()=>(s(1,"any")||s(2,"any")||s(3,"any")||s(4,"any")||s(5,"any")||s(6,"any")||s(7,"any")||s(8,"any"))&&s(0,"any")&&s(1235674,"any")))},placeholder:e("Analytics.systemsForReports.date.placeholder"),selected:"-",list:[]},{id:201,name:"vortexAndPhase",type:"AppMultiSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>(s(1,"any")||s(2,"any")||s(3,"any")||s(4,"any")||s(5,"any")||s(6,"any")||s(7,"any")||s(8,"any"))&&s(0,"any")&&s(1235674,"any")))},placeholder:e("Analytics.systemsForReports.vortexAndPhase.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.vortexAndPhase.all"),value:"all",selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.1"),value:1,selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.2"),value:2,selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.3"),value:3,selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.4"),value:4,selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.5"),value:5,selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.6"),value:6,selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.7"),value:7,selected:!1},{name:e("Analytics.systemsForReports.vortexAndPhase.8"),value:8,selected:!1}]},{id:202,name:"responsible",type:"AppMultiSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>(s(1,"any")||s(2,"any")||s(3,"any")||s(4,"any")||s(5,"any")||s(6,"any")||s(7,"any")||s(8,"any"))&&s(0,"any")&&s(1235674,"any")))},placeholder:e("Analytics.systemsForReports.responsible.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.responsible.1"),value:1},{name:e("Analytics.systemsForReports.responsible.2"),value:2},{name:e("Analytics.systemsForReports.responsible.3"),value:3},{name:e("Analytics.systemsForReports.responsible.4"),value:4},{name:e("Analytics.systemsForReports.responsible.5"),value:5}]},{id:203,name:"tags",type:"AppMultiSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>(s(1,"any")||s(2,"any")||s(3,"any")||s(4,"any")||s(5,"any")||s(6,"any")||s(7,"any")||s(8,"any"))&&s(0,"any")&&s(1235674,"any")))},placeholder:e("Analytics.systemsForReports.tags.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.tags.1"),value:1},{name:e("Analytics.systemsForReports.tags.2"),value:2},{name:e("Analytics.systemsForReports.tags.3"),value:3},{name:e("Analytics.systemsForReports.tags.4"),value:4},{name:e("Analytics.systemsForReports.tags.5"),value:5}]},{id:204,name:"initiator",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,a.Fl)((()=>(s(1,"any")||s(2,"any")||s(3,"any")||s(4,"any")||s(5,"any")||s(6,"any")||s(7,"any")||s(8,"any"))&&s(0,"any")&&s(1235674,"any")))},placeholder:e("Analytics.systemsForReports.initiator.placeholder"),selected:{},list:[{name:e("Analytics.systemsForReports.initiator.1"),value:1},{name:e("Analytics.systemsForReports.initiator.2"),value:2},{name:e("Analytics.systemsForReports.initiator.3"),value:3},{name:e("Analytics.systemsForReports.initiator.4"),value:4},{name:e("Analytics.systemsForReports.initiator.5"),value:5}]},{id:302,name:"before",type:"AppInputSelect",value:"",placeholder:e("Analytics.systemsForReports.before.placeholder"),minLength:0,show:{value:(0,a.Fl)((()=>s(1,2)||s(1,3)||s(1,5)||s(3,6)||s(3,7)||s(5,6)))},selected:{},list:[{name:e("Analytics.systemsForReports.before.1"),value:1},{name:e("Analytics.systemsForReports.before.2"),value:2},{name:e("Analytics.systemsForReports.before.3"),value:3},{name:e("Analytics.systemsForReports.before.4"),value:4},{name:e("Analytics.systemsForReports.before.5"),value:5}]},{id:303,name:"after",type:"AppInputSelect",value:"",placeholder:e("Analytics.systemsForReports.after.placeholder"),minLength:0,show:{value:(0,a.Fl)((()=>s(1,2)||s(1,3)||s(1,5)||s(3,6)||s(3,7)||s(5,6)))},selected:{},list:[{name:e("Analytics.systemsForReports.after.1"),value:1},{name:e("Analytics.systemsForReports.after.2"),value:2},{name:e("Analytics.systemsForReports.after.3"),value:3},{name:e("Analytics.systemsForReports.after.4"),value:4},{name:e("Analytics.systemsForReports.after.5"),value:5}]},{id:304,name:"taskStatus",type:"AppInputSelect",value:"",placeholder:e("Analytics.systemsForReports.taskStatus.placeholder"),minLength:0,show:{value:(0,a.Fl)((()=>(s(2,7)||s(4,10)||s(6,10))&&s(0,"data")))},selected:{},list:[{name:e("Analytics.systemsForReports.taskStatus.0"),value:0},{name:e("Analytics.systemsForReports.taskStatus.1"),value:1},{name:e("Analytics.systemsForReports.taskStatus.2"),value:2},{name:e("Analytics.systemsForReports.taskStatus.3"),value:3}]},{id:305,name:"taskType",type:"AppInputSelect",value:"",placeholder:e("Analytics.systemsForReports.taskType.placeholder"),minLength:0,show:{value:(0,a.Fl)((()=>(s(2,7)||s(4,10)||s(6,10))&&s(0,"data")))},selected:{},list:[{name:e("Analytics.systemsForReports.taskType.0"),value:0},{name:e("Analytics.systemsForReports.taskType.1"),value:1},{name:e("Analytics.systemsForReports.taskType.2"),value:2},{name:e("Analytics.systemsForReports.taskType.3"),value:3}]},{id:306,name:"messageType",type:"AppInputSelect",value:"",placeholder:e("Analytics.systemsForReports.messageType.placeholder"),minLength:0,show:{value:(0,a.Fl)((()=>s(3,2)||s(3,3)||s(3,5)||s(5,4)))},selected:{},list:[{name:e("Analytics.systemsForReports.messageType.1"),value:1},{name:e("Analytics.systemsForReports.messageType.2"),value:2}]}]}]),s=(e,t)=>{const s=i.filtersList?.find((t=>t.id===e));return"any"===t?!!s?.selected?.value:s?.selected?.value===t},l=(e,t)=>t.filter((t=>t?.name?.toLowerCase()?.includes(e?.toLowerCase()))),r=(0,B.iH)(""),o=(0,a.Fl)((()=>t.filter((e=>e?.name?.toLowerCase()?.includes(r.value?.toLowerCase()))))),n=e=>{r.value=e},i=(0,B.qj)({}),c=e=>Object.assign(i,e),p=(0,a.Fl)((()=>{const e=[];return i.filtersList?.forEach((t=>e.push(t))),e}));(0,a.YP)(p,(()=>{i.filtersList?.map((e=>{!1===e.show.value&&("AppInputSelect"==e.type&&e.selected.value&&(e.selected={}),"AppDateRange"==e.type&&"-"!==e.selected&&(e.selected="-"),"AppMultiSelect"==e.type&&e.selected.length&&(e.selected=[],e.list.map((e=>e.selected=!1))))}))}),{deep:!0});const u=(e,t)=>{if("all"===e.value){const s=i.filtersList?.find((e=>e.id===t));s?.list?.forEach((t=>{"all"!==t.value&&(t.selected=!e.selected)}))}e.selected=!e.selected};return{systems:t,changeSystemInputValue:n,sortedSystems:o,selectedSystem:i,SystemInputValue:r,selectSystem:c,filterList:l,selectMulti:u}}var Z=s(4581),Y=s(3704),U=s(9378),G={components:{AppInputSelect:O.Z,AppMultiSelect:j.Z,SelectorVue:P.Z,AppDateRange:E.Z,FilterNumber:z.Z},props:{reportType:{type:String,required:!0}},setup(e,t){const{followStep2:s}=(0,U.I)(),l=(0,B.qj)([H()]),r=()=>l.push(H()),{t:o}=(0,$.j)(),n=(0,B.iH)(null),i=(0,B.iH)([]),c=(0,B.iH)([]),p=(0,B.iH)(""),u=(0,B.iH)(""),d=(0,B.qj)([{id:0,name:"product",value:"",minLength:3,placeholder:o("Analytics.reportFilters.fields.product"),typesShow:["sales","stuffMove"],selected:[]},{id:4,name:"responsible",value:"",minLength:0,placeholder:o("Analytics.reportFilters.fields.responsible"),typesShow:["customers","sales"],selected:[]},{id:1,name:"pipeline",value:"",minLength:0,placeholder:o("Analytics.reportFilters.fields.pipeline"),typesShow:["customers"],selected:[]},{id:2,name:"company",value:"",minLength:3,placeholder:o("Analytics.reportFilters.fields.company"),typesShow:["customers"],selected:[]},{id:3,name:"contact",value:"",minLength:3,placeholder:o("Analytics.reportFilters.fields.contact"),typesShow:["customers"],selected:[]},{id:10,name:"users",value:"",minLength:0,placeholder:o("Analytics.reportFilters.fields.users"),typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"users"},{id:5,name:"event_type",value:"",minLength:0,placeholder:o("Analytics.reportFilters.fields.event_type"),typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"types"},{id:6,name:"product/batch",value:"",minLength:3,placeholder:o("Analytics.reportFilters.fields.product_batch"),typesShow:["stuffMove"],selected:[]},{id:7,name:"initial_warehouse",value:"",minLength:0,placeholder:o("Analytics.reportFilters.fields.initial_warehouse"),typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"whs"},{id:8,name:"final_warehouse",value:"",minLength:0,placeholder:o("Analytics.reportFilters.fields.final_warehouse"),typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"whs"}]),y=(0,B.qj)([]),m=(0,B.qj)([]),h=(0,B.qj)([{id:1,name:"quantity",selected:{option:"=",value:"",placeholder:o("Analytics.reportFilters.fields.quantity")},list:[],typesShow:["stuffMove"],select:(e,t)=>{const s=h.find((e=>e.id===t));s.selected=e}}]),v=(0,a.Fl)((()=>{const e=[];return d.forEach((t=>e.push(t.selected))),y.forEach((t=>e.push(t.list.some((e=>e.selected))))),m.forEach((t=>e.push(t.selected))),l.forEach((t=>{e.push(t.selectedSystem),t?.systems?.forEach((t=>t?.filtersList?.forEach((t=>e.push(t.selected)))))})),e})),g=(0,a.Fl)((()=>JSON.stringify(c.value)==JSON.stringify(v.value)));(0,a.bv)((()=>{(0,a.Y3)((()=>{c.value=structuredClone(v.value),s(d,A,_)}))})),(0,a.YP)(n,(()=>{i.value=[]}));const f=()=>{alert("потом будем сохранять шаблон")},w=async(e,t)=>{const s=d.find((e=>e.name===t)),a=e=>" "!=e.split("").at(-1)&&" "!=e.split("")[0]&&!s?.haveTheirOwnLists;if(i.value=[],a(e)&&n.value==t){await Z.Z.dispatch("getAutocompleteAnalytics",{field:t,value:{query:e}});const s=Z.Z.state.analytics.autocomplete;void 0!=s&&(s.map((e=>e.name=e.value)),i.value=[...s])}else if(s?.haveTheirOwnLists){const e=Z.Z.state.analytics.stuffMove[s?.listName];void 0!=e&&(i.value=[...e])}},A=(e,t,s)=>{d.forEach((a=>{a.name!==t||a.id!==s||a.selected.some((t=>t.value==e.value))||a.selected.push(e)}))},b=(e,t)=>{d[e].selected.splice(t,1)},R=()=>{p.value="",u.value="",l.length=0,r(),d.map((e=>e.selected=[])),_()},_=()=>{const s=e=>{const t=e.split("-"),s=t[0];t.splice(0,1),t.push(s);let a=t.join("/");const[l,r,o]=a.split("/");return a=l&&r&&o?r+"/"+o+"/"+l:"",a},a={date:s(p.value)+"-"+s(u.value)};"-"==a.date&&delete a.date,h.forEach((e=>{a[e.name]={compare:e.selected.option,query:e.selected.value}})),d.forEach((t=>{const s=[];t.selected.forEach((e=>s.push(e.value))),t.typesShow.includes(e.reportType)&&0!=s.length&&(a[t.name]=s)})),t.emit("getFilter",a)};return{selected_field_autocomplete:n,selected_field_autocomplete_list:i,copySelectedItems:c,dateStart:p,dateEnd:u,fields:d,multiSelectorData:y,selectorData:m,coincideSelectedItems:g,createReport:f,changeInputValue:w,selectField:A,deleteField:b,clearAllFields:R,apply:_,...H(),filteringSystems:l,addFilteringSystem:r,numberData:h,isTest:Y.Y,t:o}}},V=s(89);const N=(0,V.Z)(G,[["render",q],["__scopeId","data-v-46e5a8a6"]]);var W=N;const K=e=>((0,a.dD)("data-v-c7d4aeac"),e=e(),(0,a.Cn)(),e),J={class:"wrapper"},Q={class:"container"},X={class:"header"},ee=K((()=>(0,a._)("span",{class:"material-icons-round"}," close ",-1))),te=[ee],se={class:"content"},ae={class:"label_input"},le=["placeholder"],re={class:"footer"};function oe(e,t,s,r,o,n){const i=(0,a.up)("BtnsSaveClose");return(0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[(0,a._)("div",J,[(0,a._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>r.close())}),(0,a._)("div",Q,[(0,a._)("header",X,[(0,a._)("label",null,(0,l.zw)(e.$t("Analytics.createModal.new")),1),(0,a._)("button",{class:"btn cross",onClick:t[1]||(t[1]=e=>r.close())},te)]),(0,a._)("main",se,[(0,a._)("form",null,[(0,a._)("div",ae,[(0,a._)("label",null,(0,l.zw)(e.$t("Analytics.createModal.name")),1),(0,a.wy)((0,a._)("input",{class:"input",type:"text",placeholder:r.t("Analytics.createModal.placeholder"),"onUpdate:modelValue":t[2]||(t[2]=e=>r.newReport.name=e)},null,8,le),[[b.nr,r.newReport.name]])])])]),(0,a._)("footer",re,[(0,a.Wm)(i,{onSave:e.save,onClose:r.close},null,8,["onSave","onClose"])])])])])}var ne=s(8711),ie={components:{BtnsSaveClose:ne.Z},props:{},setup(){const{t:e}=(0,$.j)(),t=(0,B.qj)({name:e("Analytics.createModal.by")}),s=()=>Z.Z.commit("toggleReportCreate",!1);return{close:s,newReport:t,t:e}}};const ce=(0,V.Z)(ie,[["render",oe],["__scopeId","data-v-c7d4aeac"]]);var pe=ce;const ue={class:"wrapper"};function de(e,t,s,l,r,o){const n=(0,a.up)("apexchart");return(0,a.wg)(),(0,a.iD)("div",ue,["bar"===s.chartType?((0,a.wg)(),(0,a.j4)(n,{key:0,type:l.bar.type,width:l.clientWidth>400?600:300,options:l.bar.chartOptions,series:l.bar.series},null,8,["type","width","options","series"])):"doughnut"===s.chartType?((0,a.wg)(),(0,a.j4)(n,{key:1,type:l.doughnut.type,width:l.clientWidth>400?600:300,options:l.doughnut.chartOptions,series:l.doughnut.series},null,8,["type","width","options","series"])):(0,a.kq)("",!0)])}var ye={components:{},props:{chartType:String},setup(){const e=(0,a.Fl)((()=>document.documentElement.clientWidth)),t=(0,B.qj)({type:"bar",series:[{name:"Free Cash Flow",data:[35,41,36,26,45,48,52,53,41,31,44,39]}],chartOptions:{chart:{type:"bar"},plotOptions:{bar:{horizontal:!1,columnWidth:"65%",endingShape:"rounded"}},responsive:[{breakpoint:880,options:{chart:{width:320},xaxis:{labels:{rotateAlways:!0,show:!0,rotate:-45}}}}],dataLabels:{enabled:!1},xaxis:{categories:["Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jen"]},yaxis:{title:{text:""}},fill:{opacity:1},colors:[function({value:e}){return e>50?"#00E396":e>35?"#FEB019":"#FF4560"}],legend:{position:"bottom"},tooltip:{y:{formatter:function(e){const t=["тысяча","тысячи","тысяч"];return"₽ "+e+" "+t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?Math.abs(e)%10:5]]}}}}}),s=(0,B.qj)({type:"donut",series:[44,55,41,17,15],chartOptions:{chart:{type:"donut"},theme:{mode:"light",palette:"palette2"},responsive:[{breakpoint:880,options:{chart:{width:320},legend:{position:"bottom",fontSize:"12px"},dataLabels:{style:{fontSize:"10px"}}}}],stroke:{show:!1},labels:["Feb","Mar","Apr","May","Jun"],legend:{fontSize:"16px"}}});return{bar:t,doughnut:s,clientWidth:e}}};const me=(0,V.Z)(ye,[["render",de],["__scopeId","data-v-6bbd62e4"]]);var he=me;const ve=e=>((0,a.dD)("data-v-65814dce"),e=e(),(0,a.Cn)(),e),ge={class:"top",id:"report_count_area"},fe={class:"count"},we={class:"row title"},Ae=["onClick"],be=ve((()=>(0,a._)("tr",{class:"space"},null,-1))),Re={class:"row title"},_e=ve((()=>(0,a._)("tr",{class:"space"},null,-1))),Fe={key:0},ke={key:1},Se=["href"],Te=["onClick"],De={key:0},Ce={key:0,class:"space"},Ie=ve((()=>(0,a._)("tr",{class:"space"},null,-1))),Le={class:"row title",ref:"total"};function xe(e,t,s,r,o,n){const i=(0,a.up)("AppTablePreloader"),c=(0,a.up)("ReportGridModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",ge,[(0,a._)("p",fe,(0,l.zw)(e.$t("Archive.count",{count:Number(s.reportsData.total||s.reportsData?.meta?.total)})),1)]),s.isLoading?((0,a.wg)(),(0,a.j4)(i,{key:0,titles:n.titlesForPreloader},null,8,["titles"])):((0,a.wg)(),(0,a.iD)("table",{key:1,class:(0,l.C_)(["table",{blur:n.openSelectedReportModal}])},[(0,a._)("thead",null,[(0,a._)("tr",we,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.title,(e=>((0,a.wg)(),(0,a.iD)("td",{class:(0,l.C_)(["item",{pointer:n.sortable}]),key:e,onClick:t=>n.sortable?n.sort(e?.code):null},[(0,a.Uk)((0,l.zw)(e.name)+" ",1),n.sortable?((0,a.wg)(),(0,a.iD)("button",{key:0,class:(0,l.C_)(["bar_item_icon",{bar_item_icon_up:o.order.code===e?.code&&"desc"===o.order.prev_order,bar_item_icon_down:o.order.code===e?.code&&"asc"===o.order.prev_order}])},null,2)):(0,a.kq)("",!0)],10,Ae)))),128))])]),(0,a._)("tbody",null,[o.showTopTitle?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[be,(0,a._)("tr",Re,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.title,(e=>((0,a.wg)(),(0,a.iD)("td",{class:"item",key:e},(0,l.zw)(s.total[e?.code]),1)))),128))]),_e],64)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.copyReports,((t,r)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t},[(0,a._)("tr",{class:(0,l.C_)(["row",{row_odd:r%2==0}])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.title,(r=>((0,a.wg)(),(0,a.iD)("td",{class:(0,l.C_)(["item",{center:r.type}]),key:r},[(0,a.WI)(e.$slots,"item_"+r.code,{title:r,item:t},(()=>[r.type||"customers"!==s.reportType&&"leads"==r?.code?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",Fe,(0,l.zw)(t[r?.code]),1)),r.type||"leads"!=r?.code||"sales"!==s.reportType?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ke,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t[r?.code],((e,s)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:e},[(0,a._)("a",{class:"underline text-[#8cb4ff] decoration-[#3f3f3faf] underline-offset-2 hover:no-underline",target:"black",href:"https://"+n.accountSubdomain+".amocrm.ru/leads/detail/"+e},(0,l.zw)(e),9,Se),(0,a._)("span",null,(0,l.zw)(s<t[r?.code].length-1?", ":""),1)],64)))),128))])),r.type?(0,a.wy)(((0,a.wg)(),(0,a.iD)("button",{key:2,class:"btn",onClick:e=>t[r?.code].value=!t[r?.code]?.value},(0,l.zw)(t[r?.code]?.value?e.$t("Analytics.reportGrid.hide"):e.$t("Analytics.reportGrid.show")),9,Te)),[[b.F8,t[r?.code]]]):(0,a.kq)("",!0)]),!0)],2)))),128))],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t[n.buttonInTitle?.code]?.list,(e=>(0,a.wy)(((0,a.wg)(),(0,a.iD)("tr",{class:"hiden",key:e.id},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.title,(t=>((0,a.wg)(),(0,a.iD)("td",{class:"item",key:t},[e[t?.code]?((0,a.wg)(),(0,a.iD)("span",De,(0,l.zw)(e[t?.code]),1)):(0,a.kq)("",!0)])))),128))])),[[b.F8,t[n.buttonInTitle?.code]?.value]]))),128)),t[n.buttonInTitle?.code]?.value?((0,a.wg)(),(0,a.iD)("tr",Ce)):(0,a.kq)("",!0)],64)))),128)),Ie,(0,a._)("tr",Le,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.title,(e=>((0,a.wg)(),(0,a.iD)("td",{class:"item",key:e},(0,l.zw)(s.total[e?.code]),1)))),128))],512)])],2)),((0,a.wg)(),(0,a.j4)(a.lR,{to:"body"},[n.selectedReport?.value?((0,a.wg)(),(0,a.j4)(c,{key:0,title:n.selectedReport?.title,list:n.selectedReport?.list,company:n.selectedReport?.company,onClose:n.closeReportGridModal},null,8,["title","list","company","onClose"])):(0,a.kq)("",!0)]))],64)}var Me=s(4547);const qe=e=>((0,a.dD)("data-v-026c73ed"),e=e(),(0,a.Cn)(),e),Ee={class:"background"},Oe={class:"container"},Pe={class:"header"},je=qe((()=>(0,a._)("div",{class:"icon"},null,-1))),ze=[je],Be=qe((()=>(0,a._)("div",{class:"hr"},null,-1))),$e={class:"content"},He={key:0,class:"text"},Ze={key:1,class:"table"},Ye={class:"row title"},Ue=qe((()=>(0,a._)("div",{class:"hr"},null,-1))),Ge={class:"footer"};function Ve(e,t,s,r,o,n){const i=(0,a.up)("BtnsSaveClose");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>n.close())}),(0,a._)("div",Ee,[(0,a._)("div",Oe,[(0,a._)("div",Pe,[(0,a._)("h5",null,[(0,a.WI)(e.$slots,"title",{},(()=>[(0,a.Uk)((0,l.zw)(e.$t("Analytics.positions",{company:s.company})),1)]),!0)]),(0,a._)("button",{class:"btn_del",onClick:t[1]||(t[1]=e=>n.close())},ze)]),Be,(0,a._)("div",$e,[0==s.list.length?((0,a.wg)(),(0,a.iD)("label",He,(0,l.zw)(e.$t("global.nothingFound")),1)):((0,a.wg)(),(0,a.iD)("table",Ze,[(0,a._)("thead",null,[(0,a._)("tr",Ye,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.title,(e=>((0,a.wg)(),(0,a.iD)("td",{class:"item",key:e},(0,l.zw)(e.name),1)))),128))])]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.list,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{class:(0,l.C_)(["row",{row_odd:t%2==0}]),key:e.id},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.title,(t=>((0,a.wg)(),(0,a.iD)("td",{class:"item",key:t},(0,l.zw)(e[t.code]),1)))),128))],2)))),128))])]))]),Ue,(0,a._)("div",Ge,[(0,a.Wm)(i,{show_save:!1,onClose:n.close},null,8,["onClose"])])])])],64)}var Ne={components:{BtnsSaveClose:ne.Z},props:{title:{type:Array,required:!0},list:{type:Array,required:!0},company:{type:String,required:!1}},methods:{close(){this.$emit("close")}}};const We=(0,V.Z)(Ne,[["render",Ve],["__scopeId","data-v-026c73ed"]]);var Ke=We,Je={components:{ReportGridModal:Ke,AppTablePreloader:Me.Z},props:{title:{type:Array,required:!0},reportsData:{type:Object,required:!0},total:{type:Object,required:!1},reportType:{type:String,required:!0},isLoading:{type:Boolean,required:!0}},data(){return{copyReports:[],showTopTitle:!0,order:{code:"",prev_order:""}}},mounted(){this.copy()},computed:{sortable(){return"stuffMove"===this.reportType},accountSubdomain(){return this.$store.state.account.account.subdomain},buttonInTitle(){return this.title?.find((e=>1==e?.type))},modalInTitle(){return this.title?.find((e=>2==e?.type))},openedRows(){return this.copyReports.filter((e=>e[this.buttonInTitle?.code]?.value))},selectedReport(){const e=this.copyReports.find((e=>{if(e[this.modalInTitle?.code])return e[this.modalInTitle?.code].value}));let t={value:!1};return e&&(t={company:e.company,value:e[this.modalInTitle?.code].value,list:e[this.modalInTitle?.code].list,title:e[this.modalInTitle?.code].title}),t},openSelectedReportModal(){return this.selectedReport.value},titlesForPreloader(){return Object.values(this.title).reduce(((e,t)=>(e.push(t.name),e)),[])}},watch:{openSelectedReportModal(){this.openSelectedReportModal&&window.scrollTo(0,0),this.$emit("updateOpenSelectedReportModal",this.openSelectedReportModal)},reportsData:{handler:function(){this.copy()},deep:!0},openedRows:{handler:function(e,t){let s="";s="customers"===this.reportType?"company":"name";const a=[];e.forEach((e=>a.push(e[s])));const l=[];t.forEach((e=>l.push(e[s])));let r=!1;a.length>l.length&&a.forEach((e=>{l.includes(e)||(r=!0)})),a.length<l.length&&l.forEach((e=>{a.includes(e)||(r=!0)})),r&&this.$emit("updateOpenedRows",this.openedRows)},deep:!0},selectedReport:{handler:function(e,t){e.company==t.company&&e.value==t.value||this.$emit("updateSelectedReport",this.selectedReport)},deep:!0}},methods:{calcShowTopTitle(){this.showTopTitle=document.body.clientHeight<this.$refs.total?.getBoundingClientRect()?.y},copy(){this.reportsData.data&&(this.copyReports=JSON.parse(JSON.stringify(this.reportsData.data)))},closeReportGridModal(){this.copyReports.map((e=>e[this.modalInTitle?.code].value=!1))},sort(e){const t=["asc","desc"];let s="";s=this.order.code===e&&this.order.prev_order==t[0]?t[1]:t[0],this.order={code:e,prev_order:s},this.$emit("sort",e,s)}}};const Qe=(0,V.Z)(Je,[["render",xe],["__scopeId","data-v-65814dce"]]);var Xe=Qe;const et={class:"row"};function tt(e,t,s,l,r,o){const n=(0,a.up)("AppRadioBtnsGroup");return(0,a.wg)(),(0,a.iD)("div",et,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.fields,(e=>((0,a.wg)(),(0,a.j4)(n,{key:e.value,list:e.list,selected:e.selected,onSelect:e.select},null,8,["list","selected","onSelect"])))),128))])}var st=s(1970),at={components:{AppRadioBtnsGroup:st.Z},props:{},setup(e,t){const{t:s}=(0,$.j)(),a=(0,B.qj)([{value:"date",name:s("Analytics.chartsFilters.type"),selected:{name:s("Analytics.chartsFilters.days"),value:"days"},list:[{name:s("Analytics.chartsFilters.days"),value:"days"},{name:s("Analytics.chartsFilters.months"),value:"months"},{name:s("Analytics.chartsFilters.years"),value:"years"}],select(e){a[0].selected=e,l()}},{value:"type",name:s("Analytics.chartsFilters.type"),selected:{name:s("Analytics.chartsFilters.total"),value:"total"},list:[{name:s("Analytics.chartsFilters.total"),value:"total"},{name:s("Analytics.chartsFilters.customers"),value:"customers"},{name:s("Analytics.chartsFilters.sales"),value:"sales"}],select(e){a[1].selected=e,l()}}]),l=()=>{const e={};a.forEach((t=>e[t.value]=t.selected.value)),t.emit("getFilter",e)};return{fields:a}}};const lt=(0,V.Z)(at,[["render",tt],["__scopeId","data-v-7dcaa0fa"]]);var rt=lt,ot=s(9240),nt=s(6515),it=s(969),ct=s(5310);const{t:pt}=(0,$.j)();var ut={name:"AnalyticsView",components:{ReportFIlters:W,ReportCreateModal:pe,ReportCharts:he,ReportGrid:Xe,ReportChartsFilter:rt,AppHeader:ot.Z,GridBottom:nt.Z,AppRadioBtnsGroupUnderlined:it.Z,AppRadioBtnsGroup:st.Z},setup(){return{isTest:Y.Y,currentExeptions:ct.b}},data(){return{openSelectedReportModal:!1,isLoading:!1,title:[],reports:[],isClient:!0,reportType:{selected:{name:pt("Analytics.reportTypes.customers"),value:"customers"},list:[{name:pt("Analytics.reportTypes.customers"),value:"customers"},{name:pt("Analytics.reportTypes.sales"),value:"sales"},{name:pt("Analytics.reportTypes.movement"),value:"stuffMove",value2:"movement"}],dropToDefault:()=>this.changeReportType(this.reportType.list.filter((e=>!ct.b.value.analytics.tabs[e.value]?.deny))[0])},titles:{customers:[{name:pt("Analytics.titles.customers.company"),code:"company",type:0},{name:pt("Analytics.titles.customers.contact"),code:"contact",type:0},{name:pt("Analytics.titles.customers.leads"),code:"leads",type:0},{name:pt("Analytics.titles.customers.sum"),code:"sum",type:0},{name:pt("Analytics.titles.customers.prib"),code:"prib",type:0},{name:pt("Analytics.titles.customers.otv"),code:"otv",type:1},{name:pt("Analytics.titles.customers.poz"),code:"poz",type:2}],sales:[{name:pt("Analytics.titles.sales.name"),code:"name",type:0},{name:pt("Analytics.titles.sales.count"),code:"count",type:0},{name:pt("Analytics.titles.sales.sum"),code:"sum",type:0},{name:pt("Analytics.titles.sales.cost_sum"),code:"cost_sum",type:0},{name:pt("Analytics.titles.sales.prib"),code:"prib",type:0},{name:pt("Analytics.titles.sales.leads"),code:"leads",type:0},{name:pt("Analytics.titles.sales.poz"),code:"poz",type:1}],stuffMove:[{name:pt("Analytics.titles.movement.event_date"),code:"event_date",type:0},{name:pt("Analytics.titles.movement.event_type"),code:"event_type",type:0},{name:pt("Analytics.titles.movement.article_number"),code:"article_number",type:0},{name:pt("Analytics.titles.movement.title"),code:"title",type:0},{name:pt("Analytics.titles.movement.party"),code:"party",type:0},{name:pt("Analytics.titles.movement.quantity"),code:"quantity",type:0},{name:pt("Analytics.titles.movement.cost_price"),code:"cost_price",type:0},{name:pt("Analytics.titles.movement.initial_warehouse"),code:"initial_warehouse",type:0},{name:pt("Analytics.titles.movement.final_warehouse"),code:"final_warehouse",type:0},{name:pt("Analytics.titles.movement.user"),code:"user",type:0},{name:pt("Analytics.titles.movement.comment"),code:"comment",type:0}]},openedRows:[],selectedReport:{},filter:{},sorted:{},total:{},newPage:1,view:{selected:{name:"table",value:"table",class:"font_download"},list:[{name:"table",value:"table",class:"font_download"},{name:"bar",value:"bar",class:"poll"},{name:"doughnut",value:"doughnut",class:"donut_small"}],select:function(e){this.selected=e}},groupBy:{selected:{name:pt("Analytics.groupComp"),value:"companies"},list:[{name:pt("Analytics.groupComp"),value:"companies"},{name:pt("Analytics.groupContact"),value:"contacts"}],select:e=>{this.groupBy.selected=e,localStorage.setItem("AnalyticsLastGroupBy",JSON.stringify(e)),this.getTitile()}}}},computed:{...(0,A.Se)(["catalog","showReportCreate"]),refFilters(){return this.$refs.filters},showGridBottom(){let e=!1;return e="stuffMove"===this.reportType.selected.value?this.reports?.meta?.total>=this.reports?.meta?.per_page:this.reports.total>=this.reports.per_page,e},refGrid(){return this.$refs.grid},isChartsView(){return"table"!==this.view.selected.value},isMDLAccount(){return 383===this.$store.state.account?.account?.id},page(){let e={};return e="stuffMove"===this.reportType.selected.value?{first:this.getPageFromLink(this.reports?.links?.first),prev:this.getPageFromLink(this.reports?.links?.prev),current:this.reports?.meta?.current_page,next:this.getPageFromLink(this.reports?.links?.next),last:this.getPageFromLink(this.reports?.links?.last)}:{first:this.getPageFromLink(this.reports?.first_page_url),prev:this.getPageFromLink(this.reports?.prev_page_url),current:this.reports?.current_page,next:this.getPageFromLink(this.reports?.next_page_url),last:this.getPageFromLink(this.reports?.last_page_url)},e},accountSubdomain(){return this.$store.state.account.account.subdomain}},created(){this.getAnalyticsLastGroupBy(),this.getTitile(),this.$store.dispatch("get_account")},mounted(){this.reportType.dropToDefault()},methods:{getPageFromLink(e){return e?e.split("?page=")[1]:null},openReportCreate(){this.$store.commit("toggleReportCreate",!0)},updateOpenSelectedReportModal(e){this.openSelectedReportModal=e},calcTotal(){this.total["prib"]=this.total.sum-this.total.cost_sum,this.total.sum=this.round(this.total.sum),this.total.cost_sum=this.round(this.total.cost_sum),this.total.prib=this.round(this.total.prib),"sales"==this.reportType.selected.value&&(this.total.leads=this.total?.leads_count),this.total["name"]=pt("Analytics.general"),this.total["company"]=pt("Analytics.general"),this.total["poz"]=""},async updateOpenedRows(e){const t="customers"===this.reportType.selected.value?"company":"name",s=e.map((e=>e[t]));this.reports.data.map((e=>{"customers"===this.reportType.selected.value&&e.otv?e.otv.value=!!s.includes(e[t])&&e.otv.value:"sales"===this.reportType.selected.value&&e.poz&&(e.poz.value=!!s.includes(e[t])&&e.poz.value)})),await e.forEach((async e=>{if(!this.openedRows.includes(e[t])){this.openedRows.push(e[t]);let s={code:"",label:"",resName:""};"customers"===this.reportType.selected.value?s={code:"otv",label:"company",resName:"getCustomersResponsible"}:"sales"===this.reportType.selected.value&&(s={code:"poz",label:"name",resName:"getSalesProducts"});const a=s.resName?await this.$store.dispatch(s.resName,{filter:this.filter,product:e.name,company:e.company}):[];this.reports.data.map((t=>{t[[s.label]]===e[[s.label]]&&t[s.code]&&(t[s.code].value=e[s.code].value,t[s.code].list=a.map((e=>{const t={...e};return t.prib=t.sum-t.cost_sum,t.sum=this.round(t.sum),t.cost_sum=this.round(t.cost_sum),t.prib=this.round(t.prib),t[s.code]=e.user,t})))}))}}))},async updateSelectedReport(e){e.value||this.reports.data.map((e=>e.poz.value=!1)),this.reports.data.find((t=>t.company==e.company))?.poz.list.length||(await this.$store.dispatch("getCustomersProducts",{filter:this.filter,company:e.company}),this.reports.data.map((t=>{t.company==e.company&&t.poz&&e.value&&(t.poz.value=e.value,t.poz.list=[...this.$store.state.analytics.customersProducts],t.poz.list.map((e=>{e["prib"]=e.sum-e.cost_sum,e.sum=this.round(e.sum),e.cost_sum=this.round(e.cost_sum),e.prib=this.round(e.prib)})))}))),this.selectedReport={...e}},async getReports(){try{const e=async(e,t)=>{const s={filter:this.filter,page:this.newPage,sort:this.sorted};"customers"===this.reportType.selected.value&&(s.group_by=this.groupBy.selected.value),await this.$store.dispatch(`get${t}`,s),this.reports=this.$store.state.analytics[e],"stuffMove"!==this.reportType.selected.value?(await this.$store.dispatch(`get${t}Total`,s),this.total=this.$store.state.analytics[`${e}Total`]):this.total=this.$store.state.analytics[`${e}Total`],this.applyReportsTransformations(e),(0,a.Y3)((()=>this.refGrid?.calcShowTopTitle()))};this.reports.data=[],this.total=[],await e(this.reportType.selected.value,this.capitalize(this.reportType.selected.value)),this.calcTotal()}catch(e){console.error(e)}},changeReportType(e){this.reportType.selected=e,this.newPage=1,this.refFilters?.clearAllFields()},async getTitile(){const e=performance.now();this.isLoading=!0,this.openedRows=[],this.title=this.titles[this.reportType.selected.value],await this.getReports();const t=performance.now();setTimeout((()=>this.isLoading=!1),1250-(t-e))},changePage(e){this.newPage=e,this.getTitile()},getFilter(e){this.filter=e,this.newPage=1,this.getTitile()},sort(e,t){this.newPage=1,this.sorted={by:e,order:t},this.getTitile()},round(e){return e=Number(e),Math.round(100*e)/100+(this.isMDLAccount?" MDL":" р.")},capitalize(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},applyReportsTransformations(e){"customers"==e&&this.reports.data.map((e=>{e["otv"]={value:!1,list:[]},e["poz"]={value:!1,list:[],title:[{name:pt("Analytics.subTitles.name"),code:"name"},{name:pt("Analytics.subTitles.count"),code:"count"},{name:pt("Analytics.subTitles.sum"),code:"sum"},{name:pt("Analytics.subTitles.prib"),code:"prib"}]},e["prib"]=e.sum-e.cost_sum,e.sum=this.round(e.sum),e.cost_sum=this.round(e.cost_sum),e.prib=this.round(e.prib)})),"sales"==e&&this.reports.data.map((e=>{e["poz"]={value:!1,list:[]},e["prib"]=e.sum-e.cost_sum,e.leads=e.leads?.split(","),e.sum=this.round(e.sum),e.cost_sum=this.round(e.cost_sum),e.prib=this.round(e.prib)})),"stuffMove"==e&&this.reports.data.map((e=>{e.event_type=this.reports.types[e.event_type].name}))},exportXlsx(){const e={filter:this.filter,type:this.reportType.selected?.value2?this.reportType.selected.value2:this.reportType.selected.value};this.$store.dispatch("analyticsExport",e)},getAnalyticsLastGroupBy(){const e=JSON.parse(localStorage.getItem("AnalyticsLastGroupBy"));e&&(this.groupBy.selected=e)}}};const dt=(0,V.Z)(ut,[["render",w],["__scopeId","data-v-4f26cb74"]]);var yt=dt}}]);
//# sourceMappingURL=211.822dec51.js.map