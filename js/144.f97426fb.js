"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[144],{9240:function(e,t,a){a.d(t,{Z:function(){return p}});var s=a(3396);const n={class:"z-[46]"};function c(e,t,a,c,o,l){const i=(0,s.up)("NavBar"),d=(0,s.up)("HomeMenu"),u=(0,s.up)("HomeModals");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",n,[(0,s.Wm)(i),(0,s.Wm)(d,{class:"z-[46]"})]),(0,s.Wm)(u,{selectedWH:a.selectedWH},null,8,["selectedWH"])],64)}var o=a(3768),l=a(2692),i=a(1621),d={components:{NavBar:o.Z,HomeMenu:l.Z,HomeModals:i.Z},props:{selectedWH:{type:Object,required:!1}},setup(){}},u=a(89);const r=(0,u.Z)(d,[["render",c],["__scopeId","data-v-bb6a9f2e"]]);var p=r},144:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var s=a(3396),n=a(7139),c=a(9242);const o={class:"app"},l={class:"header"},i={class:"top"},d={class:"bottom"},u={class:"content"},r={key:0},p={key:0,class:"autorization"},m={class:"row"},_={key:1,class:"autorization"},b=["src"];function g(e,t,a,g,v,f){const z=(0,s.up)("AppHeader");(0,s.up)("GenezisSettings"),(0,s.up)("BtnsSaveClose");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",l,[(0,s._)("div",i,[(0,s.Wm)(z)]),(0,s._)("div",d,[(0,s._)("button",{class:(0,n.C_)(["btn",{btn_grey:1==v.selectedTab}]),onClick:t[0]||(t[0]=e=>v.selectedTab=1)},(0,n.zw)(e.$t("Genezis.btnSet")),3),f.account?.config?.g_enabled&&f.account?.g_url?((0,s.wg)(),(0,s.iD)("button",{key:0,class:(0,n.C_)(["btn",{btn_grey:2==v.selectedTab}]),onClick:t[1]||(t[1]=e=>v.selectedTab=2)},(0,n.zw)(e.$t("Genezis.btnSet2")),3)):(0,s.kq)("",!0)])]),(0,s._)("div",u,[1==v.selectedTab?((0,s.wg)(),(0,s.iD)("div",r,[f.account?.config?.g_enabled?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",m,[(0,s.Uk)((0,n.zw)(e.$t("Genezis.gActive"))+" ",1),(0,s._)("button",{class:"btn btn_yellow",onClick:t[2]||(t[2]=e=>f.unAutorization())},(0,n.zw)(e.$t("Genezis.disable")),1)]),(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",_,[(0,s.Uk)((0,n.zw)(e.$t("Genezis.dDisable"))+" ",1),(0,s._)("button",{class:"btn btn_yellow",onClick:t[3]||(t[3]=e=>f.autorization())},(0,n.zw)(e.$t("Genezis.active")),1)]))])):(0,s.kq)("",!0),(0,s.wy)((0,s._)("div",null,[(0,s._)("iframe",{name:"genezis",frameborder:"0",class:"frame",src:f.account?.g_url},null,8,b)],512),[[c.F8,2==v.selectedTab]])])])}var v=a(65),f=a(9240);const z={class:"wrapper"},h={class:"steps"};function w(e,t,a,c,o,l){const i=(0,s.up)("SelectorVue");return(0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("h6",null,(0,n.zw)(a.label),1),(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.copyLeadsDeals,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"label_input",key:t},[(0,s._)("label",null,(0,n.zw)(e.$t("Genesis.field",{name:t?.name})),1),(0,s.Wm)(i,{options_props:c.copyLeadsDealsList,onSelect:e=>c.optionSelectLeadsDeals(e,t?.code),selected_option:t?.selected},null,8,["options_props","onSelect","selected_option"])])))),128))])])}var y=a(4870),S=a(7720),D=a(4581),k=a(2489),G={components:{SelectorVue:S.Z},props:{label:String,leadsDeals:Array,needSave:Boolean},setup(e){const{t:t}=(0,k.j)(),a=(0,y.qj)([]),n=(0,y.qj)([]);let c={};const o=(0,s.Fl)((()=>e.needSave));(0,s.YP)(o,(()=>e.needSave?p():null));const l=(0,s.Fl)((()=>{const e=[];return Object.entries(D.Z.state.account.leadFieldsList).map((a=>{const s=[];Object.entries(a[1].fields).forEach((e=>s.push({name:e[1],value:e[0]}))),a[1].fields=s,a[1].fields.unshift({name:t("global.notSelected"),value:-1}),a[1].selected={name:t("global.notSelected"),value:-1},e.push({value:a[0],...a[1]})})),e})),i=()=>{n.push({name:t("global.notSelected"),value:-1}),l.value.forEach((e=>{const t=e.name;n.push({name:t,value:"optgroup"});const a=e.fields.splice(1,999);a.forEach((e=>n.push({...e,optgroup:!0})))}))},d=()=>{a.map((e=>{e.selected=u(c[e.code],n,"value")}))},u=(e,a,s)=>{let n={name:t("global.notSelected"),value:-1};return a.forEach((t=>{t[s]==e&&(n=t)})),n},r=(e,t)=>{-1==e.value?c[t]="0":c[t]=e.value,a.map((a=>{a.code==t&&(a.selected=e)}))},p=()=>{const e={};a.forEach((t=>{-1!=t.selected.value&&(e[t.code]=t.selected.value)})),D.Z.dispatch("update_account",e)};return(0,s.bv)((async()=>{await Promise.all([D.Z.dispatch("get_account"),D.Z.dispatch("getLeadFieldsList")]),c=JSON.parse(JSON.stringify(D.Z.state.account.account.config)),Object.assign(a,e.leadsDeals),i(),d()})),{copyLeadsDeals:a,copyLeadsDealsList:n,optionSelectLeadsDeals:r}}},Z=a(89);const $=(0,Z.Z)(G,[["render",w],["__scopeId","data-v-7e4ec4b8"]]);var H=$,L=a(8711);const{t:C}=(0,k.j)();var W={name:"InstructionsView",components:{AppHeader:f.Z,GenezisSettings:H,BtnsSaveClose:L.Z},data(){return{selectedTab:1,needSave:!1,genezisSettingsData:[{label:C("Genezis.fields.comp"),leadsDeals:[{name:C("Genezis.fields.comp.compName"),code:"g_company_field_name"},{name:C("Genezis.fields.comp.compInn"),code:"g_company_field_inn"},{name:C("Genezis.fields.comp.compKpp"),code:"g_company_field_kpp"},{name:C("Genezis.fields.comp.compOgrn"),code:"g_company_field_ogrn"}]},{label:C("Genezis.fields.acc"),leadsDeals:[{name:C("Genezis.fields.comp.accName"),code:"g_company_field_account_name"},{name:C("Genezis.fields.comp.accSch"),code:"g_company_field_account_correspondent"},{name:C("Genezis.fields.comp.accBik"),code:"g_company_field_account_bic"},{name:C("Genezis.fields.comp.accRas"),code:"g_company_field_account_settlement"}]}]}},mounted(){this.$store.dispatch("get_account")},computed:{...(0,v.Se)(["catalog"]),account(){return this.$store.state.account.account}},methods:{async unAutorization(){await this.$store.dispatch("genezisEnableDisable","disable"),this.$store.dispatch("get_account")},async autorization(){await this.$store.dispatch("genezisEnableDisable","enable"),this.$store.dispatch("get_account")},save(){this.needSave=!0,(0,s.Y3)((()=>this.needSave=!1))},route(e){this.$router.push("/"+e)}}};const j=(0,Z.Z)(W,[["render",g],["__scopeId","data-v-78952156"]]);var E=j}}]);
//# sourceMappingURL=144.f97426fb.js.map