"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[520],{1897:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(3396);const n=e=>((0,l.dD)("data-v-580fb103"),e=e(),(0,l.Cn)(),e),s={class:"date_range"},o=["value"],c=n((()=>(0,l._)("span",null," - ",-1))),u=["value"];function i(e,t,a,n,i,r){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("input",{type:"date",value:a.dateStart?n.pattern("/","-",a.dateStart):n.pattern("/","-",a.dateRange?.split("-")[0]),onInput:t[0]||(t[0]=t=>(e.$emit("update:dateStart",n.pattern("-","/",t.target.value)?.split("-").join("/")),e.$emit("update:dateRange",n.pattern("-","/",t.target.value)?.split("-").join("/")+"-"+a.dateRange?.split("-")[1])))},null,40,o),c,(0,l._)("input",{type:"date",value:a.dateEnd?n.pattern("/","-",a.dateEnd):n.pattern("/","-",a.dateRange?.split("-")[1]),onInput:t[1]||(t[1]=t=>(e.$emit("update:dateEnd",n.pattern("-","/",t.target.value)?.split("-").join("/")),e.$emit("update:dateRange",a.dateRange?.split("-")[0]+"-"+n.pattern("-","/",t.target.value)?.split("-").join("/"))))},null,40,u)])}var r={props:{dateStart:{type:String,required:!1},dateEnd:{type:String,required:!1},dateRange:{type:String,required:!1}},setup(){const e=(e,t,a)=>a?.split(e)?.join(t);return{pattern:e}}},d=a(89);const p=(0,d.Z)(r,[["render",i],["__scopeId","data-v-580fb103"]]);var m=p},9240:function(e,t,a){a.d(t,{Z:function(){return p}});var l=a(3396);const n={class:"z-[46]"};function s(e,t,a,s,o,c){const u=(0,l.up)("NavBar"),i=(0,l.up)("HomeMenu"),r=(0,l.up)("HomeModals");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("header",n,[(0,l.Wm)(u),(0,l.Wm)(i,{class:"z-[46]"})]),(0,l.Wm)(r,{selectedWH:a.selectedWH},null,8,["selectedWH"])],64)}var o=a(3768),c=a(2692),u=a(1621),i={components:{NavBar:o.Z,HomeMenu:c.Z,HomeModals:u.Z},props:{selectedWH:{type:Object,required:!1}},setup(){}},r=a(89);const d=(0,r.Z)(i,[["render",s],["__scopeId","data-v-bb6a9f2e"]]);var p=d},6426:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(3396),n=a(7139);const s={class:"text"},o=["placeholder","value"];function c(e,t,a,c,u,i){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("input",{type:"text",class:(0,n.C_)(a.underlined?"input_uderline":"input"),placeholder:a.placeholder,value:a.inputValue,onInput:t[0]||(t[0]=t=>e.$emit("update:inputValue",t.target.value))},null,42,o)])}var u={props:{inputValue:{type:String,required:!1},placeholder:{type:String,required:!1},underlined:{type:Boolean,required:!1}},setup(){}},i=a(89);const r=(0,i.Z)(u,[["render",c],["__scopeId","data-v-5e112b4a"]]);var d=r},7570:function(e,t,a){a.d(t,{Z:function(){return p}});var l=a(3396),n=a(7139);const s={class:"grid gap-3"},o=["disabled"],c={class:"current d"};function u(e,t,a,u,i,r){return(0,l.wg)(),(0,l.iD)("div",s,[a.page.current!=a.page.first&&null!=a.page.prev?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>u.prev()),disabled:a.disabled,class:"a"},(0,n.zw)("<"),8,o)):(0,l.kq)("",!0),a.page.current!=a.page.first&&a.page.prev!=a.page.first&&null!=a.page.first?((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:t[1]||(t[1]=e=>u.first()),class:"b"},(0,n.zw)(a.page.first),1)):(0,l.kq)("",!0),a.page.current!=a.page.first&&null!=a.page.prev?((0,l.wg)(),(0,l.iD)("button",{key:2,onClick:t[2]||(t[2]=e=>u.prev()),class:"c"},(0,n.zw)(a.page.prev),1)):(0,l.kq)("",!0),(0,l._)("button",c,(0,n.zw)(a.page.current),1),a.page.current!=a.page.last&&null!=a.page.next?((0,l.wg)(),(0,l.iD)("button",{key:3,onClick:t[3]||(t[3]=e=>u.next()),class:"e"},(0,n.zw)(a.page.next),1)):(0,l.kq)("",!0),a.page.current!=a.page.last&&a.page.next!=a.page.last&&null!=a.page.last?((0,l.wg)(),(0,l.iD)("button",{key:4,onClick:t[4]||(t[4]=e=>u.last()),class:"f"},(0,n.zw)(a.page.last),1)):(0,l.kq)("",!0),a.page.current!=a.page.last&&null!=a.page.next?((0,l.wg)(),(0,l.iD)("button",{key:5,onClick:t[5]||(t[5]=e=>u.next()),class:"g"},(0,n.zw)(">"))):(0,l.kq)("",!0)])}var i={props:{page:Object,disabled:Boolean},emits:{changePage(e){return e>0&&"number"===typeof e}},setup(e,t){const a=()=>t.emit("changePage",e.page.first),l=()=>t.emit("changePage",e.page.current-1),n=()=>t.emit("changePage",e.page.current+1),s=()=>t.emit("changePage",e.page.last);return{prev:l,first:a,next:n,last:s}}},r=a(89);const d=(0,r.Z)(i,[["render",u],["__scopeId","data-v-3934a00d"]]);var p=d},6515:function(e,t,a){a.d(t,{Z:function(){return d}});var l=a(3396),n=a(7139);function s(e,t,a,s,o,c){const u=(0,l.up)("AppPaginator"),i=(0,l.up)("selector-vue");return a.show?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,n.C_)(["bottom",{blur:a.blur}])},[a.showBtns?((0,l.wg)(),(0,l.j4)(u,{key:0,page:a.page,disabled:a.disabled,onChangePage:c.changePage},null,8,["page","disabled","onChangePage"])):(0,l.kq)("",!0),a.showSelector?((0,l.wg)(),(0,l.j4)(i,{key:1,disabled:a.disabled,class:"count",options_props:o.count_values,selected_option:{name:a.count,value:-1},onSelect:c.change_count},null,8,["disabled","options_props","selected_option","onSelect"])):(0,l.kq)("",!0)],2)):(0,l.kq)("",!0)}var o=a(7720),c=a(7570),u={components:{SelectorVue:o.Z,AppPaginator:c.Z},props:{previous:{type:Boolean,required:!1},next:{type:Boolean,required:!1},page:{type:Object,required:!1,default(){return{first:1,prev:null,current:1,next:null,last:1}}},count:{type:Number,required:!0},blur:{type:Boolean,required:!1,default:!1},show:{type:Boolean,required:!1,default:!0},showBtns:{type:Boolean,required:!1,default:!0},showSelector:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!1,default:!1}},emits:{changePage:null,changeCount:null},data(){return{count_values:[]}},async mounted(){await this.$store.dispatch("get_account"),this.$store.state.account.user.config.per_pages&&(this.count_values=[...this.$store.state.account.user.config.per_pages].map(((e,t)=>({name:e,value:t}))))},computed:{},methods:{changePage(e){this.$emit("changePage",e)},change_count(e){this.$emit("changeCount",e.name)}}},i=a(89);const r=(0,i.Z)(u,[["render",s],["__scopeId","data-v-4bee144d"]]);var d=r},7520:function(e,t,a){a.r(t),a.d(t,{default:function(){return te}});var l=a(3396);const n={class:"app"},s={class:"header"},o={class:"wrapper mb-8"};function c(e,t,a,c,u,i){const r=(0,l.up)("AppHeader"),d=(0,l.up)("DocumentsFilters"),p=(0,l.up)("DocumentsGrid");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("div",s,[(0,l.Wm)(r)]),(0,l._)("div",o,[(0,l.Wm)(d),(0,l.Wm)(p)])])}var u=a(9240),i=a(7139),r=a(9242);const d={class:"main"},p={class:"my-2 md:my-4 text-sm md:text-base text-slate-500 dark:text-slate-300 text-left"},m={key:1,class:"table",ref:"table"},g={class:"bar_row"},v=["onClick"],_={class:"bar_item_group"},h={key:0},b={key:0,class:"item",style:{padding:"5px 10px 5px 15px"}},y=["href"],f={key:1,class:"item cursor-pointer"},w={key:2,class:"text"};function D(e,t,a,n,s,o){const c=(0,l.up)("AppTablePreloader"),u=(0,l.up)("grid-bottom");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",d,[(0,l._)("p",p,(0,i.zw)(e.$t("Archive.count",{count:n.total})),1),n.isLoading?((0,l.wg)(),(0,l.j4)(c,{key:0,titles:n.titlesForPreloader},null,8,["titles"])):((0,l.wg)(),(0,l.iD)("table",m,[(0,l._)("thead",null,[(0,l._)("tr",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.documents.titles,(e=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("th",{class:(0,i.C_)(["bar_item item",{cursor_pointer:e.sortable}]),style:(0,i.j5)({width:(n.collsCount>=8?100:n.collsCount>3?90:80)/n.collsCount*e.width+"%"}),onClick:t=>e.sortable?n.sort(e.code):null,key:e},[(0,l._)("div",_,[(0,l._)("label",null,(0,i.zw)(e.name),1),e.sortable?((0,l.wg)(),(0,l.iD)("button",{key:0,class:(0,i.C_)(["bar_item_icon",{bar_item_icon_up:"desc"==n.sorting.order&&e.code===n.sorting.order_by,bar_item_icon_down:"asc"==n.sorting.order&&e.code===n.sorting.order_by}])},null,2)):(0,l.kq)("",!0)])],14,v)),[[r.F8,!e.visibleIds||e.visibleIds?.includes(n.accountId)]]))),128))])]),n.documents.list.length?((0,l.wg)(),(0,l.iD)("tbody",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.documents.list,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e,class:"row"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.documents.titles,(t=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[!t.visibleIds||t.visibleIds?.includes(n.accountId)?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[t.isDocumentLink?((0,l.wg)(),(0,l.iD)("td",b,[(0,l._)("a",{target:"black",class:"underline text-[#8cb4ff] decoration-[#3f3f3faf] underline-offset-2 hover:no-underline",href:e.document_link},(0,i.zw)(e[t.code]),9,y)])):((0,l.wg)(),(0,l.iD)("td",f,(0,i.zw)(e[t.code]),1))],64)):(0,l.kq)("",!0)],64)))),128))])))),128))])):(0,l.kq)("",!0)],512)),0==n.documents.length?((0,l.wg)(),(0,l.iD)("label",w,(0,i.zw)(e.$t("global.nothingFound")),1)):(0,l.kq)("",!0)]),n.documents.list.length<n.meta?.meta?.total?((0,l.wg)(),(0,l.j4)(u,{key:0,page:n.page,show:0!=n.documents.list.length,showSelector:!1,count:n.meta?.per_page,onChangePage:n.changePage},null,8,["page","show","count","onChangePage"])):(0,l.kq)("",!0)],64)}var k=a(6515),q=a(4581),A=a(4870),I=a(2489),Z=a(6413);const{t:C}=(0,I.j)(),L=(0,A.qj)({titles:[{name:C("DocumentsTitles.status_id.name"),placeholder:C("DocumentsTitles.status_id.placeholder"),code:"status_id",type:"AppInputSelect",minLength:0,requestDelay:0,value:"",selected:{},width:1,sortable:!1,isAutocomplete:!1,selfList:!0,url:"document/templates",list:[],visibleIds:[148,1]},{name:C("DocumentsTitles.template_name.name"),placeholder:C("DocumentsTitles.template_name.placeholder"),code:"template_name",isDocumentLink:!0,type:"AppInputSelect",minLength:0,requestDelay:0,value:"",selected:{},width:1,sortable:!0,isAutocomplete:!1,url:"document/templates",list:[]},{name:C("DocumentsTitles.lead_name.name"),placeholder:C("DocumentsTitles.lead_name.placeholder"),code:"lead_name",type:"AppInputSelect",minLength:0,requestDelay:300,value:"",selected:{},width:1,sortable:!0,isAutocomplete:!0,url:"document/autocomplete/lead_name",list:[]},{name:C("DocumentsTitles.company_name.name"),placeholder:C("DocumentsTitles.company_name.placeholder"),code:"company_name",type:"AppInputSelect",minLength:3,requestDelay:300,value:"",selected:{},width:1,sortable:!0,isAutocomplete:!0,url:"analytics/autocomplete/company",list:[]},{name:C("DocumentsTitles.contact_name.name"),placeholder:C("DocumentsTitles.contact_name.placeholder"),code:"contact_name",type:"AppInputSelect",minLength:3,requestDelay:300,value:"",selected:{},width:1,sortable:!0,isAutocomplete:!0,url:"analytics/autocomplete/contact",list:[]},{name:C("DocumentsTitles.user_name.name"),placeholder:C("DocumentsTitles.user_name.placeholder"),code:"user_name",type:"AppInputSelect",minLength:0,requestDelay:0,value:"",selected:{},width:1,sortable:!0,isAutocomplete:!1,url:"document/users",list:[]},{name:C("DocumentsTitles.created_at.name"),placeholder:C("DocumentsTitles.created_at.placeholder"),code:"created_at",type:"AppDateRange",minLength:0,requestDelay:0,value:"",selected:"-",width:1,sortable:!0,list:[]}],list:[]}),x=(0,l.Fl)((()=>L.titles.find((e=>"status_id"===e.code)))),S=(0,l.Fl)((()=>q.Z.state.documents.documents)),T=()=>{L.list=[];const e=e=>{let t="";if(x.value&&x.value.list){const a=x.value.list.find((t=>t.id==e));a&&(t=a.name)}return t};S.value.forEach((t=>{const a={template_name:t?.name,document_link:t?.url,lead_name:t?.lead_name,company_name:t?.company_name,contact_name:t?.contact_name,user_name:t?.user_name,created_at:t?.created_at,status_id:e(t?.pipeline_id)+" - "+e(t?.status_id)};" - "===a.status_id&&(a.status_id=""),L.list.push(a)}))};function P(){const e=(0,l.Fl)((()=>L.titles.length)),t=()=>{L.titles.map((async e=>{if("AppInputSelect"===e.type&&!e.isAutocomplete&&!e.selfList){const t=await q.Z.dispatch("getAutocomplete",{subUrl:e.url,value:{}});e.list=[],t.forEach((t=>e.list.push({name:t,value:t})))}}))},a=async()=>{await q.Z.dispatch("getPipelinesListV2");const e=q.Z.state.account.pipelinesListV2;Object.entries(e).forEach((([e,t])=>{x.value.list.push({name:t.name,value:"optgroup",id:e}),t.statuses.forEach((t=>{x.value.list.push({name:t.name,value:e+"-"+t.id,id:t.id,color:t.color,optgroup:!0})}))}))},n=async e=>{const t={subUrl:e.url,value:{query:e.value}};"contact_name"===e.code&&(t.value.from_docs=1);const a=await q.Z.dispatch("getAutocomplete",t);e.list=[],a.forEach((t=>{const a={name:t,value:t};t.label&&(a.name=t.label,a.value=t.value),e.list.push(a)}))},[s,o]=(0,Z.OT)(!1),c=async()=>{o(!0),await Promise.all([a(),q.Z.dispatch("getDocuments",q.Z.state.documents.filters)]),T(),o(!1)},u=(0,l.Fl)((()=>L.titles)),i=(0,l.Fl)((()=>q.Z.state.documents.meta?.meta?.total));return{documents:L,collsCount:e,fillDocuments:T,getDocuments:c,documentsTitles:u,total:i,fillTitlesList:t,getAutocompleteList:n,isLoading:s}}var F=a(4547),j={components:{GridBottom:k.Z,AppTablePreloader:F.Z},setup(){const{documents:e,collsCount:t,getDocuments:a,total:n,fillTitlesList:s,isLoading:o}=P();(0,l.bv)((()=>{a(),s()}));const c=(0,A.qj)({order_by:null,order:""}),u=(0,l.Fl)((()=>q.Z.state.account.account.id)),i=(0,l.Fl)((()=>q.Z.state.orders.meta)),r=(0,l.Fl)((()=>{const e={first:d(i.value?.links?.first),prev:d(i.value?.links?.prev),current:i.value?.meta?.current_page,next:d(i.value?.links?.next),last:d(i.value?.links?.last)};return e})),d=e=>e?e.split("?page=")[1]:null,p=e=>{const t={page:e};q.Z.commit("updateDocumentsFilters",t),a()},m=e=>{c.order_by!=e&&(c.order="",c.order_by=e),"desc"!==c.order&&c.order?"asc"===c.order&&(c.order="desc"):c.order="asc",q.Z.commit("updateDocumentsFilters",c),a()},g=(0,l.Fl)((()=>Object.values(e.titles).reduce(((e,t)=>(t.visibleIds&&!t.visibleIds?.includes(u)||e.push(t.name),e)),[])));return{documents:e,collsCount:t,sorting:c,sort:m,changePage:p,page:r,total:n,meta:i,accountId:u,isLoading:o,titlesForPreloader:g}}},H=a(89);const R=(0,H.Z)(j,[["render",D],["__scopeId","data-v-58ee3f88"]]);var z=R;const B={class:"flex flex-col gap-5 w-full"},$={class:"row"},V={class:"left"},E={class:"flex flex-col w-full gap-3"},W={class:"filters"},M={class:"btns"};function Y(e,t,a,n,s,o){return(0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("div",$,[(0,l._)("div",V,[(0,l._)("div",E,[(0,l._)("div",W,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.documentsTitles,(t=>(0,l.wy)(((0,l.wg)(),(0,l.j4)((0,l.LL)(t.type),{key:t.code,list:t.isAutocomplete?t.list:n.filterList(t.value,t.list),selected:t.selected,countLettersReq:t.minLength,placeholder:t.placeholder,requestDelay:t.requestDelay,SelectedInTitle:!0,dateRange:t.selected,inputValue:t.selected,"onUpdate:dateRange":e=>t.selected=e,"onUpdate:inputValue":e=>t.selected=e,onChangeInputValue:e=>(t.value=e,t.isAutocomplete?n.getAutocompleteList(t):null),onSelect:e=>"AppMultiSelect"===t.type?n.selectMulti(e,t.code):t.selected=e},null,40,["list","selected","countLettersReq","placeholder","requestDelay","dateRange","inputValue","onUpdate:dateRange","onUpdate:inputValue","onChangeInputValue","onSelect"])),[[r.F8,!t.visibleIds||t.visibleIds?.includes(e.accountId)]]))),128))])]),(0,l._)("div",M,[(0,l._)("button",{class:"btn btn_blue",onClick:t[0]||(t[0]=e=>n.apply())},(0,i.zw)(e.$t("global.apply2")),1),(0,l._)("button",{class:"btn btn_grey",onClick:t[1]||(t[1]=e=>n.clearAllFields())},(0,i.zw)(e.$t("global.clear")),1)])])])])}var O=a(1897),U=a(8890),K=a(2518),G=a(6426),N={components:{AppInputSelect:U.Z,AppDateRange:O.Z,AppInput:G.Z,AppMultiSelect:K.Z},setup(){const{documentsTitles:e,getDocuments:t,getAutocompleteList:a}=P(),l=()=>{e.value.map((e=>{e.value="",e.selected={},"AppDateRange"===e.type&&(e.selected="-"),"AppInput"===e.type&&(e.selected="")})),n()},n=()=>{const a={};e.value.forEach((e=>{let t=e.selected?.value;"AppDateRange"!==e.type&&"AppInput"!==e.type||"-"===e.selected?"status_id"===e.code&&(t=e.selected.id):t=e.selected,a[e.code]=t})),q.Z.commit("updateDocumentsFilters",a),t()},s=(e,t)=>t.filter((t=>t?.name?.toLowerCase()?.includes(e?.toLowerCase()))),o=(t,a)=>{if("all"===t.value){const l=e.value?.find((e=>e.code===a));l?.list?.forEach((e=>{"all"!==e.value&&(e.selected=!t.selected)}))}t.selected=!t.selected};return{documentsTitles:e,clearAllFields:l,apply:n,filterList:s,selectMulti:o,getAutocompleteList:a}}};const J=(0,H.Z)(N,[["render",Y],["__scopeId","data-v-6918a9f2"]]);var Q=J,X={components:{AppHeader:u.Z,DocumentsGrid:z,DocumentsFilters:Q},setup(){}};const ee=(0,H.Z)(X,[["render",c],["__scopeId","data-v-5dc503b2"]]);var te=ee}}]);
//# sourceMappingURL=520.4c5ff726.js.map