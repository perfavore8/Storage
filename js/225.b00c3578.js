(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[225],{5306:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return hc}});var o=i(6252),n=i(3577),s=i(9963);const l=e=>((0,o.dD)("data-v-0f5505d4"),e=e(),(0,o.Cn)(),e),a={key:0,class:"table_setings"},r={key:0,class:"edit_staff"},d={key:0,class:"product_category"},c={key:0,class:"thirdPpartyIntegrations"},u={key:0,class:"product_properties"},_={key:0,class:"new_position"},p={key:0,class:"cancel_position"},h={key:0,class:"document_setting"},m={class:"header_left"},f={class:"btns"},g=["onClick"],v={class:"whs"},y={class:"header_right"},b=l((()=>(0,o._)("div",{class:"ref"},[(0,o._)("div",{class:"ref_1_logo"}),(0,o._)("a",{class:"links"},"Выгрузка в эксель")],-1))),w={class:"ref"},C=l((()=>(0,o._)("div",{class:"ref_2_logo"},null,-1))),k={key:0,class:"modal_settings modal_sync"},x=l((()=>(0,o._)("a",null,[(0,o._)("div",{class:"modal_container"},"AmoCrm -> Склад")],-1))),D=l((()=>(0,o._)("a",null,[(0,o._)("div",{class:"modal_container"},"Склад -> AmoCrm")],-1))),S=[x,D],E={class:"modal_settings"},T=l((()=>(0,o._)("a",null,[(0,o._)("div",{class:"modal_container"}," Синхронизация склада с товарами amoCrm ")],-1))),I={class:"filters_left"},O={class:"date"},V=l((()=>(0,o._)("input",{type:"date",id:"start",name:"trip-start",value:"2018-07-22",min:"2018-01-01",max:"2032-12-31","aria-required":"true","aria-invalid":"false"},null,-1))),q={class:"bot"},$=l((()=>(0,o._)("label",{for:"grid"},null,-1))),P={class:"buttons"},W=["disabled"],M={class:"filters_right"},F={key:0,class:"btns"},j=l((()=>(0,o._)("button",{class:"btn"},"Применить",-1))),U={class:"filter_group"},N=l((()=>(0,o._)("label",{for:"filter"},"Фильтр",-1))),A=["disabled"],Y={class:"grid"};function H(e,t,i,l,x,D){const H=(0,o.up)("table-settings"),B=(0,o.up)("edit-stuff"),R=(0,o.up)("product-category"),Z=(0,o.up)("ThirdPpartyIntegrations"),z=(0,o.up)("product-properties"),X=(0,o.up)("new-position"),L=(0,o.up)("cancel-position"),K=(0,o.up)("document-setting"),G=(0,o.up)("SelectorVue"),J=(0,o.up)("main-grid"),Q=(0,o.up)("card-grid");return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["app",{disabled:D.disabled_for_modals}]),onClick:t[14]||(t[14]=t=>{e.show_settings&&D.close_settings(),e.show_sync&&D.close_sync()})},[e.show_table_settings?((0,o.wg)(),(0,o.iD)("div",a,[(0,o.Wm)(H,{selectedWH:x.selectedWH},null,8,["selectedWH"])])):(0,o.kq)("",!0),(0,o.Wm)(s.uT,{name:"modal_window"},{default:(0,o.w5)((()=>[e.show_edit_stuff?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(B)])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(s.uT,{name:"modal_window"},{default:(0,o.w5)((()=>[e.show_product_category?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(R)])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(s.uT,{name:"modal_window"},{default:(0,o.w5)((()=>[e.showThirdPpartyIntegrations?((0,o.wg)(),(0,o.iD)("div",c,[(0,o.Wm)(Z)])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(s.uT,{name:"modal_window"},{default:(0,o.w5)((()=>[e.show_product_properties?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(z)])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(s.uT,{name:"modal_window"},{default:(0,o.w5)((()=>[e.show_new_position?((0,o.wg)(),(0,o.iD)("div",_,[(0,o.Wm)(X,{currentItems:x.currentItems,onClose:D.dropCurrentItems},null,8,["currentItems","onClose"])])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(s.uT,{name:"modal_window"},{default:(0,o.w5)((()=>[e.show_cancel_position?((0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(L)])):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(s.uT,{name:"modal_window"},{default:(0,o.w5)((()=>[e.show_document_setting?((0,o.wg)(),(0,o.iD)("div",h,[(0,o.Wm)(K,{onClose:D.open_close_show_document_setting},null,8,["onClose"])])):(0,o.kq)("",!0)])),_:1}),(0,o._)("div",{class:(0,n.C_)(["header",{blur:D.disabled_for_modals}])},[(0,o._)("div",m,[(0,o._)("div",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.catalog,(t=>((0,o.wg)(),(0,o.iD)("button",{class:(0,n.C_)(["btns_btn",{selected_catalog:e.$route.name===t.value}]),onClick:e=>D.route(t.value),key:t},(0,n.zw)(t.name),11,g)))),128))]),(0,o._)("div",v,[(0,o.Wm)(G,{options_props:x.whs,selected_option:x.selectedWH,onSelect:D.selectWH},null,8,["options_props","selected_option","onSelect"])])]),(0,o._)("div",y,[b,(0,o._)("div",w,[C,(0,o._)("a",{class:"links",onClick:t[0]||(t[0]=(0,s.iM)((e=>D.open_close_sync()),["stop"]))}," Синхронизировать товары "),(0,o.Wm)(s.uT,{name:"modal"},{default:(0,o.w5)((()=>[e.show_sync?((0,o.wg)(),(0,o.iD)("div",k,S)):(0,o.kq)("",!0)])),_:1})]),(0,o._)("button",{class:"settings_btn",onClick:t[6]||(t[6]=(0,s.iM)((e=>D.open_close_settings()),["stop"]))},[(0,o.Wm)(s.uT,{name:"modal"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",E,[(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:t[1]||(t[1]=e=>D.open_edit_stuff())}," Настройка товаров ")]),(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:t[2]||(t[2]=e=>D.open_product_category())}," Категории товаров ")]),(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:t[3]||(t[3]=e=>D.openThirdPpartyIntegrations())}," Сторонние интеграции ")]),(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:t[4]||(t[4]=e=>D.open_product_properties())}," Свойства товаров ")]),T,(0,o._)("a",null,[(0,o._)("div",{class:"modal_container",onClick:t[5]||(t[5]=e=>D.open_close_show_document_setting(!0))}," Документы ")])],512),[[s.F8,e.show_settings]])])),_:1})])])],2),(0,o._)("div",{class:(0,n.C_)(["wrapper",{blur:e.show_table_settings||e.show_edit_stuff||e.show_new_position||e.show_cancel_position||e.show_product_category||e.show_product_properties||e.show_document_setting}])},[(0,o._)("div",{class:(0,n.C_)(["filters",{blur:e.show_edit_modal}])},[(0,o._)("div",I,[(0,o._)("div",O,[V,(0,o._)("div",q,[(0,o._)("p",null,"Найдено: "+(0,n.zw)(D.totalCountProducts),1),(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>x.grid=e),id:"grid"},null,512),[[s.e8,x.grid]]),$])]),(0,o.Wm)(s.uT,{name:"btns"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",P,[(0,o._)("button",{class:"button button_1 smallBtn",onClick:t[8]||(t[8]=e=>D.archive_data())}," Архивировать "),D.isServicePage?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("button",{class:"button button_2 smallBtn",onClick:t[9]||(t[9]=e=>D.addCurrentProducts()),disabled:D.oneC}," Добавить ",8,W),(0,o._)("button",{class:"button button_3 smallBtn",onClick:t[10]||(t[10]=e=>D.open_close_cancel_position(!0))}," Списать ")],64))],512),[[s.F8,e.show_buttons]])])),_:1})]),(0,o._)("div",M,[x.filter_value?((0,o.wg)(),(0,o.iD)("div",F,[j,(0,o._)("button",{class:"btn",onClick:t[11]||(t[11]=e=>D.clearFilters())},"Очистить")])):(0,o.kq)("",!0),(0,o._)("div",U,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>x.filter_value=e),name:"filter",id:"filter",class:"checkbox"},null,512),[[s.e8,x.filter_value]]),N]),(0,o._)("button",{class:"button button_4 smallBtn",onClick:t[13]||(t[13]=e=>D.open_close_new_position(!0)),disabled:D.isServicePage||D.oneC}," Новая позиция ",8,A)])],2),(0,o._)("div",Y,[x.grid?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(J,{key:0,ref:"main",selectedWH:x.selectedWH},null,8,["selectedWH"])),x.grid?((0,o.wg)(),(0,o.j4)(Q,{key:1,ref:"card"},null,512)):(0,o.kq)("",!0)])],2)],2)}const B={class:"wrapper"},R={key:1,class:"text"},Z={class:"item"},z=["id","onUpdate:modelValue","onChange"],X=["for"],L={class:"item"},K={key:0},G={key:1},J={class:"item"},Q=["onClick"];function ee(e,t,i,l,a,r){const d=(0,o.up)("edit-item"),c=(0,o.up)("main-grid-bar"),u=(0,o.up)("main-grid-filters"),_=(0,o.up)("grid-bottom");return(0,o.wg)(),(0,o.iD)("div",B,[e.show_edit_modal?((0,o.wg)(),(0,o.j4)(d,{key:0,edit_data:a.edit_data},null,8,["edit_data"])):(0,o.kq)("",!0),0==r.products.length?((0,o.wg)(),(0,o.iD)("label",R," Ничего не найдено ")):((0,o.wg)(),(0,o.iD)("table",{key:2,class:(0,n.C_)(["table",{blur:e.show_edit_modal}])},[(0,o._)("thead",null,[(0,o.Wm)(c,{fields:r.all_fields,onSort:r.sort,tableConfig:r.tableConfig,sortedFields:r.sortedFields},null,8,["fields","onSort","tableConfig","sortedFields"]),(0,o.Wm)(u,{ref:"filters",fields:r.all_fields,tableConfig:r.tableConfig,sortedFields:r.sortedFields},null,8,["fields","tableConfig","sortedFields"])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.products,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:e.id},[(0,o._)("td",Z,[void 0!=a.selectedProducts[t]?(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:0,type:"checkbox",class:"checkbox",id:e.id,"onUpdate:modelValue":e=>a.selectedProducts[t].value=e,onChange:i=>a.selectedProducts[t].item=e},null,40,z)),[[s.e8,a.selectedProducts[t].value]]):(0,o.kq)("",!0),(0,o._)("label",{for:e.id},null,8,X)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.sortedFields,(t=>((0,o.wg)(),(0,o.iD)(o.HY,{key:t},[(0,o._)("td",L,[t[0].split(".").length<2?((0,o.wg)(),(0,o.iD)("span",K,(0,n.zw)(e.fields[t[0]]),1)):((0,o.wg)(),(0,o.iD)("span",G,(0,n.zw)("cost"==t[0].split(".")[1]?e.fields[t[0].split(".")[0]][t[0].split(".")[1]]+" "+e.fields[t[0].split(".")[0]].currency:e.fields[t[0].split(".")[0]][t[0].split(".")[1]]),1))]),(r.isShow(t.code).value,(0,o.kq)("",!0))],64)))),128)),(0,o._)("td",J,[(0,o._)("div",{class:(0,n.C_)(["edit_icon",{disabledEdit:r.oneC}]),onClick:t=>r.open_edit_modal(e)},null,10,Q)])])))),128))])],2)),(0,o.Wm)(_,{previous:null!=r.meta.links.prev,next:null!=r.meta.links.next,page:r.meta.meta.current_page,blur:e.show_edit_modal,show:0!=r.products.length,count:r.count,onChangePage:r.changePage,onChangeCount:r.changeCount},null,8,["previous","next","page","blur","show","count","onChangePage","onChangeCount"])])}const te=(0,o._)("div",{class:"background_edit_modal"},null,-1),ie={class:"app_edit_modal"},oe={class:"header"},ne={class:"header_left"},se={class:"header_right"},le=(0,o.Uk)("Отмена"),ae=(0,o._)("div",{class:"hr"},null,-1),re={class:"main"},de={class:"row"},ce=(0,o._)("label",null,"Тип:",-1),ue=(0,o._)("div",{class:"hr"},null,-1),_e={class:"footer"},pe=(0,o.Uk)("Отмена");function he(e,t,i,s,l,a){const r=(0,o.up)("BtnsSaveClose"),d=(0,o.up)("SelectorVue"),c=(0,o.up)("edit-item-fields");return(0,o.wg)(),(0,o.iD)(o.HY,null,[te,(0,o._)("div",ie,[(0,o._)("div",oe,[(0,o._)("div",ne," Редактирование "+(0,n.zw)(i.edit_data.fields["name"]),1),(0,o._)("div",se,[(0,o.Wm)(r,{onClose:a.close,onSave:a.save},{close:(0,o.w5)((()=>[le])),other_btns:(0,o.w5)((()=>[(0,o._)("button",{class:"btn btn3",onClick:t[0]||(t[0]=e=>a.archive())},"Архивировать")])),_:1},8,["onClose","onSave"])])]),ae,(0,o._)("div",re,[(0,o._)("div",de,[ce,(0,o.Wm)(d,{options_props:l.options_1,onSelect:a.option_select_1,selected_option:l.selected_option_1},null,8,["options_props","onSelect","selected_option"])]),(0,o.Wm)(c,{new_edit_data:l.new_edit_data,onChange_value:a.change_value},null,8,["new_edit_data","onChange_value"])]),ue,(0,o._)("div",_e,[(0,o.Wm)(r,{onClose:a.close,onSave:a.save},{close:(0,o.w5)((()=>[pe])),other_btns:(0,o.w5)((()=>[(0,o._)("button",{class:"btn btn3",onClick:t[1]||(t[1]=e=>a.archive())},"Архивировать")])),_:1},8,["onClose","onSave"])])])],64)}var me=i(4469),fe=i(8513);function ge(e,t,i,n,s,l){const a=(0,o.up)("edit-integer"),r=(0,o.up)("edit-float"),d=(0,o.up)("edit-string"),c=(0,o.up)("edit-text"),u=(0,o.up)("edit-selector"),_=(0,o.up)("edit-multi-selector"),p=(0,o.up)("edit-date"),h=(0,o.up)("edit-date-time"),m=(0,o.up)("edit-flag");return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(s.copy_fields_with_parents,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:e.id},[1==e.type?((0,o.wg)(),(0,o.j4)(a,{key:0,item:e.name,selected_option:i.new_edit_data.fields[e.code],idx:e.code,disabled:!!e.is_editable,onChange_value:l.change_value},null,8,["item","selected_option","idx","disabled","onChange_value"])):(0,o.kq)("",!0),2==e.type?((0,o.wg)(),(0,o.j4)(r,{key:1,item:e.name,selected_option:i.new_edit_data.fields[e.code],idx:e.code,disabled:!!e.is_editable,onChange_value:l.change_value},null,8,["item","selected_option","idx","disabled","onChange_value"])):(0,o.kq)("",!0),3==e.type?((0,o.wg)(),(0,o.j4)(d,{key:2,item:e.name,selected_option:i.new_edit_data.fields[e.code],idx:e.code,disabled:!!e.is_editable,onChange_value:l.change_value},null,8,["item","selected_option","idx","disabled","onChange_value"])):(0,o.kq)("",!0),4==e.type?((0,o.wg)(),(0,o.j4)(c,{key:3,item:e.name,selected_option:i.new_edit_data.fields[e.code],idx:e.code,disabled:!!e.is_editable,onChange_value:l.change_value},null,8,["item","selected_option","idx","disabled","onChange_value"])):(0,o.kq)("",!0),5==e.type?((0,o.wg)(),(0,o.j4)(u,{key:4,item:e,selected_option:i.new_edit_data.fields[e.code],idx:e.code,disabled:!!e.is_editable,onChange_value:l.change_value},null,8,["item","selected_option","idx","disabled","onChange_value"])):(0,o.kq)("",!0),6==e.type?((0,o.wg)(),(0,o.j4)(_,{key:5,item:e,selected_options:i.new_edit_data.fields[e.code],idx:e.code,disabled:!!e.is_editable,onChange_value:l.change_value},null,8,["item","selected_options","idx","disabled","onChange_value"])):(0,o.kq)("",!0),7==e.type?((0,o.wg)(),(0,o.j4)(p,{key:6,item:e.name,selected_option:i.new_edit_data.fields[e.code],idx:e.code,onChange_value:l.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),8==e.type?((0,o.wg)(),(0,o.j4)(h,{key:7,item:e.name,selected_option:i.new_edit_data.fields[e.code],idx:e.code,onChange_value:l.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0),9==e.type?((0,o.wg)(),(0,o.j4)(m,{key:8,item:e.name,selected_option:i.new_edit_data.fields[e.code],idx:e.code,onChange_value:l.change_value},null,8,["item","selected_option","idx","onChange_value"])):(0,o.kq)("",!0)])))),128)}const ve={class:"row"},ye=["disabled"];function be(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",ve,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"number",class:"input",step:"1",onchange:"this.value = parseInt(this.value);","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e),disabled:i.disabled},null,8,ye),[[s.nr,a.copy_selected_option]])])}var we={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.copy_selected_option=`${this.copy_selected_option}`,this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}},Ce=i(3744);const ke=(0,Ce.Z)(we,[["render",be],["__scopeId","data-v-a731a2b4"]]);var xe=ke;const De={class:"row"},Se=["disabled"];function Ee(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",De,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"number",class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e),disabled:i.disabled},null,8,Se),[[s.nr,a.copy_selected_option]])])}var Te={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.copy_selected_option=`${this.copy_selected_option}`,this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const Ie=(0,Ce.Z)(Te,[["render",Ee],["__scopeId","data-v-1077f776"]]);var Oe=Ie;const Ve={class:"row"},qe=["disabled"];function $e(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",Ve,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e),disabled:i.disabled},null,8,qe),[[s.nr,a.copy_selected_option]])])}var Pe={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const We=(0,Ce.Z)(Pe,[["render",$e],["__scopeId","data-v-09d70360"]]);var Me=We;const Fe={class:"row"},je=["disabled"];function Ue(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",Fe,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("textarea",{class:"text_area",cols:"30",rows:"10","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e),disabled:i.disabled},null,8,je),[[s.nr,a.copy_selected_option]])])}var Ne={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const Ae=(0,Ce.Z)(Ne,[["render",Ue],["__scopeId","data-v-47beb2fc"]]);var Ye=Ae;const He={class:"row"};function Be(e,t,i,s,l,a){const r=(0,o.up)("SelectorVue");return(0,o.wg)(),(0,o.iD)("div",He,[(0,o._)("label",null,(0,n.zw)(i.item.name)+":",1),(0,o.Wm)(r,{options_props:a.preparing_field_data(i.item.data),onSelect:a.option_select,selected_option:{name:l.copy_selected_option,value:-1},disabled:i.disabled},null,8,["options_props","onSelect","selected_option","disabled"])])}var Re={components:{SelectorVue:me.Z},props:{item:{type:Object,required:!0,default(){return{}}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:{}}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()}},methods:{change_value(){(0,o.Y3)((()=>{this.item.data?.forEach((e=>{e==this.selected_option&&(this.copy_selected_option=e)}))}))},preparing_field_data(e){const t=[];return e&&e.forEach(((e,i)=>t.push({name:e,value:i}))),t},option_select(e){this.$emit("change_value",e.name,this.idx)}}};const Ze=(0,Ce.Z)(Re,[["render",Be],["__scopeId","data-v-91234aba"]]);var ze=Ze;const Xe={class:"row"};function Le(e,t,i,s,l,a){const r=(0,o.up)("multi-selector");return(0,o.wg)(),(0,o.iD)("div",Xe,[(0,o._)("label",null,(0,n.zw)(i.item.name)+":",1),(0,o.Wm)(r,{options_props:a.preparing_field_data(i.item.data),onSelect:a.option_select,selected_options:l.copy_selected_options,disabled:i.disabled},null,8,["options_props","onSelect","selected_options","disabled"])])}i(6699);const Ke={class:"multi_selector"},Ge=["onClick"];function Je(e,t,i,s,l,a){return(0,o.wg)(),(0,o.iD)("div",Ke,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.options_props,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["item",{selected:i.selected_options[t],disabled:i.disabled}]),key:e.value,onClick:e=>s.select(t)},(0,n.zw)(e.name),11,Ge)))),128))])}var Qe=i(2262),et={name:"MultiSelector",props:{options_props:{type:Array,required:!0,default(){return[]}},selected_options:{type:Array,required:!0,default(){return[!0]}},disabled:{type:Boolean,required:!1,default(){return!1}}},emits:{select:null},setup(e,{emit:t}){const i=(0,Qe.iH)([]);(0,o.bv)((()=>i.value=[...e.selected_options])),(0,o.YP)((()=>e.selected_options),(()=>{i.value=[...e.selected_options]}),{deep:!0});const n=o=>{e.disabled||(0==o&&(i.value=[]),1==i.value[0]&&(i.value[0]=!1),i.value[o]=!i.value[o],i.value.includes(!0)||(i.value[0]=!0),t("select",i.value))};return{options_value:i,select:n}}};const tt=(0,Ce.Z)(et,[["render",Je],["__scopeId","data-v-dfbb2804"]]);var it=tt,ot={components:{MultiSelector:it},props:{item:{type:Object,required:!0,default(){return{}}},selected_options:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_options:[]}},mounted(){this.change_value()},watch:{selected_options(){this.change_value()}},methods:{change_value(){let e=[];(0,o.Y3)((()=>{const t=this.selected_options.split(", ");this.item.data?.forEach((i=>{t.includes(i)?e.push(!0):e.push(!1)})),this.copy_selected_options=[],this.copy_selected_options=[...e]}))},preparing_field_data(e){const t=[];return e&&e.forEach(((e,i)=>t.push({name:e,value:i}))),t},option_select(e){let t=[];e.forEach(((e,i)=>{e&&t.push(this.item.data[i])})),t=t.join(", "),this.$emit("change_value",t,this.idx)}}};const nt=(0,Ce.Z)(ot,[["render",Le],["__scopeId","data-v-b08c3624"]]);var st=nt;const lt={class:"row"},at=["disabled"];function rt(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",lt,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"date",class:"date_input","aria-required":"true","aria-invalid":"false","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e),disabled:i.disabled},null,8,at),[[s.nr,a.copy_selected_option]])])}var dt={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const ct=(0,Ce.Z)(dt,[["render",rt],["__scopeId","data-v-b18aeab2"]]);var ut=ct;const _t={class:"row"},pt=["disabled"];function ht(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",_t,[(0,o._)("label",null,(0,n.zw)(i.item)+":",1),(0,o.wy)((0,o._)("input",{type:"datetime-local",class:"date_input","aria-required":"true","aria-invalid":"false","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e),disabled:i.disabled},null,8,pt),[[s.nr,a.copy_selected_option]])])}var mt={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:""}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){this.option_select(this.copy_selected_option)}},methods:{change_value(){(0,o.Y3)((()=>{this.copy_selected_option=this.selected_option}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const ft=(0,Ce.Z)(mt,[["render",ht],["__scopeId","data-v-1580d023"]]);var gt=ft;const vt={class:"row"},yt=["id","disabled"],bt=["for"];function wt(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",vt,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:i.idx+"za","onUpdate:modelValue":t[0]||(t[0]=e=>a.copy_selected_option=e),disabled:i.disabled},null,8,yt),[[s.e8,a.copy_selected_option]]),(0,o._)("label",{for:i.idx+"za"},(0,n.zw)(i.item),9,bt)])}var Ct={props:{item:{type:String,required:!0,default(){return""}},selected_option:{type:String,required:!0,default(){return""}},idx:{type:Number,required:!0},disabled:{type:Boolean,required:!1,default(){return!1}}},data(){return{copy_selected_option:Boolean}},mounted(){this.change_value()},watch:{selected_option(){this.change_value()},copy_selected_option(){let e="";e=this.copy_selected_option?"Да":"Нет",this.option_select(e)}},methods:{change_value(){(0,o.Y3)((()=>{"Да"==this.selected_option?this.copy_selected_option=!0:this.copy_selected_option=!1}))},option_select(e){this.$emit("change_value",e,this.idx)}}};const kt=(0,Ce.Z)(Ct,[["render",wt],["__scopeId","data-v-651638ea"]]);var xt=kt,Dt=i(4406),St={components:{EditInteger:xe,EditFloat:Oe,EditString:Me,EditText:Ye,EditSelector:ze,EditMultiSelector:st,EditDate:ut,EditDateTime:gt,EditFlag:xt},props:{new_edit_data:{type:Object,required:!0}},emits:{change_value:null},data(){return{copy_fields_with_parents:[]}},async mounted(){(0,Dt.nextTick)((async()=>{const e=this.new_edit_data.fields.category;await this.$store.dispatch("get_fields_with_parents",e).then((()=>this.copy_fields_with_parents=[...this.$store.state.fields.fields_with_parents]))}))},methods:{change_value(e,t){this.$emit("change_value",e,t)}}};const Et=(0,Ce.Z)(St,[["render",ge],["__scopeId","data-v-96704c36"]]);var Tt=Et,It={components:{SelectorVue:me.Z,BtnsSaveClose:fe.Z,EditItemFields:Tt},props:{edit_data:{type:Object,required:!0}},inject:["isServicePage"],computed:{},data(){return{options_1:[{name:"Товар",value:1},{name:"Услуга",value:2}],selected_option_1:{name:"Товар",value:1},new_edit_data:{}}},mounted(){this.new_edit_data=JSON.parse(JSON.stringify(this.edit_data)),this.isServicePage.value?this.selected_option_1={...this.options_1[1]}:this.selected_option_1={...this.options_1[0]}},methods:{change_value(e,t){this.new_edit_data.fields[t]=e},option_select_1(e){this.selected_option_1={...e}},archive(){this.new_edit_data.is_archive=1,this.save()},close(){this.$store.commit("close_edit_modal")},save(){this.$store.dispatch("update_product",this.new_edit_data),this.close()}}};const Ot=(0,Ce.Z)(It,[["render",he]]);var Vt=Ot,qt=i(3026);const $t=e=>((0,o.dD)("data-v-eb8228a8"),e=e(),(0,o.Cn)(),e),Pt={class:"filters"},Wt=$t((()=>(0,o._)("th",{class:"item",key:"b1"},null,-1))),Mt=$t((()=>(0,o._)("th",{class:"item",key:"2b"},null,-1)));function Ft(e,t,i,n,l,a){const r=(0,o.up)("filter-number"),d=(0,o.up)("filter-text"),c=(0,o.up)("filter-list"),u=(0,o.up)("filter-date"),_=(0,o.up)("filter-flag");return(0,o.wg)(),(0,o.j4)(s.uT,{name:"mdl1"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("tr",Pt,[(0,o.Wm)(s.W3,{name:"mdl"},{default:(0,o.w5)((()=>[Wt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.filtersValue,((t,i)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("th",{key:i,class:"item"},[t.table_config.filtered?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[1==t.type||2==t.type?((0,o.wg)(),(0,o.j4)(r,{key:0,item:t,idx:i,onChange_filter_value:a.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),3==t.type||4==t.type?((0,o.wg)(),(0,o.j4)(d,{key:1,item:t,idx:i,onChange_filter_value:a.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),5==t.type||6==t.type?((0,o.wg)(),(0,o.j4)(c,{key:2,item:t,idx:i,selector_options:t.data,onChange_filter_value:a.change_filter_value},null,8,["item","idx","selector_options","onChange_filter_value"])):(0,o.kq)("",!0),7==t.type||8==t.type?((0,o.wg)(),(0,o.j4)(u,{key:3,item:t,idx:i,onChange_filter_value:a.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),9==t.type?((0,o.wg)(),(0,o.j4)(_,{key:4,item:t,idx:i,onChange_filter_value:a.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)],512)),[[s.F8,e.show_filter]]))),128)),Mt])),_:1})],512),[[s.F8,e.show_filter]])])),_:1})}const jt={class:"filter"};function Ut(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",jt,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>5==a.option?a.option=1:a.option+=1)},[(0,o._)("div",{class:(0,n.C_)(["icon",{equal:1==a.option,more:2==a.option,more_or_equal:3==a.option,less:4==a.option,less_or_equal:5==a.option}])},null,2)]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.filterValue=e),type:"number"},null,512),[[s.nr,a.filterValue]])])}var Nt={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:1,filterValue:null}},computed:{option_value(){return{option:this.option,value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.option=this.item.option,this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}};const At=(0,Ce.Z)(Nt,[["render",Ut],["__scopeId","data-v-48927a48"]]);var Yt=At;const Ht={class:"filter"};function Bt(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)("div",Ht,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>2==a.option?a.option=1:a.option+=1)},[(0,o._)("div",{class:(0,n.C_)(["icon",{equal:1==a.option,tilde:2==a.option}])},null,2)]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.filterValue=e),type:"text"},null,512),[[s.nr,a.filterValue]])])}var Rt={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:1,filterValue:null}},computed:{option_value(){return{option:this.option,value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.option=this.item.option,this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}};const Zt=(0,Ce.Z)(Rt,[["render",Bt],["__scopeId","data-v-530d9d52"]]);var zt=Zt;const Xt={class:"filter"};function Lt(e,t,i,s,l,a){const r=(0,o.up)("multi-selector");return(0,o.wg)(),(0,o.iD)("div",Xt,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>a.open_selector())},[(0,o._)("div",{class:(0,n.C_)(["arrow",{rotate_arrow:l.show_selector}])},null,2)]),l.show_selector?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"selector",id:"selector123",options_props:i.selector_options,onSelect:a.option_select_multi,selected_options:l.filterValue,onFocusout:a.handleFocusOut,tabindex:"1"},null,8,["options_props","onSelect","selected_options","onFocusout"])):(0,o.kq)("",!0)])}var Kt={components:{MultiSelector:it},props:{item:{type:Object,required:!0},idx:{type:Number,required:!0},selector_options:{type:Array,required:!0}},data(){return{filterValue:[],show_selector:!1}},computed:{option_value(){return{value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.filterValue=[],this.item.value.forEach(((e,t)=>{this.filterValue[t]=e}))}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)},option_select_multi(e){this.filterValue=e},open_selector(){this.show_selector=!0,(0,o.Y3)((()=>{this.show_selector&&document.getElementById("selector123").focus()}))},handleFocusOut(){setTimeout((()=>{(0,o.Y3)((()=>{this.show_selector=!1}))}),150)}}};const Gt=(0,Ce.Z)(Kt,[["render",Lt],["__scopeId","data-v-42d70668"]]);var Jt=Gt;const Qt={key:0,class:"filter"},ei={key:1,class:"filter"};function ti(e,t,i,n,l,a){return(0,o.wg)(),(0,o.iD)(o.HY,null,[7==i.item.type?((0,o.wg)(),(0,o.iD)("div",Qt,[(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>l.date_start=e)},null,512),[[s.nr,l.date_start]]),(0,o.wy)((0,o._)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>l.date_end=e)},null,512),[[s.nr,l.date_end]])])):(0,o.kq)("",!0),8==i.item.type?((0,o.wg)(),(0,o.iD)("div",ei,[(0,o.wy)((0,o._)("input",{type:"datetime-local","onUpdate:modelValue":t[2]||(t[2]=e=>l.date_start=e)},null,512),[[s.nr,l.date_start]]),(0,o.wy)((0,o._)("input",{type:"datetime-local","onUpdate:modelValue":t[3]||(t[3]=e=>l.date_end=e)},null,512),[[s.nr,l.date_end]])])):(0,o.kq)("",!0)],64)}var ii={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{date_start:"",date_end:""}},computed:{date(){return{value:this.date_start+"~"+this.date_end}}},watch:{date:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},emits:{change_filter_value:null},methods:{change_value(){(0,o.Y3)((()=>{if(null!=this.item.value){const e=this.item.value.split("~");this.date_start=e[0],this.date_end=e[1]}}))},emit_value(){this.$emit("change_filter_value",this.date,this.idx)}}};const oi=(0,Ce.Z)(ii,[["render",ti],["__scopeId","data-v-5332f71a"]]);var ni=oi;const si={class:"filter"};function li(e,t,i,n,s,l){const a=(0,o.up)("selector-vue");return(0,o.wg)(),(0,o.iD)("div",si,[(0,o.Wm)(a,{options_props:s.options,onSelect:l.option_select,selected_option:s.options[s.filterValue-1]},null,8,["options_props","onSelect","selected_option"])])}var ai={components:{SelectorVue:me.Z},props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{options:[{name:"Все",value:1},{name:"Да",value:2},{name:"Нет",value:3}],filterValue:1}},computed:{option_value(){return{value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,o.Y3)((()=>{this.filterValue=this.item.value}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)},option_select(e){this.filterValue=e.value}}};const ri=(0,Ce.Z)(ai,[["render",li],["__scopeId","data-v-12148177"]]);var di=ri,ci=i(3907),ui={props:{fields:{type:Array,required:!0,default(){return[]}},sortedFields:{type:Array,required:!0,default(){return[]}},tableConfig:{type:Object}},components:{FilterNumber:Yt,FilterText:zt,FilterList:Jt,FilterDate:ni,FilterFlag:di},data(){return{filtersValue:[]}},computed:{...(0,ci.Se)(["show_filter"])},mounted(){this.feelFilters()},methods:{clearFilters(){this.feelFilters()},change_filter_value(e,t){Object.assign(this.filtersValue[t],e)},feelFilters(){this.filtersValue=[];const e=[];this.sortedFields.forEach((t=>{const i=this.fields.filter((e=>e.code==t[0].split(".")[0]))[0];e.push(i)})),e.forEach((e=>{const t=e=>{const t=[];return null!=e&&e.forEach(((e,i)=>t.push({name:e,value:i}))),e};let i=null;5!=e.type&&6!=e.type||(i=[]),9==e.type&&(i=1);const o={type:e.type,option:1,selector_options:t(e.data),value:i,table_config:e.table_config};this.filtersValue.push(o)}))}}};const _i=(0,Ce.Z)(ui,[["render",Ft],["__scopeId","data-v-eb8228a8"]]);var pi=_i;const hi=e=>((0,o.dD)("data-v-71a5d429"),e=e(),(0,o.Cn)(),e),mi={class:"bar_row"},fi=hi((()=>(0,o._)("th",{class:"bar_item item",style:{"min-width":"17px"}},null,-1))),gi={class:"bar_item_group"},vi=["onClick"],yi={class:"bar_item item",style:{"min-width":"20px"}};function bi(e,t,i,s,l,a){return(0,o.wg)(),(0,o.iD)("tr",mi,[fi,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.sortedFields,((e,t)=>((0,o.wg)(),(0,o.iD)("th",{class:"bar_item item",style:(0,n.j5)({minWidth:0!=a.width[t]?a.width[t]+"px":(a.collsCount>=8?100:a.collsCount>3?90:80)/a.collsCount+"%"}),key:e},[(0,o._)("div",gi,[(0,o._)("label",null,(0,n.zw)(e[1].name),1),i.fields.filter((t=>t.code==e[0].split(".")[0]))[0].table_config.sortable?((0,o.wg)(),(0,o.iD)("button",{key:0,class:(0,n.C_)(["bar_item_icon",{bar_item_icon_up:l.order.code===e[0].split(".")[0]&&"desc"===l.order.prev_order,bar_item_icon_down:l.order.code===e[0].split(".")[0]&&"asc"===l.order.prev_order}]),onClick:t=>a.sort(e[0].split(".")[0])},null,10,vi)):(0,o.kq)("",!0)])],4)))),128)),(0,o._)("th",yi,[(0,o._)("div",null,[(0,o._)("button",{class:"settings_btn",onClick:t[0]||(t[0]=e=>a.openTableSettings())})])])])}var wi={props:{fields:{type:Array,required:!0,default(){return[]}},sortedFields:{type:Array,required:!0,default(){return[]}},tableConfig:{type:Object}},data(){return{order:{code:"",prev_order:""}}},computed:{...(0,ci.Se)(["fields"]),collsCount(){return this.tableConfig.length},width(){let e=[];return this.fields.forEach((t=>{let i=0;9==t.type&&(i=70),7!=t.type&&8!=t.type||(i=130),e.push(i)})),e}},methods:{isShow(e){let t=!1;return Object.entries(this.tableConfig).forEach((i=>{i[0].split(".")[0]==e&&i[1]?.visible&&(t=!0)})),t},sort(e){const t=["asc","desc"];let i="";i=this.order.code===e&&this.order.prev_order==t[0]?t[1]:t[0],this.order={code:e,prev_order:i},this.$emit("sort",e,i)},openTableSettings(){this.$store.commit("open_table_settings")}}};const Ci=(0,Ce.Z)(wi,[["render",bi],["__scopeId","data-v-71a5d429"]]);var ki=Ci,xi={name:"Main_grid",components:{EditItem:Vt,GridBottom:qt.Z,MainGridFilters:pi,MainGridBar:ki},props:{selectedWH:{type:Object}},inject:["isServicePage"],data(){return{updateKey:0,selectedProducts:[],edit_data:{}}},async mounted(){await this.$store.dispatch("getTableConfig","services"!=this.selectedWH.value&&"whs"!=this.selectedWH.value?this.selectedWH.value:""),await this.$store.dispatch("get_all_fields"),await this.get_products(),this.setSelectedProducts()},computed:{sortedFields(){const e=Object.entries(this.tableConfig);return e.sort(((e,t)=>e[1].sort>t[1].sort?1:e[1].sort==t[1].sort?0:e[1].sort<t[1].sort?-1:void 0)).filter((e=>e[1].visible))},tableConfig(){return this.$store.state.account.tableConfig},oneC(){return this.$store.state.account.account?.config?.g_enabled},count(){return this.$store.state.account.user.config?.per_page},meta(){return this.$store.state.products.meta},all_fields(){return this.$store.state.fields.all_fields},filters(){return this.$refs.filters},show_buttons(){const e=this.selectedProducts.filter((e=>e.value)).length>0;return e},products(){return this.$store.state.products.products},...(0,ci.Se)(["show_edit_modal"])},watch:{products:{handler:function(){this.updateKey+=1,this.selectedProducts=[],(0,Dt.nextTick)((()=>{this.filters?.clearFilters(),this.filters?.feelFilters()}))},deep:!0},show_buttons(){this.$store.commit("open_close_buttons",this.show_buttons)},async selectedWH(){await this.$store.dispatch("getTableConfig","services"!=this.selectedWH.value&&"whs"!=this.selectedWH.value?this.selectedWH.value:""),this.get_products()}},methods:{clearFilters(){this.filters?.clearFilters()},isShow(e){const t={value:!1,second:""};return Object.entries(this.tableConfig).forEach((i=>{i[0].split(".")[0]==e&&i[1]?.visible&&(t.value=!0,t.second=i[0].split(".")[1])})),t},async changeCount(e){await this.$store.dispatch("update_user",{per_page:e}),this.changePage(this.meta.current_page)},changePage(e){const t={page:e};this.get_products(t)},setSelectedProducts(){this.selectedProducts=[];for(let e=0;e<this.count;e++)this.selectedProducts.push({value:!1,item:{}})},async get_products(e){this.isServicePage.value&&(e={...e,is_service:1}),"whs"==this.selectedWH.value||this.isServicePage.value||(e={...e,warehouse:this.selectedWH.value}),await this.$store.dispatch("get_products",e),this.setSelectedProducts()},drop_page(){this.changePage(1)},open_edit_modal(e){this.oneC||(this.edit_data={...e},this.$store.commit("open_edit_modal",e.fields.category))},sort(e,t){const i={page:this.meta.current_page,sort:{by:e,order:t}};this.get_products(i)}}};const Di=(0,Ce.Z)(xi,[["render",ee],["__scopeId","data-v-b00a2b72"]]);var Si=Di;const Ei={class:"header"},Ti={key:0,class:"grid"},Ii={key:0,class:"text"},Oi={class:"name"},Vi={class:"value"},qi={class:"card_footer"},$i=["id","onUpdate:modelValue"],Pi=["for"],Wi=["onClick"];function Mi(e,t,i,l,a,r){const d=(0,o.up)("edit-item"),c=(0,o.up)("card-grid-filters"),u=(0,o.up)("card-grid-links"),_=(0,o.up)("grid-bottom");return(0,o.wg)(),(0,o.iD)(o.HY,null,[e.show_edit_modal?((0,o.wg)(),(0,o.j4)(d,{key:0,edit_data:a.edit_data},null,8,["edit_data"])):(0,o.kq)("",!0),(0,o._)("div",{class:(0,n.C_)(["wrapper",{blur:e.show_edit_modal}])},[(0,o._)("div",Ei,[(0,o.Wm)(s.uT,{name:"mdl"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{ref:"filters",collval:e.collval,params:e.params},null,8,["collval","params"])])),_:1}),(0,o.Wm)(u,{ref:"links",onEmit_link:r.emit_link},null,8,["onEmit_link"])]),a.link.show_categoryes&&a.link.path.length!=a.link.selected_categoryes.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Ti,[0==r.paginatedData.length?((0,o.wg)(),(0,o.iD)("label",Ii," Ничего не найдено ")):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.paginatedData,((t,i)=>((0,o.wg)(),(0,o.iD)("div",{class:"card",key:t},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t,((t,i)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"row",key:t},[(0,o._)("div",Oi,(0,n.zw)(e.params[i+1])+" :",1),(0,o._)("div",Vi,(0,n.zw)(t),1)])),[[s.F8,e.collval[i]]]))),128)),(0,o._)("div",qi,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:i+"a","onUpdate:modelValue":e=>a.changeValue[i]=e},null,8,$i),[[s.e8,a.changeValue[i]]]),(0,o._)("label",{for:i+"a"},null,8,Pi),(0,o._)("div",{class:"edit_icon",onClick:i=>r.open_edit_modal(t,e.data.indexOf(t))},null,8,Wi)])])))),128))])),(0,o.Wm)(_,{previous:a.page>1,next:a.page*a.count<e.data.length,page:a.page,blur:e.show_edit_modal,show:(!a.link.show_categoryes||a.link.path.length==a.link.selected_categoryes.length)&&0!=r.paginatedData.length,count:a.count,onChangePage:r.changePage,onChangeCount:r.changeCount},null,8,["previous","next","page","blur","show","count","onChangePage","onChangeCount"])],2)],64)}const Fi={key:0,class:"filters"},ji={class:"title"};function Ui(e,t,i,l,a,r){const d=(0,o.up)("filter-number"),c=(0,o.up)("filter-text"),u=(0,o.up)("filter-list"),_=(0,o.up)("filter-date"),p=(0,o.up)("filter-flag");return e.show_filter?((0,o.wg)(),(0,o.iD)("div",Fi,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.filtersValue,((t,l)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"item",key:l},[(0,o._)("div",ji,(0,n.zw)(i.params[l+1]),1),1==t.type||2==t.type?((0,o.wg)(),(0,o.j4)(d,{key:0,item:t,idx:l,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),3==t.type||4==t.type?((0,o.wg)(),(0,o.j4)(c,{key:1,item:t,idx:l,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),5==t.type||6==t.type?((0,o.wg)(),(0,o.j4)(u,{key:2,item:t,idx:l,selector_options:t.selector_options,onChange_filter_value:r.change_filter_value},null,8,["item","idx","selector_options","onChange_filter_value"])):(0,o.kq)("",!0),7==t.type||8==t.type?((0,o.wg)(),(0,o.j4)(_,{key:3,item:t,idx:l,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0),9==t.type?((0,o.wg)(),(0,o.j4)(p,{key:4,item:t,idx:l,onChange_filter_value:r.change_filter_value},null,8,["item","idx","onChange_filter_value"])):(0,o.kq)("",!0)])),[[s.F8,e.show_filter&&!1!==i.collval[l]]]))),128))])):(0,o.kq)("",!0)}var Ni={props:{collval:{type:Array,required:!0,default(){return[]}},params:{type:Array,required:!0,default(){return[]}}},components:{FilterNumber:Yt,FilterText:zt,FilterList:Jt,FilterDate:ni,FilterFlag:di},data(){return{filtersValue:[]}},computed:{...(0,ci.Se)(["fields","show_filter"])},mounted(){this.feelFilters()},methods:{reset_filtersValue(){this.filtersValue=[]},change_filter_value(e,t){Object.assign(this.filtersValue[t],e)},feelFilters(){this.params.forEach(((e,t)=>{if(0!=t&&t!=this.params.length-1){let t=null,i=[];this.fields.forEach((o=>o.field==e?(t=o.type.value,i=o.selector_options):null));let o=null;5!=t&&6!=t||(o=[!0]),9==t&&(o=1);const n={type:t,option:1,selector_options:i,value:o};this.filtersValue.push(n)}}))}}};const Ai=(0,Ce.Z)(Ni,[["render",Ui],["__scopeId","data-v-64f368bd"]]);var Yi=Ai;const Hi=e=>((0,o.dD)("data-v-2472252f"),e=e(),(0,o.Cn)(),e),Bi={class:"links"},Ri=["onClick"],Zi={class:"grid"},zi=["onClick"],Xi={class:"row"},Li=Hi((()=>(0,o._)("div",{class:"name"},null,-1))),Ki={class:"value"};function Gi(e,t,i,l,a,r){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",Bi,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.selected_categoryes,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["triangle",{triangle_last:a.path.length-1==t}]),key:e,onClick:e=>{a.sel_idx=t,a.selected_categoryes.splice(t)}},(0,n.zw)(a.path[t]),11,Ri)))),128))]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.path,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"path",key:e},[(0,o._)("div",Zi,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.categoryes[e],(e=>((0,o.wg)(),(0,o.iD)("div",{class:"card",key:e,onClick:t=>{a.selected_categoryes.push(e),a.sel_idx+=1}},[(0,o._)("div",Xi,[Li,(0,o._)("div",Ki,(0,n.zw)(e),1)])],8,zi)))),128))])])),[[s.F8,a.sel_idx==t&&a.show_categoryes]]))),128))],64)}var Ji={emits:{get_data:null},data(){return{path:["Поступление","№ партии","НДС включен в цену"],selected_categoryes:[],sel_idx:0,show_categoryes:!0,categoryes:{}}},computed:{...(0,ci.Se)(["params","data"]),link(){const e={path:this.path,selected_categoryes:this.selected_categoryes,sel_idx:this.sel_idx,show_categoryes:this.show_categoryes,categoryes:this.categoryes};return e}},mounted(){this.get_data_categoryes(),this.emit_link()},watch:{link:{handler:function(){this.emit_link()},deep:!0},show_categoryes(){this.show_categoryes||this.reset_sel()}},methods:{showcategoryes(){this.show_categoryes=!0},reset_sel(){this.selected_categoryes=[],this.sel_idx=0},emit_link(){this.$emit("emit_link",this.link)},get_data_categoryes(){function e(e){let t=[];for(let i of e)t.includes(i)||t.push(i);return t}this.categoryes={};const t={};let i=[];i=i.concat(this.params),i.pop(),i.shift(),i.forEach(((i,o)=>{t[i]=[];let n=[];this.data.forEach((e=>{n.push(e[o])})),t[i]=e(n)})),Object.assign(this.categoryes,t)}}};const Qi=(0,Ce.Z)(Ji,[["render",Gi],["__scopeId","data-v-2472252f"]]);var eo=Qi,to={name:"Main_grid",components:{EditItem:Vt,GridBottom:qt.Z,CardGridFilters:Yi,CardGridLinks:eo},props:{},emits:{},data(){return{count:5,page:1,edit_data:[],changeValue:[],link:{path:null,selected_categoryes:null,sel_idx:null,show_categoryes:null,categoryes:null}}},computed:{countPage(){return this.count*(this.page-1)},paginatedData(){if(this.link.show_categoryes){let e=[];e=e.concat(this.data);let t=[];return e.forEach((e=>{let i=!0;this.link.path.forEach(((t,o)=>{const n=this.params.indexOf(t)-1;i=e[n]==this.link.selected_categoryes[o]&&i})),i&&t.push(e)})),t.slice(this.countPage,this.count*this.page)}return this.data.slice(this.countPage,this.count*this.page)},show_buttons(){let e=!1;return this.changeValue.forEach((t=>{void 0!=t&&(e=t||e)})),e},...(0,ci.Se)(["show_edit_modal"]),ref_links(){return this.$refs.links},ref_filters(){return this.$refs.filters}},watch:{page(){this.page<1&&(this.page=1)},count(){this.page=1},paginatedData:{handler:function(){this.changeValue=[]},deep:!0},data:{handler:function(){this.ref_links.get_data_categoryes(),this.ref_filters?.reset_filtersValue(),this.ref_filters?.feelFilters()},deep:!0},changeValue:{handler:function(){},deep:!0},show_buttons(){this.$store.commit("open_close_buttons",this.show_buttons)}},methods:{changeCount(e){this.count=e},changePage(e){this.page=e},drop_page(){this.page=1,this.ref_links.reset_sel(),this.ref_links.showcategoryes(),this.ref_filters?.feelFilters()},emit_link(e){Object.assign(this.link,e)},open_edit_modal(e,t){this.edit_data=[],this.edit_data=this.edit_data.concat(e),this.$store.commit("open_edit_modal",t)}}};const io=(0,Ce.Z)(to,[["render",Mi],["__scopeId","data-v-129937c6"]]);var oo=io;const no=e=>((0,o.dD)("data-v-2c3b7da4"),e=e(),(0,o.Cn)(),e),so={class:"modal"},lo={class:"wrapper"},ao=no((()=>(0,o._)("div",{class:"modal-header"},[(0,o._)("div",{class:"head-text"},"Настройка таблицы")],-1))),ro={class:"modal-body"},co=no((()=>(0,o._)("div",{class:"text"},[(0,o._)("small",{class:"small-text"},"Перетаскивайте колонки для изменения очередности")],-1))),uo=["onUpdate:modelValue","id","disabled"],_o=["for"],po={class:"modal-footer"};function ho(e,t,i,l,a,r){const d=(0,o.up)("draggable"),c=(0,o.up)("btns-save-close");return(0,o.wg)(),(0,o.iD)("div",so,[(0,o._)("div",lo,[ao,(0,o._)("div",ro,[co,(0,o.Wm)(d,{class:"dragArea",list:a.list,onChange:e.changeData},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.list,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"item",key:e},[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t=>e.visible=t,id:e.code,class:"checkbox",disabled:2===e.visible||-1===e.visible},null,8,uo),[[s.e8,e.visible]]),(0,o._)("label",{for:e.code},null,8,_o),(0,o.Uk)(" "+(0,n.zw)(e.name),1)])))),128))])),_:1},8,["list","onChange"])]),(0,o._)("div",po,[(0,o.Wm)(c,{onClose:r.close,onSave:r.save},null,8,["onClose","onSave"])])])])}
/*!
  * vue-draggable-next v2.1.0
  * (c) 2021 Anish George
  * @license MIT
  */
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function mo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,o)}return i}function fo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(i),!0).forEach((function(t){vo(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mo(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function go(e){return go="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},go(e)}function vo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yo(){return yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},yo.apply(this,arguments)}function bo(e,t){if(null==e)return{};var i,o,n={},s=Object.keys(e);for(o=0;o<s.length;o++)i=s[o],t.indexOf(i)>=0||(n[i]=e[i]);return n}function wo(e,t){if(null==e)return{};var i,o,n=bo(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)i=s[o],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var Co="1.14.0";function ko(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var xo=ko(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Do=ko(/Edge/i),So=ko(/firefox/i),Eo=ko(/safari/i)&&!ko(/chrome/i)&&!ko(/android/i),To=ko(/iP(ad|od|hone)/i),Io=ko(/chrome/i)&&ko(/android/i),Oo={capture:!1,passive:!1};function Vo(e,t,i){e.addEventListener(t,i,!xo&&Oo)}function qo(e,t,i){e.removeEventListener(t,i,!xo&&Oo)}function $o(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(i){return!1}return!1}}function Po(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Wo(e,t,i,o){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&$o(e,t):$o(e,t))||o&&e===i)return e;if(e===i)break}while(e=Po(e))}return null}var Mo,Fo=/\s+/g;function jo(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(Fo," ").replace(" "+t+" "," ");e.className=(o+(i?" "+t:"")).replace(Fo," ")}}function Uo(e,t,i){var o=e&&e.style;if(o){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=i+("string"===typeof i?"":"px")}}function No(e,t){var i="";if("string"===typeof e)i=e;else do{var o=Uo(e,"transform");o&&"none"!==o&&(i=o+" "+i)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function Ao(e,t,i){if(e){var o=e.getElementsByTagName(t),n=0,s=o.length;if(i)for(;n<s;n++)i(o[n],n);return o}return[]}function Yo(){var e=document.scrollingElement;return e||document.documentElement}function Ho(e,t,i,o,n){if(e.getBoundingClientRect||e===window){var s,l,a,r,d,c,u;if(e!==window&&e.parentNode&&e!==Yo()?(s=e.getBoundingClientRect(),l=s.top,a=s.left,r=s.bottom,d=s.right,c=s.height,u=s.width):(l=0,a=0,r=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(t||i)&&e!==window&&(n=n||e.parentNode,!xo))do{if(n&&n.getBoundingClientRect&&("none"!==Uo(n,"transform")||i&&"static"!==Uo(n,"position"))){var _=n.getBoundingClientRect();l-=_.top+parseInt(Uo(n,"border-top-width")),a-=_.left+parseInt(Uo(n,"border-left-width")),r=l+s.height,d=a+s.width;break}}while(n=n.parentNode);if(o&&e!==window){var p=No(n||e),h=p&&p.a,m=p&&p.d;p&&(l/=m,a/=h,u/=h,c/=m,r=l+c,d=a+u)}return{top:l,left:a,bottom:r,right:d,width:u,height:c}}}function Bo(e,t,i){var o=Ko(e,!0),n=Ho(e)[t];while(o){var s=Ho(o)[i],l=void 0;if(l="top"===i||"left"===i?n>=s:n<=s,!l)return o;if(o===Yo())break;o=Ko(o,!1)}return!1}function Ro(e,t,i,o){var n=0,s=0,l=e.children;while(s<l.length){if("none"!==l[s].style.display&&l[s]!==as.ghost&&(o||l[s]!==as.dragged)&&Wo(l[s],i.draggable,e,!1)){if(n===t)return l[s];n++}s++}return null}function Zo(e,t){var i=e.lastElementChild;while(i&&(i===as.ghost||"none"===Uo(i,"display")||t&&!$o(i,t)))i=i.previousElementSibling;return i||null}function zo(e,t){var i=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===as.clone||t&&!$o(e,t)||i++;return i}function Xo(e){var t=0,i=0,o=Yo();if(e)do{var n=No(e),s=n.a,l=n.d;t+=e.scrollLeft*s,i+=e.scrollTop*l}while(e!==o&&(e=e.parentNode));return[t,i]}function Lo(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[i][o])return Number(i);return-1}function Ko(e,t){if(!e||!e.getBoundingClientRect)return Yo();var i=e,o=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=Uo(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i.getBoundingClientRect||i===document.body)return Yo();if(o||t)return i;o=!0}}}while(i=i.parentNode);return Yo()}function Go(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function Jo(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Qo(e,t){return function(){if(!Mo){var i=arguments,o=this;1===i.length?e.call(o,i[0]):e.apply(o,i),Mo=setTimeout((function(){Mo=void 0}),t)}}}function en(){clearTimeout(Mo),Mo=void 0}function tn(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function on(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}var nn="Sortable"+(new Date).getTime();function sn(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==Uo(e,"display")&&e!==as.ghost){t.push({target:e,rect:Ho(e)});var i=fo({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=No(e,!0);o&&(i.top-=o.f,i.left-=o.e)}e.fromRect=i}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(Lo(t,{target:e}),1)},animateAll:function(i){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof i&&i());var n=!1,s=0;t.forEach((function(e){var t=0,i=e.target,l=i.fromRect,a=Ho(i),r=i.prevFromRect,d=i.prevToRect,c=e.rect,u=No(i,!0);u&&(a.top-=u.f,a.left-=u.e),i.toRect=a,i.thisAnimationDuration&&Jo(r,a)&&!Jo(l,a)&&(c.top-a.top)/(c.left-a.left)===(l.top-a.top)/(l.left-a.left)&&(t=an(c,r,d,o.options)),Jo(a,l)||(i.prevFromRect=l,i.prevToRect=a,t||(t=o.options.animation),o.animate(i,c,a,t)),t&&(n=!0,s=Math.max(s,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),n?e=setTimeout((function(){"function"===typeof i&&i()}),s):"function"===typeof i&&i(),t=[]},animate:function(e,t,i,o){if(o){Uo(e,"transition",""),Uo(e,"transform","");var n=No(this.el),s=n&&n.a,l=n&&n.d,a=(t.left-i.left)/(s||1),r=(t.top-i.top)/(l||1);e.animatingX=!!a,e.animatingY=!!r,Uo(e,"transform","translate3d("+a+"px,"+r+"px,0)"),this.forRepaintDummy=ln(e),Uo(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Uo(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Uo(e,"transition",""),Uo(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}function ln(e){return e.offsetWidth}function an(e,t,i,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*o.animation}var rn=[],dn={initializeByDefault:!0},cn={mount:function(e){for(var t in dn)dn.hasOwnProperty(t)&&!(t in e)&&(e[t]=dn[t]);rn.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),rn.push(e)},pluginEvent:function(e,t,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var n=e+"Global";rn.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][n]&&t[o.pluginName][n](fo({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](fo({sortable:t},i)))}))},initializePlugins:function(e,t,i,o){for(var n in rn.forEach((function(o){var n=o.pluginName;if(e.options[n]||o.initializeByDefault){var s=new o(e,t,e.options);s.sortable=e,s.options=e.options,e[n]=s,yo(i,s.defaults)}})),e.options)if(e.options.hasOwnProperty(n)){var s=this.modifyOption(e,n,e.options[n]);"undefined"!==typeof s&&(e.options[n]=s)}},getEventProperties:function(e,t){var i={};return rn.forEach((function(o){"function"===typeof o.eventProperties&&yo(i,o.eventProperties.call(t[o.pluginName],e))})),i},modifyOption:function(e,t,i){var o;return rn.forEach((function(n){e[n.pluginName]&&n.optionListeners&&"function"===typeof n.optionListeners[t]&&(o=n.optionListeners[t].call(e[n.pluginName],i))})),o}};function un(e){var t=e.sortable,i=e.rootEl,o=e.name,n=e.targetEl,s=e.cloneEl,l=e.toEl,a=e.fromEl,r=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,u=e.newDraggableIndex,_=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||i&&i[nn],t){var m,f=t.options,g="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||xo||Do?(m=document.createEvent("Event"),m.initEvent(o,!0,!0)):m=new CustomEvent(o,{bubbles:!0,cancelable:!0}),m.to=l||i,m.from=a||i,m.item=n||i,m.clone=s,m.oldIndex=r,m.newIndex=d,m.oldDraggableIndex=c,m.newDraggableIndex=u,m.originalEvent=_,m.pullMode=p?p.lastPutMode:void 0;var v=fo(fo({},h),cn.getEventProperties(o,t));for(var y in v)m[y]=v[y];i&&i.dispatchEvent(m),f[g]&&f[g].call(t,m)}}var _n=["evt"],pn=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.evt,n=wo(i,_n);cn.pluginEvent.bind(as)(e,t,fo({dragEl:mn,parentEl:fn,ghostEl:gn,rootEl:vn,nextEl:yn,lastDownEl:bn,cloneEl:wn,cloneHidden:Cn,dragStarted:Wn,putSortable:Tn,activeSortable:as.active,originalEvent:o,oldIndex:kn,oldDraggableIndex:Dn,newIndex:xn,newDraggableIndex:Sn,hideGhostForTarget:os,unhideGhostForTarget:ns,cloneNowHidden:function(){Cn=!0},cloneNowShown:function(){Cn=!1},dispatchSortableEvent:function(e){hn({sortable:t,name:e,originalEvent:o})}},n))};function hn(e){un(fo({putSortable:Tn,cloneEl:wn,targetEl:mn,rootEl:vn,oldIndex:kn,oldDraggableIndex:Dn,newIndex:xn,newDraggableIndex:Sn},e))}var mn,fn,gn,vn,yn,bn,wn,Cn,kn,xn,Dn,Sn,En,Tn,In,On,Vn,qn,$n,Pn,Wn,Mn,Fn,jn,Un,Nn=!1,An=!1,Yn=[],Hn=!1,Bn=!1,Rn=[],Zn=!1,zn=[],Xn="undefined"!==typeof document,Ln=To,Kn=Do||xo?"cssFloat":"float",Gn=Xn&&!Io&&!To&&"draggable"in document.createElement("div"),Jn=function(){if(Xn){if(xo)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Qn=function(e,t){var i=Uo(e),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=Ro(e,0,t),s=Ro(e,1,t),l=n&&Uo(n),a=s&&Uo(s),r=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ho(n).width,d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ho(s).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&l["float"]&&"none"!==l["float"]){var c="left"===l["float"]?"left":"right";return!s||"both"!==a.clear&&a.clear!==c?"horizontal":"vertical"}return n&&("block"===l.display||"flex"===l.display||"table"===l.display||"grid"===l.display||r>=o&&"none"===i[Kn]||s&&"none"===i[Kn]&&r+d>o)?"vertical":"horizontal"},es=function(e,t,i){var o=i?e.left:e.top,n=i?e.right:e.bottom,s=i?e.width:e.height,l=i?t.left:t.top,a=i?t.right:t.bottom,r=i?t.width:t.height;return o===l||n===a||o+s/2===l+r/2},ts=function(e,t){var i;return Yn.some((function(o){var n=o[nn].options.emptyInsertThreshold;if(n&&!Zo(o)){var s=Ho(o),l=e>=s.left-n&&e<=s.right+n,a=t>=s.top-n&&t<=s.bottom+n;return l&&a?i=o:void 0}})),i},is=function(e){function t(e,i){return function(o,n,s,l){var a=o.options.group.name&&n.options.group.name&&o.options.group.name===n.options.group.name;if(null==e&&(i||a))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"===typeof e)return t(e(o,n,s,l),i)(o,n,s,l);var r=(i?o:n).options.group.name;return!0===e||"string"===typeof e&&e===r||e.join&&e.indexOf(r)>-1}}var i={},o=e.group;o&&"object"==go(o)||(o={name:o}),i.name=o.name,i.checkPull=t(o.pull,!0),i.checkPut=t(o.put),i.revertClone=o.revertClone,e.group=i},os=function(){!Jn&&gn&&Uo(gn,"display","none")},ns=function(){!Jn&&gn&&Uo(gn,"display","")};Xn&&document.addEventListener("click",(function(e){if(An)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),An=!1,!1}),!0);var ss=function(e){if(mn){e=e.touches?e.touches[0]:e;var t=ts(e.clientX,e.clientY);if(t){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[nn]._onDragOver(i)}}},ls=function(e){mn&&mn.parentNode[nn]._isOutsideThisEl(e.target)};function as(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=yo({},t),e[nn]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Qn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==as.supportPointer&&"PointerEvent"in window&&!Eo,emptyInsertThreshold:5};for(var o in cn.initializePlugins(this,e,i),i)!(o in t)&&(t[o]=i[o]);for(var n in is(t),this)"_"===n.charAt(0)&&"function"===typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Gn,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Vo(e,"pointerdown",this._onTapStart):(Vo(e,"mousedown",this._onTapStart),Vo(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Vo(e,"dragover",this),Vo(e,"dragenter",this)),Yn.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),yo(this,sn())}function rs(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ds(e,t,i,o,n,s,l,a){var r,d,c=e[nn],u=c.options.onMove;return!window.CustomEvent||xo||Do?(r=document.createEvent("Event"),r.initEvent("move",!0,!0)):r=new CustomEvent("move",{bubbles:!0,cancelable:!0}),r.to=t,r.from=e,r.dragged=i,r.draggedRect=o,r.related=n||t,r.relatedRect=s||Ho(t),r.willInsertAfter=a,r.originalEvent=l,e.dispatchEvent(r),u&&(d=u.call(c,r,l)),d}function cs(e){e.draggable=!1}function us(){Zn=!1}function _s(e,t,i){var o=Ho(Ro(i.el,0,i.options,!0)),n=10;return t?e.clientX<o.left-n||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-n||e.clientY<o.bottom&&e.clientX<o.left}function ps(e,t,i){var o=Ho(Zo(i.el,i.options.draggable)),n=10;return t?e.clientX>o.right+n||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+n}function hs(e,t,i,o,n,s,l,a){var r=o?e.clientY:e.clientX,d=o?i.height:i.width,c=o?i.top:i.left,u=o?i.bottom:i.right,_=!1;if(!l)if(a&&jn<d*n){if(!Hn&&(1===Fn?r>c+d*s/2:r<u-d*s/2)&&(Hn=!0),Hn)_=!0;else if(1===Fn?r<c+jn:r>u-jn)return-Fn}else if(r>c+d*(1-n)/2&&r<u-d*(1-n)/2)return ms(t);return _=_||l,_&&(r<c+d*s/2||r>u-d*s/2)?r>c+d/2?1:-1:0}function ms(e){return zo(mn)<zo(e)?1:-1}function fs(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,o=0;while(i--)o+=t.charCodeAt(i);return o.toString(36)}function gs(e){zn.length=0;var t=e.getElementsByTagName("input"),i=t.length;while(i--){var o=t[i];o.checked&&zn.push(o)}}function vs(e){return setTimeout(e,0)}function ys(e){return clearTimeout(e)}as.prototype={constructor:as,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Mn=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,mn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,o=this.options,n=o.preventOnFilter,s=e.type,l=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(l||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,d=o.filter;if(gs(i),!mn&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||o.disabled)&&!r.isContentEditable&&(this.nativeDraggable||!Eo||!a||"SELECT"!==a.tagName.toUpperCase())&&(a=Wo(a,o.draggable,i,!1),(!a||!a.animated)&&bn!==a)){if(kn=zo(a),Dn=zo(a,o.draggable),"function"===typeof d){if(d.call(this,e,a,this))return hn({sortable:t,rootEl:r,name:"filter",targetEl:a,toEl:i,fromEl:i}),pn("filter",t,{evt:e}),void(n&&e.cancelable&&e.preventDefault())}else if(d&&(d=d.split(",").some((function(o){if(o=Wo(r,o.trim(),i,!1),o)return hn({sortable:t,rootEl:o,name:"filter",targetEl:a,fromEl:i,toEl:i}),pn("filter",t,{evt:e}),!0})),d))return void(n&&e.cancelable&&e.preventDefault());o.handle&&!Wo(r,o.handle,i,!1)||this._prepareDragStart(e,l,a)}}},_prepareDragStart:function(e,t,i){var o,n=this,s=n.el,l=n.options,a=s.ownerDocument;if(i&&!mn&&i.parentNode===s){var r=Ho(i);if(vn=s,mn=i,fn=mn.parentNode,yn=mn.nextSibling,bn=i,En=l.group,as.dragged=mn,In={target:mn,clientX:(t||e).clientX,clientY:(t||e).clientY},$n=In.clientX-r.left,Pn=In.clientY-r.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,mn.style["will-change"]="all",o=function(){pn("delayEnded",n,{evt:e}),as.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!So&&n.nativeDraggable&&(mn.draggable=!0),n._triggerDragStart(e,t),hn({sortable:n,name:"choose",originalEvent:e}),jo(mn,l.chosenClass,!0))},l.ignore.split(",").forEach((function(e){Ao(mn,e.trim(),cs)})),Vo(a,"dragover",ss),Vo(a,"mousemove",ss),Vo(a,"touchmove",ss),Vo(a,"mouseup",n._onDrop),Vo(a,"touchend",n._onDrop),Vo(a,"touchcancel",n._onDrop),So&&this.nativeDraggable&&(this.options.touchStartThreshold=4,mn.draggable=!0),pn("delayStart",this,{evt:e}),!l.delay||l.delayOnTouchOnly&&!t||this.nativeDraggable&&(Do||xo))o();else{if(as.eventCanceled)return void this._onDrop();Vo(a,"mouseup",n._disableDelayedDrag),Vo(a,"touchend",n._disableDelayedDrag),Vo(a,"touchcancel",n._disableDelayedDrag),Vo(a,"mousemove",n._delayedDragTouchMoveHandler),Vo(a,"touchmove",n._delayedDragTouchMoveHandler),l.supportPointer&&Vo(a,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(o,l.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){mn&&cs(mn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;qo(e,"mouseup",this._disableDelayedDrag),qo(e,"touchend",this._disableDelayedDrag),qo(e,"touchcancel",this._disableDelayedDrag),qo(e,"mousemove",this._delayedDragTouchMoveHandler),qo(e,"touchmove",this._delayedDragTouchMoveHandler),qo(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Vo(document,"pointermove",this._onTouchMove):Vo(document,t?"touchmove":"mousemove",this._onTouchMove):(Vo(mn,"dragend",this),Vo(vn,"dragstart",this._onDragStart));try{document.selection?vs((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(e,t){if(Nn=!1,vn&&mn){pn("dragStarted",this,{evt:t}),this.nativeDraggable&&Vo(document,"dragover",ls);var i=this.options;!e&&jo(mn,i.dragClass,!1),jo(mn,i.ghostClass,!0),as.active=this,e&&this._appendGhost(),hn({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(On){this._lastX=On.clientX,this._lastY=On.clientY,os();var e=document.elementFromPoint(On.clientX,On.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(On.clientX,On.clientY),e===t)break;t=e}if(mn.parentNode[nn]._isOutsideThisEl(e),t)do{if(t[nn]){var i=void 0;if(i=t[nn]._onDragOver({clientX:On.clientX,clientY:On.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);ns()}},_onTouchMove:function(e){if(In){var t=this.options,i=t.fallbackTolerance,o=t.fallbackOffset,n=e.touches?e.touches[0]:e,s=gn&&No(gn,!0),l=gn&&s&&s.a,a=gn&&s&&s.d,r=Ln&&Un&&Xo(Un),d=(n.clientX-In.clientX+o.x)/(l||1)+(r?r[0]-Rn[0]:0)/(l||1),c=(n.clientY-In.clientY+o.y)/(a||1)+(r?r[1]-Rn[1]:0)/(a||1);if(!as.active&&!Nn){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(gn){s?(s.e+=d-(Vn||0),s.f+=c-(qn||0)):s={a:1,b:0,c:0,d:1,e:d,f:c};var u="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Uo(gn,"webkitTransform",u),Uo(gn,"mozTransform",u),Uo(gn,"msTransform",u),Uo(gn,"transform",u),Vn=d,qn=c,On=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!gn){var e=this.options.fallbackOnBody?document.body:vn,t=Ho(mn,!0,Ln,!0,e),i=this.options;if(Ln){Un=e;while("static"===Uo(Un,"position")&&"none"===Uo(Un,"transform")&&Un!==document)Un=Un.parentNode;Un!==document.body&&Un!==document.documentElement?(Un===document&&(Un=Yo()),t.top+=Un.scrollTop,t.left+=Un.scrollLeft):Un=Yo(),Rn=Xo(Un)}gn=mn.cloneNode(!0),jo(gn,i.ghostClass,!1),jo(gn,i.fallbackClass,!0),jo(gn,i.dragClass,!0),Uo(gn,"transition",""),Uo(gn,"transform",""),Uo(gn,"box-sizing","border-box"),Uo(gn,"margin",0),Uo(gn,"top",t.top),Uo(gn,"left",t.left),Uo(gn,"width",t.width),Uo(gn,"height",t.height),Uo(gn,"opacity","0.8"),Uo(gn,"position",Ln?"absolute":"fixed"),Uo(gn,"zIndex","100000"),Uo(gn,"pointerEvents","none"),as.ghost=gn,e.appendChild(gn),Uo(gn,"transform-origin",$n/parseInt(gn.style.width)*100+"% "+Pn/parseInt(gn.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,o=e.dataTransfer,n=i.options;pn("dragStart",this,{evt:e}),as.eventCanceled?this._onDrop():(pn("setupClone",this),as.eventCanceled||(wn=on(mn),wn.draggable=!1,wn.style["will-change"]="",this._hideClone(),jo(wn,this.options.chosenClass,!1),as.clone=wn),i.cloneId=vs((function(){pn("clone",i),as.eventCanceled||(i.options.removeCloneOnHide||vn.insertBefore(wn,mn),i._hideClone(),hn({sortable:i,name:"clone"}))})),!t&&jo(mn,n.dragClass,!0),t?(An=!0,i._loopId=setInterval(i._emulateDragOver,50)):(qo(document,"mouseup",i._onDrop),qo(document,"touchend",i._onDrop),qo(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",n.setData&&n.setData.call(i,o,mn)),Vo(document,"drop",i),Uo(mn,"transform","translateZ(0)")),Nn=!0,i._dragStartId=vs(i._dragStarted.bind(i,t,e)),Vo(document,"selectstart",i),Wn=!0,Eo&&Uo(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,o,n,s=this.el,l=e.target,a=this.options,r=a.group,d=as.active,c=En===r,u=a.sort,_=Tn||d,p=this,h=!1;if(!Zn){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=Wo(l,a.draggable,s,!0),I("dragOver"),as.eventCanceled)return h;if(mn.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||p._ignoreWhileAnimating===l)return V(!1);if(An=!1,d&&!a.disabled&&(c?u||(o=fn!==vn):Tn===this||(this.lastPutMode=En.checkPull(this,d,mn,e))&&r.checkPut(this,d,mn,e))){if(n="vertical"===this._getDirection(e,l),t=Ho(mn),I("dragOverValid"),as.eventCanceled)return h;if(o)return fn=vn,O(),this._hideClone(),I("revert"),as.eventCanceled||(yn?vn.insertBefore(mn,yn):vn.appendChild(mn)),V(!0);var m=Zo(s,a.draggable);if(!m||ps(e,n,this)&&!m.animated){if(m===mn)return V(!1);if(m&&s===e.target&&(l=m),l&&(i=Ho(l)),!1!==ds(vn,s,mn,t,l,i,e,!!l))return O(),s.appendChild(mn),fn=s,q(),V(!0)}else if(m&&_s(e,n,this)){var f=Ro(s,0,a,!0);if(f===mn)return V(!1);if(l=f,i=Ho(l),!1!==ds(vn,s,mn,t,l,i,e,!1))return O(),s.insertBefore(mn,f),fn=s,q(),V(!0)}else if(l.parentNode===s){i=Ho(l);var g,v,y=0,b=mn.parentNode!==s,w=!es(mn.animated&&mn.toRect||t,l.animated&&l.toRect||i,n),C=n?"top":"left",k=Bo(l,"top","top")||Bo(mn,"top","top"),x=k?k.scrollTop:void 0;if(Mn!==l&&(g=i[C],Hn=!1,Bn=!w&&a.invertSwap||b),y=hs(e,l,i,n,w?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,Bn,Mn===l),0!==y){var D=zo(mn);do{D-=y,v=fn.children[D]}while(v&&("none"===Uo(v,"display")||v===gn))}if(0===y||v===l)return V(!1);Mn=l,Fn=y;var S=l.nextElementSibling,E=!1;E=1===y;var T=ds(vn,s,mn,t,l,i,e,E);if(!1!==T)return 1!==T&&-1!==T||(E=1===T),Zn=!0,setTimeout(us,30),O(),E&&!S?s.appendChild(mn):l.parentNode.insertBefore(mn,E?S:l),k&&tn(k,0,x-k.scrollTop),fn=mn.parentNode,void 0===g||Bn||(jn=Math.abs(g-Ho(l)[C])),q(),V(!0)}if(s.contains(mn))return V(!1)}return!1}function I(a,r){pn(a,p,fo({evt:e,isOwner:c,axis:n?"vertical":"horizontal",revert:o,dragRect:t,targetRect:i,canSort:u,fromSortable:_,target:l,completed:V,onMove:function(i,o){return ds(vn,s,mn,t,i,Ho(i),e,o)},changed:q},r))}function O(){I("dragOverAnimationCapture"),p.captureAnimationState(),p!==_&&_.captureAnimationState()}function V(t){return I("dragOverCompleted",{insertion:t}),t&&(c?d._hideClone():d._showClone(p),p!==_&&(jo(mn,Tn?Tn.options.ghostClass:d.options.ghostClass,!1),jo(mn,a.ghostClass,!0)),Tn!==p&&p!==as.active?Tn=p:p===as.active&&Tn&&(Tn=null),_===p&&(p._ignoreWhileAnimating=l),p.animateAll((function(){I("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(l===mn&&!mn.animated||l===s&&!l.animated)&&(Mn=null),a.dragoverBubble||e.rootEl||l===document||(mn.parentNode[nn]._isOutsideThisEl(e.target),!t&&ss(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function q(){xn=zo(mn),Sn=zo(mn,a.draggable),hn({sortable:p,name:"change",toEl:s,newIndex:xn,newDraggableIndex:Sn,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){qo(document,"mousemove",this._onTouchMove),qo(document,"touchmove",this._onTouchMove),qo(document,"pointermove",this._onTouchMove),qo(document,"dragover",ss),qo(document,"mousemove",ss),qo(document,"touchmove",ss)},_offUpEvents:function(){var e=this.el.ownerDocument;qo(e,"mouseup",this._onDrop),qo(e,"touchend",this._onDrop),qo(e,"pointerup",this._onDrop),qo(e,"touchcancel",this._onDrop),qo(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;xn=zo(mn),Sn=zo(mn,i.draggable),pn("drop",this,{evt:e}),fn=mn&&mn.parentNode,xn=zo(mn),Sn=zo(mn,i.draggable),as.eventCanceled||(Nn=!1,Bn=!1,Hn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ys(this.cloneId),ys(this._dragStartId),this.nativeDraggable&&(qo(document,"drop",this),qo(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Eo&&Uo(document.body,"user-select",""),Uo(mn,"transform",""),e&&(Wn&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),gn&&gn.parentNode&&gn.parentNode.removeChild(gn),(vn===fn||Tn&&"clone"!==Tn.lastPutMode)&&wn&&wn.parentNode&&wn.parentNode.removeChild(wn),mn&&(this.nativeDraggable&&qo(mn,"dragend",this),cs(mn),mn.style["will-change"]="",Wn&&!Nn&&jo(mn,Tn?Tn.options.ghostClass:this.options.ghostClass,!1),jo(mn,this.options.chosenClass,!1),hn({sortable:this,name:"unchoose",toEl:fn,newIndex:null,newDraggableIndex:null,originalEvent:e}),vn!==fn?(xn>=0&&(hn({rootEl:fn,name:"add",toEl:fn,fromEl:vn,originalEvent:e}),hn({sortable:this,name:"remove",toEl:fn,originalEvent:e}),hn({rootEl:fn,name:"sort",toEl:fn,fromEl:vn,originalEvent:e}),hn({sortable:this,name:"sort",toEl:fn,originalEvent:e})),Tn&&Tn.save()):xn!==kn&&xn>=0&&(hn({sortable:this,name:"update",toEl:fn,originalEvent:e}),hn({sortable:this,name:"sort",toEl:fn,originalEvent:e})),as.active&&(null!=xn&&-1!==xn||(xn=kn,Sn=Dn),hn({sortable:this,name:"end",toEl:fn,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){pn("nulling",this),vn=mn=fn=gn=yn=wn=bn=Cn=In=On=Wn=xn=Sn=kn=Dn=Mn=Fn=Tn=En=as.dragged=as.ghost=as.clone=as.active=null,zn.forEach((function(e){e.checked=!0})),zn.length=Vn=qn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":mn&&(this._onDragOver(e),rs(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],i=this.el.children,o=0,n=i.length,s=this.options;o<n;o++)e=i[o],Wo(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||fs(e));return t},sort:function(e,t){var i={},o=this.el;this.toArray().forEach((function(e,t){var n=o.children[t];Wo(n,this.options.draggable,o,!1)&&(i[e]=n)}),this),t&&this.captureAnimationState(),e.forEach((function(e){i[e]&&(o.removeChild(i[e]),o.appendChild(i[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Wo(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var o=cn.modifyOption(this,e,t);i[e]="undefined"!==typeof o?o:t,"group"===e&&is(i)},destroy:function(){pn("destroy",this);var e=this.el;e[nn]=null,qo(e,"mousedown",this._onTapStart),qo(e,"touchstart",this._onTapStart),qo(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(qo(e,"dragover",this),qo(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Yn.splice(Yn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Cn){if(pn("hideClone",this),as.eventCanceled)return;Uo(wn,"display","none"),this.options.removeCloneOnHide&&wn.parentNode&&wn.parentNode.removeChild(wn),Cn=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Cn){if(pn("showClone",this),as.eventCanceled)return;mn.parentNode!=vn||this.options.group.revertClone?yn?vn.insertBefore(wn,yn):vn.appendChild(wn):vn.insertBefore(wn,mn),this.options.group.revertClone&&this.animate(mn,wn),Uo(wn,"display",""),Cn=!1}}else this._hideClone()}},Xn&&Vo(document,"touchmove",(function(e){(as.active||Nn)&&e.cancelable&&e.preventDefault()})),as.utils={on:Vo,off:qo,css:Uo,find:Ao,is:function(e,t){return!!Wo(e,t,e,!1)},extend:Go,throttle:Qo,closest:Wo,toggleClass:jo,clone:on,index:zo,nextTick:vs,cancelNextTick:ys,detectDirection:Qn,getChild:Ro},as.get=function(e){return e[nn]},as.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(as.utils=fo(fo({},as.utils),e.utils)),cn.mount(e)}))},as.create=function(e,t){return new as(e,t)},as.version=Co;var bs,ws,Cs,ks,xs,Ds,Ss=[],Es=!1;function Ts(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Vo(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Vo(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Vo(document,"touchmove",this._handleFallbackAutoScroll):Vo(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?qo(document,"dragover",this._handleAutoScroll):(qo(document,"pointermove",this._handleFallbackAutoScroll),qo(document,"touchmove",this._handleFallbackAutoScroll),qo(document,"mousemove",this._handleFallbackAutoScroll)),Os(),Is(),en()},nulling:function(){xs=ws=bs=Es=Ds=Cs=ks=null,Ss.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,o=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(o,n);if(xs=e,t||this.options.forceAutoScrollFallback||Do||xo||Eo){Vs(e,this.options,s,t);var l=Ko(s,!0);!Es||Ds&&o===Cs&&n===ks||(Ds&&Os(),Ds=setInterval((function(){var s=Ko(document.elementFromPoint(o,n),!0);s!==l&&(l=s,Is()),Vs(e,i.options,s,t)}),10),Cs=o,ks=n)}else{if(!this.options.bubbleScroll||Ko(s,!0)===Yo())return void Is();Vs(e,this.options,Ko(s,!1),!1)}}},yo(e,{pluginName:"scroll",initializeByDefault:!0})}function Is(){Ss.forEach((function(e){clearInterval(e.pid)})),Ss=[]}function Os(){clearInterval(Ds)}var Vs=Qo((function(e,t,i,o){if(t.scroll){var n,s=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,r=t.scrollSpeed,d=Yo(),c=!1;ws!==i&&(ws=i,Is(),bs=t.scroll,n=t.scrollFn,!0===bs&&(bs=Ko(i,!0)));var u=0,_=bs;do{var p=_,h=Ho(p),m=h.top,f=h.bottom,g=h.left,v=h.right,y=h.width,b=h.height,w=void 0,C=void 0,k=p.scrollWidth,x=p.scrollHeight,D=Uo(p),S=p.scrollLeft,E=p.scrollTop;p===d?(w=y<k&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),C=b<x&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(w=y<k&&("auto"===D.overflowX||"scroll"===D.overflowX),C=b<x&&("auto"===D.overflowY||"scroll"===D.overflowY));var T=w&&(Math.abs(v-s)<=a&&S+y<k)-(Math.abs(g-s)<=a&&!!S),I=C&&(Math.abs(f-l)<=a&&E+b<x)-(Math.abs(m-l)<=a&&!!E);if(!Ss[u])for(var O=0;O<=u;O++)Ss[O]||(Ss[O]={});Ss[u].vx==T&&Ss[u].vy==I&&Ss[u].el===p||(Ss[u].el=p,Ss[u].vx=T,Ss[u].vy=I,clearInterval(Ss[u].pid),0==T&&0==I||(c=!0,Ss[u].pid=setInterval(function(){o&&0===this.layer&&as.active._onTouchMove(xs);var t=Ss[this.layer].vy?Ss[this.layer].vy*r:0,i=Ss[this.layer].vx?Ss[this.layer].vx*r:0;"function"===typeof n&&"continue"!==n.call(as.dragged.parentNode[nn],i,t,e,xs,Ss[this.layer].el)||tn(Ss[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&_!==d&&(_=Ko(_,!1)));Es=c}}),30),qs=function(e){var t=e.originalEvent,i=e.putSortable,o=e.dragEl,n=e.activeSortable,s=e.dispatchSortableEvent,l=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var r=i||n;l();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(d.clientX,d.clientY);a(),r&&!r.el.contains(c)&&(s("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function $s(){}function Ps(){}function Ws(){return"undefined"!==typeof window?window.console:i.g.console}$s.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=Ro(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:qs},yo($s,{pluginName:"revertOnSpill"}),Ps.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,o=i||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:qs},yo(Ps,{pluginName:"removeOnSpill"}),as.mount(new Ts),as.mount(Ps,$s);const Ms=Ws();function Fs(e){const t=Object.create(null);return function(i){const o=t[i];return o||(t[i]=e(i))}}const js=/-(\w)/g,Us=Fs((e=>e.replace(js,((e,t)=>t?t.toUpperCase():""))));function Ns(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function As(e,t,i){const o=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,o)}function Ys(e,t){return Object.values(e).indexOf(t)}function Hs(e,t,i,o){if(!e)return[];const n=Object.values(e),s=t.length-o,l=[...t].map(((e,t)=>t>=s?n.length:n.indexOf(e)));return l}function Bs(e,t){this.$nextTick((()=>this.$emit(e.toLowerCase(),t)))}function Rs(e){return t=>{null!==this.realList&&this["onDrag"+e](t),Bs.call(this,e,t)}}function Zs(e){return["transition-group","TransitionGroup"].includes(e)}function zs(e){if(!e||1!==e.length)return!1;const[{type:t}]=e;return!!t&&Zs(t.name)}function Xs(e,t){return t?{...t.props,...t.attrs}:e}const Ls=["Start","Add","Remove","Update","End"],Ks=["Choose","Unchoose","Sort","Filter","Clone"],Gs=["Move",...Ls,...Ks].map((e=>"on"+e));let Js=null;const Qs={options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},el=(0,o.aZ)({name:"VueDraggableNext",inheritAttrs:!1,emits:["update:modelValue","move","change",...Ls.map((e=>e.toLowerCase())),...Ks.map((e=>e.toLowerCase()))],props:Qs,data(){return{transitionMode:!1,noneFunctionalComponentMode:!1,headerOffset:0,footerOffset:0,_sortable:{},visibleIndexes:[],context:{}}},render(){const e=this.$slots.default?this.$slots.default():null,t=Xs(this.$attrs,this.componentData);return e?(this.transitionMode=zs(e),(0,o.h)(this.getTag(),t,e)):(0,o.h)(this.getTag(),t,[])},created(){null!==this.list&&null!==this.modelValue&&Ms.error("list props are mutually exclusive! Please set one.")},mounted(){const e={};Ls.forEach((t=>{e["on"+t]=Rs.call(this,t)})),Ks.forEach((t=>{e["on"+t]=Bs.bind(this,t)}));const t=Object.keys(this.$attrs).reduce(((e,t)=>(e[Us(t)]=this.$attrs[t],e)),{}),i=Object.assign({},t,e,{onMove:(e,t)=>this.onDragMove(e,t)});!("draggable"in i)&&(i.draggable=">*");const o=1===this.$el.nodeType?this.$el:this.$el.parentElement;this._sortable=new as(o,i),o.__draggable_component__=this,this.computeIndexes()},beforeUnmount(){try{void 0!==this._sortable&&this._sortable.destroy()}catch(e){}},computed:{realList(){return this.list?this.list:this.modelValue}},watch:{$attrs:{handler(e){this.updateOptions(e)},deep:!0},realList(){this.computeIndexes()}},methods:{getTag(){return this.component?(0,o.up)(this.component):this.tag},updateOptions(e){for(var t in e){const i=Us(t);-1===Gs.indexOf(i)&&this._sortable.option(i,e[t])}},getChildrenNodes(){return this.$el.children},computeIndexes(){this.$nextTick((()=>{this.visibleIndexes=Hs(this.getChildrenNodes(),this.$el.children,this.transitionMode,this.footerOffset)}))},getUnderlyingVm(e){const t=Ys(this.getChildrenNodes()||[],e);if(-1===t)return null;const i=this.realList[t];return{index:t,element:i}},emitChanges(e){this.$nextTick((()=>{this.$emit("change",e)}))},alterList(e){if(this.list)return void e(this.list);const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=e=>e.splice(...arguments);this.alterList(e)},updatePosition(e,t){const i=i=>i.splice(t,0,i.splice(e,1)[0]);this.alterList(i)},getVmIndex(e){const t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent(){return this.$slots.default?this.$slots.default()[0].componentInstance:null},resetTransitionData(e){if(!this.noTransitionOnDrag||!this.transitionMode)return;var t=this.getChildrenNodes();t[e].data=null;const i=this.getComponent();i.children=[],i.kept=void 0},onDragStart(e){this.context=this.getUnderlyingVm(e.item),this.context&&(e.item._underlying_vm_=this.clone(this.context.element),Js=e.item)},onDragAdd(e){const t=e.item._underlying_vm_;if(void 0===t)return;Ns(e.item);const i=this.getVmIndex(e.newIndex);this.spliceList(i,0,t),this.computeIndexes();const o={element:t,newIndex:i};this.emitChanges({added:o})},onDragRemove(e){if(As(this.$el,e.item,e.oldIndex),"clone"===e.pullMode)return void Ns(e.clone);if(!this.context)return;const t=this.context.index;this.spliceList(t,1);const i={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:i})},onDragUpdate(e){Ns(e.item),As(e.from,e.item,e.oldIndex);const t=this.context.index,i=this.getVmIndex(e.newIndex);this.updatePosition(t,i);const o={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:o})},updateProperty(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},onDragMove(e,t){const i=this.move;if(!i||!this.realList)return!0;const o=this.getRelatedContextFromMoveEvent(e),n=this.context,s=this.computeFutureIndex(o,e);Object.assign(n,{futureIndex:s});const l=Object.assign({},e,{relatedContext:o,draggedContext:n});return i(l,t)},onDragEnd(){this.computeIndexes(),Js=null},getTrargetedComponent(e){return e.__draggable_component__},getRelatedContextFromMoveEvent({to:e,related:t}){const i=this.getTrargetedComponent(e);if(!i)return{component:i};const o=i.realList,n={list:o,component:i};if(e!==t&&o&&i.getUnderlyingVm){const e=i.getUnderlyingVm(t);if(e)return Object.assign(e,n)}return n},computeFutureIndex(e,t){const i=[...t.to.children].filter((e=>"none"!==e.style["display"]));if(0===i.length)return 0;const o=i.indexOf(t.related),n=e.component.getVmIndex(o),s=-1!==i.indexOf(Js);return s||!t.willInsertAfter?n:n+1}}});var tl={components:{draggable:el,BtnsSaveClose:fe.Z},props:{selectedWH:{type:Object}},emits:{},data(){return{list:[]}},computed:{tableConfig(){return this.$store.state.account.tableConfig}},async mounted(){await this.$store.dispatch("getTableConfig","services"!=this.selectedWH.value&&"whs"!=this.selectedWH.value?this.selectedWH.value:"");const e=[];Object.entries(this.tableConfig).map((t=>{t[1].code=t[0],e.push(t[1])})),this.list=JSON.parse(JSON.stringify(e)),this.list.map((e=>{1===e.visible&&(e.visible=!0),0===e.visible&&(e.visible=!1)}))},methods:{save(){this.list.map(((e,t)=>e.sort=t+1));const e={value:{config:[],code:""},wh:""};this.list.forEach((t=>{t.visible&&e.value.config.push(t.code)})),this.$store.dispatch("update_config_table",e),this.$store.commit("close_table_settings")},close(){this.$store.commit("close_table_settings")}}};const il=(0,Ce.Z)(tl,[["render",ho],["__scopeId","data-v-2c3b7da4"]]);var ol=il;const nl=e=>((0,o.dD)("data-v-40f54fd0"),e=e(),(0,o.Cn)(),e),sl={class:"wrapper"},ll={class:"bgc"},al={class:"container"},rl={class:"header"},dl={class:"top"},cl=nl((()=>(0,o._)("label",null,"Настройки товаров",-1))),ul=(0,o.Uk)("Назад"),_l=nl((()=>(0,o._)("br",null,null,-1))),pl={class:"bottom"},hl=(0,o.uE)('<div class="permits" data-v-40f54fd0><div class="permit" data-v-40f54fd0><input type="checkbox" class="checkbox" id="q1" data-v-40f54fd0><label for="q1" data-v-40f54fd0>Разрешать добавлять товары из резерва в другие сделки</label></div><div class="permit" data-v-40f54fd0><input type="checkbox" class="checkbox" id="q2" data-v-40f54fd0><label for="q2" data-v-40f54fd0>Изменить цену у товаров в открытых сделках (по умолчанию)</label></div><div class="permit" data-v-40f54fd0><input type="checkbox" class="checkbox" id="q3" data-v-40f54fd0><label for="q3" data-v-40f54fd0>Разрешать добавлять в сделки товар с нулевым остатком</label></div></div>',1),ml={class:"sync"},fl=nl((()=>(0,o._)("label",null,"Синхронизация товаров на складе с товарами amoCRM",-1))),gl={class:"list"},vl={class:"label_input"},yl=nl((()=>(0,o._)("label",null,"Выберите список товаров из amoCRM для синхронизации",-1))),bl={class:"label_input"},wl=nl((()=>(0,o._)("label",null,"Скрытие штатной вкладки amoCRM с товарами. В штатной вкладке с товарами так же можно прикреплять товары к сделкам, но количество товара на складе учитываться учитываться не будет.",-1))),Cl={class:"content"},kl=nl((()=>(0,o._)("h6",null,"Этапы резервирования товаров со склада",-1))),xl=nl((()=>(0,o._)("div",{class:"small"}," Внимание! В рамках одной воронки этап резерирования должен быть раньше этапа списания. Если этап презервирования не выбран, то резерирование будет происходить в момент добавления товара в сделку. ",-1))),Dl={class:"steps"},Sl={class:"label_input"},El=nl((()=>(0,o._)("h6",null,"Этапы списания товаров со склада",-1))),Tl=nl((()=>(0,o._)("div",{class:"small"}," Внимание! В рамках одной воронки этап списания должен быть позже этапа резерирования. ",-1))),Il={class:"steps"},Ol={class:"label_input"},Vl=nl((()=>(0,o._)("h6",null,"Привязка полей сделок",-1))),ql={class:"steps"},$l={class:"label_input"},Pl={class:"footer"},Wl=(0,o.Uk)("Назад");function Ml(e,t,i,s,l,a){const r=(0,o.up)("btns-save-close"),d=(0,o.up)("SelectorVue"),c=(0,o.up)("edit-stuff-list");return(0,o.wg)(),(0,o.iD)("div",sl,[(0,o._)("div",ll,[(0,o._)("div",al,[(0,o._)("div",rl,[(0,o._)("div",dl,[cl,(0,o.Wm)(r,{onClose:a.close_edit_stuff,onSave:a.save},{close:(0,o.w5)((()=>[ul])),_:1},8,["onClose","onSave"])]),_l,(0,o._)("div",pl,[hl,(0,o._)("div",ml,[fl,(0,o._)("div",gl,[(0,o._)("div",vl,[yl,(0,o.Wm)(d,{options_props:e.sync_list_stuff_options,onSelect:a.option_select_sync_list_stuff,selected_option:e.sync_list_stuff_selected_option},null,8,["options_props","onSelect","selected_option"])]),(0,o._)("div",bl,[wl,(0,o.Wm)(d,{options_props:e.sync_list_hide_tab_options,onSelect:a.option_select_sync_list_hide_tab,selected_option:e.sync_list_hide_tab_selected_option},null,8,["options_props","onSelect","selected_option"])])])])])]),(0,o._)("div",Cl,[kl,xl,(0,o._)("div",Dl,[(0,o.Wm)(c,{items:l.copy_items_from_storage},{item:(0,o.w5)((({item:e,idx:t})=>[(0,o._)("div",Sl,[(0,o._)("label",null,' Воронка "'+(0,n.zw)(e.name)+'" ',1),(0,o.Wm)(d,{options_props:e.reserve_selector_options,onSelect:a.option_select_reverse,selected_option:e.reserve_selected_option,idx:t,disabled:e.reserve_disable_change},null,8,["options_props","onSelect","selected_option","idx","disabled"])])])),_:1},8,["items"])]),El,Tl,(0,o._)("div",Il,[(0,o.Wm)(c,{items:l.copy_items_from_storage},{item:(0,o.w5)((({item:e,idx:t})=>[(0,o._)("div",Ol,[(0,o._)("label",null,' Воронка "'+(0,n.zw)(e.name)+'" ',1),(0,o.Wm)(d,{options_props:e.cancellation_selector_options,onSelect:a.option_select_cancellation,selected_option:e.cancellation_selected_option,idx:t,disabled:e.cancellation_disable_change},null,8,["options_props","onSelect","selected_option","idx","disabled"])])])),_:1},8,["items"])]),Vl,(0,o._)("div",ql,[(0,o.Wm)(c,{items:l.copy_binding_fields_deals},{item:(0,o.w5)((({item:e,idx:t})=>[(0,o._)("div",$l,[(0,o._)("label",null,' Поле "'+(0,n.zw)(e.name)+'" ',1),(0,o.Wm)(d,{options_props:e.binding_selector_options,onSelect:a.option_select_deals,selected_option:e.binding_selected_option,idx:t,disabled:e.binding_disable_change},null,8,["options_props","onSelect","selected_option","idx","disabled"])])])),_:1},8,["items"])])]),(0,o._)("div",Pl,[(0,o.Wm)(r,{onClose:a.close_edit_stuff,onSave:a.save},{close:(0,o.w5)((()=>[Wl])),_:1},8,["onClose","onSave"])])])])])}function Fl(e,t,i,n,s,l){return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.items,((t,i)=>((0,o.wg)(),(0,o.iD)("div",{key:t.id},[(0,o.WI)(e.$slots,"item",{item:t,idx:i})])))),128)}var jl={props:{items:{type:Array,required:!0}}};const Ul=(0,Ce.Z)(jl,[["render",Fl]]);var Nl=Ul,Al={components:{SelectorVue:me.Z,EditStuffList:Nl,BtnsSaveClose:fe.Z},data(){return{copy_fields:[],new_fields:[],copy_items_from_storage:[],copy_binding_fields_deals:[],idx_to_delete:[],copy_sync_list_stuff_selected_option:{},copy_sync_list_hide_tab_selected_option:{},copy_binding_selected_option:{}}},mounted(){this.copy_fields=[],this.idx_to_delete=[],this.copy_fields=this.fields.map(((e,t)=>Object.assign({index:t},e))),this.copy_items_from_storage=[],this.copy_items_from_storage=this.items_from_storage.map(((e,t)=>Object.assign({index:t},e))),Object.assign(this.copy_sync_list_stuff_selected_option,this.sync_list_stuff_selected_option),Object.assign(this.copy_sync_list_hide_tab_selected_option,this.sync_list_hide_tab_selected_option),this.copy_binding_fields_deals=this.binding_fields_deals.map(((e,t)=>Object.assign({index:t},e))),Object.assign(this.copy_binding_selected_option,this.binding_selected_option)},computed:{...(0,ci.Se)(["types"]),...(0,ci.Se)(["fields"]),...(0,ci.Se)(["sync_list_stuff_options"]),...(0,ci.Se)(["sync_list_hide_tab_options"]),...(0,ci.Se)(["sync_list_stuff_selected_option"]),...(0,ci.Se)(["sync_list_hide_tab_selected_option"]),...(0,ci.Se)(["items_from_storage"]),...(0,ci.Se)(["binding_fields_deals"])},methods:{save(){this.copy_fields.forEach((e=>{let t=1;e.selector_options.forEach((e=>{Object.assign(e,{value:t}),t+=1}))})),this.new_fields.forEach((e=>this.copy_fields.push(e))),this.$store.commit("update_fields",this.copy_fields),this.$store.commit("update_items_from_storage",this.copy_items_from_storage),this.$store.commit("update_binding_fields_deals",this.copy_binding_fields_deals),this.$store.commit("update_sync_list_stuff_selected_option",this.copy_sync_list_stuff_selected_option),this.$store.commit("update_sync_list_hide_tab_selected_option",this.copy_sync_list_hide_tab_selected_option),this.$store.commit("delete_data_idx",this.idx_to_delete),this.new_fields_push();const e=[];this.fields.forEach((t=>e.push(t.field))),e.unshift(""),e.push(""),this.$store.commit("update_params",e),this.new_fields=[],this.close_edit_stuff()},new_fields_push(){let e=new Date;const t=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0"),o=e.getFullYear(),n=e.getHours(),s=e.getMinutes(),l=o+"-"+i+"-"+t,a=o+"-"+i+"-"+t+"T"+n+":"+s;this.new_fields.forEach((e=>{let t="";1!=e.type.value&&2!=e.type.value||(t="0"),6==e.type.value&&(t="Не выбрано"),7==e.type.value&&(t=l),8==e.type.value&&(t=a),9==e.type.value&&(t="Нет"),this.$store.commit("update_all_data",t)}))},add_new_field(){this.new_fields.push({id:this.copy_fields.length+1+this.new_fields.length,field:"",type:{name:"Строка",value:3},selector_options:[{name:"Не выбрано"}],disable_change_type:!1,visibility:!1,edit:!1,editing:!1,delete:!0})},delete_new_field(e){this.new_fields.splice(e,1)},delete_field(e){this.copy_fields.splice(e,1),this.idx_to_delete.push(e)},option_select_type(e,t){this.copy_fields[t].type=e},option_select_new_field_type(e,t){this.new_fields[t].type=e},add_selector_option(e){this.copy_fields[e].selector_options.push({name:""})},remove_selector_option(e,t){this.copy_fields[e].selector_options.splice(t,1)},add_new_fields_selector_option(e){this.new_fields[e].selector_options.push({name:""})},remove_new_fields_selector_option(e,t){this.new_fields[e].selector_options.splice(t,1)},option_select_sync_list_stuff(e){Object.assign(this.copy_sync_list_stuff_selected_option,e)},option_select_sync_list_hide_tab(e){Object.assign(this.copy_sync_list_hide_tab_selected_option,e)},option_select_reverse(e,t){this.copy_items_from_storage[t].reserve_selected_option=e},option_select_cancellation(e,t){this.copy_items_from_storage[t].cancellation_selected_option=e},option_select_deals(e,t){this.copy_binding_fields_deals[t].binding_selected_option=e},close_edit_stuff(){this.$store.commit("open_close_show_edit_stuff",!1)}}};const Yl=(0,Ce.Z)(Al,[["render",Ml],["__scopeId","data-v-40f54fd0"]]);var Hl=Yl;const Bl=e=>((0,o.dD)("data-v-817a3b86"),e=e(),(0,o.Cn)(),e),Rl={class:"wrapper"},Zl={class:"container"},zl=Bl((()=>(0,o._)("div",{class:"header"},[(0,o._)("label",null,"Добавление товаров")],-1))),Xl={class:"content"},Ll={class:"table"},Kl={class:"row title"},Gl=Bl((()=>(0,o._)("td",{class:"item"},null,-1))),Jl={class:"item"},Ql=["onUpdate:modelValue","onFocusin","onFocusout","onInput","disabled"],ea=["onUpdate:modelValue","onFocusin","onFocusout","onInput","disabled"],ta={class:"item"},ia={class:"select_input"},oa=["onUpdate:modelValue","disabled"],na={class:"item"},sa={class:"item"},la=["onUpdate:modelValue","disabled"],aa={class:"item"},ra={class:"item"},da=["onUpdate:modelValue","disabled"],ca={class:"item"},ua=["onUpdate:modelValue"],_a={class:"nds"},pa={key:0},ha=["onUpdate:modelValue","id"],ma=["for"],fa={key:1,class:"hiden"},ga={class:"checkboxes"},va=["onUpdate:modelValue","id"],ya=["for"],ba=["onUpdate:modelValue","id"],wa=["for"],Ca=["onUpdate:modelValue","id"],ka=["for"],xa=["onUpdate:modelValue"],Da={class:"item"},Sa={class:"item"},Ea=["onClick"],Ta={class:"content_footer"},Ia={class:"autocomplete_teleport"},Oa=["onClick"],Va={class:"footer"};function qa(e,t,i,l,a,r){const d=(0,o.up)("selector-vue"),c=(0,o.up)("btns-save-close");return(0,o.wg)(),(0,o.iD)("div",Rl,[(0,o._)("div",Zl,[zl,(0,o._)("div",Xl,[(0,o._)("table",Ll,[(0,o._)("thead",null,[(0,o._)("tr",Kl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},(0,n.zw)(e),1)))),128)),Gl])]),(0,o._)("tbody",null,[(0,o.Wm)(s.W3,{name:"row"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.new_items,((t,i)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:t},[(0,o._)("td",Jl,[(0,o.Wm)(d,{options_props:a.options_type,onSelect:(e,t)=>r.option_select(e,t,"type"),selected_option:t.type,idx:i,disabled:!t.new},null,8,["options_props","onSelect","selected_option","idx","disabled"])]),(0,o._)("td",{class:"item",ref_for:!0,ref:e=>a.selected_field_autocomplete.idx==i&&"article"==a.selected_field_autocomplete.field?a.targetAutocomplete=e:null},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>t.article=e,onFocusin:e=>r.set_selected_field_autocomplete("article",t.article,i),onFocusout:e=>r.set_selected_field_autocomplete("","",i),onInput:e=>r.set_selected_field_autocomplete("article",t.article,i),class:(0,n.C_)(["input",{not_valid:""==t.article&&e.try_accept}]),disabled:!t.new},null,42,Ql),[[s.nr,t.article]])],512),(0,o._)("td",{class:"item",ref_for:!0,ref:e=>a.selected_field_autocomplete.idx==i&&"name"==a.selected_field_autocomplete.field?a.targetAutocomplete=e:null},[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>t.name=e,onFocusin:e=>r.set_selected_field_autocomplete("name",t.name,i),onFocusout:e=>r.set_selected_field_autocomplete("","",i),onInput:e=>r.set_selected_field_autocomplete("name",t.name,i),class:(0,n.C_)(["input",{not_valid:""==t.name&&e.try_accept}]),disabled:!t.new},null,42,ea),[[s.nr,t.name]])],512),(0,o._)("td",ta,[(0,o._)("div",ia,[(0,o.Wm)(d,{options_props:a.batch_category_options,onSelect:(e,t)=>r.option_select(e,t,"batch_category"),selected_option:t.batch_category,idx:i,disabled:!t.new||2==t.type.value},null,8,["options_props","onSelect","selected_option","idx","disabled"]),(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>t.batch=e,class:(0,n.C_)(["input",{not_valid:""==t.batch&&e.try_accept&&2!=t.type.value}]),disabled:!t.new||2==t.type.value},null,10,oa),[[s.nr,t.batch]])])]),(0,o._)("td",na,[(0,o.Wm)(d,{options_props:a.wh_options,onSelect:(e,t)=>r.option_select(e,t,"wh"),selected_option:t.wh,idx:i,disabled:2==t.type.value},null,8,["options_props","onSelect","selected_option","idx","disabled"])]),(0,o._)("td",sa,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>t.count=e,class:(0,n.C_)(["input",{not_valid:(""==t.count||void 0==t.count)&&e.try_accept&&2!=t.type}]),disabled:2==t.type.value,min:"0"},null,10,la),[[s.nr,t.count]])]),(0,o._)("td",aa,[(0,o.Wm)(d,{options_props:a.units_options,onSelect:(e,t)=>r.option_select(e,t,"units"),selected_option:t.units,idx:i,disabled:2==t.type.value},null,8,["options_props","onSelect","selected_option","idx","disabled"])]),(0,o._)("td",ra,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>t.cost_price=e,class:(0,n.C_)(["input",{not_valid:""==t.cost_price&&e.try_accept}]),min:"0",disabled:!t.new},null,10,da),[[s.nr,t.cost_price]])]),(0,o._)("td",ca,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>t.price.cost=e,class:(0,n.C_)(["input",{not_valid:""==t.price.cost&&e.try_accept}]),min:"0"},null,10,ua),[[s.nr,t.price.cost]])]),(0,o._)("td",{class:(0,n.C_)(["item",{long:t.price.is_nds}])},[(0,o._)("div",_a,[t.price.is_nds?((0,o.wg)(),(0,o.iD)("div",fa,[(0,o._)("div",ga,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_nds=e,class:"checkbox",id:i+"nq"},null,8,va),[[s.e8,t.price.is_nds]]),(0,o._)("label",{for:i+"nq"},"НДС",8,ya),(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_price_include_nds=e,class:"checkbox",id:i+"nw"},null,8,ba),[[s.e8,t.price.is_price_include_nds]]),(0,o._)("label",{for:i+"nw"},"включен в цену",8,wa),(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_manager_can_change_nds=e,class:"checkbox",id:i+"ne"},null,8,Ca),[[s.e8,t.price.is_manager_can_change_nds]]),(0,o._)("label",{for:i+"ne"},"можно менять %",8,ka)]),(0,o.wy)((0,o._)("input",{type:"number",class:"input","onUpdate:modelValue":e=>t.price.nds=e,placeholder:"% НДС",min:"0"},null,8,xa),[[s.nr,t.price.nds]])])):((0,o.wg)(),(0,o.iD)("div",pa,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_nds=e,class:"checkbox",id:i+"nq"},null,8,ha),[[s.e8,t.price.is_nds]]),(0,o._)("label",{for:i+"nq"},null,8,ma)]))])],2),(0,o._)("td",Da,[(0,o.Wm)(d,{options_props:a.categories_options,onSelect:(e,t)=>r.option_select(e,t,"category"),selected_option:t.category,idx:i},null,8,["options_props","onSelect","selected_option","idx"])]),(0,o.Wm)(s.uT,{name:"row"},{default:(0,o.w5)((()=>[(0,o._)("td",Sa,[(0,o.wy)((0,o._)("button",{class:"del_btn",onClick:t=>e.del_item(i)}," X ",8,Ea),[[s.F8,a.new_items.length>1]])])])),_:2},1024)])))),128))])),_:1})])]),(0,o._)("div",Ta,[(0,o._)("button",{class:"add_new_button",onClick:t[0]||(t[0]=e=>r.push_new_item())},"+")])]),a.selected_field_autocomplete_list.length?((0,o.wg)(),(0,o.j4)(o.lR,{key:0,to:a.targetAutocomplete},[(0,o._)("ul",Ia,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.selected_field_autocomplete_list,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,onClick:t=>r.select_current_product(e.fields.name,e.fields.article)},(0,n.zw)(e.fields.name),9,Oa)))),128))])],8,["to"])):(0,o.kq)("",!0),(0,o._)("div",Va,[(0,o.Wm)(c,{onClose:r.close,onSave:r.save},null,8,["onClose","onSave"])])])])}i(7686),i(4506);var $a={components:{SelectorVue:me.Z,BtnsSaveClose:fe.Z},props:{currentItems:{type:Array,required:!1,default(){return[]}}},data(){return{title:["Тип","Артикул","Название","№ партии","Склад","Кол-во","Единицы измерений","Себестоимость","Цена","НДС","Категория"],new_items:[],options_type:[{name:"Товар",value:1},{name:"Услуга",value:2}],batch_category_options:[],wh_options:[],units_options:[],categories_options:[],selected_field_autocomplete:{idx:null,field:"",value:""},selected_field_autocomplete_list:[],timer:0,targetAutocomplete:null}},computed:{fields(){return this.$store.state.fields.all_fields}},async mounted(){await this.$store.dispatch("get_fields_properties"),await this.$store.dispatch("get_all_fields"),this.get_categories_options(),this.get_options("batch",this.batch_category_options,"Новая"),this.get_options("wh",this.wh_options,"Не выбрано"),this.get_options("units",this.units_options,"Не выбрано"),this.currentItems.length?this.pushCurrentItems():this.push_new_item()},watch:{selected_field_autocomplete:{async handler(){clearTimeout(this.timer),this.timer=setTimeout((async()=>{const e=this.selected_field_autocomplete;if(this.selected_field_autocomplete_list=[],""!==e.field&&e.value.length>2&&" "!=e.value.split("").at(-1)&&" "!=e.value.split("")[0]){const t=await this.$store.dispatch("autocomplete_"+e.field,e.value);void 0!=t&&(this.selected_field_autocomplete_list=[...t])}}),500)},deep:!0}},methods:{push_new_item(){const e={new:!0,type:{name:"Товар",value:1},article:"",name:"",batch_category:{name:"Новая",value:-1},batch:"",wh:{name:"Не выбрано",value:-1},count:0,units:{name:"Не выбрано",value:-1},cost_price:0,category:{name:"Не выбрано",value:-1},price:{cost:0,currency:"RUB",is_manager_can_change_nds:!1,is_nds:!1,is_price_include_nds:!1,nds:0}};this.new_items.push(e)},pushCurrentItems(){this.currentItems.forEach((e=>{const t={new:!1,type:{name:"Товар",value:1},article:e.fields.article,name:e.fields.name,batch_category:{name:"",value:-1},batch:e.fields.batch,wh:{name:"Не выбрано",value:-1},count:0,units:{name:"Не выбрано",value:-1},cost_price:e.fields.cost_price,category:{...this.categories_options.filter((t=>t.value==e.fields.category))[0]},price:{cost:0,currency:"RUB",is_manager_can_change_nds:!1,is_nds:!1,is_price_include_nds:!1,nds:0}};this.new_items.push(t)}))},set_selected_field_autocomplete(e,t,i){""==e&&(this.targetAutocomplete=null),this.selected_field_autocomplete={field:e,value:t,idx:i}},select_current_product(e,t){this.new_items[this.selected_field_autocomplete.idx].name=e,this.new_items[this.selected_field_autocomplete.idx].article=t,this.set_selected_field_autocomplete("","",null)},get_options(e,t,i){t.push({name:i,value:-1}),this.search_type_options(this.fields,e).forEach(((e,i)=>t.push({name:e,value:i})))},get_categories_options(){this.$store.state.categories.fields_properties.forEach((e=>{let t="";for(let i=1;i<e.level;i++)t+="    ";this.categories_options.push({name:t+e.name,value:e.id})}))},search_type_options(e,t){let i=[];return e.forEach((e=>{e.code==t&&e.data&&(i=e.data)})),i},option_select(e,t,i){this.new_items[t][i]={...e}},close(){this.$emit("close"),this.$store.commit("open_close_new_position",!1)},save(){const e={products:[]};this.new_items.forEach((t=>{const i={is_service:t.type.value-1,fields:{name:t.name,article:t.article,batch:t.batch,units:t.units.name,cost_price:t.cost_price,
//!!!не работают
price:t.price,category:t.category.value}};e.products.push(i)})),this.$store.dispatch("add_product",e),this.close()}}};const Pa=(0,Ce.Z)($a,[["render",qa],["__scopeId","data-v-817a3b86"]]);var Wa=Pa;const Ma=e=>((0,o.dD)("data-v-619b2ece"),e=e(),(0,o.Cn)(),e),Fa={class:"wrapper"},ja={class:"container"},Ua=Ma((()=>(0,o._)("div",{class:"header"},[(0,o._)("label",null,"Списание товаров")],-1))),Na={class:"content"},Aa={class:"table"},Ya={class:"row title"},Ha={class:"item"},Ba=["onUpdate:modelValue"],Ra={class:"item"},Za=["onUpdate:modelValue"],za={class:"item"},Xa={class:"select_input"},La={class:"item"},Ka=["onUpdate:modelValue"],Ga={class:"item"},Ja=["onUpdate:modelValue"],Qa={class:"footer"};function er(e,t,i,l,a,r){const d=(0,o.up)("selector-vue"),c=(0,o.up)("btns-save-close");return(0,o.wg)(),(0,o.iD)("div",Fa,[(0,o._)("div",ja,[Ua,(0,o._)("div",Na,[(0,o._)("table",Aa,[(0,o._)("thead",null,[(0,o._)("tr",Ya,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.title,(e=>((0,o.wg)(),(0,o.iD)("td",{class:"item",key:e},(0,n.zw)(e),1)))),128))])]),(0,o._)("tbody",null,[(0,o.Wm)(s.W3,{name:"row"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.items_to_cancel,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:e},[(0,o._)("td",Ha,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.items_to_cancel[t][0]=e,class:"input",disabled:""},null,8,Ba),[[s.nr,a.items_to_cancel[t][0]]])]),(0,o._)("td",Ra,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.items_to_cancel[t][1]=e,class:"input",disabled:""},null,8,Za),[[s.nr,a.items_to_cancel[t][1]]])]),(0,o._)("td",za,[(0,o._)("div",Xa,[(0,o.Wm)(d,{options_props:a.options1[t],onSelect:r.option_select1,selected_option:a.items_to_cancel[t][2],idx:t,disabled:!0},null,8,["options_props","onSelect","selected_option","idx"])])]),(0,o._)("td",La,[(0,o.wy)((0,o._)("input",{type:"number","onUpdate:modelValue":e=>a.items_to_cancel[t][3]=e,class:(0,n.C_)(["input",{not_valid:""==a.items_to_cancel[t][3]&&a.try_accept}])},null,10,Ka),[[s.nr,a.items_to_cancel[t][3]]])]),(0,o._)("td",Ga,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e=>a.items_to_cancel[t][4]=e,class:(0,n.C_)(["input",{not_valid:""==a.items_to_cancel[t][4]&&a.try_accept}])},null,10,Ja),[[s.nr,a.items_to_cancel[t][4]]])])])))),128))])),_:1})])])]),(0,o._)("div",Qa,[(0,o.Wm)(c,{onClose:r.close_modal,onSave:r.save},null,8,["onClose","onSave"])])])])}var tr={components:{SelectorVue:me.Z,BtnsSaveClose:fe.Z},props:{rows:{type:Array,required:!0,default(){return[]}},idxes:{type:Array,required:!0}},data(){return{title:["Артикул","Название","№ партии","Кол-во","Причина списания"],items_to_cancel:[],options1:[],try_accept:!1,max_count_to_cancel:[]}},watch:{items_to_cancel:{handler:function(){this.items_to_cancel.forEach(((e,t)=>{e[3]<0&&(this.items_to_cancel[t][3]=0),e[3]>this.max_count_to_cancel[t]&&(this.items_to_cancel[t][3]=this.max_count_to_cancel[t])}))},deep:!0}},mounted(){(0,o.Y3)((()=>{this.push_current_item(),this.items_to_cancel.forEach((e=>{this.max_count_to_cancel.push(e[3])}))}))},methods:{push_current_item(){this.rows.forEach(((e,t)=>{this.items_to_cancel.push([]),e.forEach((e=>{this.items_to_cancel[t].push(e)})),this.options1.push([{name:this.items_to_cancel[t][2],value:1}]),this.items_to_cancel[t][2]=this.options1[t][0]}))},save(){this.try_accept=!0;let e=!0;this.items_to_cancel.forEach((t=>{e=e&&""!=t[3]&&""!=t[4]&&void 0!=t[3]&&void 0!=t[4]})),e&&(this.items_to_cancel.forEach(((e,t)=>{const i={name:"На складе",idx:this.idxes[t],count:e[3]};this.$store.commit("cancel_item_in_data",i)})),this.close_modal())},close_modal(){this.items_to_cancel=[],this.try_accept=!1,this.$store.commit("open_close_cancel_position",!1)},option_select1(e,t){this.items_to_cancel[t][2]=e}}};const ir=(0,Ce.Z)(tr,[["render",er],["__scopeId","data-v-619b2ece"]]);var or=ir,nr=i(5872);const sr=e=>((0,o.dD)("data-v-b0dcc8a0"),e=e(),(0,o.Cn)(),e),lr={class:"bgc"},ar={class:"container"},rr={class:"header"},dr={class:"top"},cr=sr((()=>(0,o._)("label",null,"Категории товаров",-1))),ur=(0,o.Uk)("Назад"),_r=sr((()=>(0,o._)("br",null,null,-1))),pr={class:"bottom"},hr={class:"tooltip_teleport"},mr={class:"content"},fr=["onDragstart"],gr={class:"input_name"},vr=["onMouseenter"],yr=["onKeyup","onUpdate:modelValue","disabled"],br=["onClick","onMouseenter"],wr=sr((()=>(0,o._)("div",{class:"rename btn"},null,-1))),Cr=[wr],kr=["onClick","onMouseenter"],xr=sr((()=>(0,o._)("div",{class:"remove btn"},null,-1))),Dr=[xr],Sr=["id","onClick","onMouseenter"],Er=sr((()=>(0,o._)("div",{class:"add btn"},null,-1))),Tr=[Er],Ir={class:"footer"},Or=(0,o.Uk)("Назад");function Vr(e,t,i,l,a,r){const d=(0,o.up)("btns-save-close"),c=(0,o.up)("ProductsCategoryRemoveModal"),u=(0,o.up)("draggable");return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["wrapper",{opened_close_remove_modal:a.del_modal_config.show}])},[(0,o._)("div",lr,[(0,o._)("div",ar,[(0,o._)("div",rr,[(0,o._)("div",dr,[cr,(0,o.Wm)(d,{onClose:r.close_product_category,onSave:e.save,show_save:!1},{close:(0,o.w5)((()=>[ur])),_:1},8,["onClose","onSave"])]),_r,(0,o._)("div",pr,[a.del_modal_config.show?((0,o.wg)(),(0,o.j4)(o.lR,{key:0,to:"body"},[(0,o.Wm)(c,{onRemove:r.remove,onClose:r.closeRemoveModal},null,8,["onRemove","onClose"])])):(0,o.kq)("",!0),null!==a.target?((0,o.wg)(),(0,o.j4)(o.lR,{key:1,to:a.target},[(0,o._)("div",{onFocusout:t[4]||(t[4]=e=>r.reset_fields_cat_name())},[(0,o.wy)((0,o._)("input",{type:"text",class:"input_teleport","onUpdate:modelValue":t[0]||(t[0]=e=>a.fields_cat_name=e),ref:"input",onKeyup:[t[1]||(t[1]=(0,s.D2)((t=>r.add_new(a.fields_cat_name,e.item)),["enter"])),t[2]||(t[2]=(0,s.D2)((e=>r.reset_fields_cat_name()),["esc"]))]},null,544),[[s.nr,a.fields_cat_name]]),(0,o._)("button",{class:"button_teleport",onClick:t[3]||(t[3]=t=>r.add_new(a.fields_cat_name,e.item))}," ок ")],32)],8,["to"])):(0,o.kq)("",!0),null!==a.target_hovered_category?((0,o.wg)(),(0,o.j4)(o.lR,{key:2,to:a.target_hovered_category},[(0,o._)("p",hr,(0,n.zw)(a.hovered_category_text[a.hovered_category?.type]),1)],8,["to"])):(0,o.kq)("",!0)])]),(0,o._)("div",mr,[(0,o.Wm)(u,{class:"dragArea",list:r.copy_fields_properties,onChange:r.changeData},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.copy_fields_properties,((e,i)=>((0,o.wg)(),(0,o.iD)("div",{key:e.id,class:(0,n.C_)(["item",{darag:a.isDragged==i}]),style:(0,n.j5)({width:r.calculate_width(e.level)+"%"}),onDragstart:e=>a.isDragged=i,onDragend:t[9]||(t[9]=e=>a.isDragged=null)},[(0,o._)("div",gr,[(0,o._)("div",{onMouseenter:t=>a.hovered_category={id:e.id,type:"name"},onMouseleave:t[5]||(t[5]=e=>a.target_hovered_category=null),ref_for:!0,ref:t=>e.id===a.hovered_category?.id&&"name"==a.hovered_category.type?a.target_hovered_category=t:null,class:"text_block"},[(0,o.wy)((0,o._)("input",{type:"text",class:"input",onKeyup:(0,s.D2)((t=>r.rename(e.id)),["enter"]),"onUpdate:modelValue":t=>e.name=t,disabled:0===e.parent_id},null,40,yr),[[s.nr,e.name]])],40,vr),!a.all_old?.name?.includes(e.name)&&a.all_old?.id?.includes(e.id)?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:t=>r.prevname(e.id),class:"btns",onMouseenter:t=>a.hovered_category={id:e.id,type:"prevname"},onMouseleave:t[6]||(t[6]=e=>a.target_hovered_category=null),ref_for:!0,ref:t=>e.id===a.hovered_category?.id&&"prevname"==a.hovered_category.type?a.target_hovered_category=t:null},Cr,40,br)):(0,o.kq)("",!0)]),(0,o._)("div",null,[0!==e.parent_id&&(!r.copy_fields_properties[i+1]||r.copy_fields_properties[i+1]?.level<=e.level)?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:(0,s.iM)((t=>r.setRemoveModalConfig(e.id,e.level)),["stop"]),class:"btns",onMouseenter:t=>a.hovered_category={id:e.id,type:"delete"},onMouseleave:t[7]||(t[7]=e=>a.target_hovered_category=null),ref_for:!0,ref:t=>e.id===a.hovered_category?.id&&"delete"==a.hovered_category.type?a.target_hovered_category=t:null},Dr,40,kr)):(0,o.kq)("",!0),(0,o._)("button",{id:e.id,onClick:t=>a.selected_category_id=e.id,class:"btns",ref_for:!0,ref:t=>e.id===a.selected_category_id?a.target=t:e.id===a.hovered_category?.id&&"add"==a.hovered_category.type?a.target_hovered_category=t:null,onMouseenter:t=>a.hovered_category={id:e.id,type:"add"},onMouseleave:t[8]||(t[8]=e=>a.target_hovered_category=null)},Tr,40,Sr)])],46,fr)))),128))])),_:1},8,["list","onChange"])]),(0,o._)("div",Ir,[(0,o.Wm)(d,{onClose:r.close_product_category,onSave:e.save,show_save:!1},{close:(0,o.w5)((()=>[Or])),_:1},8,["onClose","onSave"])])])])],2)}const qr=e=>((0,o.dD)("data-v-32531ac4"),e=e(),(0,o.Cn)(),e),$r={class:"bg"},Pr={class:"modal"},Wr=qr((()=>(0,o._)("h3",{class:"header"},"Подтверждаете удаление категории?",-1))),Mr=qr((()=>(0,o._)("p",{class:"text"}," В случае удаления категории свойства товаров этой категории будут перенесены в корневую категорию ",-1))),Fr={class:"buttons"},jr=(0,o.Uk)("Удалить");function Ur(e,t,i,n,s,l){const a=(0,o.up)("BtnsSaveClose");return(0,o.wg)(),(0,o.iD)("div",$r,[(0,o._)("div",Pr,[Wr,Mr,(0,o._)("div",Fr,[(0,o.Wm)(a,{onClose:l.close,onSave:l.remove},{save:(0,o.w5)((()=>[jr])),_:1},8,["onClose","onSave"])])])])}var Nr={components:{BtnsSaveClose:fe.Z},methods:{close(){this.$emit("close")},remove(){this.$emit("remove")}}};const Ar=(0,Ce.Z)(Nr,[["render",Ur],["__scopeId","data-v-32531ac4"]]);var Yr=Ar,Hr={components:{BtnsSaveClose:fe.Z,ProductsCategoryRemoveModal:Yr,draggable:el},data(){return{fields_cat_name:"",selected_category_id:null,hovered_category:null,target:null,target_hovered_category:null,all_old:{},isDragged:null,del_modal_config:{show:!1,id:null,level:null},hovered_category_text:{name:"Для изменеия названия категории нажмите Enter",prevname:"Возвращает изначальное название",delete:"Удаление категории",add:"Добавлние новой подкатегории"}}},async mounted(){this.$store.dispatch("get_fields_properties").then((()=>this.get_all_old()))},computed:{copy_fields_properties(){return this.$store.state.categories.fields_properties}},watch:{target:{handler:function(){(0,Dt.nextTick)((()=>{null!==this.target&&this.$refs.input.focus()}))},deep:!0},target_hovered_category(){}},methods:{changeData(e){const t=e.moved.newIndex,i=[...this.copy_fields_properties],o={id:i[t].id,parent_id:i[t-1].id,name:""};this.$store.dispatch("update_fields_properties",o)},get_all_old(){const e={name:[],id:[],parent_id:[],fields_id:[],level:[],levels:[]};this.$store.state.categories.fields_properties.forEach((t=>Object.entries(t).forEach((t=>e[t[0]]?.push(t[1]))))),Object.assign(this.all_old,e)},add_new(){const e=this.copy_fields_properties.filter((e=>e.id===this.selected_category_id))[0];e.level+1<=10&&""!=this.fields_cat_name&&(this.$store.dispatch("add_fields_properties",{name:this.fields_cat_name,parent_id:e.id}),this.reset_fields_cat_name())},rename(e){const t=[...this.copy_fields_properties].filter((t=>t.id===e))[0],i={id:t.id,parent_id:"",name:t.name};this.$store.dispatch("update_fields_properties",i)},prevname(e){this.$store.state.categories.fields_properties.map((t=>{const i=()=>{let t="";return this.all_old.id.forEach(((i,o)=>i===e?t=this.all_old.name[o]:null)),t};t.id===e&&(t.name=i(),this.rename(e))}))},reset_fields_cat_name(){setTimeout((()=>{this.selected_category_id=null,this.fields_cat_name="",this.target=null}),100)},calculate_width(e){let t=100;return t*=.95**(e-1),t},setRemoveModalConfig(e,t){this.del_modal_config.level=t,this.del_modal_config.id=e,this.del_modal_config.show=!0},remove(){1!=this.del_modal_config.level&&this.$store.dispatch("delete_fields_properties",{id:this.del_modal_config.id}),this.closeRemoveModal()},closeRemoveModal(){this.del_modal_config.show=!1},close_product_category(){this.$store.commit("open_close_product_category",!1)}}};const Br=(0,Ce.Z)(Hr,[["render",Vr],["__scopeId","data-v-b0dcc8a0"]]);var Rr=Br;const Zr=e=>((0,o.dD)("data-v-1545e8f6"),e=e(),(0,o.Cn)(),e),zr={class:"wrapper"},Xr={class:"bgc"},Lr={class:"container"},Kr={class:"header"},Gr={class:"top"},Jr=Zr((()=>(0,o._)("label",null,"Свойства товаров",-1))),Qr=(0,o.Uk)("Назад"),ed=Zr((()=>(0,o._)("br",null,null,-1))),td={class:"links"},id=["onClick"],od={class:"bottom"},nd={class:"content"},sd=Zr((()=>(0,o._)("h6",null,"Поля товаров в сделке",-1))),ld={class:"rows"},ad={class:"row"},rd={class:"item"},dd={class:"copy_fields"},cd=Zr((()=>(0,o._)("span",null,"Поле",-1))),ud=Zr((()=>(0,o._)("th",{class:"item"},"Тип",-1))),_d=Zr((()=>(0,o._)("th",{class:"item"},"Видимость в сделке",-1))),pd=Zr((()=>(0,o._)("th",{class:"item"},"Редактирование в сделке",-1))),hd=Zr((()=>(0,o._)("th",{class:"item"},null,-1))),md={class:"item"},fd={key:0},gd=["onUpdate:modelValue","onKeyup"],vd={class:"item selectors"},yd={key:0,class:"type_selector_options"},bd=["onUpdate:modelValue","onKeyup"],wd=["onClick"],Cd=["onClick"],kd={class:"box item"},xd=["id","disabled","onUpdate:modelValue"],Dd=["for"],Sd={class:"box item"},Ed=["id","disabled","onUpdate:modelValue"],Td=["for"],Id={class:"item"},Od=["onClick"],Vd={class:"item"},qd=["onUpdate:modelValue","onKeyup"],$d={class:"item selectors"},Pd={key:0,class:"type_selector_options"},Wd=["onUpdate:modelValue"],Md=["onClick"],Fd=["onClick"],jd={class:"box item"},Ud=["id","disabled","onUpdate:modelValue"],Nd=["for"],Ad={class:"box item"},Yd=["id","disabled","onUpdate:modelValue"],Hd=["for"],Bd={class:"item"},Rd=["onClick"],Zd={class:"footer"},zd=(0,o.Uk)("Назад");function Xd(e,t,i,l,a,r){const d=(0,o.up)("btns-save-close"),c=(0,o.up)("SelectorVue");return(0,o.wg)(),(0,o.iD)("div",zr,[(0,o._)("div",Xr,[(0,o._)("div",Lr,[(0,o._)("div",Kr,[(0,o._)("div",Gr,[Jr,(0,o.Wm)(d,{onClose:r.close_product_properties,show_save:!1},{close:(0,o.w5)((()=>[Qr])),_:1},8,["onClose"])]),ed,(0,o._)("div",td,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.selected_fields_properties,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["triangle",{triangle_last:a.selected_fields_properties.length-1==t}]),key:e.id,onClick:e=>r.prev_cat(t)},(0,n.zw)(e.name),11,id)))),128))]),(0,o._)("div",od,[(0,o.Wm)(c,{options_props:a.data_fields_properties.items,onSelect:r.option_select_fields_properties,selected_option:a.data_fields_properties.selected},null,8,["options_props","onSelect","selected_option"])])]),(0,o._)("div",nd,[sd,(0,o._)("table",ld,[(0,o._)("tr",ad,[(0,o._)("th",rd,[(0,o._)("div",dd,[cd,(0,o.Wm)(c,{options_props:r.properties_for_selector,onSelect:r.option_select_copy_fields,selected_option:{name:"Категория",value:1}},null,8,["options_props","onSelect"])])]),ud,_d,pd,hd]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.copy_fields,((e,t)=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("tr",{class:(0,n.C_)(["row",{load:a.is_loading}]),key:e.id},[(0,o._)("td",md,[e.is_system?((0,o.wg)(),(0,o.iD)("span",fd,(0,n.zw)(e.name),1)):(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:1,type:"text",class:"input new_item_input","onUpdate:modelValue":t=>e.name=t,onKeyup:(0,s.D2)((e=>r.update_field(t,["name"])),["enter"])},null,40,gd)),[[s.nr,e.name]])]),(0,o._)("td",vd,[(0,o.Wm)(c,{options_props:r.types,onSelect:r.option_select_type,selected_option:r.search_type(e.type),disabled:!0,idx:t},null,8,["options_props","onSelect","selected_option","idx"]),5==e.type||6==e.type?((0,o.wg)(),(0,o.iD)("div",yd,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.data,((i,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"type_selector_option",key:n},[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.data[n]=t,onKeyup:(0,s.D2)((e=>r.update_field(t,["data"])),["enter"])},null,40,bd),[[s.nr,e.data[n]]]),(0,o._)("button",{class:"del_button",onClick:e=>(r.remove_selector_option(t,n),r.update_field(t,["data"]))}," x ",8,wd)])))),128)),(0,o._)("button",{onClick:e=>r.add_selector_option(t),class:"add_button"}," + ",8,Cd)])):(0,o.kq)("",!0)]),(0,o._)("td",kd,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:t+"nb",disabled:e.lead_config.visible.disabled,"onUpdate:modelValue":t=>e.lead_config.visible.value=t},null,8,xd),[[s.e8,e.lead_config.visible.value]]),(0,o._)("label",{for:t+"nb"},null,8,Dd)]),(0,o._)("td",Sd,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:t+"n",disabled:e.lead_config.editable.disabled,"onUpdate:modelValue":t=>e.lead_config.editable.value=t},null,8,Ed),[[s.e8,e.lead_config.editable.value]]),(0,o._)("label",{for:t+"n"},null,8,Td)]),(0,o._)("td",Id,[(0,o.wy)((0,o._)("button",{class:"del_btn",onClick:t=>r.delete_field(e.id)}," X ",8,Od),[[s.F8,!e.is_system]])])],2)),[[s.F8,a.selected_fields_properties.at(-1)?.id===e.category_id]]))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.new_fields,((e,t)=>((0,o.wg)(),(0,o.iD)("tr",{class:"row",key:e.id},[(0,o._)("td",Vd,[(0,o.wy)((0,o._)("input",{type:"text",class:"input new_item_input","onUpdate:modelValue":t=>e.name=t,onKeyup:(0,s.D2)((t=>r.add_new(e)),["enter"])},null,40,qd),[[s.nr,e.name]])]),(0,o._)("td",$d,[(0,o.Wm)(c,{options_props:r.types,onSelect:r.option_select_new_field_type,selected_option:r.search_type(e.type),idx:t},null,8,["options_props","onSelect","selected_option","idx"]),5==a.new_fields[t].type||6==a.new_fields[t].type?((0,o.wg)(),(0,o.iD)("div",Pd,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.data,((i,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"type_selector_option",key:n},[(0,o.wy)((0,o._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.data[n]=t},null,8,Wd),[[s.nr,e.data[n]]]),(0,o._)("button",{class:"del_button",onClick:e=>r.remove_new_fields_selector_option(t,n)}," x ",8,Md)])))),128)),(0,o._)("button",{onClick:e=>r.add_new_fields_selector_option(t),class:"add_button"}," + ",8,Fd)])):(0,o.kq)("",!0)]),(0,o._)("td",jd,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:t+"nb1",disabled:a.new_fields[t].disabled?.visible.value,"onUpdate:modelValue":e=>a.new_fields[t].lead_config.visible.value=e},null,8,Ud),[[s.e8,a.new_fields[t].lead_config.visible.value]]),(0,o._)("label",{for:t+"nb1"},null,8,Nd)]),(0,o._)("td",Ad,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"checkbox",id:t+"n1",disabled:a.new_fields[t].disabled?.editable.value,"onUpdate:modelValue":e=>a.new_fields[t].lead_config.editable.value=e},null,8,Yd),[[s.e8,a.new_fields[t].lead_config.editable.value]]),(0,o._)("label",{for:t+"n1"},null,8,Hd)]),(0,o._)("td",Bd,[(0,o.wy)((0,o._)("button",{class:"del_btn",onClick:e=>r.delete_new_field(t)}," X ",8,Rd),[[s.F8,a.new_fields[t].delete]])])])))),128))]),(0,o._)("button",{onClick:t[0]||(t[0]=e=>r.add_new_field()),class:"add_new_button"},"+")]),(0,o._)("div",Zd,[(0,o.Wm)(d,{onClose:r.close_product_properties,show_save:!1},{close:(0,o.w5)((()=>[zd])),_:1},8,["onClose"])])])])])}var Ld={components:{SelectorVue:me.Z,BtnsSaveClose:fe.Z},data(){return{copy_fields:[],new_fields:[],new_fields_cat:[],idx_to_delete:[],copy_fields_properties:[],selected_fields_properties:[],data_fields_properties:{items:null,selected:{name:"Выбор подкатегории",value:-1}},is_loading:!1}},async mounted(){this.is_loading=!0,this.$store.dispatch("get_types"),this.$store.dispatch("get_fields_properties").then((()=>this.copy_fields_properties=[...this.$store.state.categories.fields_properties])).then((()=>{this.option_select_fields_properties({value:this.copy_fields_properties.filter((e=>0===e.parent_id))[0]})})).then((()=>{this.get_fields(),this.is_loading=!1}))},computed:{types(){const e=[];return Object.entries(this.$store.state.fields.types).forEach((t=>{e.push({name:t[1],value:t[0]})})),e},properties_for_selector(){const e=[];return this.copy_fields_properties.forEach((t=>{let i="";for(let e=1;e<t.level;e++)i+="    ";e.push({name:i+t.name,value:t.id})})),e}},methods:{add_new_field(){const e=this.copy_fields.length+1,t=this.selected_fields_properties.at(-1).id,i=3,o="",n={visible:{disabled:!1,value:!1},editable:{disabled:!1,value:!1}},s={id:e,category_id:t,type:i,name:o,data:[],lead_config:n};this.new_fields.push(s)},async add_new(e){const t=(e,t)=>{let i=0;return e&&t&&(i=2),e&&!t&&(i=1),e||t||(i=0),!e&&t&&(i=-1),i},i={visible:t(e.lead_config.visible.value,e.lead_config.visible.disabled),editable:t(e.lead_config.editable.value,e.lead_config.editable.disabled)},o={type:e.type,name:e.name,category_id:e.category_id,lead_config:i,data:e.data},n="error"in await this.$store.dispatch("add_field",o);n||(this.new_fields.splice(this.new_fields.indexOf(e),1),this.get_fields())},prev_cat(e){this.selected_fields_properties.splice(e+1),this.feel_data_fields_properties(this.selected_fields_properties.at(-1).id)},feel_data_fields_properties(e){this.data_fields_properties.items=this.preparing_fields_properties(e),this.get_fields()},preparing_fields_properties(e){const t=[],i=this.copy_fields_properties.filter((t=>t.parent_id==e));return i.forEach((e=>t.push({name:e.name,value:e}))),t},option_select_fields_properties(e){const t=JSON.parse(JSON.stringify(e));this.selected_fields_properties.push(t.value),this.feel_data_fields_properties(e.value.id)},async update_field(e,t){const i={};i["id"]=this.copy_fields[e]["id"],t.forEach((t=>{i[t]=this.copy_fields[e][t]}));const o="error"in await this.$store.dispatch("update_fields",i);o||this.get_fields()},async get_fields(){this.is_loading=!0,await this.$store.dispatch("get_fields",this.selected_fields_properties.at(-1).id),this.copy_fields=[...this.$store.state.fields.fields],this.copy_fields.map((e=>{const t=e.lead_config.visible;e.lead_config.visible={disabled:-1==t||2==t,value:t>0};const i=e.lead_config.editable;e.lead_config.editable={disabled:-1==i||2==i,value:i>0}})),this.is_loading=!1},search_type(e){return this.types.filter((t=>t.value==e))[0]},delete_new_field(e){const t=this.selected_fields_properties.at(-1),i=t.fields_id.length-this.new_fields.length+e;this.new_fields.splice(e,1),this.copy_fields_properties.map((e=>e.id===t.id?e.fields_id.splice(i,1):null)),t.fields_id.splice(i,1)},delete_field(e){this.$store.dispatch("delete_field",e),this.get_fields()},option_select_type(e,t){this.copy_fields[t].type=e},option_select_new_field_type(e,t){this.new_fields[t].type=e.value},async option_select_copy_fields(e){const t=await this.$store.dispatch("get_fields_not_save",e.value),i=t.filter((e=>!e.is_system));i.forEach((e=>{const t={id:e.id,category_id:this.selected_fields_properties.at(-1).id};this.$store.dispatch("update_fields",t)})),this.get_fields()},add_selector_option(e){null==this.copy_fields[e].data&&(this.copy_fields[e].data=[]),this.copy_fields[e].data.push("")},remove_selector_option(e,t){this.copy_fields[e].data.splice(t,1)},add_new_fields_selector_option(e){this.new_fields[e].data.push("")},remove_new_fields_selector_option(e,t){this.new_fields[e].data.splice(t,1)},close_product_properties(){this.$store.commit("open_close_show_product_properties",!1)}}};const Kd=(0,Ce.Z)(Ld,[["render",Xd],["__scopeId","data-v-1545e8f6"]]);var Gd=Kd;const Jd=e=>((0,o.dD)("data-v-68dc8833"),e=e(),(0,o.Cn)(),e),Qd={class:"wrapper"},ec={class:"container"},tc={class:"header"},ic=Jd((()=>(0,o._)("label",null,"ThirdPpartyIntegrations",-1))),oc={class:"content"},nc={key:0},sc=Jd((()=>(0,o._)("a",{href:" https://www.amocrm.ru/oauth/?state=%7B%22external_source%22:%22gosklad%22%7D&client_id=d9322b36-0001-4269-bb61-976571e8a51a",target:"blank"},[(0,o._)("button",null,"установить «Генезис: 1С интеграция»")],-1))),lc=Jd((()=>(0,o._)("div",{class:"icon"},null,-1))),ac=Jd((()=>(0,o._)("div",{class:"footer"},null,-1)));function rc(e,t,i,n,s,l){return(0,o.wg)(),(0,o.iD)("div",Qd,[(0,o._)("div",ec,[(0,o._)("div",tc,[ic,(0,o._)("button",{onClick:t[0]||(t[0]=e=>l.close())},"x")]),(0,o._)("div",oc,[l.oneC?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("label",nc," Для интеграции с 1С-Генезис не обходимо установить виджет «Генезис: 1С интеграция»")),sc,lc]),ac])])}var dc={computed:{oneC(){return this.$store.state.account.account?.config?.g_enabled}},methods:{close(){this.$store.commit("openCloseThirdPpartyIntegrations",!1)}}};const cc=(0,Ce.Z)(dc,[["render",rc],["__scopeId","data-v-68dc8833"]]);var uc=cc,_c={components:{MainGrid:Si,TableSettings:ol,EditStuff:Hl,NewPosition:Wa,CancelPosition:or,CardGrid:oo,DocumentSetting:nr.Z,ProductCategory:Rr,ProductProperties:Gd,ThirdPpartyIntegrations:uc,SelectorVue:me.Z},provide(){return{isServicePage:(0,o.Fl)((()=>this.isServicePage))}},data(){return{filter_value:!1,paginatedData:[],paginatedParams:[],selectedWH:{name:"Все склады",value:"whs"},whs:[],grid:!1,currentItems:[]}},computed:{show_modals(){return this.show_settings||this.disabled_for_modals},disabled_for_modals(){return this.show_edit_modal||this.show_table_settings||this.show_edit_stuff||this.show_product_category||this.show_product_properties||this.show_new_position||this.show_cancel_position||this.show_document_setting},isServicePage(){return"services"===this.selectedWH.value},...(0,ci.Se)(["catalog","show_edit_modal","show_settings","show_table_settings","show_buttons","show_filter","show_edit_stuff","show_sync","show_new_position","show_cancel_position","show_document_setting","show_product_category","show_product_properties","showThirdPpartyIntegrations"]),totalCountProducts(){return this.$store.state.products.meta.meta.total},oneC(){return this.$store.state.account.account?.config?.g_enabled},ref_main(){return this.$refs.main},ref_card(){return this.$refs.card}},async mounted(){await this.$store.dispatch("get_account"),this.getWHS()},watch:{filter_value(){this.$store.commit("open_close_filter",this.filter_value)},show_modals(){this.show_modals?(window.scrollBy(-99999,-99999),document.body.style.overflowX="hidden"):document.body.style.overflowX="auto"},selected_storage(){this.grid?this.ref_card.drop_page():this.ref_main.drop_page()}},methods:{clearFilters(){this.ref_main?.clearFilters()},getWHS(){this.$store.state.account.account.whs.forEach((e=>this.whs.push({name:e.name,value:e.code}))),this.whs.push({name:"Услуги",value:"services"})},selectWH(e){this.selectedWH=e},archive_data(){this.ref_main?.selectedProducts.filter((e=>e.value))?.forEach((e=>{e.item.is_archive=1,this.$store.dispatch("update_product",e.item)})),this.ref_main?.changePage(this.$store.state.products.meta.meta.current_page)},addCurrentProducts(){this.open_close_new_position(!0),this.currentItems=[...this.ref_main?.selectedProducts.filter((e=>e.value)).map((e=>e.item))]},dropCurrentItems(){this.currentItems=[]},open_close_new_position(e){this.$store.commit("open_close_new_position",e)},open_close_cancel_position(e){this.$store.commit("open_close_cancel_position",e)},open_close_settings(){this.$store.commit("open_close_settings")},close_settings(){this.$store.commit("close_settings")},close_sync(){this.$store.commit("close_sync")},open_close_sync(){this.$store.commit("open_close_sync")},open_edit_stuff(){this.$store.commit("open_close_show_edit_stuff",!0)},open_product_category(){this.$store.commit("open_close_product_category",!0)},openThirdPpartyIntegrations(){this.$store.commit("openCloseThirdPpartyIntegrations",!0)},open_product_properties(){this.$store.commit("open_close_show_product_properties",!0)},open_close_show_document_setting(e){this.$store.commit("open_close_show_document_setting",e)},route(e){this.$router.push("/"+e)}}};const pc=(0,Ce.Z)(_c,[["render",H],["__scopeId","data-v-0f5505d4"]]);var hc=pc},4406:function(e){var t,i,o=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}function a(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(function(){try{t="function"===typeof setTimeout?setTimeout:n}catch(e){t=n}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(e){i=s}})();var r,d=[],c=!1,u=-1;function _(){c&&r&&(c=!1,r.length?d=r.concat(d):u=-1,d.length&&p())}function p(){if(!c){var e=l(_);c=!0;var t=d.length;while(t){r=d,d=[];while(++u<t)r&&r[u].run();u=-1,t=d.length}r=null,c=!1,a(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new h(e,t)),1!==d.length||c||l(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}}]);
//# sourceMappingURL=225.b00c3578.js.map