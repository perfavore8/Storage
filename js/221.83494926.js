(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[221],{6983:function(e,t,i){(function(t,n){e.exports=n(i(6866),i(6755))})("undefined"!==typeof self&&self,(function(e,t){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({"00ee":function(e,t,i){var n=i("b622"),o=n("toStringTag"),s={};s[o]="z",e.exports="[object z]"===String(s)},"0366":function(e,t,i){var n=i("1c0b");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},"057f":function(e,t,i){var n=i("fc6a"),o=i("241c").f,s={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],l=function(e){try{return o(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==s.call(e)?l(e):o(n(e))}},"06cf":function(e,t,i){var n=i("83ab"),o=i("d1e7"),s=i("5c6c"),a=i("fc6a"),l=i("c04e"),r=i("5135"),c=i("0cfb"),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=l(t,!0),c)try{return d(e,t)}catch(i){}if(r(e,t))return s(!o.f.call(e,t),e[t])}},"0cfb":function(e,t,i){var n=i("83ab"),o=i("d039"),s=i("cc12");e.exports=!n&&!o((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},"13d5":function(e,t,i){"use strict";var n=i("23e7"),o=i("d58f").left,s=i("a640"),a=i("ae40"),l=s("reduce"),r=a("reduce",{1:0});n({target:"Array",proto:!0,forced:!l||!r},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(e,t,i){var n=i("c6b6"),o=i("9263");e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var s=i.call(e,t);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"159b":function(e,t,i){var n=i("da84"),o=i("fdbc"),s=i("17c2"),a=i("9112");for(var l in o){var r=n[l],c=r&&r.prototype;if(c&&c.forEach!==s)try{a(c,"forEach",s)}catch(d){c.forEach=s}}},"17c2":function(e,t,i){"use strict";var n=i("b727").forEach,o=i("a640"),s=i("ae40"),a=o("forEach"),l=s("forEach");e.exports=a&&l?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1be4":function(e,t,i){var n=i("d066");e.exports=n("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,i){var n=i("b622"),o=n("iterator"),s=!1;try{var a=0,l={next:function(){return{done:!!a++}},return:function(){s=!0}};l[o]=function(){return this},Array.from(l,(function(){throw 2}))}catch(r){}e.exports=function(e,t){if(!t&&!s)return!1;var i=!1;try{var n={};n[o]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(r){}return i}},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1dde":function(e,t,i){var n=i("d039"),o=i("b622"),s=i("2d00"),a=o("species");e.exports=function(e){return s>=51||!n((function(){var t=[],i=t.constructor={};return i[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"23cb":function(e,t,i){var n=i("a691"),o=Math.max,s=Math.min;e.exports=function(e,t){var i=n(e);return i<0?o(i+t,0):s(i,t)}},"23e7":function(e,t,i){var n=i("da84"),o=i("06cf").f,s=i("9112"),a=i("6eeb"),l=i("ce4e"),r=i("e893"),c=i("94ca");e.exports=function(e,t){var i,d,u,p,f,h,_=e.target,m=e.global,g=e.stat;if(d=m?n:g?n[_]||l(_,{}):(n[_]||{}).prototype,d)for(u in t){if(f=t[u],e.noTargetGet?(h=o(d,u),p=h&&h.value):p=d[u],i=c(m?u:_+(g?".":"#")+u,e.forced),!i&&void 0!==p){if(typeof f===typeof p)continue;r(f,p)}(e.sham||p&&p.sham)&&s(f,"sham",!0),a(d,u,f,e)}}},"241c":function(e,t,i){var n=i("ca84"),o=i("7839"),s=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},"25f0":function(e,t,i){"use strict";var n=i("6eeb"),o=i("825a"),s=i("d039"),a=i("ad6d"),l="toString",r=RegExp.prototype,c=r[l],d=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=l;(d||u)&&n(RegExp.prototype,l,(function(){var e=o(this),t=String(e.source),i=e.flags,n=String(void 0===i&&e instanceof RegExp&&!("flags"in r)?a.call(e):i);return"/"+t+"/"+n}),{unsafe:!0})},"2ca0":function(e,t,i){"use strict";var n=i("23e7"),o=i("06cf").f,s=i("50c4"),a=i("5a34"),l=i("1d80"),r=i("ab13"),c=i("c430"),d="".startsWith,u=Math.min,p=r("startsWith"),f=!c&&!p&&!!function(){var e=o(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!f&&!p},{startsWith:function(e){var t=String(l(this));a(e);var i=s(u(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return d?d.call(t,n,i):t.slice(i,i+n.length)===n}})},"2d00":function(e,t,i){var n,o,s=i("da84"),a=i("342f"),l=s.process,r=l&&l.versions,c=r&&r.v8;c?(n=c.split("."),o=n[0]+n[1]):a&&(n=a.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/),n&&(o=n[1]))),e.exports=o&&+o},"342f":function(e,t,i){var n=i("d066");e.exports=n("navigator","userAgent")||""},"35a1":function(e,t,i){var n=i("f5df"),o=i("3f8c"),s=i("b622"),a=s("iterator");e.exports=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||o[n(e)]}},"37e8":function(e,t,i){var n=i("83ab"),o=i("9bf2"),s=i("825a"),a=i("df75");e.exports=n?Object.defineProperties:function(e,t){s(e);var i,n=a(t),l=n.length,r=0;while(l>r)o.f(e,i=n[r++],t[i]);return e}},"3bbe":function(e,t,i){var n=i("861d");e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3ca3":function(e,t,i){"use strict";var n=i("6547").charAt,o=i("69f3"),s=i("7dd0"),a="String Iterator",l=o.set,r=o.getterFor(a);s(String,"String",(function(e){l(this,{type:a,string:String(e),index:0})}),(function(){var e,t=r(this),i=t.string,o=t.index;return o>=i.length?{value:void 0,done:!0}:(e=n(i,o),t.index+=e.length,{value:e,done:!1})}))},"3f8c":function(e,t){e.exports={}},4160:function(e,t,i){"use strict";var n=i("23e7"),o=i("17c2");n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},"428f":function(e,t,i){var n=i("da84");e.exports=n},"44ad":function(e,t,i){var n=i("d039"),o=i("c6b6"),s="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?s.call(e,""):Object(e)}:Object},"44d2":function(e,t,i){var n=i("b622"),o=i("7c73"),s=i("9bf2"),a=n("unscopables"),l=Array.prototype;void 0==l[a]&&s.f(l,a,{configurable:!0,value:o(null)}),e.exports=function(e){l[a][e]=!0}},"44e7":function(e,t,i){var n=i("861d"),o=i("c6b6"),s=i("b622"),a=s("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},4930:function(e,t,i){var n=i("d039");e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},"4d64":function(e,t,i){var n=i("fc6a"),o=i("50c4"),s=i("23cb"),a=function(e){return function(t,i,a){var l,r=n(t),c=o(r.length),d=s(a,c);if(e&&i!=i){while(c>d)if(l=r[d++],l!=l)return!0}else for(;c>d;d++)if((e||d in r)&&r[d]===i)return e||d||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(e,t,i){"use strict";var n=i("23e7"),o=i("b727").filter,s=i("1dde"),a=i("ae40"),l=s("filter"),r=a("filter");n({target:"Array",proto:!0,forced:!l||!r},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,i){"use strict";var n=i("0366"),o=i("7b0b"),s=i("9bdd"),a=i("e95a"),l=i("50c4"),r=i("8418"),c=i("35a1");e.exports=function(e){var t,i,d,u,p,f,h=o(e),_="function"==typeof this?this:Array,m=arguments.length,g=m>1?arguments[1]:void 0,v=void 0!==g,b=c(h),w=0;if(v&&(g=n(g,m>2?arguments[2]:void 0,2)),void 0==b||_==Array&&a(b))for(t=l(h.length),i=new _(t);t>w;w++)f=v?g(h[w],w):h[w],r(i,w,f);else for(u=b.call(h),p=u.next,i=new _;!(d=p.call(u)).done;w++)f=v?s(u,g,[d.value,w],!0):d.value,r(i,w,f);return i.length=w,i}},"4fad":function(e,t,i){var n=i("23e7"),o=i("6f53").entries;n({target:"Object",stat:!0},{entries:function(e){return o(e)}})},"50c4":function(e,t,i){var n=i("a691"),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},5135:function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},5319:function(e,t,i){"use strict";var n=i("d784"),o=i("825a"),s=i("7b0b"),a=i("50c4"),l=i("a691"),r=i("1d80"),c=i("8aa5"),d=i("14c3"),u=Math.max,p=Math.min,f=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,i,n){var g=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=n.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(i,n){var o=r(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,n):t.call(String(o),i,n)},function(e,n){if(!g&&v||"string"===typeof n&&-1===n.indexOf(b)){var s=i(t,e,this,n);if(s.done)return s.value}var r=o(e),f=String(this),h="function"===typeof n;h||(n=String(n));var _=r.global;if(_){var y=r.unicode;r.lastIndex=0}var C=[];while(1){var k=d(r,f);if(null===k)break;if(C.push(k),!_)break;var S=String(k[0]);""===S&&(r.lastIndex=c(f,a(r.lastIndex),y))}for(var x="",D=0,T=0;T<C.length;T++){k=C[T];for(var E=String(k[0]),O=u(p(l(k.index),f.length),0),F=[],I=1;I<k.length;I++)F.push(m(k[I]));var L=k.groups;if(h){var A=[E].concat(F,O,f);void 0!==L&&A.push(L);var N=String(n.apply(void 0,A))}else N=w(E,f,O,F,L,n);O>=D&&(x+=f.slice(D,O)+N,D=O+E.length)}return x+f.slice(D)}];function w(e,i,n,o,a,l){var r=n+e.length,c=o.length,d=_;return void 0!==a&&(a=s(a),d=h),t.call(l,d,(function(t,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return i.slice(0,n);case"'":return i.slice(r);case"<":l=a[s.slice(1,-1)];break;default:var d=+s;if(0===d)return t;if(d>c){var u=f(d/10);return 0===u?t:u<=c?void 0===o[u-1]?s.charAt(1):o[u-1]+s.charAt(1):t}l=o[d-1]}return void 0===l?"":l}))}}))},5692:function(e,t,i){var n=i("c430"),o=i("c6cd");(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,i){var n=i("d066"),o=i("241c"),s=i("7418"),a=i("825a");e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),i=s.f;return i?t.concat(i(e)):t}},"5a34":function(e,t,i){var n=i("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5db7":function(e,t,i){"use strict";var n=i("23e7"),o=i("a2bf"),s=i("7b0b"),a=i("50c4"),l=i("1c0b"),r=i("65f0");n({target:"Array",proto:!0},{flatMap:function(e){var t,i=s(this),n=a(i.length);return l(e),t=r(i,0),t.length=o(t,i,i,n,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},6547:function(e,t,i){var n=i("a691"),o=i("1d80"),s=function(e){return function(t,i){var s,a,l=String(o(t)),r=n(i),c=l.length;return r<0||r>=c?e?"":void 0:(s=l.charCodeAt(r),s<55296||s>56319||r+1===c||(a=l.charCodeAt(r+1))<56320||a>57343?e?l.charAt(r):s:e?l.slice(r,r+2):a-56320+(s-55296<<10)+65536)}};e.exports={codeAt:s(!1),charAt:s(!0)}},"65f0":function(e,t,i){var n=i("861d"),o=i("e8b5"),s=i("b622"),a=s("species");e.exports=function(e,t){var i;return o(e)&&(i=e.constructor,"function"!=typeof i||i!==Array&&!o(i.prototype)?n(i)&&(i=i[a],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},"69f3":function(e,t,i){var n,o,s,a=i("7f9a"),l=i("da84"),r=i("861d"),c=i("9112"),d=i("5135"),u=i("f772"),p=i("d012"),f=l.WeakMap,h=function(e){return s(e)?o(e):n(e,{})},_=function(e){return function(t){var i;if(!r(t)||(i=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}};if(a){var m=new f,g=m.get,v=m.has,b=m.set;n=function(e,t){return b.call(m,e,t),t},o=function(e){return g.call(m,e)||{}},s=function(e){return v.call(m,e)}}else{var w=u("state");p[w]=!0,n=function(e,t){return c(e,w,t),t},o=function(e){return d(e,w)?e[w]:{}},s=function(e){return d(e,w)}}e.exports={set:n,get:o,has:s,enforce:h,getterFor:_}},"6eeb":function(e,t,i){var n=i("da84"),o=i("9112"),s=i("5135"),a=i("ce4e"),l=i("8925"),r=i("69f3"),c=r.get,d=r.enforce,u=String(String).split("String");(e.exports=function(e,t,i,l){var r=!!l&&!!l.unsafe,c=!!l&&!!l.enumerable,p=!!l&&!!l.noTargetGet;"function"==typeof i&&("string"!=typeof t||s(i,"name")||o(i,"name",t),d(i).source=u.join("string"==typeof t?t:"")),e!==n?(r?!p&&e[t]&&(c=!0):delete e[t],c?e[t]=i:o(e,t,i)):c?e[t]=i:a(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||l(this)}))},"6f53":function(e,t,i){var n=i("83ab"),o=i("df75"),s=i("fc6a"),a=i("d1e7").f,l=function(e){return function(t){var i,l=s(t),r=o(l),c=r.length,d=0,u=[];while(c>d)i=r[d++],n&&!a.call(l,i)||u.push(e?[i,l[i]]:l[i]);return u}};e.exports={entries:l(!0),values:l(!1)}},"73d9":function(e,t,i){var n=i("44d2");n("flatMap")},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,i){var n=i("428f"),o=i("5135"),s=i("e538"),a=i("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:s.f(e)})}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(e,t,i){var n=i("1d80");e.exports=function(e){return Object(n(e))}},"7c73":function(e,t,i){var n,o=i("825a"),s=i("37e8"),a=i("7839"),l=i("d012"),r=i("1be4"),c=i("cc12"),d=i("f772"),u=">",p="<",f="prototype",h="script",_=d("IE_PROTO"),m=function(){},g=function(e){return p+h+u+e+p+"/"+h+u},v=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=c("iframe"),i="java"+h+":";return t.style.display="none",r.appendChild(t),t.src=String(i),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}w=n?v(n):b();var e=a.length;while(e--)delete w[f][a[e]];return w()};l[_]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(m[f]=o(e),i=new m,m[f]=null,i[_]=e):i=w(),void 0===t?i:s(i,t)}},"7dd0":function(e,t,i){"use strict";var n=i("23e7"),o=i("9ed3"),s=i("e163"),a=i("d2bb"),l=i("d44e"),r=i("9112"),c=i("6eeb"),d=i("b622"),u=i("c430"),p=i("3f8c"),f=i("ae93"),h=f.IteratorPrototype,_=f.BUGGY_SAFARI_ITERATORS,m=d("iterator"),g="keys",v="values",b="entries",w=function(){return this};e.exports=function(e,t,i,d,f,y,C){o(i,t,d);var k,S,x,D=function(e){if(e===f&&I)return I;if(!_&&e in O)return O[e];switch(e){case g:return function(){return new i(this,e)};case v:return function(){return new i(this,e)};case b:return function(){return new i(this,e)}}return function(){return new i(this)}},T=t+" Iterator",E=!1,O=e.prototype,F=O[m]||O["@@iterator"]||f&&O[f],I=!_&&F||D(f),L="Array"==t&&O.entries||F;if(L&&(k=s(L.call(new e)),h!==Object.prototype&&k.next&&(u||s(k)===h||(a?a(k,h):"function"!=typeof k[m]&&r(k,m,w)),l(k,T,!0,!0),u&&(p[T]=w))),f==v&&F&&F.name!==v&&(E=!0,I=function(){return F.call(this)}),u&&!C||O[m]===I||r(O,m,I),p[t]=I,f)if(S={values:D(v),keys:y?I:D(g),entries:D(b)},C)for(x in S)(_||E||!(x in O))&&c(O,x,S[x]);else n({target:t,proto:!0,forced:_||E},S);return S}},"7f9a":function(e,t,i){var n=i("da84"),o=i("8925"),s=n.WeakMap;e.exports="function"===typeof s&&/native code/.test(o(s))},"825a":function(e,t,i){var n=i("861d");e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},"83ab":function(e,t,i){var n=i("d039");e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,i){"use strict";var n=i("c04e"),o=i("9bf2"),s=i("5c6c");e.exports=function(e,t,i){var a=n(t);a in e?o.f(e,a,s(0,i)):e[a]=i}},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8875:function(e,t,i){var n,o,s;(function(i,a){o=[],n=a,s="function"===typeof n?n.apply(t,o):n,void 0===s||(e.exports=s)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(f){var i,n,o,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,l=s.exec(f.stack)||a.exec(f.stack),r=l&&l[1]||!1,c=l&&l[2]||!1,d=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");r===d&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=i.replace(n,"$1").trim());for(var p=0;p<u.length;p++){if("interactive"===u[p].readyState)return u[p];if(u[p].src===r)return u[p];if(r===d&&u[p].innerHTML&&u[p].innerHTML.trim()===o)return u[p]}return null}}return e}))},8925:function(e,t,i){var n=i("c6cd"),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},"8aa5":function(e,t,i){"use strict";var n=i("6547").charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},"8bbf":function(t,i){t.exports=e},"90e3":function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++i+n).toString(36)}},9112:function(e,t,i){var n=i("83ab"),o=i("9bf2"),s=i("5c6c");e.exports=n?function(e,t,i){return o.f(e,t,s(1,i))}:function(e,t,i){return e[t]=i,e}},9263:function(e,t,i){"use strict";var n=i("ad6d"),o=i("9f7f"),s=RegExp.prototype.exec,a=String.prototype.replace,l=s,r=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=o.UNSUPPORTED_Y||o.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],u=r||d||c;u&&(l=function(e){var t,i,o,l,u=this,p=c&&u.sticky,f=n.call(u),h=u.source,_=0,m=e;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),m=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(h="(?: "+h+")",m=" "+m,_++),i=new RegExp("^(?:"+h+")",f)),d&&(i=new RegExp("^"+h+"$(?!\\s)",f)),r&&(t=u.lastIndex),o=s.call(p?i:u,m),p?o?(o.input=o.input.slice(_),o[0]=o[0].slice(_),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:r&&o&&(u.lastIndex=u.global?o.index+o[0].length:t),d&&o&&o.length>1&&a.call(o[0],i,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)})),o}),e.exports=l},"94ca":function(e,t,i){var n=i("d039"),o=/#|\.prototype\./,s=function(e,t){var i=l[a(e)];return i==c||i!=r&&("function"==typeof t?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=s.data={},r=s.NATIVE="N",c=s.POLYFILL="P";e.exports=s},"99af":function(e,t,i){"use strict";var n=i("23e7"),o=i("d039"),s=i("e8b5"),a=i("861d"),l=i("7b0b"),r=i("50c4"),c=i("8418"),d=i("65f0"),u=i("1dde"),p=i("b622"),f=i("2d00"),h=p("isConcatSpreadable"),_=9007199254740991,m="Maximum allowed index exceeded",g=f>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=u("concat"),b=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:s(e)},w=!g||!v;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,i,n,o,s,a=l(this),u=d(a,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(s=-1===t?a:arguments[t],b(s)){if(o=r(s.length),p+o>_)throw TypeError(m);for(i=0;i<o;i++,p++)i in s&&c(u,p,s[i])}else{if(p>=_)throw TypeError(m);c(u,p++,s)}return u.length=p,u}})},"9bdd":function(e,t,i){var n=i("825a");e.exports=function(e,t,i,o){try{return o?t(n(i)[0],i[1]):t(i)}catch(a){var s=e["return"];throw void 0!==s&&n(s.call(e)),a}}},"9bf2":function(e,t,i){var n=i("83ab"),o=i("0cfb"),s=i("825a"),a=i("c04e"),l=Object.defineProperty;t.f=n?l:function(e,t,i){if(s(e),t=a(t,!0),s(i),o)try{return l(e,t,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},"9ed3":function(e,t,i){"use strict";var n=i("ae93").IteratorPrototype,o=i("7c73"),s=i("5c6c"),a=i("d44e"),l=i("3f8c"),r=function(){return this};e.exports=function(e,t,i){var c=t+" Iterator";return e.prototype=o(n,{next:s(1,i)}),a(e,c,!1,!0),l[c]=r,e}},"9f7f":function(e,t,i){"use strict";var n=i("d039");function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a2bf:function(e,t,i){"use strict";var n=i("e8b5"),o=i("50c4"),s=i("0366"),a=function(e,t,i,l,r,c,d,u){var p,f=r,h=0,_=!!d&&s(d,u,3);while(h<l){if(h in i){if(p=_?_(i[h],h,t):i[h],c>0&&n(p))f=a(e,t,p,o(p.length),f,c-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[f]=p}f++}h++}return f};e.exports=a},a352:function(e,i){e.exports=t},a434:function(e,t,i){"use strict";var n=i("23e7"),o=i("23cb"),s=i("a691"),a=i("50c4"),l=i("7b0b"),r=i("65f0"),c=i("8418"),d=i("1dde"),u=i("ae40"),p=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,_=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var i,n,d,u,p,f,v=l(this),b=a(v.length),w=o(e,b),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=b-w):(i=y-2,n=_(h(s(t),0),b-w)),b+i-n>m)throw TypeError(g);for(d=r(v,n),u=0;u<n;u++)p=w+u,p in v&&c(d,u,v[p]);if(d.length=n,i<n){for(u=w;u<b-n;u++)p=u+n,f=u+i,p in v?v[f]=v[p]:delete v[f];for(u=b;u>b-n+i;u--)delete v[u-1]}else if(i>n)for(u=b-n;u>w;u--)p=u+n-1,f=u+i-1,p in v?v[f]=v[p]:delete v[f];for(u=0;u<i;u++)v[u+w]=arguments[u+2];return v.length=b-n+i,d}})},a4d3:function(e,t,i){"use strict";var n=i("23e7"),o=i("da84"),s=i("d066"),a=i("c430"),l=i("83ab"),r=i("4930"),c=i("fdbf"),d=i("d039"),u=i("5135"),p=i("e8b5"),f=i("861d"),h=i("825a"),_=i("7b0b"),m=i("fc6a"),g=i("c04e"),v=i("5c6c"),b=i("7c73"),w=i("df75"),y=i("241c"),C=i("057f"),k=i("7418"),S=i("06cf"),x=i("9bf2"),D=i("d1e7"),T=i("9112"),E=i("6eeb"),O=i("5692"),F=i("f772"),I=i("d012"),L=i("90e3"),A=i("b622"),N=i("e538"),P=i("746f"),M=i("d44e"),j=i("69f3"),$=i("b727").forEach,U=F("hidden"),q="Symbol",V="prototype",B=A("toPrimitive"),H=j.set,W=j.getterFor(q),Z=Object[V],z=o.Symbol,R=s("JSON","stringify"),Y=S.f,K=x.f,G=C.f,X=D.f,J=O("symbols"),Q=O("op-symbols"),ee=O("string-to-symbol-registry"),te=O("symbol-to-string-registry"),ie=O("wks"),ne=o.QObject,oe=!ne||!ne[V]||!ne[V].findChild,se=l&&d((function(){return 7!=b(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=Y(Z,t);n&&delete Z[t],K(e,t,i),n&&e!==Z&&K(Z,t,n)}:K,ae=function(e,t){var i=J[e]=b(z[V]);return H(i,{type:q,tag:e,description:t}),l||(i.description=t),i},le=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof z},re=function(e,t,i){e===Z&&re(Q,t,i),h(e);var n=g(t,!0);return h(i),u(J,n)?(i.enumerable?(u(e,U)&&e[U][n]&&(e[U][n]=!1),i=b(i,{enumerable:v(0,!1)})):(u(e,U)||K(e,U,v(1,{})),e[U][n]=!0),se(e,n,i)):K(e,n,i)},ce=function(e,t){h(e);var i=m(t),n=w(i).concat(he(i));return $(n,(function(t){l&&!ue.call(i,t)||re(e,t,i[t])})),e},de=function(e,t){return void 0===t?b(e):ce(b(e),t)},ue=function(e){var t=g(e,!0),i=X.call(this,t);return!(this===Z&&u(J,t)&&!u(Q,t))&&(!(i||!u(this,t)||!u(J,t)||u(this,U)&&this[U][t])||i)},pe=function(e,t){var i=m(e),n=g(t,!0);if(i!==Z||!u(J,n)||u(Q,n)){var o=Y(i,n);return!o||!u(J,n)||u(i,U)&&i[U][n]||(o.enumerable=!0),o}},fe=function(e){var t=G(m(e)),i=[];return $(t,(function(e){u(J,e)||u(I,e)||i.push(e)})),i},he=function(e){var t=e===Z,i=G(t?Q:m(e)),n=[];return $(i,(function(e){!u(J,e)||t&&!u(Z,e)||n.push(J[e])})),n};if(r||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),i=function(e){this===Z&&i.call(Q,e),u(this,U)&&u(this[U],t)&&(this[U][t]=!1),se(this,t,v(1,e))};return l&&oe&&se(Z,t,{configurable:!0,set:i}),ae(t,e)},E(z[V],"toString",(function(){return W(this).tag})),E(z,"withoutSetter",(function(e){return ae(L(e),e)})),D.f=ue,x.f=re,S.f=pe,y.f=C.f=fe,k.f=he,N.f=function(e){return ae(A(e),e)},l&&(K(z[V],"description",{configurable:!0,get:function(){return W(this).description}}),a||E(Z,"propertyIsEnumerable",ue,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!r,sham:!r},{Symbol:z}),$(w(ie),(function(e){P(e)})),n({target:q,stat:!0,forced:!r},{for:function(e){var t=String(e);if(u(ee,t))return ee[t];var i=z(t);return ee[t]=i,te[i]=t,i},keyFor:function(e){if(!le(e))throw TypeError(e+" is not a symbol");if(u(te,e))return te[e]},useSetter:function(){oe=!0},useSimple:function(){oe=!1}}),n({target:"Object",stat:!0,forced:!r,sham:!l},{create:de,defineProperty:re,defineProperties:ce,getOwnPropertyDescriptor:pe}),n({target:"Object",stat:!0,forced:!r},{getOwnPropertyNames:fe,getOwnPropertySymbols:he}),n({target:"Object",stat:!0,forced:d((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(_(e))}}),R){var _e=!r||d((function(){var e=z();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}));n({target:"JSON",stat:!0,forced:_e},{stringify:function(e,t,i){var n,o=[e],s=1;while(arguments.length>s)o.push(arguments[s++]);if(n=t,(f(t)||void 0!==e)&&!le(e))return p(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!le(t))return t}),o[1]=t,R.apply(null,o)}})}z[V][B]||T(z[V],B,z[V].valueOf),M(z,q),I[U]=!0},a630:function(e,t,i){var n=i("23e7"),o=i("4df4"),s=i("1c7e"),a=!s((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:a},{from:o})},a640:function(e,t,i){"use strict";var n=i("d039");e.exports=function(e,t){var i=[][e];return!!i&&n((function(){i.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},ab13:function(e,t,i){var n=i("b622"),o=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[o]=!1,"/./"[e](t)}catch(n){}}return!1}},ac1f:function(e,t,i){"use strict";var n=i("23e7"),o=i("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(e,t,i){"use strict";var n=i("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},ae40:function(e,t,i){var n=i("83ab"),o=i("d039"),s=i("5135"),a=Object.defineProperty,l={},r=function(e){throw e};e.exports=function(e,t){if(s(l,e))return l[e];t||(t={});var i=[][e],c=!!s(t,"ACCESSORS")&&t.ACCESSORS,d=s(t,0)?t[0]:r,u=s(t,1)?t[1]:void 0;return l[e]=!!i&&!o((function(){if(c&&!n)return!0;var e={length:-1};c?a(e,1,{enumerable:!0,get:r}):e[1]=1,i.call(e,d,u)}))}},ae93:function(e,t,i){"use strict";var n,o,s,a=i("e163"),l=i("9112"),r=i("5135"),c=i("b622"),d=i("c430"),u=c("iterator"),p=!1,f=function(){return this};[].keys&&(s=[].keys(),"next"in s?(o=a(a(s)),o!==Object.prototype&&(n=o)):p=!0),void 0==n&&(n={}),d||r(n,u)||l(n,u,f),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},b041:function(e,t,i){"use strict";var n=i("00ee"),o=i("f5df");e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},b0c0:function(e,t,i){var n=i("83ab"),o=i("9bf2").f,s=Function.prototype,a=s.toString,l=/^\s*function ([^ (]*)/,r="name";n&&!(r in s)&&o(s,r,{configurable:!0,get:function(){try{return a.call(this).match(l)[1]}catch(e){return""}}})},b622:function(e,t,i){var n=i("da84"),o=i("5692"),s=i("5135"),a=i("90e3"),l=i("4930"),r=i("fdbf"),c=o("wks"),d=n.Symbol,u=r?d:d&&d.withoutSetter||a;e.exports=function(e){return s(c,e)||(l&&s(d,e)?c[e]=d[e]:c[e]=u("Symbol."+e)),c[e]}},b64b:function(e,t,i){var n=i("23e7"),o=i("7b0b"),s=i("df75"),a=i("d039"),l=a((function(){s(1)}));n({target:"Object",stat:!0,forced:l},{keys:function(e){return s(o(e))}})},b727:function(e,t,i){var n=i("0366"),o=i("44ad"),s=i("7b0b"),a=i("50c4"),l=i("65f0"),r=[].push,c=function(e){var t=1==e,i=2==e,c=3==e,d=4==e,u=6==e,p=5==e||u;return function(f,h,_,m){for(var g,v,b=s(f),w=o(b),y=n(h,_,3),C=a(w.length),k=0,S=m||l,x=t?S(f,C):i?S(f,0):void 0;C>k;k++)if((p||k in w)&&(g=w[k],v=y(g,k,b),e))if(t)x[k]=v;else if(v)switch(e){case 3:return!0;case 5:return g;case 6:return k;case 2:r.call(x,g)}else if(d)return!1;return u?-1:c||d?d:x}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},c04e:function(e,t,i){var n=i("861d");e.exports=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},c6cd:function(e,t,i){var n=i("da84"),o=i("ce4e"),s="__core-js_shared__",a=n[s]||o(s,{});e.exports=a},c740:function(e,t,i){"use strict";var n=i("23e7"),o=i("b727").findIndex,s=i("44d2"),a=i("ae40"),l="findIndex",r=!0,c=a(l);l in[]&&Array(1)[l]((function(){r=!1})),n({target:"Array",proto:!0,forced:r||!c},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(l)},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},c975:function(e,t,i){"use strict";var n=i("23e7"),o=i("4d64").indexOf,s=i("a640"),a=i("ae40"),l=[].indexOf,r=!!l&&1/[1].indexOf(1,-0)<0,c=s("indexOf"),d=a("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:r||!c||!d},{indexOf:function(e){return r?l.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},ca84:function(e,t,i){var n=i("5135"),o=i("fc6a"),s=i("4d64").indexOf,a=i("d012");e.exports=function(e,t){var i,l=o(e),r=0,c=[];for(i in l)!n(a,i)&&n(l,i)&&c.push(i);while(t.length>r)n(l,i=t[r++])&&(~s(c,i)||c.push(i));return c}},caad:function(e,t,i){"use strict";var n=i("23e7"),o=i("4d64").includes,s=i("44d2"),a=i("ae40"),l=a("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!l},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},cc12:function(e,t,i){var n=i("da84"),o=i("861d"),s=n.document,a=o(s)&&o(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},ce4e:function(e,t,i){var n=i("da84"),o=i("9112");e.exports=function(e,t){try{o(n,e,t)}catch(i){n[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,i){var n=i("428f"),o=i("da84"),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e])||s(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},d1e7:function(e,t,i){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,s=o&&!n.call({1:2},1);t.f=s?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},d28b:function(e,t,i){var n=i("746f");n("iterator")},d2bb:function(e,t,i){var n=i("825a"),o=i("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(i,[]),t=i instanceof Array}catch(s){}return function(i,s){return n(i),o(s),t?e.call(i,s):i.__proto__=s,i}}():void 0)},d3b7:function(e,t,i){var n=i("00ee"),o=i("6eeb"),s=i("b041");n||o(Object.prototype,"toString",s,{unsafe:!0})},d44e:function(e,t,i){var n=i("9bf2").f,o=i("5135"),s=i("b622"),a=s("toStringTag");e.exports=function(e,t,i){e&&!o(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},d58f:function(e,t,i){var n=i("1c0b"),o=i("7b0b"),s=i("44ad"),a=i("50c4"),l=function(e){return function(t,i,l,r){n(i);var c=o(t),d=s(c),u=a(c.length),p=e?u-1:0,f=e?-1:1;if(l<2)while(1){if(p in d){r=d[p],p+=f;break}if(p+=f,e?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:u>p;p+=f)p in d&&(r=i(r,d[p],p,c));return r}};e.exports={left:l(!1),right:l(!0)}},d784:function(e,t,i){"use strict";i("ac1f");var n=i("6eeb"),o=i("d039"),s=i("b622"),a=i("9263"),l=i("9112"),r=s("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),u=s("replace"),p=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),f=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));e.exports=function(e,t,i,u){var h=s(e),_=!o((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),m=_&&!o((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[r]=function(){return i},i.flags="",i[h]=/./[h]),i.exec=function(){return t=!0,null},i[h](""),!t}));if(!_||!m||"replace"===e&&(!c||!d||p)||"split"===e&&!f){var g=/./[h],v=i(h,""[e],(function(e,t,i,n,o){return t.exec===a?_&&!o?{done:!0,value:g.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),b=v[0],w=v[1];n(String.prototype,e,b),n(RegExp.prototype,h,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}u&&l(RegExp.prototype[h],"sham",!0)}},d81d:function(e,t,i){"use strict";var n=i("23e7"),o=i("b727").map,s=i("1dde"),a=i("ae40"),l=s("map"),r=a("map");n({target:"Array",proto:!0,forced:!l||!r},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},da84:function(e,t,i){(function(t){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||Function("return this")()}).call(this,i("c8ba"))},dbb4:function(e,t,i){var n=i("23e7"),o=i("83ab"),s=i("56ef"),a=i("fc6a"),l=i("06cf"),r=i("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,i,n=a(e),o=l.f,c=s(n),d={},u=0;while(c.length>u)i=o(n,t=c[u++]),void 0!==i&&r(d,t,i);return d}})},dbf1:function(e,t,i){"use strict";(function(e){function n(){return"undefined"!==typeof window?window.console:e.console}i.d(t,"a",(function(){return o}));var o=n()}).call(this,i("c8ba"))},ddb0:function(e,t,i){var n=i("da84"),o=i("fdbc"),s=i("e260"),a=i("9112"),l=i("b622"),r=l("iterator"),c=l("toStringTag"),d=s.values;for(var u in o){var p=n[u],f=p&&p.prototype;if(f){if(f[r]!==d)try{a(f,r,d)}catch(_){f[r]=d}if(f[c]||a(f,c,u),o[u])for(var h in s)if(f[h]!==s[h])try{a(f,h,s[h])}catch(_){f[h]=s[h]}}}},df75:function(e,t,i){var n=i("ca84"),o=i("7839");e.exports=Object.keys||function(e){return n(e,o)}},e01a:function(e,t,i){"use strict";var n=i("23e7"),o=i("83ab"),s=i("da84"),a=i("5135"),l=i("861d"),r=i("9bf2").f,c=i("e893"),d=s.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};c(p,d);var f=p.prototype=d.prototype;f.constructor=p;var h=f.toString,_="Symbol(test)"==String(d("test")),m=/^Symbol\((.*)\)[^)]+$/;r(f,"description",{configurable:!0,get:function(){var e=l(this)?this.valueOf():this,t=h.call(e);if(a(u,e))return"";var i=_?t.slice(7,-1):t.replace(m,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:p})}},e163:function(e,t,i){var n=i("5135"),o=i("7b0b"),s=i("f772"),a=i("e177"),l=s("IE_PROTO"),r=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),n(e,l)?e[l]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},e177:function(e,t,i){var n=i("d039");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,i){"use strict";var n=i("fc6a"),o=i("44d2"),s=i("3f8c"),a=i("69f3"),l=i("7dd0"),r="Array Iterator",c=a.set,d=a.getterFor(r);e.exports=l(Array,"Array",(function(e,t){c(this,{type:r,target:n(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),s.Arguments=s.Array,o("keys"),o("values"),o("entries")},e439:function(e,t,i){var n=i("23e7"),o=i("d039"),s=i("fc6a"),a=i("06cf").f,l=i("83ab"),r=o((function(){a(1)})),c=!l||r;n({target:"Object",stat:!0,forced:c,sham:!l},{getOwnPropertyDescriptor:function(e,t){return a(s(e),t)}})},e538:function(e,t,i){var n=i("b622");t.f=n},e893:function(e,t,i){var n=i("5135"),o=i("56ef"),s=i("06cf"),a=i("9bf2");e.exports=function(e,t){for(var i=o(t),l=a.f,r=s.f,c=0;c<i.length;c++){var d=i[c];n(e,d)||l(e,d,r(t,d))}}},e8b5:function(e,t,i){var n=i("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},e95a:function(e,t,i){var n=i("b622"),o=i("3f8c"),s=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[s]===e)}},f5df:function(e,t,i){var n=i("00ee"),o=i("c6b6"),s=i("b622"),a=s("toStringTag"),l="Arguments"==o(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(i){}};e.exports=n?o:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=r(t=Object(e),a))?i:l?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},f772:function(e,t,i){var n=i("5692"),o=i("90e3"),s=n("keys");e.exports=function(e){return s[e]||(s[e]=o(e))}},fb15:function(e,t,i){"use strict";if(i.r(t),"undefined"!==typeof window){var n=window.document.currentScript,o=i("8875");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var s=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(i.p=s[1])}i("99af"),i("4de4"),i("4160"),i("c975"),i("d81d"),i("a434"),i("159b"),i("a4d3"),i("e439"),i("dbb4"),i("b64b");function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e){if(Array.isArray(e))return e}i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("3ca3"),i("ddb0");function d(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,o=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)if(i.push(a.value),t&&i.length===t)break}catch(r){o=!0,s=r}finally{try{n||null==l["return"]||l["return"]()}finally{if(o)throw s}}return i}}i("a630"),i("fb6a"),i("b0c0"),i("25f0");function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function p(e,t){if(e){if("string"===typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){return c(e)||d(e,t)||p(e,t)||f()}function _(e){if(Array.isArray(e))return u(e)}function m(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e){return _(e)||m(e)||p(e)||g()}var b=i("a352"),w=i.n(b);function y(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function C(e,t,i){var n=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,n)}var k=i("dbf1");i("13d5"),i("4fad"),i("ac1f"),i("5319");function S(e){var t=Object.create(null);return function(i){var n=t[i];return n||(t[i]=e(i))}}var x=/-(\w)/g,D=S((function(e){return e.replace(x,(function(e,t){return t.toUpperCase()}))})),T=(i("5db7"),i("73d9"),["Start","Add","Remove","Update","End"]),E=["Choose","Unchoose","Sort","Filter","Clone"],O=["Move"],F=[O,T,E].flatMap((function(e){return e})).map((function(e){return"on".concat(e)})),I={manage:O,manageAndEmit:T,emit:E};function L(e){return-1!==F.indexOf(e)}i("caad"),i("2ca0");var A=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function N(e){return A.includes(e)}function P(e){return["transition-group","TransitionGroup"].includes(e)}function M(e){return["id","class","role","style"].includes(e)||e.startsWith("data-")||e.startsWith("aria-")||e.startsWith("on")}function j(e){return e.reduce((function(e,t){var i=h(t,2),n=i[0],o=i[1];return e[n]=o,e}),{})}function $(e){var t=e.$attrs,i=e.componentData,n=void 0===i?{}:i,o=j(Object.entries(t).filter((function(e){var t=h(e,2),i=t[0];t[1];return M(i)})));return r(r({},o),n)}function U(e){var t=e.$attrs,i=e.callBackBuilder,n=j(q(t));Object.entries(i).forEach((function(e){var t=h(e,2),i=t[0],o=t[1];I[i].forEach((function(e){n["on".concat(e)]=o(e)}))}));var o="[data-draggable]".concat(n.draggable||"");return r(r({},n),{},{draggable:o})}function q(e){return Object.entries(e).filter((function(e){var t=h(e,2),i=t[0];t[1];return!M(i)})).map((function(e){var t=h(e,2),i=t[0],n=t[1];return[D(i),n]})).filter((function(e){var t=h(e,2),i=t[0];t[1];return!L(i)}))}i("c740");function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H(e,t,i){return t&&B(e.prototype,t),i&&B(e,i),e}var W=function(e){var t=e.el;return t},Z=function(e,t){return e.__draggable_context=t},z=function(e){return e.__draggable_context},R=function(){function e(t){var i=t.nodes,n=i.header,o=i.default,s=i.footer,a=t.root,l=t.realList;V(this,e),this.defaultNodes=o,this.children=[].concat(v(n),v(o),v(s)),this.externalComponent=a.externalComponent,this.rootTransition=a.transition,this.tag=a.tag,this.realList=l}return H(e,[{key:"render",value:function(e,t){var i=this.tag,n=this.children,o=this._isRootComponent,s=o?{default:function(){return n}}:n;return e(i,t,s)}},{key:"updated",value:function(){var e=this.defaultNodes,t=this.realList;e.forEach((function(e,i){Z(W(e),{element:t[i],index:i})}))}},{key:"getUnderlyingVm",value:function(e){return z(e)}},{key:"getVmIndexFromDomIndex",value:function(e,t){var i=this.defaultNodes,n=i.length,o=t.children,s=o.item(e);if(null===s)return n;var a=z(s);if(a)return a.index;if(0===n)return 0;var l=W(i[0]),r=v(o).findIndex((function(e){return e===l}));return e<r?0:n}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),e}(),Y=i("8bbf");function K(e,t){var i=e[t];return i?i():[]}function G(e){var t=e.$slots,i=e.realList,n=e.getKey,o=i||[],s=["header","footer"].map((function(e){return K(t,e)})),a=h(s,2),l=a[0],c=a[1],d=t.item;if(!d)throw new Error("draggable element must have an item slot");var u=o.flatMap((function(e,t){return d({element:e,index:t}).map((function(t){return t.key=n(e),t.props=r(r({},t.props||{}),{},{"data-draggable":!0}),t}))}));if(u.length!==o.length)throw new Error("Item slot must have only one child");return{header:l,footer:c,default:u}}function X(e){var t=P(e),i=!N(e)&&!t;return{transition:t,externalComponent:i,tag:i?Object(Y["resolveComponent"])(e):t?Y["TransitionGroup"]:e}}function J(e){var t=e.$slots,i=e.tag,n=e.realList,o=e.getKey,s=G({$slots:t,realList:n,getKey:o}),a=X(i);return new R({nodes:s,root:a,realList:n})}function Q(e,t){var i=this;Object(Y["nextTick"])((function(){return i.$emit(e.toLowerCase(),t)}))}function ee(e){var t=this;return function(i,n){if(null!==t.realList)return t["onDrag".concat(e)](i,n)}}function te(e){var t=this,i=ee.call(this,e);return function(n,o){i.call(t,n,o),Q.call(t,e,n)}}var ie=null,ne={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(e){return e}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},oe=["update:modelValue","change"].concat(v([].concat(v(I.manageAndEmit),v(I.emit)).map((function(e){return e.toLowerCase()})))),se=Object(Y["defineComponent"])({name:"draggable",inheritAttrs:!1,props:ne,emits:oe,data:function(){return{error:!1}},render:function(){try{this.error=!1;var e=this.$slots,t=this.$attrs,i=this.tag,n=this.componentData,o=this.realList,s=this.getKey,a=J({$slots:e,tag:i,realList:o,getKey:s});this.componentStructure=a;var l=$({$attrs:t,componentData:n});return a.render(Y["h"],l)}catch(r){return this.error=!0,Object(Y["h"])("pre",{style:{color:"red"}},r.stack)}},created:function(){null!==this.list&&null!==this.modelValue&&k["a"].error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var e=this;if(!this.error){var t=this.$attrs,i=this.$el,n=this.componentStructure;n.updated();var o=U({$attrs:t,callBackBuilder:{manageAndEmit:function(t){return te.call(e,t)},emit:function(t){return Q.bind(e,t)},manage:function(t){return ee.call(e,t)}}}),s=1===i.nodeType?i:i.parentElement;this._sortable=new w.a(s,o),this.targetDomElement=s,s.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{realList:function(){var e=this.list;return e||this.modelValue},getKey:function(){var e=this.itemKey;return"function"===typeof e?e:function(t){return t[e]}}},watch:{$attrs:{handler:function(e){var t=this._sortable;t&&q(e).forEach((function(e){var i=h(e,2),n=i[0],o=i[1];t.option(n,o)}))},deep:!0}},methods:{getUnderlyingVm:function(e){return this.componentStructure.getUnderlyingVm(e)||null},getUnderlyingPotencialDraggableComponent:function(e){return e.__draggable_component__},emitChanges:function(e){var t=this;Object(Y["nextTick"])((function(){return t.$emit("change",e)}))},alterList:function(e){if(this.list)e(this.list);else{var t=v(this.modelValue);e(t),this.$emit("update:modelValue",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,v(e))};this.alterList(t)},updatePosition:function(e,t){var i=function(i){return i.splice(t,0,i.splice(e,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(e){var t=e.to,i=e.related,n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};var o=n.realList,s={list:o,component:n};if(t!==i&&o){var a=n.getUnderlyingVm(i)||{};return r(r({},a),s)}return s},getVmIndexFromDomIndex:function(e){return this.componentStructure.getVmIndexFromDomIndex(e,this.targetDomElement)},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),ie=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){y(e.item);var i=this.getVmIndexFromDomIndex(e.newIndex);this.spliceList(i,0,t);var n={element:t,newIndex:i};this.emitChanges({added:n})}},onDragRemove:function(e){if(C(this.$el,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context,i=t.index,n=t.element;this.spliceList(i,1);var o={element:n,oldIndex:i};this.emitChanges({removed:o})}else y(e.clone)},onDragUpdate:function(e){y(e.item),C(e.from,e.item,e.oldIndex);var t=this.context.index,i=this.getVmIndexFromDomIndex(e.newIndex);this.updatePosition(t,i);var n={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:n})},computeFutureIndex:function(e,t){if(!e.element)return 0;var i=v(t.to.children).filter((function(e){return"none"!==e.style["display"]})),n=i.indexOf(t.related),o=e.component.getVmIndexFromDomIndex(n),s=-1!==i.indexOf(ie);return s||!t.willInsertAfter?o:o+1},onDragMove:function(e,t){var i=this.move,n=this.realList;if(!i||!n)return!0;var o=this.getRelatedContextFromMoveEvent(e),s=this.computeFutureIndex(o,e),a=r(r({},this.context),{},{futureIndex:s}),l=r(r({},e),{},{relatedContext:o,draggedContext:a});return i(l,t)},onDragEnd:function(){ie=null}}}),ae=se;t["default"]=ae},fb6a:function(e,t,i){"use strict";var n=i("23e7"),o=i("861d"),s=i("e8b5"),a=i("23cb"),l=i("50c4"),r=i("fc6a"),c=i("8418"),d=i("b622"),u=i("1dde"),p=i("ae40"),f=u("slice"),h=p("slice",{ACCESSORS:!0,0:0,1:2}),_=d("species"),m=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!f||!h},{slice:function(e,t){var i,n,d,u=r(this),p=l(u.length),f=a(e,p),h=a(void 0===t?p:t,p);if(s(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!s(i.prototype)?o(i)&&(i=i[_],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return m.call(u,f,h);for(n=new(void 0===i?Array:i)(g(h-f,0)),d=0;f<h;f++,d++)f in u&&c(n,d,u[f]);return n.length=d,n}})},fc6a:function(e,t,i){var n=i("44ad"),o=i("1d80");e.exports=function(e){return n(o(e))}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,i){var n=i("4930");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})["default"]}))},6755:function(e,t,i){"use strict";
/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e){return s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},l.apply(this,arguments)}function r(e,t){if(null==e)return{};var i,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}function c(e,t){if(null==e)return{};var i,n,o=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}function d(e){return u(e)||p(e)||f(e)||_()}function u(e){if(Array.isArray(e))return h(e)}function p(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e,t){if(e){if("string"===typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.r(t),i.d(t,{MultiDrag:function(){return Ht},Sortable:function(){return it},Swap:function(){return It}});var m="1.14.0";function g(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var v=g(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),b=g(/Edge/i),w=g(/firefox/i),y=g(/safari/i)&&!g(/chrome/i)&&!g(/android/i),C=g(/iP(ad|od|hone)/i),k=g(/chrome/i)&&g(/android/i),S={capture:!1,passive:!1};function x(e,t,i){e.addEventListener(t,i,!v&&S)}function D(e,t,i){e.removeEventListener(t,i,!v&&S)}function T(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(i){return!1}return!1}}function E(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function O(e,t,i,n){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&T(e,t):T(e,t))||n&&e===i)return e;if(e===i)break}while(e=E(e))}return null}var F,I=/\s+/g;function L(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(I," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(I," ")}}function A(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"===typeof i?"":"px")}}function N(e,t){var i="";if("string"===typeof e)i=e;else do{var n=A(e,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(i)}function P(e,t,i){if(e){var n=e.getElementsByTagName(t),o=0,s=n.length;if(i)for(;o<s;o++)i(n[o],o);return n}return[]}function M(){var e=document.scrollingElement;return e||document.documentElement}function j(e,t,i,n,o){if(e.getBoundingClientRect||e===window){var s,a,l,r,c,d,u;if(e!==window&&e.parentNode&&e!==M()?(s=e.getBoundingClientRect(),a=s.top,l=s.left,r=s.bottom,c=s.right,d=s.height,u=s.width):(a=0,l=0,r=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||i)&&e!==window&&(o=o||e.parentNode,!v))do{if(o&&o.getBoundingClientRect&&("none"!==A(o,"transform")||i&&"static"!==A(o,"position"))){var p=o.getBoundingClientRect();a-=p.top+parseInt(A(o,"border-top-width")),l-=p.left+parseInt(A(o,"border-left-width")),r=a+s.height,c=l+s.width;break}}while(o=o.parentNode);if(n&&e!==window){var f=N(o||e),h=f&&f.a,_=f&&f.d;f&&(a/=_,l/=h,u/=h,d/=_,r=a+d,c=l+u)}return{top:a,left:l,bottom:r,right:c,width:u,height:d}}}function $(e,t,i){var n=W(e,!0),o=j(e)[t];while(n){var s=j(n)[i],a=void 0;if(a="top"===i||"left"===i?o>=s:o<=s,!a)return n;if(n===M())break;n=W(n,!1)}return!1}function U(e,t,i,n){var o=0,s=0,a=e.children;while(s<a.length){if("none"!==a[s].style.display&&a[s]!==it.ghost&&(n||a[s]!==it.dragged)&&O(a[s],i.draggable,e,!1)){if(o===t)return a[s];o++}s++}return null}function q(e,t){var i=e.lastElementChild;while(i&&(i===it.ghost||"none"===A(i,"display")||t&&!T(i,t)))i=i.previousElementSibling;return i||null}function V(e,t){var i=0;if(!e||!e.parentNode)return-1;while(e=e.previousElementSibling)"TEMPLATE"===e.nodeName.toUpperCase()||e===it.clone||t&&!T(e,t)||i++;return i}function B(e){var t=0,i=0,n=M();if(e)do{var o=N(e),s=o.a,a=o.d;t+=e.scrollLeft*s,i+=e.scrollTop*a}while(e!==n&&(e=e.parentNode));return[t,i]}function H(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[i][n])return Number(i);return-1}function W(e,t){if(!e||!e.getBoundingClientRect)return M();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=A(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i.getBoundingClientRect||i===document.body)return M();if(n||t)return i;n=!0}}}while(i=i.parentNode);return M()}function Z(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function z(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function R(e,t){return function(){if(!F){var i=arguments,n=this;1===i.length?e.call(n,i[0]):e.apply(n,i),F=setTimeout((function(){F=void 0}),t)}}}function Y(){clearTimeout(F),F=void 0}function K(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function G(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function X(e,t){A(e,"position","absolute"),A(e,"top",t.top),A(e,"left",t.left),A(e,"width",t.width),A(e,"height",t.height)}function J(e){A(e,"position",""),A(e,"top",""),A(e,"left",""),A(e,"width",""),A(e,"height","")}var Q="Sortable"+(new Date).getTime();function ee(){var e,t=[];return{captureAnimationState:function(){if(t=[],this.options.animation){var e=[].slice.call(this.el.children);e.forEach((function(e){if("none"!==A(e,"display")&&e!==it.ghost){t.push({target:e,rect:j(e)});var i=o({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=N(e,!0);n&&(i.top-=n.f,i.left-=n.e)}e.fromRect=i}}))}},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(H(t,{target:e}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof i&&i());var o=!1,s=0;t.forEach((function(e){var t=0,i=e.target,a=i.fromRect,l=j(i),r=i.prevFromRect,c=i.prevToRect,d=e.rect,u=N(i,!0);u&&(l.top-=u.f,l.left-=u.e),i.toRect=l,i.thisAnimationDuration&&z(r,l)&&!z(a,l)&&(d.top-l.top)/(d.left-l.left)===(a.top-l.top)/(a.left-l.left)&&(t=ie(d,r,c,n.options)),z(l,a)||(i.prevFromRect=a,i.prevToRect=l,t||(t=n.options.animation),n.animate(i,d,l,t)),t&&(o=!0,s=Math.max(s,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"===typeof i&&i()}),s):"function"===typeof i&&i(),t=[]},animate:function(e,t,i,n){if(n){A(e,"transition",""),A(e,"transform","");var o=N(this.el),s=o&&o.a,a=o&&o.d,l=(t.left-i.left)/(s||1),r=(t.top-i.top)/(a||1);e.animatingX=!!l,e.animatingY=!!r,A(e,"transform","translate3d("+l+"px,"+r+"px,0)"),this.forRepaintDummy=te(e),A(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),A(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){A(e,"transition",""),A(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}function te(e){return e.offsetWidth}function ie(e,t,i,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*n.animation}var ne=[],oe={initializeByDefault:!0},se={mount:function(e){for(var t in oe)oe.hasOwnProperty(t)&&!(t in e)&&(e[t]=oe[t]);ne.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),ne.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=e+"Global";ne.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][s]&&t[n.pluginName][s](o({sortable:t},i)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](o({sortable:t},i)))}))},initializePlugins:function(e,t,i,n){for(var o in ne.forEach((function(n){var o=n.pluginName;if(e.options[o]||n.initializeByDefault){var s=new n(e,t,e.options);s.sortable=e,s.options=e.options,e[o]=s,l(i,s.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var s=this.modifyOption(e,o,e.options[o]);"undefined"!==typeof s&&(e.options[o]=s)}},getEventProperties:function(e,t){var i={};return ne.forEach((function(n){"function"===typeof n.eventProperties&&l(i,n.eventProperties.call(t[n.pluginName],e))})),i},modifyOption:function(e,t,i){var n;return ne.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"===typeof o.optionListeners[t]&&(n=o.optionListeners[t].call(e[o.pluginName],i))})),n}};function ae(e){var t=e.sortable,i=e.rootEl,n=e.name,s=e.targetEl,a=e.cloneEl,l=e.toEl,r=e.fromEl,c=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,p=e.newDraggableIndex,f=e.originalEvent,h=e.putSortable,_=e.extraEventProperties;if(t=t||i&&i[Q],t){var m,g=t.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||v||b?(m=document.createEvent("Event"),m.initEvent(n,!0,!0)):m=new CustomEvent(n,{bubbles:!0,cancelable:!0}),m.to=l||i,m.from=r||i,m.item=s||i,m.clone=a,m.oldIndex=c,m.newIndex=d,m.oldDraggableIndex=u,m.newDraggableIndex=p,m.originalEvent=f,m.pullMode=h?h.lastPutMode:void 0;var y=o(o({},_),se.getEventProperties(n,t));for(var C in y)m[C]=y[C];i&&i.dispatchEvent(m),g[w]&&g[w].call(t,m)}}var le=["evt"],re=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,s=c(i,le);se.pluginEvent.bind(it)(e,t,o({dragEl:de,parentEl:ue,ghostEl:pe,rootEl:fe,nextEl:he,lastDownEl:_e,cloneEl:me,cloneHidden:ge,dragStarted:Fe,putSortable:ke,activeSortable:it.active,originalEvent:n,oldIndex:ve,oldDraggableIndex:we,newIndex:be,newDraggableIndex:ye,hideGhostForTarget:Je,unhideGhostForTarget:Qe,cloneNowHidden:function(){ge=!0},cloneNowShown:function(){ge=!1},dispatchSortableEvent:function(e){ce({sortable:t,name:e,originalEvent:n})}},s))};function ce(e){ae(o({putSortable:ke,cloneEl:me,targetEl:de,rootEl:fe,oldIndex:ve,oldDraggableIndex:we,newIndex:be,newDraggableIndex:ye},e))}var de,ue,pe,fe,he,_e,me,ge,ve,be,we,ye,Ce,ke,Se,xe,De,Te,Ee,Oe,Fe,Ie,Le,Ae,Ne,Pe=!1,Me=!1,je=[],$e=!1,Ue=!1,qe=[],Ve=!1,Be=[],He="undefined"!==typeof document,We=C,Ze=b||v?"cssFloat":"float",ze=He&&!k&&!C&&"draggable"in document.createElement("div"),Re=function(){if(He){if(v)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ye=function(e,t){var i=A(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=U(e,0,t),s=U(e,1,t),a=o&&A(o),l=s&&A(s),r=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+j(o).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+j(s).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&a["float"]&&"none"!==a["float"]){var d="left"===a["float"]?"left":"right";return!s||"both"!==l.clear&&l.clear!==d?"horizontal":"vertical"}return o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||r>=n&&"none"===i[Ze]||s&&"none"===i[Ze]&&r+c>n)?"vertical":"horizontal"},Ke=function(e,t,i){var n=i?e.left:e.top,o=i?e.right:e.bottom,s=i?e.width:e.height,a=i?t.left:t.top,l=i?t.right:t.bottom,r=i?t.width:t.height;return n===a||o===l||n+s/2===a+r/2},Ge=function(e,t){var i;return je.some((function(n){var o=n[Q].options.emptyInsertThreshold;if(o&&!q(n)){var s=j(n),a=e>=s.left-o&&e<=s.right+o,l=t>=s.top-o&&t<=s.bottom+o;return a&&l?i=n:void 0}})),i},Xe=function(e){function t(e,i){return function(n,o,s,a){var l=n.options.group.name&&o.options.group.name&&n.options.group.name===o.options.group.name;if(null==e&&(i||l))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"===typeof e)return t(e(n,o,s,a),i)(n,o,s,a);var r=(i?n:o).options.group.name;return!0===e||"string"===typeof e&&e===r||e.join&&e.indexOf(r)>-1}}var i={},n=e.group;n&&"object"==s(n)||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},Je=function(){!Re&&pe&&A(pe,"display","none")},Qe=function(){!Re&&pe&&A(pe,"display","")};He&&document.addEventListener("click",(function(e){if(Me)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Me=!1,!1}),!0);var et=function(e){if(de){e=e.touches?e.touches[0]:e;var t=Ge(e.clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Q]._onDragOver(i)}}},tt=function(e){de&&de.parentNode[Q]._isOutsideThisEl(e.target)};function it(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=l({},t),e[Q]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ye(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==it.supportPointer&&"PointerEvent"in window&&!y,emptyInsertThreshold:5};for(var n in se.initializePlugins(this,e,i),i)!(n in t)&&(t[n]=i[n]);for(var o in Xe(t),this)"_"===o.charAt(0)&&"function"===typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&ze,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?x(e,"pointerdown",this._onTapStart):(x(e,"mousedown",this._onTapStart),x(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(x(e,"dragover",this),x(e,"dragenter",this)),je.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),l(this,ee())}function nt(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function ot(e,t,i,n,o,s,a,l){var r,c,d=e[Q],u=d.options.onMove;return!window.CustomEvent||v||b?(r=document.createEvent("Event"),r.initEvent("move",!0,!0)):r=new CustomEvent("move",{bubbles:!0,cancelable:!0}),r.to=t,r.from=e,r.dragged=i,r.draggedRect=n,r.related=o||t,r.relatedRect=s||j(t),r.willInsertAfter=l,r.originalEvent=a,e.dispatchEvent(r),u&&(c=u.call(d,r,a)),c}function st(e){e.draggable=!1}function at(){Ve=!1}function lt(e,t,i){var n=j(U(i.el,0,i.options,!0)),o=10;return t?e.clientX<n.left-o||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-o||e.clientY<n.bottom&&e.clientX<n.left}function rt(e,t,i){var n=j(q(i.el,i.options.draggable)),o=10;return t?e.clientX>n.right+o||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+o}function ct(e,t,i,n,o,s,a,l){var r=n?e.clientY:e.clientX,c=n?i.height:i.width,d=n?i.top:i.left,u=n?i.bottom:i.right,p=!1;if(!a)if(l&&Ae<c*o){if(!$e&&(1===Le?r>d+c*s/2:r<u-c*s/2)&&($e=!0),$e)p=!0;else if(1===Le?r<d+Ae:r>u-Ae)return-Le}else if(r>d+c*(1-o)/2&&r<u-c*(1-o)/2)return dt(t);return p=p||a,p&&(r<d+c*s/2||r>u-c*s/2)?r>d+c/2?1:-1:0}function dt(e){return V(de)<V(e)?1:-1}function ut(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;while(i--)n+=t.charCodeAt(i);return n.toString(36)}function pt(e){Be.length=0;var t=e.getElementsByTagName("input"),i=t.length;while(i--){var n=t[i];n.checked&&Be.push(n)}}function ft(e){return setTimeout(e,0)}function ht(e){return clearTimeout(e)}it.prototype={constructor:it,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ie=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,de):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,o=n.preventOnFilter,s=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,r=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=n.filter;if(pt(i),!de&&!(/mousedown|pointerdown/.test(s)&&0!==e.button||n.disabled)&&!r.isContentEditable&&(this.nativeDraggable||!y||!l||"SELECT"!==l.tagName.toUpperCase())&&(l=O(l,n.draggable,i,!1),(!l||!l.animated)&&_e!==l)){if(ve=V(l),we=V(l,n.draggable),"function"===typeof c){if(c.call(this,e,l,this))return ce({sortable:t,rootEl:r,name:"filter",targetEl:l,toEl:i,fromEl:i}),re("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(n){if(n=O(r,n.trim(),i,!1),n)return ce({sortable:t,rootEl:n,name:"filter",targetEl:l,fromEl:i,toEl:i}),re("filter",t,{evt:e}),!0})),c))return void(o&&e.cancelable&&e.preventDefault());n.handle&&!O(r,n.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,i){var n,o=this,s=o.el,a=o.options,l=s.ownerDocument;if(i&&!de&&i.parentNode===s){var r=j(i);if(fe=s,de=i,ue=de.parentNode,he=de.nextSibling,_e=i,Ce=a.group,it.dragged=de,Se={target:de,clientX:(t||e).clientX,clientY:(t||e).clientY},Ee=Se.clientX-r.left,Oe=Se.clientY-r.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,de.style["will-change"]="all",n=function(){re("delayEnded",o,{evt:e}),it.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!w&&o.nativeDraggable&&(de.draggable=!0),o._triggerDragStart(e,t),ce({sortable:o,name:"choose",originalEvent:e}),L(de,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){P(de,e.trim(),st)})),x(l,"dragover",et),x(l,"mousemove",et),x(l,"touchmove",et),x(l,"mouseup",o._onDrop),x(l,"touchend",o._onDrop),x(l,"touchcancel",o._onDrop),w&&this.nativeDraggable&&(this.options.touchStartThreshold=4,de.draggable=!0),re("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(b||v))n();else{if(it.eventCanceled)return void this._onDrop();x(l,"mouseup",o._disableDelayedDrag),x(l,"touchend",o._disableDelayedDrag),x(l,"touchcancel",o._disableDelayedDrag),x(l,"mousemove",o._delayedDragTouchMoveHandler),x(l,"touchmove",o._delayedDragTouchMoveHandler),a.supportPointer&&x(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){de&&st(de),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._disableDelayedDrag),D(e,"touchend",this._disableDelayedDrag),D(e,"touchcancel",this._disableDelayedDrag),D(e,"mousemove",this._delayedDragTouchMoveHandler),D(e,"touchmove",this._delayedDragTouchMoveHandler),D(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?x(document,"pointermove",this._onTouchMove):x(document,t?"touchmove":"mousemove",this._onTouchMove):(x(de,"dragend",this),x(fe,"dragstart",this._onDragStart));try{document.selection?ft((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(e,t){if(Pe=!1,fe&&de){re("dragStarted",this,{evt:t}),this.nativeDraggable&&x(document,"dragover",tt);var i=this.options;!e&&L(de,i.dragClass,!1),L(de,i.ghostClass,!0),it.active=this,e&&this._appendGhost(),ce({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(xe){this._lastX=xe.clientX,this._lastY=xe.clientY,Je();var e=document.elementFromPoint(xe.clientX,xe.clientY),t=e;while(e&&e.shadowRoot){if(e=e.shadowRoot.elementFromPoint(xe.clientX,xe.clientY),e===t)break;t=e}if(de.parentNode[Q]._isOutsideThisEl(e),t)do{if(t[Q]){var i=void 0;if(i=t[Q]._onDragOver({clientX:xe.clientX,clientY:xe.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Qe()}},_onTouchMove:function(e){if(Se){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,s=pe&&N(pe,!0),a=pe&&s&&s.a,l=pe&&s&&s.d,r=We&&Ne&&B(Ne),c=(o.clientX-Se.clientX+n.x)/(a||1)+(r?r[0]-qe[0]:0)/(a||1),d=(o.clientY-Se.clientY+n.y)/(l||1)+(r?r[1]-qe[1]:0)/(l||1);if(!it.active&&!Pe){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(pe){s?(s.e+=c-(De||0),s.f+=d-(Te||0)):s={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");A(pe,"webkitTransform",u),A(pe,"mozTransform",u),A(pe,"msTransform",u),A(pe,"transform",u),De=c,Te=d,xe=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!pe){var e=this.options.fallbackOnBody?document.body:fe,t=j(de,!0,We,!0,e),i=this.options;if(We){Ne=e;while("static"===A(Ne,"position")&&"none"===A(Ne,"transform")&&Ne!==document)Ne=Ne.parentNode;Ne!==document.body&&Ne!==document.documentElement?(Ne===document&&(Ne=M()),t.top+=Ne.scrollTop,t.left+=Ne.scrollLeft):Ne=M(),qe=B(Ne)}pe=de.cloneNode(!0),L(pe,i.ghostClass,!1),L(pe,i.fallbackClass,!0),L(pe,i.dragClass,!0),A(pe,"transition",""),A(pe,"transform",""),A(pe,"box-sizing","border-box"),A(pe,"margin",0),A(pe,"top",t.top),A(pe,"left",t.left),A(pe,"width",t.width),A(pe,"height",t.height),A(pe,"opacity","0.8"),A(pe,"position",We?"absolute":"fixed"),A(pe,"zIndex","100000"),A(pe,"pointerEvents","none"),it.ghost=pe,e.appendChild(pe),A(pe,"transform-origin",Ee/parseInt(pe.style.width)*100+"% "+Oe/parseInt(pe.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,o=i.options;re("dragStart",this,{evt:e}),it.eventCanceled?this._onDrop():(re("setupClone",this),it.eventCanceled||(me=G(de),me.draggable=!1,me.style["will-change"]="",this._hideClone(),L(me,this.options.chosenClass,!1),it.clone=me),i.cloneId=ft((function(){re("clone",i),it.eventCanceled||(i.options.removeCloneOnHide||fe.insertBefore(me,de),i._hideClone(),ce({sortable:i,name:"clone"}))})),!t&&L(de,o.dragClass,!0),t?(Me=!0,i._loopId=setInterval(i._emulateDragOver,50)):(D(document,"mouseup",i._onDrop),D(document,"touchend",i._onDrop),D(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(i,n,de)),x(document,"drop",i),A(de,"transform","translateZ(0)")),Pe=!0,i._dragStartId=ft(i._dragStarted.bind(i,t,e)),x(document,"selectstart",i),Fe=!0,y&&A(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,n,s,a=this.el,l=e.target,r=this.options,c=r.group,d=it.active,u=Ce===c,p=r.sort,f=ke||d,h=this,_=!1;if(!Ve){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),l=O(l,r.draggable,a,!0),I("dragOver"),it.eventCanceled)return _;if(de.contains(e.target)||l.animated&&l.animatingX&&l.animatingY||h._ignoreWhileAnimating===l)return P(!1);if(Me=!1,d&&!r.disabled&&(u?p||(n=ue!==fe):ke===this||(this.lastPutMode=Ce.checkPull(this,d,de,e))&&c.checkPut(this,d,de,e))){if(s="vertical"===this._getDirection(e,l),t=j(de),I("dragOverValid"),it.eventCanceled)return _;if(n)return ue=fe,N(),this._hideClone(),I("revert"),it.eventCanceled||(he?fe.insertBefore(de,he):fe.appendChild(de)),P(!0);var m=q(a,r.draggable);if(!m||rt(e,s,this)&&!m.animated){if(m===de)return P(!1);if(m&&a===e.target&&(l=m),l&&(i=j(l)),!1!==ot(fe,a,de,t,l,i,e,!!l))return N(),a.appendChild(de),ue=a,M(),P(!0)}else if(m&&lt(e,s,this)){var g=U(a,0,r,!0);if(g===de)return P(!1);if(l=g,i=j(l),!1!==ot(fe,a,de,t,l,i,e,!1))return N(),a.insertBefore(de,g),ue=a,M(),P(!0)}else if(l.parentNode===a){i=j(l);var v,b,w=0,y=de.parentNode!==a,C=!Ke(de.animated&&de.toRect||t,l.animated&&l.toRect||i,s),k=s?"top":"left",S=$(l,"top","top")||$(de,"top","top"),x=S?S.scrollTop:void 0;if(Ie!==l&&(v=i[k],$e=!1,Ue=!C&&r.invertSwap||y),w=ct(e,l,i,s,C?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,Ue,Ie===l),0!==w){var D=V(de);do{D-=w,b=ue.children[D]}while(b&&("none"===A(b,"display")||b===pe))}if(0===w||b===l)return P(!1);Ie=l,Le=w;var T=l.nextElementSibling,E=!1;E=1===w;var F=ot(fe,a,de,t,l,i,e,E);if(!1!==F)return 1!==F&&-1!==F||(E=1===F),Ve=!0,setTimeout(at,30),N(),E&&!T?a.appendChild(de):l.parentNode.insertBefore(de,E?T:l),S&&K(S,0,x-S.scrollTop),ue=de.parentNode,void 0===v||Ue||(Ae=Math.abs(v-j(l)[k])),M(),P(!0)}if(a.contains(de))return P(!1)}return!1}function I(r,c){re(r,h,o({evt:e,isOwner:u,axis:s?"vertical":"horizontal",revert:n,dragRect:t,targetRect:i,canSort:p,fromSortable:f,target:l,completed:P,onMove:function(i,n){return ot(fe,a,de,t,i,j(i),e,n)},changed:M},c))}function N(){I("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function P(t){return I("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(h),h!==f&&(L(de,ke?ke.options.ghostClass:d.options.ghostClass,!1),L(de,r.ghostClass,!0)),ke!==h&&h!==it.active?ke=h:h===it.active&&ke&&(ke=null),f===h&&(h._ignoreWhileAnimating=l),h.animateAll((function(){I("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(l===de&&!de.animated||l===a&&!l.animated)&&(Ie=null),r.dragoverBubble||e.rootEl||l===document||(de.parentNode[Q]._isOutsideThisEl(e.target),!t&&et(e)),!r.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),_=!0}function M(){be=V(de),ye=V(de,r.draggable),ce({sortable:h,name:"change",toEl:a,newIndex:be,newDraggableIndex:ye,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){D(document,"mousemove",this._onTouchMove),D(document,"touchmove",this._onTouchMove),D(document,"pointermove",this._onTouchMove),D(document,"dragover",et),D(document,"mousemove",et),D(document,"touchmove",et)},_offUpEvents:function(){var e=this.el.ownerDocument;D(e,"mouseup",this._onDrop),D(e,"touchend",this._onDrop),D(e,"pointerup",this._onDrop),D(e,"touchcancel",this._onDrop),D(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;be=V(de),ye=V(de,i.draggable),re("drop",this,{evt:e}),ue=de&&de.parentNode,be=V(de),ye=V(de,i.draggable),it.eventCanceled||(Pe=!1,Ue=!1,$e=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ht(this.cloneId),ht(this._dragStartId),this.nativeDraggable&&(D(document,"drop",this),D(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y&&A(document.body,"user-select",""),A(de,"transform",""),e&&(Fe&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),pe&&pe.parentNode&&pe.parentNode.removeChild(pe),(fe===ue||ke&&"clone"!==ke.lastPutMode)&&me&&me.parentNode&&me.parentNode.removeChild(me),de&&(this.nativeDraggable&&D(de,"dragend",this),st(de),de.style["will-change"]="",Fe&&!Pe&&L(de,ke?ke.options.ghostClass:this.options.ghostClass,!1),L(de,this.options.chosenClass,!1),ce({sortable:this,name:"unchoose",toEl:ue,newIndex:null,newDraggableIndex:null,originalEvent:e}),fe!==ue?(be>=0&&(ce({rootEl:ue,name:"add",toEl:ue,fromEl:fe,originalEvent:e}),ce({sortable:this,name:"remove",toEl:ue,originalEvent:e}),ce({rootEl:ue,name:"sort",toEl:ue,fromEl:fe,originalEvent:e}),ce({sortable:this,name:"sort",toEl:ue,originalEvent:e})),ke&&ke.save()):be!==ve&&be>=0&&(ce({sortable:this,name:"update",toEl:ue,originalEvent:e}),ce({sortable:this,name:"sort",toEl:ue,originalEvent:e})),it.active&&(null!=be&&-1!==be||(be=ve,ye=we),ce({sortable:this,name:"end",toEl:ue,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){re("nulling",this),fe=de=ue=pe=he=me=_e=ge=Se=xe=Fe=be=ye=ve=we=Ie=Le=ke=Ce=it.dragged=it.ghost=it.clone=it.active=null,Be.forEach((function(e){e.checked=!0})),Be.length=De=Te=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":de&&(this._onDragOver(e),nt(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,o=i.length,s=this.options;n<o;n++)e=i[n],O(e,s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||ut(e));return t},sort:function(e,t){var i={},n=this.el;this.toArray().forEach((function(e,t){var o=n.children[t];O(o,this.options.draggable,n,!1)&&(i[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){i[e]&&(n.removeChild(i[e]),n.appendChild(i[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return O(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var n=se.modifyOption(this,e,t);i[e]="undefined"!==typeof n?n:t,"group"===e&&Xe(i)},destroy:function(){re("destroy",this);var e=this.el;e[Q]=null,D(e,"mousedown",this._onTapStart),D(e,"touchstart",this._onTapStart),D(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(D(e,"dragover",this),D(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),je.splice(je.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ge){if(re("hideClone",this),it.eventCanceled)return;A(me,"display","none"),this.options.removeCloneOnHide&&me.parentNode&&me.parentNode.removeChild(me),ge=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ge){if(re("showClone",this),it.eventCanceled)return;de.parentNode!=fe||this.options.group.revertClone?he?fe.insertBefore(me,he):fe.appendChild(me):fe.insertBefore(me,de),this.options.group.revertClone&&this.animate(de,me),A(me,"display",""),ge=!1}}else this._hideClone()}},He&&x(document,"touchmove",(function(e){(it.active||Pe)&&e.cancelable&&e.preventDefault()})),it.utils={on:x,off:D,css:A,find:P,is:function(e,t){return!!O(e,t,e,!1)},extend:Z,throttle:R,closest:O,toggleClass:L,clone:G,index:V,nextTick:ft,cancelNextTick:ht,detectDirection:Ye,getChild:U},it.get=function(e){return e[Q]},it.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(it.utils=o(o({},it.utils),e.utils)),se.mount(e)}))},it.create=function(e,t){return new it(e,t)},it.version=m;var _t,mt,gt,vt,bt,wt,yt=[],Ct=!1;function kt(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):this.options.supportPointer?x(document,"pointermove",this._handleFallbackAutoScroll):t.touches?x(document,"touchmove",this._handleFallbackAutoScroll):x(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?D(document,"dragover",this._handleAutoScroll):(D(document,"pointermove",this._handleFallbackAutoScroll),D(document,"touchmove",this._handleFallbackAutoScroll),D(document,"mousemove",this._handleFallbackAutoScroll)),xt(),St(),Y()},nulling:function(){bt=mt=_t=Ct=wt=gt=vt=null,yt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,n=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(n,o);if(bt=e,t||this.options.forceAutoScrollFallback||b||v||y){Tt(e,this.options,s,t);var a=W(s,!0);!Ct||wt&&n===gt&&o===vt||(wt&&xt(),wt=setInterval((function(){var s=W(document.elementFromPoint(n,o),!0);s!==a&&(a=s,St()),Tt(e,i.options,s,t)}),10),gt=n,vt=o)}else{if(!this.options.bubbleScroll||W(s,!0)===M())return void St();Tt(e,this.options,W(s,!1),!1)}}},l(e,{pluginName:"scroll",initializeByDefault:!0})}function St(){yt.forEach((function(e){clearInterval(e.pid)})),yt=[]}function xt(){clearInterval(wt)}var Dt,Tt=R((function(e,t,i,n){if(t.scroll){var o,s=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,r=t.scrollSpeed,c=M(),d=!1;mt!==i&&(mt=i,St(),_t=t.scroll,o=t.scrollFn,!0===_t&&(_t=W(i,!0)));var u=0,p=_t;do{var f=p,h=j(f),_=h.top,m=h.bottom,g=h.left,v=h.right,b=h.width,w=h.height,y=void 0,C=void 0,k=f.scrollWidth,S=f.scrollHeight,x=A(f),D=f.scrollLeft,T=f.scrollTop;f===c?(y=b<k&&("auto"===x.overflowX||"scroll"===x.overflowX||"visible"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY||"visible"===x.overflowY)):(y=b<k&&("auto"===x.overflowX||"scroll"===x.overflowX),C=w<S&&("auto"===x.overflowY||"scroll"===x.overflowY));var E=y&&(Math.abs(v-s)<=l&&D+b<k)-(Math.abs(g-s)<=l&&!!D),O=C&&(Math.abs(m-a)<=l&&T+w<S)-(Math.abs(_-a)<=l&&!!T);if(!yt[u])for(var F=0;F<=u;F++)yt[F]||(yt[F]={});yt[u].vx==E&&yt[u].vy==O&&yt[u].el===f||(yt[u].el=f,yt[u].vx=E,yt[u].vy=O,clearInterval(yt[u].pid),0==E&&0==O||(d=!0,yt[u].pid=setInterval(function(){n&&0===this.layer&&it.active._onTouchMove(bt);var t=yt[this.layer].vy?yt[this.layer].vy*r:0,i=yt[this.layer].vx?yt[this.layer].vx*r:0;"function"===typeof o&&"continue"!==o.call(it.dragged.parentNode[Q],i,t,e,bt,yt[this.layer].el)||K(yt[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&p!==c&&(p=W(p,!1)));Ct=d}}),30),Et=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,o=e.activeSortable,s=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var r=i||o;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);l(),r&&!r.el.contains(d)&&(s("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function Ot(){}function Ft(){}function It(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;Dt=t},dragOverValid:function(e){var t=e.completed,i=e.target,n=e.onMove,o=e.activeSortable,s=e.changed,a=e.cancel;if(o.options.swap){var l=this.sortable.el,r=this.options;if(i&&i!==l){var c=Dt;!1!==n(i)?(L(i,r.swapClass,!0),Dt=i):Dt=null,c&&c!==Dt&&L(c,r.swapClass,!1)}s(),t(!0),a()}},drop:function(e){var t=e.activeSortable,i=e.putSortable,n=e.dragEl,o=i||this.sortable,s=this.options;Dt&&L(Dt,s.swapClass,!1),Dt&&(s.swap||i&&i.options.swap)&&n!==Dt&&(o.captureAnimationState(),o!==t&&t.captureAnimationState(),Lt(n,Dt),o.animateAll(),o!==t&&t.animateAll())},nulling:function(){Dt=null}},l(e,{pluginName:"swap",eventProperties:function(){return{swapItem:Dt}}})}function Lt(e,t){var i,n,o=e.parentNode,s=t.parentNode;o&&s&&!o.isEqualNode(t)&&!s.isEqualNode(e)&&(i=V(e),n=V(t),o.isEqualNode(s)&&i<n&&n++,o.insertBefore(t,o.children[i]),s.insertBefore(e,s.children[n]))}Ot.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=U(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:Et},l(Ot,{pluginName:"revertOnSpill"}),Ft.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,n=i||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Et},l(Ft,{pluginName:"removeOnSpill"});var At,Nt,Pt,Mt,jt,$t=[],Ut=[],qt=!1,Vt=!1,Bt=!1;function Ht(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?x(document,"pointerup",this._deselectMultiDrag):(x(document,"mouseup",this._deselectMultiDrag),x(document,"touchend",this._deselectMultiDrag)),x(document,"keydown",this._checkKeyDown),x(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,i){var n="";$t.length&&Nt===e?$t.forEach((function(e,t){n+=(t?", ":"")+e.textContent})):n=i.textContent,t.setData("Text",n)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;Pt=t},delayEnded:function(){this.isMultiDrag=~$t.indexOf(Pt)},setupClone:function(e){var t=e.sortable,i=e.cancel;if(this.isMultiDrag){for(var n=0;n<$t.length;n++)Ut.push(G($t[n])),Ut[n].sortableIndex=$t[n].sortableIndex,Ut[n].draggable=!1,Ut[n].style["will-change"]="",L(Ut[n],this.options.selectedClass,!1),$t[n]===Pt&&L(Ut[n],this.options.chosenClass,!1);t._hideClone(),i()}},clone:function(e){var t=e.sortable,i=e.rootEl,n=e.dispatchSortableEvent,o=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||$t.length&&Nt===t&&(Zt(!0,i),n("clone"),o()))},showClone:function(e){var t=e.cloneNowShown,i=e.rootEl,n=e.cancel;this.isMultiDrag&&(Zt(!1,i),Ut.forEach((function(e){A(e,"display","")})),t(),jt=!1,n())},hideClone:function(e){var t=this,i=(e.sortable,e.cloneNowHidden),n=e.cancel;this.isMultiDrag&&(Ut.forEach((function(e){A(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),i(),jt=!0,n())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&Nt&&Nt.multiDrag._deselectMultiDrag(),$t.forEach((function(e){e.sortableIndex=V(e)})),$t=$t.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),Bt=!0},dragStarted:function(e){var t=this,i=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){$t.forEach((function(e){e!==Pt&&A(e,"position","absolute")}));var n=j(Pt,!1,!0,!0);$t.forEach((function(e){e!==Pt&&X(e,n)})),Vt=!0,qt=!0}i.animateAll((function(){Vt=!1,qt=!1,t.options.animation&&$t.forEach((function(e){J(e)})),t.options.sort&&zt()}))}},dragOver:function(e){var t=e.target,i=e.completed,n=e.cancel;Vt&&~$t.indexOf(t)&&(i(!1),n())},revert:function(e){var t=e.fromSortable,i=e.rootEl,n=e.sortable,o=e.dragRect;$t.length>1&&($t.forEach((function(e){n.addAnimationState({target:e,rect:Vt?j(e):o}),J(e),e.fromRect=o,t.removeAnimationState(e)})),Vt=!1,Wt(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(e){var t=e.sortable,i=e.isOwner,n=e.insertion,o=e.activeSortable,s=e.parentEl,a=e.putSortable,l=this.options;if(n){if(i&&o._hideClone(),qt=!1,l.animation&&$t.length>1&&(Vt||!i&&!o.options.sort&&!a)){var r=j(Pt,!1,!0,!0);$t.forEach((function(e){e!==Pt&&(X(e,r),s.appendChild(e))})),Vt=!0}if(!i)if(Vt||zt(),$t.length>1){var c=jt;o._showClone(t),o.options.animation&&!jt&&c&&Ut.forEach((function(e){o.addAnimationState({target:e,rect:Mt}),e.fromRect=Mt,e.thisAnimationDuration=null}))}else o._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,i=e.isOwner,n=e.activeSortable;if($t.forEach((function(e){e.thisAnimationDuration=null})),n.options.animation&&!i&&n.multiDrag.isMultiDrag){Mt=l({},t);var o=N(Pt,!0);Mt.top-=o.f,Mt.left-=o.e}},dragOverAnimationComplete:function(){Vt&&(Vt=!1,zt())},drop:function(e){var t=e.originalEvent,i=e.rootEl,n=e.parentEl,o=e.sortable,s=e.dispatchSortableEvent,a=e.oldIndex,l=e.putSortable,r=l||this.sortable;if(t){var c=this.options,d=n.children;if(!Bt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),L(Pt,c.selectedClass,!~$t.indexOf(Pt)),~$t.indexOf(Pt))$t.splice($t.indexOf(Pt),1),At=null,ae({sortable:o,rootEl:i,name:"deselect",targetEl:Pt,originalEvt:t});else{if($t.push(Pt),ae({sortable:o,rootEl:i,name:"select",targetEl:Pt,originalEvt:t}),t.shiftKey&&At&&o.el.contains(At)){var u,p,f=V(At),h=V(Pt);if(~f&&~h&&f!==h)for(h>f?(p=f,u=h):(p=h,u=f+1);p<u;p++)~$t.indexOf(d[p])||(L(d[p],c.selectedClass,!0),$t.push(d[p]),ae({sortable:o,rootEl:i,name:"select",targetEl:d[p],originalEvt:t}))}else At=Pt;Nt=r}if(Bt&&this.isMultiDrag){if(Vt=!1,(n[Q].options.sort||n!==i)&&$t.length>1){var _=j(Pt),m=V(Pt,":not(."+this.options.selectedClass+")");if(!qt&&c.animation&&(Pt.thisAnimationDuration=null),r.captureAnimationState(),!qt&&(c.animation&&(Pt.fromRect=_,$t.forEach((function(e){if(e.thisAnimationDuration=null,e!==Pt){var t=Vt?j(e):_;e.fromRect=t,r.addAnimationState({target:e,rect:t})}}))),zt(),$t.forEach((function(e){d[m]?n.insertBefore(e,d[m]):n.appendChild(e),m++})),a===V(Pt))){var g=!1;$t.forEach((function(e){e.sortableIndex===V(e)||(g=!0)})),g&&s("update")}$t.forEach((function(e){J(e)})),r.animateAll()}Nt=r}(i===n||l&&"clone"!==l.lastPutMode)&&Ut.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=Bt=!1,Ut.length=0},destroyGlobal:function(){this._deselectMultiDrag(),D(document,"pointerup",this._deselectMultiDrag),D(document,"mouseup",this._deselectMultiDrag),D(document,"touchend",this._deselectMultiDrag),D(document,"keydown",this._checkKeyDown),D(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(("undefined"===typeof Bt||!Bt)&&Nt===this.sortable&&(!e||!O(e.target,this.options.draggable,this.sortable.el,!1))&&(!e||0===e.button))while($t.length){var t=$t[0];L(t,this.options.selectedClass,!1),$t.shift(),ae({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},l(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[Q];t&&t.options.multiDrag&&!~$t.indexOf(e)&&(Nt&&Nt!==t&&(Nt.multiDrag._deselectMultiDrag(),Nt=t),L(e,t.options.selectedClass,!0),$t.push(e))},deselect:function(e){var t=e.parentNode[Q],i=$t.indexOf(e);t&&t.options.multiDrag&&~i&&(L(e,t.options.selectedClass,!1),$t.splice(i,1))}},eventProperties:function(){var e=this,t=[],i=[];return $t.forEach((function(n){var o;t.push({multiDragElement:n,index:n.sortableIndex}),o=Vt&&n!==Pt?-1:Vt?V(n,":not(."+e.options.selectedClass+")"):V(n),i.push({multiDragElement:n,index:o})})),{items:d($t),clones:[].concat(Ut),oldIndicies:t,newIndicies:i}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),"ctrl"===e?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function Wt(e,t){$t.forEach((function(i,n){var o=t.children[i.sortableIndex+(e?Number(n):0)];o?t.insertBefore(i,o):t.appendChild(i)}))}function Zt(e,t){Ut.forEach((function(i,n){var o=t.children[i.sortableIndex+(e?Number(n):0)];o?t.insertBefore(i,o):t.appendChild(i)}))}function zt(){$t.forEach((function(e){e!==Pt&&e.parentNode&&e.parentNode.removeChild(e)}))}it.mount(new kt),it.mount(Ft,Ot),t["default"]=it},5310:function(e,t,i){"use strict";i.d(t,{b:function(){return c}});var n=i(4581),o=i(3396);const s={pages:{orders:{deny:["427-74895"]},documents:{deny:["427-74895"]},clients:{deny:["427-74895"]}},analytics:{tabs:{customers:{deny:["427-74895"]},sales:{deny:["427-74895"]}}},remnants:{hideAllWhs:["678"],hideService:["678"],mainWhSelected:["678"],hideMainWhs:["464"]},names:{orders_deals:["678"],remnants_objects:["678"],mainWhs_allObjects:["678"],service_menu:["464"]}},a=(0,o.Fl)((()=>n.Z?.state?.account)),l=(0,o.Fl)((()=>`${a.value?.account?.id}`)),r=(0,o.Fl)((()=>`${a.value?.account?.id}-${a.value?.user?.id}`)),c=(0,o.Fl)((()=>{function e(t){const i={};return Object.keys(t).forEach((n=>{"object"!==typeof t[n]||Array.isArray(t[n])?Array.isArray(t[n])&&(i[n]=t[n].includes(r.value)||t[n].includes(l.value)):i[n]=e(t[n])})),i}return e(s)}))},4869:function(e,t,i){"use strict";i.d(t,{L:function(){return o}});var n=i(4870);function o(){const e=(0,n.qj)({}),t=async(t,i)=>{e[t]=!0,await i,e[t]=!1},i=t=>Boolean(e[t]);return{lockBtn:t,isBtnLocked:i}}},8216:function(e,t,i){"use strict";i.d(t,{h:function(){return a}});var n=i(4581),o=i(3396),s=i(4870);function a(e){const t=(0,o.Fl)((()=>n.Z.state.account.user?.role||"user")),i=(0,s.qj)({admin:{app:{settingsBtn:1},accountSettings:{usersList:{editBtn:1,delBtn:1},general:{changeName:1},addNewUserBtn:1},orders:{tableSettingsBtn:1},products:{tableSettingsBtn:1,editItem:1}},user:{app:{settingsBtn:0},accountSettings:{usersList:{editBtn:0,delBtn:0},general:{changeName:0},addNewUserBtn:0},orders:{tableSettingsBtn:1},products:{tableSettingsBtn:1,editItem:0}}}),a=(0,o.Fl)((()=>i[t.value])),l=(0,o.Fl)((()=>i[t.value][e]));return{currentRole:t,settings:i,currentSetSettings:a,currentSetSettingsInFolder:l}}},7048:function(e,t,i){"use strict";i.d(t,{X:function(){return s}});var n=i(4870);const o=(0,n.iH)(0);function s(){return{OrderViewKey:o}}},9672:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var n=i(3396);const o=e=>((0,n.dD)("data-v-5f4b36f7"),e=e(),(0,n.Cn)(),e),s=o((()=>(0,n._)("div",{class:"ref_2_logo"},[(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},[(0,n._)("path",{fill:"currentColor",d:"M12 22q-2.05 0-3.875-.788t-3.188-2.15q-1.362-1.362-2.15-3.187T2 12q0-2.075.788-3.888t2.15-3.174Q6.3 3.575 8.124 2.788T12 2q2.075 0 3.888.788t3.174 2.15q1.363 1.362 2.15 3.175T22 12q0 2.05-.788 3.875t-2.15 3.188q-1.362 1.362-3.175 2.15T12 22Zm0-2.05q.65-.9 1.125-1.875T13.9 16h-3.8q.3 1.1.775 2.075T12 19.95Zm-2.6-.4q-.45-.825-.788-1.713T8.05 16H5.1q.725 1.25 1.813 2.175T9.4 19.55Zm5.2 0q1.4-.45 2.488-1.375T18.9 16h-2.95q-.225.95-.562 1.838T14.6 19.55ZM4.25 14h3.4q-.075-.5-.113-.988T7.5 12q0-.525.038-1.012T7.65 10h-3.4q-.125.5-.188.988T4 12q0 .525.063 1.012T4.25 14Zm5.4 0h4.7q.075-.5.113-.988T14.5 12q0-.525-.038-1.012T14.35 10h-4.7q-.075.5-.113.988T9.5 12q0 .525.038 1.012T9.65 14Zm6.7 0h3.4q.125-.5.188-.988T20 12q0-.525-.063-1.012T19.75 10h-3.4q.075.5.113.988T16.5 12q0 .525-.038 1.012T16.35 14Zm-.4-6h2.95q-.725-1.25-1.812-2.175T14.6 4.45q.45.825.788 1.713T15.95 8ZM10.1 8h3.8q-.3-1.1-.775-2.075T12 4.05q-.65.9-1.125 1.875T10.1 8Zm-5 0h2.95q.225-.95.563-1.838T9.4 4.45Q8 4.9 6.912 5.825T5.1 8Z"})])],-1)));function a(e,t,i,o,a,l){const r=(0,n.up)("AppInputSelect");return(0,n.wg)(),(0,n.j4)(r,{placeholder:e.t("HomeMenu.selectLengPlaceholder"),selected:e.langConfiguration.selected,list:e.langConfiguration.list,floatRight:i.floatRight,onSelect:t[0]||(t[0]=t=>e.langConfiguration.select(t))},{title:(0,n.w5)((()=>[s])),_:1},8,["placeholder","selected","list","floatRight"])}var l=i(2489),r=i(8890),c={components:{AppInputSelect:r.Z},props:{floatRight:{type:Boolean,required:!1,default:()=>!1}},setup(){return{...(0,l.j)()}}},d=i(89);const u=(0,d.Z)(c,[["render",a],["__scopeId","data-v-5f4b36f7"]]);var p=u},2692:function(e,t,i){"use strict";i.d(t,{Z:function(){return be}});var n=i(3396),o=i(9242),s=i(7139);const a=e=>((0,n.dD)("data-v-3bc717e2"),e=e(),(0,n.Cn)(),e),l={class:"menu !static md:!relative"},r={class:"ref ref_center"},c=["title"],d=a((()=>(0,n._)("span",{class:"material-icons"}," splitscreen ",-1))),u=[d],p={class:"tasks"},f={key:0,class:"ref ref_center"},h=["title"],_={key:0,class:"material-icons-round"},m={key:1,class:"material-icons-outlined"},g={class:"import_file"},v={for:"xlsx"},b={key:2,class:"ref !static md:!relative"},w=["title"],y=a((()=>(0,n._)("span",{class:"material-icons"}," settings ",-1))),C=[y],k={key:0},S={key:1},x={key:2},D={key:0},T={key:1},E={class:"ref"},O=["title"],F=a((()=>(0,n._)("span",{class:"material-icons-outlined text-2xl"}," account_circle ",-1))),I=[F];function L(e,t,i,a,d,y){const F=(0,n.up)("TaskCenter"),L=(0,n.up)("HomeMenuUser");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",r,[(0,n._)("button",{class:"ref_2_logo btn",onClick:t[0]||(t[0]=e=>a.openTaskCenter()),title:e.t("HomeMenu.tasks.title")},u,8,c),(0,n.Wm)(o.uT,{name:"modal"},{default:(0,n.w5)((()=>[(0,n._)("div",p,[a.showTaskCenter?((0,n.wg)(),(0,n.j4)(F,{key:0,onClose:t[1]||(t[1]=e=>a.closeTaskCenter())})):(0,n.kq)("",!0)])])),_:1})]),a.isHomePage?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("button",{class:"ref_2_logo btn",onClick:t[2]||(t[2]=e=>a.openImportXlsl()),title:e.t("HomeMenu.import.title")},[(0,n.Wm)(o.uT,{name:"modal"},{default:(0,n.w5)((()=>[a.showImportXlsx?((0,n.wg)(),(0,n.iD)("span",_," sim_card_download ")):((0,n.wg)(),(0,n.iD)("span",m," sim_card_download "))])),_:1})],8,h),a.showImportXlsx?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",{class:"backdrop",onClick:t[3]||(t[3]=e=>a.closeImportXlsl())}),(0,n._)("div",g,[(0,n._)("label",v,(0,s.zw)(e.$t("HomeMenu.import.btnPlaceholder")),1),(0,n._)("input",{type:"file",accept:".xlsx",id:"xlsx",onChange:t[4]||(t[4]=e=>a.getFile(e))},null,32)])],64)):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n.kq)("",!0),!a.isTest2||a.currentSetSettings?.app?.settingsBtn?((0,n.wg)(),(0,n.iD)("div",b,[(0,n._)("button",{class:(0,s.C_)(["settings_btn",{settings_btn_rotate:a.show_settings}]),onClick:t[10]||(t[10]=e=>a.open_close_settings()),title:e.t("HomeMenu.settings.title")},C,10,w),a.show_settings?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",{class:"backdrop",onClick:t[11]||(t[11]=e=>a.close_settings())}),(0,n.Wm)(o.uT,{name:"modal"},{default:(0,n.w5)((()=>[(0,n._)("div",{class:"modal_settings !w-full md:!w-[358px] !top-12 md:!top-[200%]",onClick:t[22]||(t[22]=e=>a.close_settings())},[(0,n._)("a",null,[(0,n._)("div",{class:"modal_container",onClick:t[12]||(t[12]=e=>a.open_edit_stuff())},(0,s.zw)(e.$t("HomeMenu.settings.general")),1)]),a.isTest2?((0,n.wg)(),(0,n.iD)("a",k,[(0,n._)("div",{class:"modal_container",onClick:t[13]||(t[13]=e=>a.openSettingEntities())},(0,s.zw)(e.$t("HomeMenu.settings.entities")),1)])):(0,n.kq)("",!0),(0,n._)("a",null,[(0,n._)("div",{class:"modal_container",onClick:t[14]||(t[14]=e=>a.open_close_document_setting(!0))},(0,s.zw)(e.$t("HomeMenu.settings.docs")),1)]),(0,n._)("a",null,[(0,n._)("div",{class:"modal_container",onClick:t[15]||(t[15]=e=>a.openAccountSattings())},(0,s.zw)(e.$t("HomeMenu.settings.account")),1)]),a.isColored?((0,n.wg)(),(0,n.iD)("a",S,[(0,n._)("div",{class:"modal_container",onClick:t[16]||(t[16]=e=>a.openThirdPpartyIntegrations())},(0,s.zw)(e.$t("HomeMenu.settings.integration")),1)])):(0,n.kq)("",!0),a.isTest2?((0,n.wg)(),(0,n.iD)("a",x,[(0,n._)("div",{class:"modal_container",onClick:t[17]||(t[17]=e=>a.openArchive())},(0,s.zw)(e.$t("HomeMenu.settings.archive")),1)])):(0,n.kq)("",!0),a.isTest2?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)(n.HY,{key:3},[(0,n._)("a",null,[(0,n._)("div",{class:"modal_container",onClick:t[18]||(t[18]=e=>a.open_product_category())},(0,s.zw)(e.$t("HomeMenu.settings.categories")),1)]),(0,n._)("a",null,[(0,n._)("div",{class:"modal_container",onClick:t[19]||(t[19]=e=>a.open_product_properties())},(0,s.zw)(e.$t("HomeMenu.settings.properties")),1)]),!a.oneC&&a.isColored?((0,n.wg)(),(0,n.iD)("a",D,[(0,n._)("div",{class:"modal_container",onClick:t[20]||(t[20]=e=>a.openSyncSettings())},(0,s.zw)(e.$t("HomeMenu.settings.sync")),1)])):(0,n.kq)("",!0),a.isTest2?((0,n.wg)(),(0,n.iD)("a",T,[(0,n._)("div",{class:"modal_container",onClick:t[21]||(t[21]=e=>a.openClientsFieldsSettings())},(0,s.zw)(e.$t("HomeMenu.settings.clients")),1)])):(0,n.kq)("",!0)],64))])])),_:1})],64)):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n._)("div",E,[(0,n._)("button",{class:"ref_2_logo btn hover:scale-110",onClick:t[23]||(t[23]=e=>a.toggleShowUserMenu()),title:e.t("HomeMenu.user.title")},I,8,O),a.showUserMenu?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",{class:"backdrop",onClick:t[24]||(t[24]=e=>a.toggleShowUserMenu())}),(0,n.Wm)(o.uT,{name:"modal"},{default:(0,n.w5)((()=>[(0,n.Wm)(L)])),_:1})],64)):(0,n.kq)("",!0)])])}const A={class:"container"},N={key:1,class:"text"};function P(e,t,i,o,a,l){const r=(0,n.up)("TaskCard");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",{class:"backdrop",onClick:t[0]||(t[0]=e=>l.close())}),(0,n._)("div",A,[l.isTasksInProgress?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(l.tasks,(e=>((0,n.wg)(),(0,n.j4)(r,{task:e,key:e.id},null,8,["task"])))),128)):((0,n.wg)(),(0,n.iD)("div",N,[(0,n._)("h4",null,(0,s.zw)(e.$t("message.tasks")),1)]))])],64)}const M={class:"bar"},j={ref:"result",class:"result"};function $(e,t,i,o,a,l){return(0,n.wg)(),(0,n.iD)("div",{class:(0,s.C_)(["card",{done:2==i.task.status,in_progress:1==i.task.status,not_started:0==i.task.status,error:3==i.task.status}])},[(0,n._)("div",M,[(0,n._)("div",{class:"active_bar",style:(0,s.j5)({width:i.task.progress+"%"})},null,4)]),(0,n._)("p",null,(0,s.zw)(i.task.name),1),(0,n._)("div",j,null,512)],2)}var U={props:{task:Object},computed:{resultRef(){return this.$refs.result},result(){return this.task.result}},mounted(){this.result&&(this.resultRef.innerHTML=this.result)},watch:{result(){this.result&&(this.resultRef.innerHTML=this.result)}}},q=i(89);const V=(0,q.Z)(U,[["render",$],["__scopeId","data-v-3a38f9c8"]]);var B=V,H={components:{TaskCard:B},data(){return{interval:null}},mounted(){this.getTasks(),this.startTracking()},unmounted(){clearInterval(this.interval)},computed:{tasks(){return this.$store.state.tasks.tasks},isTasksInProgress(){let e=this.tasks.filter((e=>0==e.status||1==e.status)).length>0;return e}},methods:{close(){this.$emit("close")},getTasks(){this.$store.dispatch("getTasks")},startTracking(){this.interval=setInterval((()=>{this.getTasks(),this.isTasksInProgress||clearInterval(this.interval)}),2e3)}}};const W=(0,q.Z)(H,[["render",P],["__scopeId","data-v-0634c03a"]]);var Z=W;const z={class:"cont z-[999] flex flex-col items-stretch rounded-xl absolute top-[200%] right-0 min-w-[300px] overflow-visible shadow-lg shadow-slate-500/10 bg-white origin-top"},R={key:0,src:"https://cdn1.iconfinder.com/data/icons/people-49/512/_formal_mustache_man-01-1024.png",ref:"img",class:"rounded-full w-12"},Y={key:1,class:"material-icons-outlined text-slate-600",style:{"font-size":"50px"}},K={class:"whitespace-nowrap font-bold text-xl text-slate-700"},G={class:"main"},X={class:"text-slate-600"},J=(0,n._)("span",{class:"material-icons-outlined"}," logout ",-1);function Q(e,t,i,o,a,l){const r=(0,n.up)("AppChangeLanguage"),c=(0,n.up)("router-link"),d=(0,n.up)("ImportStuffSelector");return(0,n.wg)(),(0,n.iD)("div",z,[o.isTest2?((0,n.wg)(),(0,n.j4)(r,{key:0,class:"!absolute top-[18px] right-2",floatRight:!0})):(0,n.kq)("",!0),(0,n.Wm)(c,{to:"/profile"},{default:(0,n.w5)((()=>[(0,n._)("div",{class:(0,s.C_)(["head bg-big-stone-100 w-full p-3 flex flex-row gap-3 items-center min-h-[72px] rounded-t-xl",{"rounded-xl":o.inFrame}])},[o.isImgLoaded?((0,n.wg)(),(0,n.iD)("img",R,null,512)):((0,n.wg)(),(0,n.iD)("span",Y," account_circle ")),(0,n._)("h1",K,(0,s.zw)(o.userName),1)],2)])),_:1}),(0,n._)("div",G,[(0,n._)("ul",X,[o.inFrame?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("li",null,[(0,n.Wm)(d,{class:"!w-full",options_props:o.availableUserAccounts.list,selected_option:o.availableUserAccounts.selected,onSelect:t[0]||(t[0]=e=>o.availableUserAccounts.select(e.id))},null,8,["options_props","selected_option"])]),(0,n._)("li",{onClick:t[1]||(t[1]=e=>o.logOut())},[J,(0,n._)("span",null,(0,s.zw)(e.$t("HomeMenuUser.logout")),1)])],64))])])])}var ee=i(4870),te=i(4581),ie=i(2450);function ne(){const e=()=>{localStorage.removeItem(ie.TokenName),location.replace("/")};return{logOut:e}}var oe=i(1952);function se(){const e=(0,ee.qj)({selected:{},list:[],select:async function(e){const{success:t,token:i}=await te.Z.dispatch("authSetAccount",{account_id:e});t&&i&&(localStorage.setItem(ie.TokenName,JSON.stringify(i)),(0,ie.getCachedToken)(),(0,ie.createInstance)(),location.reload(!0))},setList:async function(){const e=te.Z.state.account.user?.accounts;e.map((e=>(e.value=e.id,e.name=e.subdomain))),this.list=e,this.setSelected()},setSelected:function(){const e=te.Z.state.account.account?.id;this.selected=this.list.find((t=>t.id===e))}});return e.setList(),{availableUserAccounts:e}}var ae=i(1922),le=i(9672),re=i(3704),ce={components:{ImportStuffSelector:ae.Z,AppChangeLanguage:le.Z},setup(){const{logOut:e}=ne(),{availableUserAccounts:t}=se(),i=(0,n.Fl)((()=>te.Z.state.account.user?.name)),o=(0,ee.iH)(!0),s=(0,ee.iH)(null);return(0,n.bv)((()=>{s.value.onerror=()=>o.value=!1})),{userName:i,img:s,isImgLoaded:o,logOut:e,inFrame:oe.V,availableUserAccounts:t,isTest2:re.h}}};const de=(0,q.Z)(ce,[["render",Q]]);var ue=de,pe=i(2524),fe=i(6413),he=i(1120),_e=i(8216),me=i(2489),ge={components:{TaskCenter:Z,HomeMenuUser:ue},setup(){const{t:e}=(0,me.j)(),{addNotification:t}=(0,pe.l)(),{currentSetSettings:i}=(0,_e.h)(),o=(0,n.Fl)((()=>te.Z.state.shows.showTaskCenter)),s=(0,n.Fl)((()=>te.Z.state.shows.show_sync)),a=(0,n.Fl)((()=>te.Z.state.shows.show_settings)),l=(0,n.Fl)((()=>te.Z.state.account.account?.config?.g_enabled)),r=(0,n.Fl)((()=>te.Z.state.account.account)),c=(0,n.Fl)((()=>te.Z.state.account.user?.name)),d=(0,n.Fl)((()=>454==te.Z.state.account?.account?.id)),u=(0,n.Fl)((()=>!r.value?.config?.amo_product_list||"-1"==r.value?.config?.amo_product_list)),p=(0,n.Fl)((()=>te.Z.state.account.account.is_colored)),f=(0,ee.iH)(!1),h=()=>f.value=!0,_=()=>f.value=!1,m=async i=>{const n=i.target.files[0],o=new FormData;o.append("file",n),o.append("name",n.name);const s=await te.Z.dispatch("importStuff",o);s.error?t(3,e("HomeMenu.err"),s.error):te.Z.commit("openCloseImportStuff",!0),_()},g=()=>te.Z.commit("openCloseTaskCenter",!0),v=()=>te.Z.commit("openCloseTaskCenter",!1),b=()=>te.Z.commit("open_close_sync"),w=()=>{te.Z.dispatch("syncAmoGs"),t(0,e("HomeMenu.sync.title"),e("HomeMenu.sync.amo_go"))},y=()=>{te.Z.dispatch("syncGsAmo"),t(0,e("HomeMenu.sync.title"),e("HomeMenu.sync.go_amo"))},C=()=>{te.Z.dispatch("sync1C"),t(0,e("HomeMenu.sync.title"),e("HomeMenu.sync.oneC"))},k=()=>te.Z.commit("open_close_settings"),S=()=>te.Z.commit("close_settings"),x=()=>te.Z.commit("open_close_edit_stuff",!0),D=()=>te.Z.commit("open_close_product_category",!0),T=()=>te.Z.commit("openCloseThirdPpartyIntegrations",!0),E=()=>he.Z.push("/accountSettings"),O=()=>te.Z.commit("openCloseClientsFieldsSettings",!0),F=()=>te.Z.commit("openCloseSyncSettings",!0),I=()=>te.Z.commit("open_close_product_properties",!0),L=e=>te.Z.commit("open_close_document_setting",e),A=()=>te.Z.commit("toggleSettingEntities",!0),N=()=>he.Z.push("/archive"),P=()=>he.Z.push("/users"),[M,j]=(0,fe.OT)(!1),$=(0,n.Fl)((()=>"home"===he.Z?.currentRoute?.value?.name));return{showTaskCenter:o,show_sync:s,oneC:l,is_empty_amo_product_list:u,isTest2:re.h,show_settings:a,openTaskCenter:g,closeTaskCenter:v,open_close_sync:b,syncAmoGs:w,syncGsAmo:y,sync1C:C,open_close_settings:k,close_settings:S,open_edit_stuff:x,open_product_category:D,openThirdPpartyIntegrations:T,openAccountSattings:E,openClientsFieldsSettings:O,openSyncSettings:F,open_product_properties:I,open_close_document_setting:L,getFile:m,showImportXlsx:f,openImportXlsl:h,closeImportXlsl:_,isColored:p,openArchive:N,openSettingEntities:A,userName:c,showUserMenu:M,toggleShowUserMenu:j,amoTest:d,openUserLIst:P,currentSetSettings:i,...(0,me.j)(),isHomePage:$}}};const ve=(0,q.Z)(ge,[["render",L],["__scopeId","data-v-3bc717e2"]]);var be=ve},1621:function(e,t,i){"use strict";i.d(t,{Z:function(){return Ff}});var n=i(3396),o=i(9242);const s={key:0,class:"table_setings"},a={key:0,class:"edit_staff"},l={key:0,class:"product_category"},r={key:0,class:"thirdPpartyIntegrations"},c={key:0,class:"SyncSettings"},d={key:0,class:"import_stuff"},u={key:0,class:"product_properties"},p={key:0,class:"new_position"},f={key:0,class:"cancel_position"},h={key:0,class:"move_products_between_whs"},_={key:0,class:"document_setting"},m={key:0,class:"ClientsFieldsSettings"},g={key:0,class:"SettingEntities"};function v(e,t,i,v,b,w){const y=(0,n.up)("table-settings"),C=(0,n.up)("edit-stuff"),k=(0,n.up)("product-category"),S=(0,n.up)("ThirdPpartyIntegrations"),x=(0,n.up)("SyncSettings"),D=(0,n.up)("ImportStuff"),T=(0,n.up)("product-properties"),E=(0,n.up)("new-position"),O=(0,n.up)("cancel-position"),F=(0,n.up)("MoveProductsBetweenWhs"),I=(0,n.up)("document-setting"),L=(0,n.up)("ClientsFieldsSettings"),A=(0,n.up)("SettingEntities");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.show_table_settings?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(y,{selectedWH:i.selectedWH,maxCountSelected:i.selectedWH.maxCountSelected},null,8,["selectedWH","maxCountSelected"])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.show_edit_stuff?((0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(C)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.show_product_category?((0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(k)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.showThirdPpartyIntegrations?((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(S)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.showSyncSettings?((0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(x)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.showImportStuff?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(D)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.show_product_properties?((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(T)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.show_new_position?((0,n.wg)(),(0,n.iD)("div",p,[(0,n.Wm)(E,{currentItems:i.currentItems,onSave:w.updateProducts},null,8,["currentItems","onSave"])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.show_cancel_position?((0,n.wg)(),(0,n.iD)("div",f,[(0,n.Wm)(O,{currentItems:i.currentItems,onSave:w.updateProducts},null,8,["currentItems","onSave"])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.showMoveProductsBetweenWhs?((0,n.wg)(),(0,n.iD)("div",h,[(0,n.Wm)(F,{currentItems:i.currentItems,onSave:w.updateProducts},null,8,["currentItems","onSave"])])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.show_document_setting?((0,n.wg)(),(0,n.iD)("div",_,[(0,n.Wm)(I)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.showClientsFieldsSettings?((0,n.wg)(),(0,n.iD)("div",m,[(0,n.Wm)(L)])):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(o.uT,{name:"modal_window"},{default:(0,n.w5)((()=>[e.showSettingEntities?((0,n.wg)(),(0,n.iD)("div",g,[(0,n.Wm)(A)])):(0,n.kq)("",!0)])),_:1})],64)}var b=i(7139);const w={class:"modal"},y={class:"wrapper mx-auto mt-2 md:mt-7"},C={class:"modal-header"},k={class:"head-text"},S={class:"modal-footer sm:hidden"},x={class:"modal-body"},D={class:"text"},T={class:"small-text"},E=["onUpdate:modelValue","id","disabled"],O=["for"],F={key:0,class:"material-icons-outlined handle ml-auto cursor-move text-slate-500"},I={class:"modal-footer"};function L(e,t,i,s,a,l){const r=(0,n.up)("btns-save-close"),c=(0,n.up)("draggable");return(0,n.wg)(),(0,n.iD)("div",w,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>s.close())}),(0,n._)("div",y,[(0,n._)("div",C,[(0,n._)("div",k,[(0,n.WI)(e.$slots,"header",{},(()=>[(0,n.Uk)((0,b.zw)(e.$t("tableSet.name")),1)]),!0)])]),(0,n._)("div",S,[(0,n.Wm)(r,{onClose:s.close,onSave:s.save},null,8,["onClose","onSave"])]),(0,n._)("div",x,[(0,n._)("div",D,[(0,n._)("small",T,(0,b.zw)(e.$t("tableSet.sm")),1)]),(0,n.Wm)(c,{class:"dragArea",list:s.list,onEnd:t[2]||(t[2]=()=>s.sort()),handle:e.isMobile?".handle":null},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.list,(i=>((0,n.wg)(),(0,n.iD)("div",{class:"item sm:cursor-move",key:i.name},[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e=>i.visible.value=e,id:i.code,class:"checkbox",disabled:i.visible.disabled||s.disabledNotSelected&&!i.visible.value,onChange:t[1]||(t[1]=()=>s.sort())},null,40,E),[[o.e8,i.visible.value]]),(0,n._)("label",{for:i.code},null,8,O),(0,n.Uk)(" "+(0,b.zw)(i.name)+" ",1),e.isMobile?((0,n.wg)(),(0,n.iD)("span",F," reorder ")):(0,n.kq)("",!0)])))),128))])),_:1},8,["list","handle"])]),(0,n._)("div",I,[(0,n.Wm)(r,{onClose:s.close,onSave:s.save},null,8,["onClose","onSave"])])])])}var A=i(8711),N=i(8249),P=i(4870),M=i(4581);function j(e){const t=(0,P.qj)({orders:{stateName:"orders",stateConfigField:"tableConfig",getStateReqName:"getOrdersTableConfig",params:{for:"table"},updateStateReqName:"updateOrdersConfigTable",haveWH:!1},ordersKanBan:{stateName:"orders",stateConfigField:"kanBanTableConfig",getStateReqName:"getOrdersKanBanTableConfig",params:{for:"pipeline"},updateStateReqName:"updateOrdersKanBanConfigTable",haveWH:!1,special:!0,disabledCodes:["order_name","order_created_at","order_responsible","contact_name","company_name","order_user","order_status"]},stock:{stateName:"account",stateConfigField:"tableConfig",getStateReqName:"getTableConfig",updateStateReqName:"update_config_table",haveWH:!0}}),i=(0,n.Fl)((()=>t[e]||{}));return{currentConfig:i}}var $=i(277),U={components:{draggable:N.J,BtnsSaveClose:A.Z},props:{selectedWH:{type:Object},maxCountSelected:{type:Number,required:!1}},emits:{},setup(e){const{currentConfig:t}=j("orders"===e.selectedWH.value?"orders":"ordersKanBan"===e.selectedWH.value?"ordersKanBan":"stock"),i=(0,n.Fl)((()=>M.Z.state.account.account?.config?.kanBanConfig)),o=(0,P.iH)([]),s=(0,n.Fl)((()=>o.value.reduce(((e,t)=>t.visible.value?e+1:e),0))),a=(0,n.Fl)((()=>s.value>=e.maxCountSelected+l.value&&e.maxCountSelected+l.value)),l=(0,n.Fl)((()=>t.value.special?t.value.disabledCodes.length:0)),r=(0,n.Fl)((()=>M.Z.state[t.value.stateName]?.[t.value.stateConfigField])),c=(0,n.Fl)((()=>"whs"!=e.selectedWH.value?e.selectedWH.value:""));(0,n.bv)((async()=>{await M.Z.dispatch(t.value.getStateReqName,t.value.haveWH?c.value:t.value.params);const e=[];Object.entries(r.value).map((([t,i])=>{i.code=t,e.push(i)})),o.value=JSON.parse(JSON.stringify(e)),t.value.special&&await M.Z.dispatch("get_account"),o.value.map((e=>{e.visible={value:t.value.special?i.value?.includes(e.code):Boolean(e.visible),disabled:2===e.visible||-1===e.visible},t.value.special&&t.value.disabledCodes.forEach((t=>{e.code===t&&(e.visible={value:!0,disabled:!0})}))})),p(!0),f()}));const d=()=>{o.value.map(((e,t)=>e.sort=t+1));const e={value:{config:[]}};t.value.params&&Object.assign(e.value,t.value.params),t.value.haveWH&&(e.wh=c.value,e.value.code=c.value),o.value.forEach((i=>{!i.visible.value||t.value.special&&t.value.disabledCodes?.includes(i.code)||e.value.config.push(i.code)})),M.Z.dispatch(t.value.updateStateReqName,t.value.special?{kanBanConfig:e.value.config}:e),u()},u=()=>{M.Z.commit("close_table_settings")},p=e=>{const t=o.value.some(((e,t)=>!e.visible.value&&o.value[t+1]?.visible?.value));if(t){const e=o.value.filter((e=>e.visible.value)),t=o.value.filter((e=>!e.visible.value));o.value=[...e,...t]}e||f(),o.value.sort(((e,t)=>e.visible.value&&e.sort-t.sort))},f=()=>o.value.map(((e,t)=>e.sort=t));return{list:o,disabledNotSelected:a,tableConfig:r,save:d,close:u,currentCountSelected:s,sort:p,...(0,$.Z)()}}},q=i(89);const V=(0,q.Z)(U,[["render",L],["__scopeId","data-v-43954d8b"]]);var B=V;const H=e=>((0,n.dD)("data-v-28378e68"),e=e(),(0,n.Cn)(),e),W={class:"wrapper"},Z={class:"bgc"},z={class:"container"},R={class:"header"},Y={class:"top"},K=H((()=>(0,n._)("br",null,null,-1))),G={class:"bottom"},X={class:"permits"},J={class:"permit"},Q={for:"q1"},ee={class:"permit"},te=["disabled"],ie={for:"q3"},ne={class:"permit"},oe={for:"q4"},se={class:"permit"},ae={for:"q5"},le={key:0,class:"content"},re={class:"mt-4 flex flex-col gap-2.5"},ce={key:0,class:"row"},de={for:"change"},ue={key:1,class:"row"},pe={for:"search"},fe={class:"footer"};function he(e,t,i,s,a,l){const r=(0,n.up)("btns-save-close");return(0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close())}),(0,n._)("div",Z,[(0,n._)("div",z,[(0,n._)("div",R,[(0,n._)("div",Y,[(0,n._)("label",null,(0,b.zw)(e.$t("EditStuff.header")),1),(0,n.Wm)(r,{onClose:l.close,onSave:l.save},{close:(0,n.w5)((()=>[(0,n.Uk)((0,b.zw)(e.$t("global.back")),1)])),_:1},8,["onClose","onSave"])]),K,(0,n._)("div",G,[(0,n._)("div",X,[(0,n._)("div",J,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"q1","onUpdate:modelValue":t[1]||(t[1]=e=>a.copyConfing.allow_add_reserve=e),onChange:t[2]||(t[2]=()=>a.copyConfing.allow_add_reserve?null:a.copyConfing.allow_add_with_zero_count=!1)},null,544),[[o.e8,a.copyConfing.allow_add_reserve]]),(0,n._)("label",Q,(0,b.zw)(e.$t("EditStuff.otherDeals")),1)]),(0,n._)("div",ee,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"q3",disabled:!a.copyConfing.allow_add_reserve,"onUpdate:modelValue":t[3]||(t[3]=e=>a.copyConfing.allow_add_with_zero_count=e)},null,8,te),[[o.e8,a.copyConfing.allow_add_with_zero_count]]),(0,n._)("label",ie,(0,b.zw)(e.$t("EditStuff.zeroCount")),1)]),(0,n._)("div",ne,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"q4","onUpdate:modelValue":t[4]||(t[4]=e=>a.copyConfing.one_wh_per_lead=e)},null,512),[[o.e8,a.copyConfing.one_wh_per_lead]]),(0,n._)("label",oe,(0,b.zw)(e.$t("EditStuff.oneWh")),1)]),(0,n._)("div",se,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"q5","onUpdate:modelValue":t[5]||(t[5]=e=>a.copyConfing.manual_budget_editing=e)},null,512),[[o.e8,a.copyConfing.manual_budget_editing]]),(0,n._)("label",ae,(0,b.zw)(e.$t("EditStuff.manualBudjet")),1)])])])]),s.isTest?((0,n.wg)(),(0,n.iD)("div",le,[(0,n._)("h6",null,(0,b.zw)(e.$t("EditStuff.publicOrder.header")),1),(0,n._)("div",re,[a.copyConfing.public_order?((0,n.wg)(),(0,n.iD)("div",ce,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"change","onUpdate:modelValue":t[6]||(t[6]=e=>a.copyConfing.public_order.change=e)},null,512),[[o.e8,a.copyConfing.public_order.change]]),(0,n._)("label",de,(0,b.zw)(e.$t("newOrder.change")),1)])):(0,n.kq)("",!0),a.copyConfing.public_order&&a.copyConfing.public_order?.change?((0,n.wg)(),(0,n.iD)("div",ue,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"search","onUpdate:modelValue":t[7]||(t[7]=e=>a.copyConfing.public_order.search=e)},null,512),[[o.e8,a.copyConfing.public_order.search]]),(0,n._)("label",pe,(0,b.zw)(e.$t("newOrder.search")),1)])):(0,n.kq)("",!0)])])):(0,n.kq)("",!0),(0,n._)("div",fe,[(0,n.Wm)(r,{onClose:l.close,onSave:l.save},{close:(0,n.w5)((()=>[(0,n.Uk)((0,b.zw)(e.$t("global.back")),1)])),_:1},8,["onClose","onSave"])])])])])}var _e=i(3704),me=i(2489);const{t:ge}=(0,me.j)();var ve={setup(){return{t:ge,isTest:_e.Y}},components:{BtnsSaveClose:A.Z},data(){return{copyConfing:{reserve_off:[],write_off:[]},copyPipelinesListV2:[],copyLeadFieldsList:[],leadsDeals:[{name:"Товары",code:"field_products",selected:{name:ge("global.notSelected"),value:-1}},{name:"Поле для поиска товаров",code:"field_search_products",selected:{name:ge("global.notSelected"),value:-1}},{name:"Себестоимость",code:"field_cost_price",selected:{name:ge("global.notSelected"),value:-1}},{name:"Прибыль",code:"field_profit",selected:{name:ge("global.notSelected"),value:-1}},{name:"Общий бюджет",code:"field_budget",selected:{name:ge("global.notSelected"),value:-1}},{name:"НДС сумма",code:"field_nds_sum",selected:{name:ge("global.notSelected"),value:-1}}],leadsDealsList:[],not_fill_budget:!1,lock_reserved_products_edit:!1}},async mounted(){await Promise.all([this.$store.dispatch("get_account"),this.$store.dispatch("getPipelinesListV2"),this.$store.dispatch("getLeadFieldsList")]),this.copyConfing=JSON.parse(JSON.stringify(this.$store.state.account.account.config)),this.copyConfing.reserve_off_v2||(this.copyConfing.reserve_off_v2=[]),this.copyConfing.public_order||(this.copyConfing.public_order={change:!0,search:!1}),this.not_fill_budget=Boolean(this.copyConfing?.not_fill_budget),this.lock_reserved_products_edit=Boolean(this.copyConfing?.lock_reserved_products_edit),this.copyPipelinesListV2=this.pipelinesListV2,this.copyLeadFieldsList=this.leadFieldsList,this.fillLeadsDealsList(),this.searchSelectedPipelines(),this.searchSelectedLeadsDeals()},computed:{pipelinesListV2(){const e=[];return Object.entries(this.$store.state.account.pipelinesListV2).map((t=>{const i=[];t[1].statuses.forEach((e=>i.push({name:e.name,value:e.id,color:e.color,selected:!1}))),t[1].statuses=[...i],t[1].selectedWriteOff={name:ge("global.notSelected"),value:-1},e.push({value:t[0],...t[1]})})),e},leadFieldsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldsList).map((t=>{const i=[];Object.entries(t[1].fields).forEach((e=>i.push({name:e[1],value:e[0]}))),t[1].fields=i,t[1].fields.unshift({name:ge("global.notSelected"),value:-1}),t[1].selected={name:ge("global.notSelected"),value:-1},e.push({value:t[0],...t[1]})})),e}},methods:{save(){const e={not_fill_budget:this.not_fill_budget,lock_reserved_products_edit:this.lock_reserved_products_edit},t=this.$store.state.account.account.config;Object.entries(this.copyConfing).forEach((i=>{t[i[0]]!==i[1]&&(e[i[0]]=i[1])})),this.$store.dispatch("update_account",e),this.close()},close(){this.$store.commit("open_close_edit_stuff",!1)},optionSelectLeadsDeals(e,t){-1==e.value?this.copyConfing[t]="0":this.copyConfing[t]=e.value,this.leadsDeals.map((i=>{i.code==t&&(i.selected=e)}))},include(e,t,i){let n=!1;return e.forEach((e=>{e[i]==t&&(n=!0)})),n},optionSelectSteps(e,t,i){let n=!0;if("reserve_off"!==i){this.include(this.copyConfing[i],t,"field")&&(this.copyConfing[i].map((i=>{i.field==t&&(i.value=e.value)})),n=!1);const o={field:t,value:e.value};n&&this.copyConfing[i].push(o),-1==e.value&&this.copyConfing[i].forEach(((e,n)=>{e.field==t&&this.copyConfing[i].splice(n,1)}))}if(this.copyPipelinesListV2.map((n=>{n.value==t&&"write_off"==i&&(n.selectedWriteOff=e),n.value==t&&"reserve_off"==i&&("all"===e.value&&n.statuses?.forEach((t=>{"all"!==t.value&&(t.selected=!e.selected)})),e.selected=!e.selected)})),"reserve_off"===i){const e=this.copyPipelinesListV2.find((e=>e.value===t)),i=[];if(e?.statuses?.forEach((e=>e.selected&&"all"!=e.value?i.push(e.value):null)),this.copyConfing.reserve_off_v2.find((e=>e.field===t))&&(n=!1),n)this.copyConfing.reserve_off_v2.push({field:t,values:i});else{const e=this.copyConfing.reserve_off_v2.find((e=>e.field===t));e&&(e.values=i)}}},searchSelectedInArr(e,t,i){let n={name:ge("global.notSelected"),value:-1};return t.forEach((t=>{t[i]==e&&(n=t)})),n},searchSelectedPipelines(){this.copyPipelinesListV2.map((e=>{const t=this.copyConfing.write_off.find((t=>t.field==e.value));t&&(e.selectedWriteOff=this.searchSelectedInArr(t.value,e.statuses,"value"));const i=this.copyConfing?.reserve_off_v2?.find((t=>t.field==e.value));e.statuses.map((e=>{i?.values?.includes(e.value)&&(e.selected=!0)}));const n=e.statuses.filter((e=>!e.selected));1===n.length&&"all"===n[0].value&&(e.statuses.find((e=>"all"===e.value)).selected=!0)}))},fillLeadsDealsList(){this.leadsDealsList.push({name:ge("global.notSelected"),value:-1}),this.copyLeadFieldsList.forEach((e=>{const t=e.name;this.leadsDealsList.push({name:t,value:"optgroup"});const i=e.fields.splice(1,999);i.forEach((e=>this.leadsDealsList.push({...e,optgroup:!0})))}))},searchSelectedLeadsDeals(){this.leadsDeals.map((e=>{e.selected=this.searchSelectedInArr(this.copyConfing[e.code],this.leadsDealsList,"value")}))}}};const be=(0,q.Z)(ve,[["render",he],["__scopeId","data-v-28378e68"]]);var we=be;const ye=e=>((0,n.dD)("data-v-f90a8d62"),e=e(),(0,n.Cn)(),e),Ce={class:"wrapper"},ke={class:"container max-w-none"},Se={class:"header"},xe={class:"content"},De={class:"table_wrapper",ref:"tableWrapper"},Te={class:"table"},Ee={class:"row title"},Oe=ye((()=>(0,n._)("td",{class:"item"},null,-1))),Fe={class:"item"},Ie=["onUpdate:modelValue","onFocusin","onFocusout","onInput","title","disabled"],Le=["onUpdate:modelValue","onFocusin","onFocusout","onInput","title","disabled"],Ae={class:"item"},Ne={class:"select_input"},Pe=["onUpdate:modelValue","title","disabled"],Me={class:"item"},je={class:"item"},$e=["onUpdate:modelValue","disabled","title"],Ue={class:"item"},qe={class:"item"},Ve=["onUpdate:modelValue","title","disabled"],Be={class:"item"},He={class:"item"},We=["onUpdate:modelValue","disabled"],Ze={class:"nds"},ze={key:0},Re=["onUpdate:modelValue","id","disabled"],Ye=["for"],Ke={key:1,class:"hiden"},Ge={class:"checkboxes"},Xe=["onUpdate:modelValue","id","disabled"],Je=["for"],Qe=["onUpdate:modelValue","id","disabled"],et=["for"],tt=["onUpdate:modelValue","id","disabled"],it=["for"],nt=["onUpdate:modelValue","placeholder","disabled"],ot={class:"item"},st={class:"item"},at=["onUpdate:modelValue"],lt={class:"item"},rt=["onClick"],ct={class:"content_footer"},dt={class:"autocomplete_teleport"},ut=["onClick"],pt={class:"footer"};function ft(e,t,i,s,a,l){const r=(0,n.up)("ImportStuffSelector"),c=(0,n.up)("btns-save-close");return(0,n.wg)(),(0,n.iD)("div",Ce,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close())}),(0,n._)("div",ke,[(0,n._)("div",Se,[(0,n._)("label",null,(0,b.zw)(e.$t("ostatki.add")),1)]),(0,n._)("div",xe,[(0,n._)("div",De,[(0,n._)("table",Te,[(0,n._)("thead",null,[(0,n._)("tr",Ee,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.title,((e,t)=>((0,n.wg)(),(0,n.iD)("td",{class:"item",key:e,style:(0,b.j5)({width:100/l.totalTitleWidth*a.titleWidth[t]})},(0,b.zw)(e),5)))),128)),Oe])]),(0,n._)("tbody",null,[(0,n.Wm)(o.W3,{name:"row"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.new_items,((t,i)=>((0,n.wg)(),(0,n.iD)("tr",{class:"row",key:i},[(0,n._)("td",Fe,[(0,n.Wm)(r,{options_props:a.options_type,onSelect:(e,t)=>l.option_select(e,t,"type"),onToggleShowOptions:l.toggleShowOptions,selected_option:t.type,idx:i,disabled:!t.new},null,8,["options_props","onSelect","onToggleShowOptions","selected_option","idx","disabled"])]),(0,n._)("td",{class:"item",ref_for:!0,ref:e=>a.selected_field_autocomplete.idx==i&&"article"==a.selected_field_autocomplete.field?a.targetAutocomplete=e:null},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.article=e,onFocusin:e=>(l.set_selected_field_autocomplete("article",t.article,i),l.toggleShowOptions(!0)),onFocusout:e=>(l.set_selected_field_autocomplete("","",i),l.toggleShowOptions(!1)),onInput:e=>l.set_selected_field_autocomplete("article",t.article,i),class:(0,b.C_)(["input",{not_valid:(""===t.article||void 0===t.article)&&a.try_accept&&t.new}]),title:""!==t.article&&void 0!==t.article||!a.try_accept?null:s.t("ostatki.fieldE"),disabled:!t.new},null,42,Ie),[[o.nr,t.article]])],512),(0,n._)("td",{class:"item",ref_for:!0,ref:e=>a.selected_field_autocomplete.idx==i&&"name"==a.selected_field_autocomplete.field?a.targetAutocomplete=e:null},[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.name=e,onFocusin:e=>(l.set_selected_field_autocomplete("name",t.name,i),l.toggleShowOptions(!0)),onFocusout:e=>(l.set_selected_field_autocomplete("","",i),l.toggleShowOptions(!1)),onInput:e=>l.set_selected_field_autocomplete("name",t.name,i),class:(0,b.C_)(["input",{not_valid:(""===t.name||void 0===t.name)&&a.try_accept&&t.new}]),title:""!==t.name&&void 0!==t.name||!a.try_accept?null:s.t("ostatki.fieldE"),disabled:!t.new},null,42,Le),[[o.nr,t.name]])],512),(0,n._)("td",Ae,[(0,n._)("div",Ne,[(0,n.Wm)(r,{options_props:t.new?a.batch_category_options:t.batch_category_options,onSelect:(e,t)=>l.option_select(e,t,"batch_category"),onToggleShowOptions:l.toggleShowOptions,selected_option:t.batch_category,idx:i,disabled:2==t.type.value},null,8,["options_props","onSelect","onToggleShowOptions","selected_option","idx","disabled"]),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.batch=e,class:(0,b.C_)(["input",{not_valid:(""===t.batch||void 0===t.batch)&&a.try_accept&&2!=t.type.value&&!1}]),title:""!==t.batch&&void 0!==t.batch||!a.try_accept||2==t.type.value?null:s.t("ostatki.fieldE"),disabled:2==t.type.value||-1!=t.batch_category?.value},null,10,Pe),[[o.nr,t.batch]])])]),(0,n._)("td",Me,[(0,n.Wm)(r,{options_props:t.wh_options,onSelect:(e,t)=>l.option_select(e,t,"wh"),onToggleShowOptions:l.toggleShowOptions,selected_option:t.wh,idx:i,disabled:2==t.type.value},null,8,["options_props","onSelect","onToggleShowOptions","selected_option","idx","disabled"])]),(0,n._)("td",je,[(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":e=>t.count=e,class:(0,b.C_)(["input",{not_valid:(""===t.count||void 0==t.count)&&a.try_accept&&2!=t.type}]),disabled:2==t.type.value,min:"0",title:""!==t.count&&void 0!=t.count||!a.try_accept?null:s.t("ostatki.fieldE")},null,10,$e),[[o.nr,t.count]])]),(0,n._)("td",Ue,[(0,n.Wm)(r,{options_props:a.units_options,onSelect:(e,t)=>l.option_select(e,t,"units"),onToggleShowOptions:l.toggleShowOptions,selected_option:t.units,idx:i,disabled:2==t.type.value||!t.new&&!t.newBatch},null,8,["options_props","onSelect","onToggleShowOptions","selected_option","idx","disabled"])]),(0,n._)("td",qe,[(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":e=>t.cost_price=e,class:(0,b.C_)(["input",{not_valid:(""===t.cost_price||void 0===t.cost_price)&&a.try_accept&&(t.new||t.newBatch)}]),min:"0",title:""!==t.cost_price&&void 0!==t.cost_price||!a.try_accept?null:s.t("ostatki.fieldE"),disabled:!t.new&&!t.newBatch},null,10,Ve),[[o.nr,t.cost_price]])]),(0,n._)("td",Be,[(0,n.Wm)(r,{options_props:t.price_cat_options,onSelect:(e,t)=>l.option_select(e,t,"price_cat"),onToggleShowOptions:l.toggleShowOptions,selected_option:t.price_cat,disabled:!t.new&&!t.newBatch,idx:i},null,8,["options_props","onSelect","onToggleShowOptions","selected_option","disabled","idx"])]),(0,n._)("td",He,[(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":e=>t.price.cost=e,class:"input",min:"0",disabled:!t.new&&!t.newBatch},null,8,We),[[o.nr,t.price.cost]])]),(0,n._)("td",{class:(0,b.C_)(["item",{long:t.price.is_nds}])},[(0,n._)("div",Ze,[t.price.is_nds?((0,n.wg)(),(0,n.iD)("div",Ke,[(0,n._)("div",Ge,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_nds=e,class:"checkbox",id:i+"nq",disabled:!t.new&&!t.newBatch},null,8,Xe),[[o.e8,t.price.is_nds]]),(0,n._)("label",{for:i+"nq"},(0,b.zw)(e.$t("ostatki.nds1")),9,Je),(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_price_include_nds=e,class:"checkbox",id:i+"nw",disabled:!t.new&&!t.newBatch},null,8,Qe),[[o.e8,t.price.is_price_include_nds]]),(0,n._)("label",{for:i+"nw"},(0,b.zw)(e.$t("ostatki.nds2")),9,et),(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_manager_can_change_nds=e,class:"checkbox",id:i+"ne",disabled:!t.new&&!t.newBatch},null,8,tt),[[o.e8,t.price.is_manager_can_change_nds]]),(0,n._)("label",{for:i+"ne"},(0,b.zw)(e.$t("ostatki.nds3")),9,it)]),(0,n.wy)((0,n._)("input",{type:"number",class:"input","onUpdate:modelValue":e=>t.price.nds=e,placeholder:s.t("ostatki.nds4"),min:"0",disabled:!t.new&&!t.newBatch},null,8,nt),[[o.nr,t.price.nds]])])):((0,n.wg)(),(0,n.iD)("div",ze,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":e=>t.price.is_nds=e,class:"checkbox",id:i+"nq",disabled:!t.new&&!t.newBatch},null,8,Re),[[o.e8,t.price.is_nds]]),(0,n._)("label",{for:i+"nq"},null,8,Ye)]))])],2),(0,n._)("td",ot,[(0,n.Wm)(r,{options_props:a.categories_options,onSelect:(e,t)=>l.option_select(e,t,"category"),onToggleShowOptions:l.toggleShowOptions,selected_option:t.category,idx:i,disabled:!t.new&&!t.newBatch},null,8,["options_props","onSelect","onToggleShowOptions","selected_option","idx","disabled"])]),(0,n._)("td",st,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.description=e,class:"input"},null,8,at),[[o.nr,t.description]])]),(0,n.Wm)(o.uT,{name:"row"},{default:(0,n.w5)((()=>[(0,n._)("td",lt,[(0,n.wy)((0,n._)("button",{class:"del_btn",onClick:e=>l.del_item(i)}," X ",8,rt),[[o.F8,a.new_items.length>1]])])])),_:2},1024)])))),128))])),_:1})])])],512),(0,n._)("div",ct,[(0,n._)("button",{class:"add_new_button",onClick:t[1]||(t[1]=e=>l.push_new_item())},"+")])]),a.selected_field_autocomplete_list.length?((0,n.wg)(),(0,n.j4)(n.lR,{key:0,to:"body"},[(0,n._)("ul",dt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.selected_field_autocomplete_list,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.id,onClick:t=>l.select_current_product(e)},(0,b.zw)(e.fields.name)+" | "+(0,b.zw)(e.fields.article)+" | "+(0,b.zw)(e.fields.batch),9,ut)))),128))])])):(0,n.kq)("",!0),(0,n._)("div",pt,[(0,n.Wm)(c,{onClose:l.close,onSave:l.save,disabledSave:a.acceptBtnDisable},null,8,["onClose","onSave","disabledSave"])])])])}var ht=i(1922),_t=i(5310);const{t:mt}=(0,me.j)(),gt={components:{ImportStuffSelector:ht.Z,BtnsSaveClose:A.Z},props:{currentItems:{type:Array,required:!1,default(){return[]}}},setup(){return{t:mt}},data(){return{title:[mt("ostatki.tip"),mt("ostatki.art"),mt("ostatki.name"),mt("ostatki.batch"),mt("ostatki.wh"),mt("ostatki.count"),mt("ostatki.ed"),mt("ostatki.seb"),mt("ostatki.price3"),mt("ostatki.price3"),mt("ostatki.ndsT"),mt("ostatki.cat2"),mt("ostatki.op")],titleWidth:[1,1,10,1,1,1,1,1,1,1,1,1],new_items:[],options_type:[{name:mt("ostatki.tov"),value:1},{name:mt("ostatki.ysl"),value:2}],batch_category_options:[],wh_options:[],price_cat_options:[],units_options:[],categories_options:[],selected_field_autocomplete:{idx:null,field:"",value:""},selected_field_autocomplete_list:[],currentItemsBatchs:{},timer:0,targetAutocomplete:null,copyCurrentItems:[],fieldsForValidation:["article","name","count","cost_price"],fieldsServiceForValidation:["article","name","cost_price"],try_accept:!1,acceptBtnDisable:!1,optionsX:null,optionsY:null}},computed:{totalTitleWidth(){return this.titleWidth.reduce(((e,t)=>e+t),0)},fields(){return this.$store.state.fields.all_fields},categories(){const e=[];return this.new_items.forEach((t=>e.push(t.category))),e},batch_categories(){const e=[];return this.new_items.forEach((t=>e.push(t.batch_category))),e},isValid(){let e=!0;const t=[this.fieldsForValidation,this.fieldsServiceForValidation];return this.new_items.forEach((i=>{const n=2==i.type.value;let o=[];o=n?t[1]:t[0],i.new&&o.forEach((t=>{const n=t.split(".");e=n[1]?e&&this.validation(i[n[0]][n[1]]):e&&this.validation(i[t])}))})),e}},async mounted(){await Promise.all([this.$store.dispatch("get_fields_properties"),this.$store.dispatch("get_all_fields")]),this.tocopyCurrentItems(this.currentItems),this.get_categories_options(),this.get_options("batch",this.batch_category_options,mt("ostatki.new")),this.fillWhs(),this.fillPriceCat(),this.get_options("units",this.units_options,mt("global.notSelected")),this.currentItems.length?this.pushCurrentItems():this.push_new_item()},watch:{selected_field_autocomplete:{async handler(){clearTimeout(this.timer),this.timer=setTimeout((async()=>{const e=this.selected_field_autocomplete;if(this.selected_field_autocomplete_list=[],""!==e.field&&e.value.length>2&&" "!=e.value.split("").at(-1)&&" "!=e.value.split("")[0]){const t=await this.$store.dispatch("autocomplete_"+e.field,e.value);this.calcOptionsPosition(),void 0!=t&&(this.selected_field_autocomplete_list=[...t])}}),500)},deep:!0},categories:{handler(){this.new_items.map((e=>{e.wh_options=this.searchCatArr(this.wh_options,this.searchParentsCat(e.category)),e.price_cat_options=this.searchCatArr(this.price_cat_options,this.searchParentsCat(e.category))}))},deep:!0},batch_categories:{handler(){this.new_items.map((e=>{-1===e.batch_category?.value?(e.newBatch=!0,e.batch=""):e.newBatch=!1}))},deep:!0}},methods:{push_new_item(){const e={new:!0,type:{name:mt("ostatki.tov"),value:1},article:"",name:"",description:"",batch_category:{name:mt("ostatki.new"),value:-1},batch:"",wh:{name:_t.b.value?.names?.mainWhs_allObjects?mt("ostatki.allObj"):mt("ostatki.osn"),value:"wh"},count:0,units:{name:mt("global.notSelected"),value:-1},cost_price:0,category:this.searchBaseCategory(),price_cat:{name:mt("ostatki.price3"),value:"price"},price:{cost:0,currency:"RUB",is_manager_can_change_nds:!1,is_nds:!1,is_price_include_nds:!1,nds:0},wh_options:this.searchCatArr(this.wh_options,this.searchParentsCat(this.searchBaseCategory())),price_cat_options:this.searchCatArr(this.price_cat_options,this.searchParentsCat(this.searchBaseCategory()))};this.new_items.push(e)},pushCurrentItems(){this.currentItems.forEach((async e=>{let t=[];t=e?.fields?.article.length>0?await this.$store.dispatch("autocomplete_article",e?.fields?.article):[e];const i=t.filter((t=>t.fields.name==e.fields.name&&t.fields.article==e.fields.article));this.currentItemsBatchs[e.fields.article]=i,this.pushCurrentItem(e,this.selected_field_autocomplete.idx)}))},pushCurrentItem(e,t){const i={new:!1,id:e.id,type:{name:mt("ostatki.tov"),value:1},article:e.fields.article,name:e.fields.name,description:e.fields?.description,batch_category:{name:"",value:-2},batch_category_options:[{name:mt("ostatki.new"),value:-1}],batch:e.fields.batch,wh:{name:_t.b.value?.names?.mainWhs_allObjects?mt("ostatki.allObj"):mt("ostatki.osn"),value:"wh"},count:0,units:{...this.units_options.find((t=>t.name==e.fields.units))},cost_price:e.fields.cost_price,category:{...this.categories_options.find((t=>t.value==e.fields.category))},price_cat:{name:mt("ostatki.price3"),value:"price"},price:{...e.fields.price},wh_options:this.searchCatArr(this.wh_options,this.searchParentsCat(e.category)),price_cat_options:this.searchCatArr(this.price_cat_options,this.searchParentsCat(e.category))};this.currentItemsBatchs[e.fields.article]?.forEach((e=>i.batch_category_options.push({name:e.fields.batch,value:e.fields.batch}))),i.batch_category=i.batch_category_options.find((t=>t.value==e.fields.batch)),void 0!=t?(Object.assign(this.new_items[t],i),this.copyCurrentItems.push(e)):this.new_items.push(i)},del_item(e){this.new_items.splice(e,1)},fillWhs(){this.fields.filter((e=>13==e.type&&"whs"!=e.code)).forEach((e=>this.wh_options.push({name:e.name,value:e.code})))},fillPriceCat(){this.fields.filter((e=>11==e.type)).forEach((e=>this.price_cat_options.push({name:e.name,value:e.code})))},searchCatArr(e,t){const i=[];return e.forEach((e=>{t.includes(this.fields.find((t=>e.value==t.code)).category_id)&&i.push(e)})),i},searchParentsCat(e){let t=[];this.$store.state.categories.fields_properties.forEach((i=>{i.id==e?.value&&(t=[...i.levels])}));const i=t.indexOf(0);return t=t.slice(0,i),t},searchBaseCategory(){const e=this.$store.state.categories.fields_properties.find((e=>0==e.parent_id));return{name:e.name,value:e.id}},set_selected_field_autocomplete(e,t,i){""==e&&(this.targetAutocomplete=null),this.selected_field_autocomplete={field:e,value:t,idx:i}},select_current_product(e){const t=this.selected_field_autocomplete_list.filter((t=>t.fields.name==e.fields.name&&t.fields.article==e.fields.article));this.currentItemsBatchs[e.fields.article]=t,this.pushCurrentItem(e,this.selected_field_autocomplete.idx),this.set_selected_field_autocomplete("","",null)},get_options(e,t,i){t.push({name:i,value:-1}),this.search_type_options(this.fields,e).forEach(((e,i)=>t.push({name:e,value:i})))},get_categories_options(){this.$store.state.categories.fields_properties.forEach((e=>{let t="";for(let i=1;i<e.level;i++)t+="    ";this.categories_options.push({name:t+e.name,value:e.id})}))},search_type_options(e,t){let i=[];return e.forEach((e=>{e.code==t&&e.data&&(i=e.data)})),i},validation(e,t){let i=void 0!=e&&""!==e;return void 0!=t&&t.forEach((t=>{"length"==t.type&&(i=i&&e.length>t.value)})),i},option_select(e,t,i){if(this.new_items[t][i]={...e},"batch_category"===i&&-1!=e.value){const i=this.new_items[t].article,n=this.currentItemsBatchs[i].find((t=>t.fields.batch==e.value));this.pushCurrentItem(n,t)}},close(){this.$emit("close"),this.$store.commit("open_close_new_position",!1)},tocopyCurrentItems(e){this.copyCurrentItems=e},async save(){if(this.try_accept=!0,this.acceptBtnDisable=!0,this.isValid){const e={products:[]},t={products:[]};this.new_items.forEach((i=>{const n={is_service:i.type.value-1,fields:{name:i.name,description:i.description,article:i.article,batch:i.batch,units:i.units.name,cost_price:i.cost_price,category:i.category.value}};i.new||(n.id=i.id),n.fields[i.wh.value]={count:i.count,reserve:0},n.fields[i.price_cat.value]=i.price,i.new||i?.newBatch?t.products.push(n):e.products.push(n)})),t.products.length&&await this.$store.dispatch("add_product",t),e.products.length&&(e.products.map((e=>{const t=this.new_items.find((t=>t.name==e.fields.name));let i=this.copyCurrentItems.find((t=>t.fields.name==e.fields.name)).fields[t.wh.value]?.count;!i&&(i=0),e.fields[t.wh.value]={count:t.count+i}})),await this.$store.dispatch("update_product",e)),this.$emit("save"),this.close()}this.acceptBtnDisable=!1},toggleShowOptions(e){const t=e=>{document.body.style.overflowY=e,this.$refs.tableWrapper.style.overflowX=e};t(e?"hidden":"auto")},calcOptionsPosition(){const e=this.targetAutocomplete?.getBoundingClientRect();this.optionsX=e?.x+"px",this.optionsY=e?.bottom-10+"px"}}},vt=()=>{(0,o.sj)((e=>({"59f80c5c":e.optionsX,"59f80c5d":e.optionsY})))},bt=gt.setup;gt.setup=bt?(e,t)=>(vt(),bt(e,t)):vt;var wt=gt;const yt=(0,q.Z)(wt,[["render",ft],["__scopeId","data-v-f90a8d62"]]);var Ct=yt;const kt={class:"wrapper"},St={class:"container"},xt={class:"header"},Dt={class:"content"},Tt={class:"table"},Et={class:"row title"},Ot={class:"item"},Ft=["onUpdate:modelValue"],It={class:"item"},Lt=["onUpdate:modelValue"],At={class:"item"},Nt={class:"select_input"},Pt={class:"item"},Mt={class:"select_input"},jt={class:"item"},$t=["onUpdate:modelValue","max"],Ut={class:"item"},qt=["onUpdate:modelValue"],Vt={class:"footer"};function Bt(e,t,i,s,a,l){const r=(0,n.up)("selector-vue"),c=(0,n.up)("btns-save-close");return(0,n.wg)(),(0,n.iD)("div",kt,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close_modal())}),(0,n._)("div",St,[(0,n._)("div",xt,[(0,n._)("label",null,(0,b.zw)(e.$t("ostatki.spis")),1)]),(0,n._)("div",Dt,[(0,n._)("table",Tt,[(0,n._)("thead",null,[(0,n._)("tr",Et,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.title,(e=>((0,n.wg)(),(0,n.iD)("td",{class:"item",key:e},(0,b.zw)(e),1)))),128))])]),(0,n._)("tbody",null,[(0,n.Wm)(o.W3,{name:"row"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.items_to_cancel,((t,i)=>((0,n.wg)(),(0,n.iD)("tr",{class:"row",key:t},[(0,n._)("td",Ot,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.fields.article=e,class:"input",disabled:""},null,8,Ft),[[o.nr,t.fields.article]])]),(0,n._)("td",It,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.fields.name=e,class:"input",disabled:""},null,8,Lt),[[o.nr,t.fields.name]])]),(0,n._)("td",At,[(0,n._)("div",Nt,[(0,n.Wm)(r,{options_props:[],onSelect:e.option_select1,selected_option:{name:t.fields?.batch,value:-1},disabled:!0},null,8,["onSelect","selected_option"])])]),(0,n._)("td",Pt,[(0,n._)("div",Mt,[(0,n.Wm)(r,{options_props:l.calcWhsOptions[t.id],onSelect:l.option_select,selected_option:t.fields.whToCancel,idx:i},null,8,["options_props","onSelect","selected_option","idx"])])]),(0,n._)("td",jt,[(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":e=>t.fields.countToCancel=e,max:t.fields?.whToCancel?.count,class:(0,b.C_)(["input",{not_valid:""==t.fields?.countToCancel&&a.try_accept}])},null,10,$t),[[o.nr,t.fields.countToCancel]])]),(0,n._)("td",Ut,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>t.fields.reason=e,class:(0,b.C_)(["input",{not_valid:""==t.fields?.reason&&a.try_accept}])},null,10,qt),[[o.nr,t.fields.reason]])])])))),128))])),_:1})])])]),(0,n._)("div",Vt,[(0,n.Wm)(c,{onClose:l.close_modal,onSave:l.save},null,8,["onClose","onSave"])])])])}var Ht=i(7720);const{t:Wt}=(0,me.j)();var Zt={components:{SelectorVue:Ht.Z,BtnsSaveClose:A.Z},props:{currentItems:{type:Array,required:!0,default(){return[]}}},data(){return{title:[Wt("ostatki.art"),Wt("ostatki.name"),Wt("ostatki.batch"),Wt("ostatki.wh"),Wt("ostatki.count"),Wt("ostatki.reason")],items_to_cancel:[],whs_options:[],try_accept:!1}},async mounted(){await this.$store.dispatch("get_all_fields"),(0,n.Y3)((()=>{this.items_to_cancel=[...this.currentItems],this.items_to_cancel.map((e=>{e.fields.countToCancel=0,e.fields.reason="",e.fields.whs_options=[],e.fields.whToCancel={name:Wt("global.notSelected"),value:-1}})),this.fillWhs()}))},computed:{fields(){return this.$store.state.fields.all_fields},countToCancel(){const e=[];return this.items_to_cancel.forEach((t=>e.push(t.fields.countToCancel))),e},calcWhsOptions(){const e={};return this.items_to_cancel.forEach((t=>{const i=[];t.fields.whs_options&&t.fields.whs_options.forEach((e=>{const n={};if(t.fields[e.value]){const i=this.allow_add_reserve?t.fields[e.value].count:t.fields[e.value].count-t.fields[e.value].reserve;n.name=e.name+" | "+i,n.value=e.value}i.push(n)})),e[t.id]=i})),e},allow_add_reserve(){return this.$store.state.account.account.config.allow_add_reserve}},watch:{countToCancel:{handler:function(){this.items_to_cancel.map((e=>{if(e.fields.whToCancel){let t=e.fields?.[e.fields.whToCancel?.value]?.count;void 0==t&&(t=0),e.fields.countToCancel>t&&(e.fields.countToCancel=t),e.fields.countToCancel<0&&(e.fields.countToCancel=0)}}))},deep:!0}},methods:{fillWhs(){this.fields.filter((e=>13==e.type&&"whs"!=e.code)).forEach((e=>this.whs_options.push({name:e.name,value:e.code}))),this.items_to_cancel.map((e=>{e.fields.whs_options=this.searchCatArr(this.whs_options,this.searchParentsCat(e.fields.category))}))},searchCatArr(e,t){const i=[];return e.forEach((e=>{t.includes(this.fields.find((t=>e.value==t.code)).category_id)&&i.push(e)})),i},searchParentsCat(e){let t=[];this.$store.state.categories.fields_properties.forEach((i=>{i.id==e&&(t=[...i.levels])}));const i=t.indexOf(0);return t=t.slice(0,i),t},async save(){this.try_accept=!0;let e=!0;if(this.items_to_cancel.forEach((t=>{e=e&&""!=t.fields.countToCancel&&""!=t.fields.reason&&void 0!=t.fields.countToCancel&&void 0!=t.fields.reason})),e){const e={products:[]};this.items_to_cancel.forEach((t=>{const i={id:t.id,fields:t.fields,comment:t.fields.reason};i.fields[t.fields.whToCancel.value].count=i.fields[t.fields.whToCancel.value].count-i.fields.countToCancel,delete i.fields.countToCancel,delete i.fields.reason,delete i.fields.whs_options,delete i.fields.whToCancel,e.products.push(i)})),await this.$store.dispatch("update_product",e),this.$emit("save"),this.close_modal()}},close_modal(){this.items_to_cancel=[],this.try_accept=!1,this.$emit("close"),this.$store.commit("open_close_cancel_position",!1)},option_select(e,t){this.items_to_cancel[t].fields.whToCancel=e}}};const zt=(0,q.Z)(Zt,[["render",Bt],["__scopeId","data-v-1fc3ea71"]]);var Rt=zt;const Yt=e=>((0,n.dD)("data-v-28a1ae7b"),e=e(),(0,n.Cn)(),e),Kt={key:0},Gt={key:1},Xt={class:"container"},Jt={class:"header"},Qt={class:"left"},ei={class:"title"},ti={key:0,class:"autorization"},ii={key:1,class:"autorization"},ni=["href"],oi={class:"right"},si={class:"modal_settings"},ai={class:"content"},li={class:"patterns"},ri={class:"header"},ci={class:"small"},di={class:"table"},ui={class:"row title"},pi=Yt((()=>(0,n._)("td",{class:"item"},null,-1))),fi={class:"add_button_container"},hi=Yt((()=>(0,n._)("div",{class:"icon"},null,-1))),_i=[hi],mi={class:"footer"};function gi(e,t,i,s,a,l){const r=(0,n.up)("document-setting-add-new"),c=(0,n.up)("DocumentSettingFieldsV2"),d=(0,n.up)("AppTablePreloader"),u=(0,n.up)("document-setting-doc-row"),p=(0,n.up)("btns-save-close");return(0,n.wg)(),(0,n.iD)(n.HY,null,[a.showAddNew?((0,n.wg)(),(0,n.j4)(r,{key:0,cur_doc:a.cur_doc,id:a.selected_doc_id,onClose:l.close_add_new,onSave_new_doc:e.save_new_doc,onSave_cur_doc:e.save_cur_doc},{title:(0,n.w5)((()=>[null===a.selected_doc_id?((0,n.wg)(),(0,n.iD)("span",Kt,(0,b.zw)(e.$t("DocumentSetting.templAdd")),1)):(0,n.kq)("",!0),null!==a.selected_doc_id?((0,n.wg)(),(0,n.iD)("span",Gt,(0,b.zw)(e.$t("DocumentSetting.templChange")),1)):(0,n.kq)("",!0)])),_:1},8,["cur_doc","id","onClose","onSave_new_doc","onSave_cur_doc"])):(0,n.kq)("",!0),a.showFields?((0,n.wg)(),(0,n.j4)(c,{key:1,onClose:l.close_fields},null,8,["onClose"])):(0,n.kq)("",!0),(0,n._)("div",{class:"app",ref:"app",onClick:t[7]||(t[7]=e=>a.show_settings?l.close_settings():null)},[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close())}),(0,n._)("div",Xt,[(0,n._)("div",Jt,[(0,n._)("div",Qt,[(0,n._)("div",ei,(0,b.zw)(e.$t("DocumentSetting.header")),1),l.account.is_google_auth?((0,n.wg)(),(0,n.iD)("div",ti,[(0,n.Uk)((0,b.zw)(e.$t("DocumentSetting.googleAuth",{name:l.account.google_user_name}))+" ",1),(0,n._)("button",{onClick:t[1]||(t[1]=e=>l.unAutorization())},(0,b.zw)(e.$t("DocumentSetting.exit")),1)])):((0,n.wg)(),(0,n.iD)("div",ii,[(0,n.Uk)((0,b.zw)(e.$t("DocumentSetting.googleNotAuth"))+" ",1),(0,n._)("button",{onClick:t[2]||(t[2]=e=>l.autorization())},(0,b.zw)(e.$t("DocumentSetting.enter")),1)])),l.account.config?.google_folder_id?((0,n.wg)(),(0,n.iD)("a",{key:2,href:"https://drive.google.com/drive/folders/"+l.account.config.google_folder_id,target:"blank",class:"a"},(0,b.zw)(e.$t("DocumentSetting.folder")),9,ni)):(0,n.kq)("",!0)]),(0,n._)("div",oi,[(0,n._)("button",{class:"settings_btn",onClick:t[3]||(t[3]=(0,o.iM)((e=>l.open_close_settings()),["stop"]))}),(0,n.Wm)(o.uT,{name:"modal"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",si,[(0,n._)("a",null,[(0,n._)("div",{class:(0,b.C_)(["modal_container",{disable:a.disable_fields_templates}]),onClick:t[4]||(t[4]=e=>l.open_fields())},(0,b.zw)(e.$t("DocumentSetting.templFields")),3)]),(0,n._)("a",null,[(0,n._)("div",{class:"modal_container",onClick:t[5]||(t[5]=e=>l.refresh_fields())},(0,b.zw)(e.$t("DocumentSetting.templUpdate")),1)])],512),[[o.F8,a.show_settings]])])),_:1})])]),(0,n._)("div",ai,[(0,n._)("div",li,[(0,n._)("div",ri,[(0,n._)("div",null,(0,b.zw)(e.$t("DocumentSetting.templDocs")),1),(0,n._)("p",ci,(0,b.zw)(e.$t("DocumentSetting.templDocsText")),1)]),l.isDataLoading?((0,n.wg)(),(0,n.j4)(d,{key:0,titles:a.title},null,8,["titles"])):((0,n.wg)(),(0,n.iD)("div",{key:1,class:(0,b.C_)(["main",{hiden:l.isDataLoading}])},[(0,n._)("table",di,[(0,n._)("thead",null,[(0,n._)("tr",ui,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.title,((e,t)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("td",{class:"item",key:e},(0,b.zw)(e),1)),[[o.F8,t<a.title.length-1||s.isTest]]))),128)),pi])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.documents_templates,(t=>((0,n.wg)(),(0,n.j4)(u,{key:t.id,doc:t,onOpen_edit:l.open_edit,onDelete_cur_doc:e.delete_cur_doc},null,8,["doc","onOpen_edit","onDelete_cur_doc"])))),128))])]),(0,n._)("div",fi,[(0,n._)("button",{class:"add_new_button",onClick:t[6]||(t[6]=e=>l.open_add_new())},_i)])],2))])]),(0,n._)("div",mi,[(0,n.Wm)(p,{onClose:l.close,show_save:!1},{close:(0,n.w5)((()=>[(0,n.Uk)((0,b.zw)(e.$t("global.back")),1)])),_:1},8,["onClose"])])])],512)],64)}const vi={class:"app_new"},bi={class:"container"},wi={class:"header"},yi={class:"content"},Ci={class:"label_input"},ki={class:"label"},Si={class:"label_input"},xi={class:"label"},Di={key:0,class:"label_input"},Ti={class:"label"},Ei={class:"label_input"},Oi={class:"label"},Fi={key:1,class:"label_input"},Ii={class:"label"},Li={class:"label_input"},Ai={class:"label"},Ni={class:"label_input"},Pi={class:"label"},Mi={key:2,class:"label_input"},ji={for:"PODocs"},$i={class:"footer"};function Ui(e,t,i,s,a,l){const r=(0,n.up)("selector-vue"),c=(0,n.up)("btns-save-close");return(0,n.wg)(),(0,n.iD)("div",vi,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close_modal())}),(0,n._)("div",bi,[(0,n._)("div",wi,[(0,n.WI)(e.$slots,"title",{},void 0,!0)]),(0,n._)("div",yi,[(0,n._)("div",Ci,[(0,n._)("label",ki,(0,b.zw)(e.$t("DocumentSetting.addNew.name")),1),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.name=e),class:(0,b.C_)(["input",{not_valid:a.try_accept&&""==a.name}])},null,2),[[o.nr,a.name]])]),(0,n._)("div",Si,[(0,n._)("label",xi,(0,b.zw)(e.$t("DocumentSetting.addNew.GID")),1),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>a.file=e),class:(0,b.C_)(["input",{not_valid:a.try_accept&&""==a.file}])},null,2),[[o.nr,a.file]])]),l.account.install?((0,n.wg)(),(0,n.iD)("div",Di,[(0,n._)("label",Ti,(0,b.zw)(e.$t("DocumentSetting.addNew.stepGen")),1),(0,n.Wm)(r,{options_props:a.copyPipelinesList,onSelect:l.select_pipelines_option,selected_option:a.status_id},null,8,["options_props","onSelect","selected_option"])])):(0,n.kq)("",!0),(0,n._)("div",Ei,[(0,n._)("label",Oi,(0,b.zw)(a.orientation.label),1),(0,n.Wm)(r,{options_props:a.orientation.list,onSelect:a.orientation.select,selected_option:a.orientation.selected},null,8,["options_props","onSelect","selected_option"])]),l.account.install?((0,n.wg)(),(0,n.iD)("div",Fi,[(0,n._)("label",Ii,(0,b.zw)(e.$t("DocumentSetting.addNew.url")),1),(0,n.Wm)(r,{options_props:a.lead_fields_options,onSelect:l.select_url_field,selected_option:a.url_field},null,8,["options_props","onSelect","selected_option"])])):(0,n.kq)("",!0),(0,n._)("div",Li,[(0,n._)("label",Ai,(0,b.zw)(e.$t("DocumentSetting.addNew.templType")),1),(0,n.Wm)(r,{options_props:a.type_options,onSelect:l.option_select1,selected_option:a.type},null,8,["options_props","onSelect","selected_option"])]),(0,n._)("div",Ni,[(0,n._)("label",Pi,(0,b.zw)(e.$t("DocumentSetting.addNew.downType")),1),(0,n.Wm)(r,{options_props:a.export_type_options,onSelect:l.option_select2,selected_option:a.export_type},null,8,["options_props","onSelect","selected_option"])]),s.isTest?((0,n.wg)(),(0,n.iD)("div",Mi,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"PODocs","onUpdate:modelValue":t[3]||(t[3]=e=>a.publicOrderVisible=e)},null,512),[[o.e8,a.publicOrderVisible]]),(0,n._)("label",ji,(0,b.zw)(e.$t("newOrder.docs")),1)])):(0,n.kq)("",!0)]),(0,n._)("div",$i,[(0,n.Wm)(c,{onClose:l.close_modal,onSave:l.save},null,8,["onClose","onSave"])])])])}const{t:qi}=(0,me.j)();var Vi={components:{SelectorVue:Ht.Z,BtnsSaveClose:A.Z},props:{cur_doc:{type:Object,required:!1,default(){return{}}},id:{type:Number,required:!1,default(){return null}}},emits:{close:null},setup(){return{t:qi,isTest:_e.Y}},data(){return{type_options:[],type:{name:"docx",value:"1"},export_type_options:[],export_type:{name:qi("DocumentSetting.addNew.is"),value:"1"},lead_fields_options:[],try_accept:!1,name:"",file:"",publicOrderVisible:!1,copyPipelinesList:[],status_id:{name:qi("global.notSelected"),value:"1"},url_field:{name:qi("global.notSelected"),value:"1"},orientation:{label:qi("DocumentSetting.addNew.orient.header"),selected:{name:qi("DocumentSetting.addNew.orient.kn"),value:0},list:[{name:qi("DocumentSetting.addNew.orient.kn"),value:"0"},{name:qi("DocumentSetting.addNew.orient.alb"),value:"1"}],select:e=>{this.orientation.selected=e}}}},async mounted(){await Promise.all([this.$store.dispatch("getLeadFieldsList"),this.$store.dispatch("getPipelinesListV2")]),this.copyLeadFieldsList=this.leadFieldsList,this.copyPipelinesList=this.pipelinesList,this.$store.state.documents.config.types?.forEach(((e,t)=>this.type_options.push({name:e,value:t}))),this.$store.state.documents.config.export_type?.forEach(((e,t)=>this.export_type_options.push({name:e,value:t}))),this.set_lead_fields_options(),(0,n.Y3)((()=>this.add_cur_doc()))},computed:{leadFieldsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldsList).map((t=>{const i=[];Object.entries(t[1].fields).forEach((e=>i.push({name:e[1],value:e[0]}))),t[1].fields=i,t[1].fields.unshift({name:qi("global.notSelected"),value:"-1"}),t[1].selected={name:qi("global.notSelected"),value:"-1"},e.push({value:t[0],...t[1]})})),e},pipelinesList(){const e=[];return e.push({name:qi("global.notSelected"),value:"-1"}),Object.entries(this.$store.state.account.pipelinesListV2).map((t=>{e.push({name:t[1].name,value:"optgroup"}),t[1].statuses.forEach((i=>e.push({name:i.name,value:t[0]+"#"+i.id,color:i.color,optgroup:!0})))})),e},account(){return this.$store.state.account.account}},methods:{save(){if(this.try_accept=!0,""!=this.name&&""!=this.file){const e={name:this.name,file:this.file,type:this.type.name,orientation:this.orientation?.selected?.value,export_type:this.export_type.name,status_id:this.status_id.value,url_field:this.url_field.value};_e.Y&&(e.is_public=this.publicOrderVisible),Object.keys(this.cur_doc).length>0?this.$store.dispatch("update_template",{...e,id:this.id}):this.$store.dispatch("add_template",e),this.close_modal()}},close_modal(){this.$emit("close")},option_select1(e){Object.assign(this.type,e)},option_select2(e){Object.assign(this.export_type,e)},select_pipelines_option(e){Object.assign(this.status_id,e)},select_url_field(e){Object.assign(this.url_field,e)},add_cur_doc(){if(Object.keys(this.cur_doc).length>0){this.name=this.cur_doc.name,this.file=this.cur_doc.file,_e.Y&&(this.publicOrderVisible=this.cur_doc.is_public);const e=(e,t,i,n)=>{let o={name:qi("global.notSelected"),value:"-1"};return e.forEach((e=>{(e[i]==t||n&&`${e[i]}`?.split("#")[1]===t)&&Object.assign(o,e)})),o};this.type=e(this.type_options,this.cur_doc.type,"name"),this.orientation.selected=e(this.orientation.list,this.cur_doc.orientation,"value"),this.status_id=e(this.copyPipelinesList,this.cur_doc.status_id,"value",!0),this.url_field=e(this.lead_fields_options,this.cur_doc.url_field,"value"),this.export_type=e(this.export_type_options,this.cur_doc.export_type,"name")}},set_lead_fields_options(){this.lead_fields_options.push({name:qi("global.notSelected"),value:"-1"}),this.copyLeadFieldsList.forEach((e=>{const t=e.name;this.lead_fields_options.push({name:t,value:"optgroup"});const i=e.fields.splice(1,999);i.forEach((e=>this.lead_fields_options.push({...e,optgroup:!0})))})),this.lead_fields_options.forEach((e=>e.value==this.$store.state.documents.config.field_docs?this.lead_fields=e:null))}}};const Bi=(0,q.Z)(Vi,[["render",Ui],["__scopeId","data-v-538a48b2"]]);var Hi=Bi;const Wi=e=>((0,n.dD)("data-v-28b4e026"),e=e(),(0,n.Cn)(),e),Zi={class:"app_fileds"},zi={class:"container"},Ri={class:"header"},Yi={class:"left"},Ki={class:"right"},Gi=Wi((()=>(0,n._)("div",{class:"icon"},null,-1))),Xi=[Gi],Ji={class:"content"},Qi={class:"top"},en=["onClick"],tn={class:"bottom"},nn={class:"mt-2"},on={class:"footer"};function sn(e,t,i,o,s,a){const l=(0,n.up)("DocumentSettingFieldsListV2");return(0,n.wg)(),(0,n.iD)("div",Zi,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>a.close())}),(0,n._)("div",zi,[(0,n._)("div",Ri,[(0,n._)("div",Yi,[(0,n._)("label",null,(0,b.zw)(e.$t("DocumentSetting.fields.header")),1)]),(0,n._)("div",Ki,[(0,n._)("button",{class:"btn_del",onClick:t[1]||(t[1]=e=>a.close())},Xi)])]),(0,n._)("div",Ji,[(0,n._)("div",Qi,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.tpl_fields,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e,onClick:t=>a.select_catalog(e),class:(0,b.C_)(["title",{selected:e.title==s.selected_catalog}])},(0,b.zw)(e.title),11,en)))),128))]),(0,n._)("div",tn,[(0,n._)("div",nn,[(0,n._)("small",null,(0,b.zw)(s.description),1)]),(0,n.Wm)(l,{list:s.list},null,8,["list"])])]),(0,n._)("div",on,[(0,n._)("button",{class:"btn btn1",onClick:t[2]||(t[2]=e=>a.close())},(0,b.zw)(e.$t("global.back")),1)])])])}const an={class:"list"},ln={class:"title"},rn={class:"mb-2"},cn={key:0,class:"fields"},dn=["onClick"],un={key:1,class:"row"},pn={class:"fields"},fn=["onClick"];function hn(e,t,i,s,a,l){return(0,n.wg)(),(0,n.iD)("div",an,[Array.isArray(i.list)?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(i.list,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"row",key:e},[(0,n._)("div",ln,(0,b.zw)(e.title),1),(0,n._)("div",rn,[(0,n._)("small",null,(0,b.zw)(e.description),1)]),e.list?((0,n.wg)(),(0,n.iD)("div",cn,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Object.entries(e.list),(([e,t])=>((0,n.wg)(),(0,n.iD)("button",{class:"field",key:e,onClick:t=>l.copy(e)},(0,b.zw)(t),9,dn)))),128)),(0,n.wy)((0,n._)("span",null,null,512),[[o.F8,!1]])])):(0,n.kq)("",!0)])))),128)):((0,n.wg)(),(0,n.iD)("div",un,[(0,n._)("div",pn,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Object.entries(i.list),(([e,t])=>((0,n.wg)(),(0,n.iD)("button",{class:"field",key:e,onClick:t=>l.copy(e)},(0,b.zw)(t),9,fn)))),128)),(0,n.wy)((0,n._)("span",null,null,512),[[o.F8,!1]])])]))])}const{t:_n}=(0,me.j)();var mn={props:{list:{type:Array,required:!0,default(){return[]}}},methods:{copy(e){navigator.clipboard.writeText(e).then((()=>{alert(_n("DocumentSetting.alert"))})).catch((()=>{alert(_n("DocumentSetting.alert2")+"\n"+_n("DocumentSetting.alert3"))}))}}};const gn=(0,q.Z)(mn,[["render",hn],["__scopeId","data-v-69afd4e5"]]);var vn=gn,bn={emits:{close:null},components:{DocumentSettingFieldsListV2:vn},data(){return{selected_catalog:"",description:"",list:[],tpl_fields:[]}},mounted(){this.tpl_fields=this.$store.state.documents.config.tpl_fields,this.tpl_fields[0].title&&this.select_catalog(this.tpl_fields[0])},computed:{},methods:{select_catalog(e){this.selected_catalog=e.title,this.list=e.list,this.description=e.description},close(){this.$emit("close")}}};const wn=(0,q.Z)(bn,[["render",sn],["__scopeId","data-v-28b4e026"]]);var yn=wn;const Cn=e=>((0,n.dD)("data-v-21e90d9a"),e=e(),(0,n.Cn)(),e),kn={class:"row"},Sn={class:"item"},xn={class:"item file"},Dn={class:"item"},Tn=["href"],En={class:"item"},On={class:"item"},Fn={key:0,class:"item"},In={class:"item"},Ln={class:"btns"},An=Cn((()=>(0,n._)("div",{class:"icon"},null,-1))),Nn=[An],Pn=["disabled"],Mn=Cn((()=>(0,n._)("div",{class:"icon"},null,-1))),jn=[Mn];function $n(e,t,i,o,s,a){return(0,n.wg)(),(0,n.iD)("tr",kn,[(0,n._)("td",Sn,(0,b.zw)(i.doc.name),1),(0,n._)("td",xn,(0,b.zw)(i.doc.file),1),(0,n._)("td",Dn,[(0,n._)("a",{href:a.getHref(i.doc.file,i.doc.type),target:"blank"},(0,b.zw)(e.$t("DocumentSetting.docRow.templ")),9,Tn)]),(0,n._)("td",En,(0,b.zw)(i.doc.type),1),(0,n._)("td",On,(0,b.zw)(i.doc.export_type),1),o.isTest?((0,n.wg)(),(0,n.iD)("td",Fn,(0,b.zw)(i.doc.is_public?e.$t("global.yes"):e.$t("global.no")),1)):(0,n.kq)("",!0),(0,n._)("td",In,[(0,n._)("div",Ln,[(0,n._)("button",{class:"btn_edit",onClick:t[0]||(t[0]=e=>a.open_edit(i.doc))},Nn),(0,n._)("button",{class:"btn_del",onClick:t[1]||(t[1]=e=>o.LB("del"+i.doc.id,a.delete_cur_doc(i.doc.id))),disabled:o.IBL("del"+i.doc.id)},jn,8,Pn)])])])}var Un=i(4869),qn={props:{doc:{type:Object,required:!0}},emits:{open_edit:null,delete_cur_doc:null},setup(){const{lockBtn:e,isBtnLocked:t}=(0,Un.L)();return{LB:e,IBL:t,isTest:_e.Y}},methods:{open_edit(e){this.$emit("open_edit",e)},async delete_cur_doc(e){await this.$store.dispatch("delete_template",{id:e})},getHref(e,t){let i="#";return"docx"==t&&(i=`https://docs.google.com/document/d/${e}/edit`),"xlsx"==t&&(i=`https://docs.google.com/spreadsheets/d/${e}/edit`),i}}};const Vn=(0,q.Z)(qn,[["render",$n],["__scopeId","data-v-21e90d9a"]]);var Bn=Vn,Hn=i(4547);const{t:Wn}=(0,me.j)();var Zn={components:{DocumentSettingAddNew:Hi,DocumentSettingFieldsV2:yn,DocumentSettingDocRow:Bn,BtnsSaveClose:A.Z,AppTablePreloader:Hn.Z},setup(){return{t:Wn,isTest:_e.Y}},data(){return{name:"",title:[Wn("DocumentSetting.titles.name"),Wn("DocumentSetting.titles.GID"),Wn("DocumentSetting.titles.temp"),Wn("DocumentSetting.titles.typeTemp"),Wn("DocumentSetting.titles.typeDown"),Wn("DocumentSetting.titles.POVisible")],lead_fields_options:[],lead_fields:{name:Wn("global.notSelected"),value:1},contact_name_type_options:[],contact_name_type:{name:Wn("global.notSelected"),value:-1},showAddNew:!1,showFields:!1,show_settings:!1,cur_doc:{},selected_doc_id:null,copy_documents:[],disable_fields_templates:!1,hook_download:"",hook_generate_doc:""}},computed:{documents_templates(){return this.$store.state.documents.templates},account(){return this.$store.state.account.account},leadFieldsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldsList).map((t=>{const i=[];Object.entries(t[1].fields).forEach((e=>i.push({name:e[1],value:e[0]}))),t[1].fields=i,t[1].fields.unshift({name:Wn("global.notSelected"),value:-1}),t[1].selected={name:Wn("global.notSelected"),value:-1},e.push({value:t[0],...t[1]})})),e},isDataLoading(){return this.$store.state.documents.isloadingDocumentsList}},async mounted(){await Promise.all([this.$store.dispatch("get_documents_v2"),this.$store.dispatch("get_account"),this.$store.dispatch("getLeadFieldsList")]),this.copyLeadFieldsList=this.leadFieldsList,this.hook_download=this.account.config?.hook_download,this.hook_generate_doc=this.account.config?.hook_generate_doc,this.set_lead_fields_options(),this.set_contact_name_type_options()},methods:{async autorization(){let e="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=450,height=600,left=500,top=200";const t=await this.$store.dispatch("getGoogleAuthUrl"),i=window.open(t,Wn("DocumentSetting.autoGen"),e),n=setInterval((()=>{i.closed&&(clearInterval(n),this.$store.dispatch("get_account"))}),1e3)},async unAutorization(){await this.$store.dispatch("googleLogOut"),this.$store.dispatch("get_account")},save(){this.$store.dispatch("update_account",{hook_download:this.hook_download,hook_generate_doc:this.hook_generate_doc,field_docs:this.lead_fields.value,contact_name_type:this.contact_name_type.value})},set_lead_fields_options(){this.lead_fields_options.push({name:Wn("global.notSelected"),value:-1}),this.copyLeadFieldsList.forEach((e=>{const t=e.name;this.lead_fields_options.push({name:t,value:"optgroup"});const i=e.fields.splice(1,999);i.forEach((e=>this.lead_fields_options.push({...e,optgroup:!0})))})),this.lead_fields_options.forEach((e=>e.value==this.$store.state.documents.config.field_docs?this.lead_fields=e:null))},set_contact_name_type_options(){this.$store.state.documents.config.contact_name_types?.forEach(((e,t)=>this.contact_name_type_options.push({name:e,value:t}))),this.contact_name_type_options?.forEach((e=>e.value==this.$store.state.account.account.config.contact_name_type?this.contact_name_type=e:null))},async refresh_fields(){this.disable_fields_templates=!0,await this.$store.dispatch("refresh_fields"),this.disable_fields_templates=!1},close(){this.$store.commit("open_close_document_setting",!1)},lead_fields_select(e){this.lead_fields=e},contact_name_type_select(e){this.contact_name_type=e},open_edit(e){this.cur_doc={...e},this.selected_doc_id=e.id,this.open_add_new()},open_modal(){this.$refs.app.style.pointerEvents="none"},close_modal(){this.$refs.app.style.pointerEvents="all"},open_add_new(){this.showAddNew=!0,this.open_modal()},close_add_new(){this.showAddNew=!1,this.cur_doc={},this.close_modal()},open_close_settings(){this.show_settings=!this.show_settings},close_settings(){this.show_settings=!1},open_fields(){this.disable_fields_templates||(this.showFields=!0,this.open_modal())},close_fields(){this.showFields=!1,this.close_modal()}}};const zn=(0,q.Z)(Zn,[["render",gi],["__scopeId","data-v-28a1ae7b"]]);var Rn=zn;const Yn=e=>((0,n.dD)("data-v-13ba1d85"),e=e(),(0,n.Cn)(),e),Kn={class:"bgc"},Gn={class:"container"},Xn={class:"header"},Jn={class:"top"},Qn=Yn((()=>(0,n._)("label",null,"Категории товаров",-1))),eo=Yn((()=>(0,n._)("br",null,null,-1))),to={class:"bottom"},io={class:"add_teleport",style:{"z-index":"100"},title:"Добавлние новой подкатегории"},no={class:"content"},oo=["onDragstart"],so={class:"input_name"},ao={title:"Изменение названия категории",class:"text_block"},lo=["onKeyup","onUpdate:modelValue","disabled"],ro=["onClick"],co=["onClick"],uo=Yn((()=>(0,n._)("div",{class:"rename btn"},null,-1))),po=[uo],fo=["onClick"],ho=Yn((()=>(0,n._)("div",{class:"remove btn"},null,-1))),_o=[ho],mo=["id","onClick","title"],go=Yn((()=>(0,n._)("div",{class:"add btn"},null,-1))),vo=[go],bo={class:"footer"};function wo(e,t,i,s,a,l){const r=(0,n.up)("btns-save-close"),c=(0,n.up)("ProductsCategoryRemoveModal"),d=(0,n.up)("draggable");return(0,n.wg)(),(0,n.iD)("div",{class:(0,b.C_)(["wrapper",{opened_close_remove_modal:a.del_modal_config.show}])},[(0,n._)("div",{class:"backdrop backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close_product_category())}),(0,n._)("div",Kn,[(0,n._)("div",Gn,[(0,n._)("div",Xn,[(0,n._)("div",Jn,[Qn,(0,n.Wm)(r,{onClose:l.close_product_category,onSave:e.save,show_save:!1},{close:(0,n.w5)((()=>[(0,n.Uk)("Назад")])),_:1},8,["onClose","onSave"])]),eo,(0,n._)("div",to,[a.del_modal_config.show?((0,n.wg)(),(0,n.j4)(n.lR,{key:0,to:"body"},[(0,n.Wm)(c,{onRemove:l.remove,onClose:l.closeRemoveModal},null,8,["onRemove","onClose"])])):(0,n.kq)("",!0),null!==a.target?((0,n.wg)(),(0,n.j4)(n.lR,{key:1,to:a.target},[(0,n._)("div",{class:"backdrop",onClick:t[1]||(t[1]=(0,o.iM)((e=>l.reset_fields_cat_name()),["stop"])),style:{"z-index":"99"}}),(0,n._)("div",io,[(0,n.wy)((0,n._)("input",{type:"text",class:"input_teleport","onUpdate:modelValue":t[2]||(t[2]=e=>a.fields_cat_name=e),ref:"input",onKeyup:[t[3]||(t[3]=(0,o.D2)((e=>l.add_new()),["enter"])),t[4]||(t[4]=(0,o.D2)((e=>l.reset_fields_cat_name()),["esc"]))]},null,544),[[o.nr,a.fields_cat_name]]),(0,n._)("button",{class:"button_teleport",onClick:t[5]||(t[5]=e=>l.add_new())},"ок")])],8,["to"])):(0,n.kq)("",!0)])]),(0,n._)("div",no,[(0,n.Wm)(d,{class:"dragArea",list:l.copy_fields_properties,onChange:l.changeData},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.copy_fields_properties,((e,i)=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,class:(0,b.C_)(["item",{darag:a.isDragged==i}]),style:(0,b.j5)({width:l.calculate_width(e.level)+"%"}),onDragstart:e=>a.isDragged=i,onDragend:t[6]||(t[6]=e=>a.isDragged=null)},[(0,n._)("div",so,[(0,n._)("div",ao,[(0,n.wy)((0,n._)("input",{type:"text",class:"input",onKeyup:(0,o.D2)((t=>l.rename(e.id)),["enter"]),"onUpdate:modelValue":t=>e.name=t,disabled:0===e.parent_id},null,40,lo),[[o.nr,e.name]])]),!a.all_old?.name?.includes(e.name)&&a.all_old?.id?.includes(e.id)?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:t=>l.rename(e.id),class:"btns",title:"Сохраняет название категории"},[(0,n._)("div",{class:(0,b.C_)(["btn",{apply:!a.confirm,confirm:a.confirm}])},null,2)],8,ro)):(0,n.kq)("",!0),!a.all_old?.name?.includes(e.name)&&a.all_old?.id?.includes(e.id)?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:t=>l.prevname(e.id),class:"btns",title:"Возвращает изначальное название"},po,8,co)):(0,n.kq)("",!0)]),(0,n._)("div",null,[0!==e.parent_id&&(!l.copy_fields_properties[i+1]||l.copy_fields_properties[i+1]?.level<=e.level)?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:(0,o.iM)((t=>l.setRemoveModalConfig(e.id,e.level)),["stop"]),class:"btns",title:"Удаление категории"},_o,8,fo)):(0,n.kq)("",!0),(0,n._)("button",{id:e.id,onClick:t=>a.selected_category_id=e.id,class:"btns",ref_for:!0,ref:t=>e.id===a.selected_category_id?a.target=t:null,title:null===a.target?"Добавлние новой подкатегории":null},vo,8,mo)])],46,oo)))),128))])),_:1},8,["list","onChange"])]),(0,n._)("div",bo,[(0,n.Wm)(r,{onClose:l.close_product_category,onSave:e.save,show_save:!1},{close:(0,n.w5)((()=>[(0,n.Uk)("Назад")])),_:1},8,["onClose","onSave"])])])])],2)}const yo=e=>((0,n.dD)("data-v-5ebf0944"),e=e(),(0,n.Cn)(),e),Co={class:"bg"},ko=yo((()=>(0,n._)("div",{class:"backdrop filter"},null,-1))),So={class:"modal"},xo={class:"header"},Do={class:"text"},To={class:"buttons"};function Eo(e,t,i,o,s,a){const l=(0,n.up)("BtnsSaveClose");return(0,n.wg)(),(0,n.iD)("div",Co,[ko,(0,n._)("div",So,[(0,n._)("h3",xo,(0,b.zw)(e.$t("removeCat.header")),1),(0,n._)("p",Do,(0,b.zw)(e.$t("removeCat.text")),1),(0,n._)("div",To,[(0,n.Wm)(l,{onClose:a.close,onSave:a.remove,disabledSave:i.disabled},{save:(0,n.w5)((()=>[(0,n.Uk)((0,b.zw)(e.$t("removeCat.del")),1)])),_:1},8,["onClose","onSave","disabledSave"])])])])}var Oo={components:{BtnsSaveClose:A.Z},props:{disabled:Boolean},created(){document.body.style.overflowY="hidden"},unmounted(){document.body.style.overflowY="auto"},methods:{close(){this.$emit("close")},remove(){this.$emit("remove")}}};const Fo=(0,q.Z)(Oo,[["render",Eo],["__scopeId","data-v-5ebf0944"]]);var Io=Fo,Lo={components:{BtnsSaveClose:A.Z,ProductsCategoryRemoveModal:Io,draggable:N.J},data(){return{fields_cat_name:"",selected_category_id:null,target:null,all_old:{},isDragged:null,confirm:!1,del_modal_config:{show:!1,id:null,level:null}}},async mounted(){this.$store.dispatch("get_fields_properties").then((()=>this.get_all_old()))},computed:{copy_fields_properties(){return this.$store.state.categories.fields_properties}},watch:{target:{handler:function(){(0,n.Y3)((()=>{null!==this.target&&this.$refs.input.focus()}))},deep:!0}},methods:{changeData(e){const t=e.moved.newIndex,i=[...this.copy_fields_properties],n={id:i[t].id,parent_id:i[t-1].id,name:""};this.$store.dispatch("update_fields_properties",n)},get_all_old(){const e={name:[],id:[],parent_id:[],fields_id:[],level:[],levels:[]};this.$store.state.categories.fields_properties.forEach((t=>Object.entries(t).forEach((t=>e[t[0]]?.push(t[1]))))),Object.assign(this.all_old,e)},add_new(){const e=this.copy_fields_properties.find((e=>e.id===this.selected_category_id));e.level+1<=10&&""!=this.fields_cat_name&&(this.$store.dispatch("add_fields_properties",{name:this.fields_cat_name,parent_id:e.id}),this.reset_fields_cat_name())},async rename(e){const t=[...this.copy_fields_properties].find((t=>t.id===e)),i={id:t.id,parent_id:"",name:t.name};await this.$store.dispatch("update_fields_properties",i),this.confirm=!0,setTimeout((()=>{this.confirm=!1,this.get_all_old()}),1e3)},prevname(e){this.$store.state.categories.fields_properties.map((t=>{const i=()=>{let t="";return this.all_old.id.forEach(((i,n)=>i===e?t=this.all_old.name[n]:null)),t};t.id===e&&(t.name=i(),this.rename(e))}))},reset_fields_cat_name(){this.selected_category_id=null,this.fields_cat_name="",this.target=null},calculate_width(e){let t=100;return t*=.95**(e-1),t},setRemoveModalConfig(e,t){this.del_modal_config.level=t,this.del_modal_config.id=e,this.del_modal_config.show=!0},remove(){1!=this.del_modal_config.level&&this.$store.dispatch("delete_fields_properties",{id:this.del_modal_config.id}),this.closeRemoveModal()},closeRemoveModal(){this.del_modal_config.show=!1},close_product_category(){this.$store.commit("open_close_product_category",!1)}}};const Ao=(0,q.Z)(Lo,[["render",wo],["__scopeId","data-v-13ba1d85"]]);var No=Ao;const Po=e=>((0,n.dD)("data-v-684e82af"),e=e(),(0,n.Cn)(),e),Mo={class:"wrapper"},jo={class:"bgc"},$o={class:"container"},Uo={class:"header"},qo={class:"top"},Vo=Po((()=>(0,n._)("label",null,"Свойства товаров",-1))),Bo=Po((()=>(0,n._)("br",null,null,-1))),Ho={class:"links"},Wo=["onClick"],Zo={class:"bottom"},zo={class:"content"},Ro=Po((()=>(0,n._)("h6",null,"Поля товаров в сделке",-1))),Yo={class:"rows"},Ko={class:"row"},Go={key:0,class:""},Xo=Po((()=>(0,n._)("th",{class:"item item_field title"},[(0,n._)("div",{class:"copy_fields"},[(0,n._)("span",null,"Поле")])],-1))),Jo=Po((()=>(0,n._)("th",{class:"item item_type"},"Тип",-1))),Qo={class:"item item_icon title"},es={class:"w-min mx-auto"},ts=Po((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," visibility ",-1))),is={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},ns={class:"item item_icon title"},os={class:"w-min mx-auto"},ss=Po((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," edit ",-1))),as={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},ls={class:"item item_icon title"},rs={class:"w-min mx-auto"},cs=Po((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," title ",-1))),ds={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},us={key:1,class:"item item_icon title"},ps={class:"w-min mx-auto"},fs=Po((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," content_copy ",-1))),hs={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},_s={class:"item"},ms={key:0,class:"p-[10px] border border-[#c9c9c9]"},gs={class:"flex flex-row"},vs=["disabled","onClick"],bs=["disabled","onClick"],ws={class:"item"},ys={key:0},Cs=["onUpdate:modelValue","onKeyup","onChange"],ks={class:"item selectors"},Ss={key:0,class:"type_selector_options"},xs=["onUpdate:modelValue","onChange"],Ds=["onClick"],Ts=["onClick"],Es={class:"box item text-lg"},Os=["id","disabled","onUpdate:modelValue","onChange"],Fs=["for"],Is={class:"box item text-lg"},Ls=["id","disabled","onUpdate:modelValue","onChange"],As=["for"],Ns={class:"box item text-lg"},Ps=["id","disabled","onUpdate:modelValue","onChange"],Ms=["for"],js={key:1,class:"box item text-lg"},$s=["id","onUpdate:modelValue","onChange"],Us=["for"],qs={class:"item del_sell"},Vs=["onClick"],Bs=["onClick"],Hs={key:0,class:"p-[10px] border border-[#c9c9c9]"},Ws={class:"item"},Zs=["onUpdate:modelValue","onKeyup"],zs={class:"item selectors"},Rs={key:0,class:"type_selector_options"},Ys=["onUpdate:modelValue"],Ks=["onClick"],Gs=["onClick"],Xs={class:"box item text-lg"},Js=["id","disabled","onUpdate:modelValue"],Qs=["for"],ea={class:"box item text-lg"},ta=["id","disabled","onUpdate:modelValue"],ia=["for"],na={class:"box item text-lg"},oa=["id","disabled","onUpdate:modelValue"],sa=["for"],aa={key:1,class:"box item text-lg"},la=["id","onUpdate:modelValue"],ra=["for"],ca={class:"item del_sell"},da=["onClick"],ua=["onClick"],pa={class:"footer"};function fa(e,t,i,s,a,l){const r=(0,n.up)("btns-save-close"),c=(0,n.up)("SelectorVue");return(0,n.wg)(),(0,n.iD)("div",Mo,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close_product_properties())}),(0,n._)("div",jo,[(0,n._)("div",$o,[(0,n._)("div",Uo,[(0,n._)("div",qo,[Vo,(0,n.Wm)(r,{onClose:l.close_product_properties,show_save:!1},{close:(0,n.w5)((()=>[(0,n.Uk)("Назад")])),_:1},8,["onClose"])]),Bo,(0,n._)("div",Ho,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.selected_fields_properties,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:(0,b.C_)(["triangle",{triangle_last:a.selected_fields_properties.length-1==t}]),key:e.id,onClick:e=>l.prev_cat(t)},(0,b.zw)(e.name),11,Wo)))),128))]),(0,n._)("div",Zo,[(0,n.Wm)(c,{options_props:a.data_fields_properties.items,onSelect:l.option_select_fields_properties,selected_option:a.data_fields_properties.selected},null,8,["options_props","onSelect","selected_option"])])]),(0,n._)("div",zo,[Ro,(0,n._)("table",Yo,[(0,n._)("tr",Ko,[s.isTest&&1==a.selected_fields_properties.length?((0,n.wg)(),(0,n.iD)("th",Go)):(0,n.kq)("",!0),Xo,Jo,(0,n._)("th",Qo,[(0,n._)("div",es,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[1]||(t[1]=e=>a.toolTips.visibility=!0),onMouseleave:t[2]||(t[2]=e=>a.toolTips.visibility=!1)},[ts,a.toolTips.visibility?((0,n.wg)(),(0,n.iD)("div",is," Видимость в сделке ")):(0,n.kq)("",!0)],32)])]),(0,n._)("th",ns,[(0,n._)("div",os,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[3]||(t[3]=e=>a.toolTips.edit=!0),onMouseleave:t[4]||(t[4]=e=>a.toolTips.edit=!1)},[ss,a.toolTips.edit?((0,n.wg)(),(0,n.iD)("div",as," Редактирование в сделке ")):(0,n.kq)("",!0)],32)])]),(0,n._)("th",ls,[(0,n._)("div",rs,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[5]||(t[5]=e=>a.toolTips.title=!0),onMouseleave:t[6]||(t[6]=e=>a.toolTips.title=!1)},[cs,a.toolTips.title?((0,n.wg)(),(0,n.iD)("div",ds," Заголовок товара в сделке ")):(0,n.kq)("",!0)],32)])]),s.isTest?((0,n.wg)(),(0,n.iD)("th",us,[(0,n._)("div",ps,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[7]||(t[7]=e=>a.toolTips.content_copy=!0),onMouseleave:t[8]||(t[8]=e=>a.toolTips.content_copy=!1)},[fs,a.toolTips.content_copy?((0,n.wg)(),(0,n.iD)("div",hs," Дублировать в новые партии ")):(0,n.kq)("",!0)],32)])])):(0,n.kq)("",!0),(0,n._)("th",_s,[l.showUpdateAllFieldsBtn?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save_all btn_yellow",onClick:t[9]||(t[9]=e=>l.updateAllFields())}," Сохранить все поля ")):(0,n.kq)("",!0)])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.copy_fields,((e,t)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("tr",{class:(0,b.C_)(["row",{load:a.is_loading}]),key:e.id},[s.isTest&&1==a.selected_fields_properties.length?((0,n.wg)(),(0,n.iD)("th",ms,[(0,n._)("div",gs,[(0,n._)("button",{class:"bar_item_icon bar_item_icon_up",disabled:0===t,onClick:e=>l.changeTitleSort(t,!0)},null,8,vs),(0,n._)("button",{class:"bar_item_icon bar_item_icon_down",disabled:t===a.copy_fields.length-1,onClick:e=>l.changeTitleSort(t,!1)},null,8,bs)])])):(0,n.kq)("",!0),(0,n._)("td",ws,[e.is_system?((0,n.wg)(),(0,n.iD)("span",ys,(0,b.zw)(e.name),1)):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text",class:(0,b.C_)(["input new_item_input",{error:e.nameError}]),"onUpdate:modelValue":t=>e.name=t,onKeyup:(0,o.D2)((e=>l.update_field(t,["name"])),["enter"]),onChange:t=>e.changeName=!0},null,42,Cs)),[[o.nr,e.name]])]),(0,n._)("td",ks,[(0,n.Wm)(c,{options_props:l.types,onSelect:l.option_select_type,selected_option:l.search_type(e.type),disabled:!0,idx:t},null,8,["options_props","onSelect","selected_option","idx"]),5==e.type||6==e.type?((0,n.wg)(),(0,n.iD)("div",Ss,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.data,((i,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"type_selector_option",key:s},[(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.data[s]=t,onChange:t=>e.changeData=!0},null,40,xs),[[o.nr,e.data[s]]]),(0,n._)("button",{class:"del_button",onClick:i=>(l.remove_selector_option(t,s),e.changeData=!0)},null,8,Ds)])))),128)),(0,n._)("button",{onClick:i=>(l.add_selector_option(t),e.changeData=!0),class:"add_button"},null,8,Ts)])):(0,n.kq)("",!0)]),(0,n._)("td",Es,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"nb",disabled:e.lead_config.visible.disabled,"onUpdate:modelValue":t=>e.lead_config.visible.value=t,onChange:t=>e.changeLeadConfig=!0},null,40,Os),[[o.e8,e.lead_config.visible.value]]),(0,n._)("label",{for:t+"nb"},null,8,Fs)]),(0,n._)("td",Is,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"n",disabled:e.lead_config.editable.disabled,"onUpdate:modelValue":t=>e.lead_config.editable.value=t,onChange:t=>e.changeLeadConfig=!0},null,40,Ls),[[o.e8,e.lead_config.editable.value]]),(0,n._)("label",{for:t+"n"},null,8,As)]),(0,n._)("td",Ns,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"nt",disabled:e.lead_config.title_visible.disabled,"onUpdate:modelValue":t=>e.lead_config.title_visible.value=t,onChange:t=>e.changeLeadConfig=!0},null,40,Ps),[[o.e8,e.lead_config.title_visible.value]]),(0,n._)("label",{for:t+"nt"},null,8,Ms)]),s.isTest?((0,n.wg)(),(0,n.iD)("td",js,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"nd","onUpdate:modelValue":t=>e.config.double_in_new_bath=t,onChange:t=>e.changeConfig=!0},null,40,$s),[[o.e8,e.config.double_in_new_bath]]),(0,n._)("label",{for:t+"nd"},null,8,Us)])):(0,n.kq)("",!0),(0,n._)("td",qs,[(0,n.wy)((0,n._)("button",{class:"del_btn",onClick:t=>l.delete_field(e.id)},null,8,Vs),[[o.F8,!e.is_system]]),e.changeName||e.changeData||e.changeLeadConfig||e.changeConfig?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save btn_blue",onClick:i=>l.update_field(t,[e.changeName?"name":null,e.changeData?"data":null,e.changeLeadConfig?"lead_config":null,e.changeConfig?"config":null])}," Сохранить ",8,Bs)):(0,n.kq)("",!0)])],2)),[[o.F8,a.selected_fields_properties.at(-1)?.id===e.category_id]]))),128)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.new_fields,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{class:"row",key:e.id},[s.isTest&&1==a.selected_fields_properties.length?((0,n.wg)(),(0,n.iD)("th",Hs)):(0,n.kq)("",!0),(0,n._)("td",Ws,[(0,n.wy)((0,n._)("input",{type:"text",class:(0,b.C_)(["input new_item_input",{error:e.nameError}]),"onUpdate:modelValue":t=>e.name=t,onKeyup:(0,o.D2)((i=>l.add_new(e,t)),["enter"])},null,42,Zs),[[o.nr,e.name]])]),(0,n._)("td",zs,[(0,n.Wm)(c,{options_props:l.types,onSelect:l.option_select_new_field_type,selected_option:l.search_type(e.type),idx:t},null,8,["options_props","onSelect","selected_option","idx"]),5==a.new_fields[t].type||6==a.new_fields[t].type?((0,n.wg)(),(0,n.iD)("div",Rs,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.data,((i,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"type_selector_option",key:s},[(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.data[s]=t},null,8,Ys),[[o.nr,e.data[s]]]),(0,n._)("button",{class:"del_button",onClick:e=>l.remove_new_fields_selector_option(t,s)},null,8,Ks)])))),128)),(0,n._)("button",{onClick:e=>l.add_new_fields_selector_option(t),class:"add_button"},null,8,Gs)])):(0,n.kq)("",!0)]),(0,n._)("td",Xs,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"nb1",disabled:a.new_fields[t].disabled?.visible.value,"onUpdate:modelValue":e=>a.new_fields[t].lead_config.visible.value=e},null,8,Js),[[o.e8,a.new_fields[t].lead_config.visible.value]]),(0,n._)("label",{for:t+"nb1"},null,8,Qs)]),(0,n._)("td",ea,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"n1",disabled:a.new_fields[t].disabled?.editable.value,"onUpdate:modelValue":e=>a.new_fields[t].lead_config.editable.value=e},null,8,ta),[[o.e8,a.new_fields[t].lead_config.editable.value]]),(0,n._)("label",{for:t+"n1"},null,8,ia)]),(0,n._)("td",na,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"n2",disabled:a.new_fields[t].lead_config.title_visible.disabled,"onUpdate:modelValue":e=>a.new_fields[t].lead_config.title_visible.value=e},null,8,oa),[[o.e8,a.new_fields[t].lead_config.title_visible.value]]),(0,n._)("label",{for:t+"n2"},null,8,sa)]),s.isTest?((0,n.wg)(),(0,n.iD)("td",aa,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t+"n3","onUpdate:modelValue":e=>a.new_fields[t].config.double_in_new_bath=e},null,8,la),[[o.e8,a.new_fields[t].config.double_in_new_bath]]),(0,n._)("label",{for:t+"n3"},null,8,ra)])):(0,n.kq)("",!0),(0,n._)("td",ca,[(0,n._)("button",{class:"del_btn",onClick:e=>l.delete_new_field(t)},null,8,da),""!=e.name?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save btn_blue",onClick:i=>l.add_new(e,t)}," Сохранить ",8,ua)):(0,n.kq)("",!0)])])))),128))]),(0,n._)("button",{onClick:t[10]||(t[10]=e=>l.add_new_field()),class:"add_new_button"})]),(0,n._)("div",pa,[(0,n.Wm)(r,{onClose:l.close_product_properties,show_save:!1},{close:(0,n.w5)((()=>[(0,n.Uk)("Назад")])),_:1},8,["onClose"])])])])])}var ha={components:{SelectorVue:Ht.Z,BtnsSaveClose:A.Z},setup(){return{isTest:_e.Y}},data(){return{toolTips:{visibility:!1,edit:!1,title:!1,content_copy:!1},copy_fields:[],copy_fields_properties:[],selected_fields_properties:[],new_fields:[],data_fields_properties:{items:null,selected:{name:"Выбор подкатегории",value:-1}},is_loading:!1}},async mounted(){this.is_loading=!0,await Promise.all([this.$store.dispatch("get_types"),this.$store.dispatch("get_fields_properties")]),this.copy_fields_properties=[...this.$store.state.categories.fields_properties],this.option_select_fields_properties({value:this.copy_fields_properties.filter((e=>0===e.parent_id))[0]}),this.get_fields(),this.is_loading=!1},computed:{showUpdateAllFieldsBtn(){let e=!1;return this.copy_fields.forEach((t=>{e=e||t.changeName||t.changeData||t.changeLeadConfig||t.changeConfig})),e},types(){const e=[];return Object.entries(this.$store.state.fields.types).forEach((t=>{e.push({name:t[1],value:t[0]})})),e},properties_for_selector(){const e=[];return this.copy_fields_properties.forEach((t=>{let i="";for(let e=1;e<t.level;e++)i+="    ";e.push({name:i+t.name,value:t.id})})),e}},methods:{add_new_field(){const e={id:this.copy_fields.length+1,category_id:this.selected_fields_properties.at(-1).id,type:3,name:"",data:[],nameError:!1,lead_config:{visible:{disabled:!1,value:!1},editable:{disabled:!1,value:!1},title_visible:{disabled:!1,value:!1}},config:{double_in_new_bath:!1}};this.new_fields.push(e)},async add_new(e,t){const i=(e,t)=>{let i=0;return e&&t&&(i=2),e&&!t&&(i=1),e||t||(i=0),!e&&t&&(i=-1),i},n={visible:i(e.lead_config.visible.value,e.lead_config.visible.disabled),editable:i(e.lead_config.editable.value,e.lead_config.editable.disabled)},o={type:e.type,name:e.name,category_id:e.category_id,lead_config:n,data:e.data},s=await this.$store.dispatch("add_field",o),a="This field name exist."==s.error;a&&(this.new_fields[t]["nameError"]=!0),s.error||(this.new_fields.splice(this.new_fields.indexOf(e),1),this.get_fields())},prev_cat(e){this.selected_fields_properties.splice(e+1),this.feel_data_fields_properties(this.selected_fields_properties.at(-1).id)},feel_data_fields_properties(e){this.data_fields_properties.items=this.preparing_fields_properties(e),this.get_fields()},preparing_fields_properties(e){const t=[],i=this.copy_fields_properties.filter((t=>t.parent_id==e));return i.forEach((e=>t.push({name:e.name,value:e}))),t},option_select_fields_properties(e){const t=JSON.parse(JSON.stringify(e));this.selected_fields_properties.push(t.value),this.feel_data_fields_properties(e.value.id)},updateAllFields(){this.copy_fields.map(((e,t)=>{const i=e.changeName||e.changeData||e.changeLeadConfig||e.changeConfig;i&&this.update_field(t,[e.changeName?"name":null,e.changeData?"data":null,e.changeLeadConfig?"lead_config":null,e.changeConfig?"config":null]),e.changeName=!1,e.changeData=!1,e.changeLeadConfig=!1,e.changeConfig=!1}))},async update_field(e,t){const i={};i["id"]=this.copy_fields[e]["id"],t.forEach((t=>{null!=t&&(i[t]={},"lead_config"==t?(i[t].visible=this.copy_fields[e][t].visible.value?1:0,i[t].editable=this.copy_fields[e][t].editable.value?1:0,i[t].title_visible=this.copy_fields[e][t].title_visible.value?1:0,i[t].title_sort=this.copy_fields[e][t].title_sort):"config"==t?i[t].double_in_new_bath=this.copy_fields[e][t].double_in_new_bath?1:0:i[t]=this.copy_fields[e][t])})),this.copy_fields[e]?.is_system&&delete i?.name;const n=await this.$store.dispatch("update_fields",i),o="This field name exist."==n.error;this.copy_fields[e]["nameError"]=o,n.error||(this.copy_fields[e].changeName=!1,this.copy_fields[e].changeData=!1,this.copy_fields[e].changeLeadConfig=!1,this.copy_fields[e].changeConfig=!1)},async get_fields(){this.is_loading=!0,await this.$store.dispatch("get_fields",this.selected_fields_properties.at(-1).id),this.copy_fields=[...this.$store.state.fields.fields],this.copy_fields.map((e=>{e["nameError"]=!1,e["changeName"]=!1,e["changeData"]=!1,e["changeLeadConfig"]=!1,e["changeConfig"]=!1;const t=e.lead_config.visible;e.lead_config.visible={disabled:-1==t||2==t,value:t>0};const i=e.lead_config.editable;e.lead_config.editable={disabled:-1==i||2==i,value:i>0};const n=e.lead_config.title_visible;e.lead_config.title_visible={disabled:-1==n||2==n,value:n>0}})),this.is_loading=!1},search_type(e){return this.types.filter((t=>t.value==e))[0]},delete_new_field(e){const t=this.selected_fields_properties.at(-1),i=t.fields_id.length-this.new_fields.length+e;this.new_fields.splice(e,1),this.copy_fields_properties.map((e=>e.id===t.id?e.fields_id.splice(i,1):null)),t.fields_id.splice(i,1)},async delete_field(e){await this.$store.dispatch("delete_field",e),this.get_fields()},option_select_type(e,t){this.copy_fields[t].type=e},option_select_new_field_type(e,t){this.new_fields[t].type=e.value},async option_select_copy_fields(e){const t=await this.$store.dispatch("get_fields_not_save",e.value),i=t.filter((e=>!e.is_system));i.forEach((async e=>{const t={id:e.id,category_id:this.selected_fields_properties.at(-1).id};await this.$store.dispatch("update_fields",t)})),this.get_fields()},changeTitleSort(e,t){t?(this.copy_fields[e].lead_config.title_sort-=1,this.copy_fields[e-1].lead_config.title_sort+=1):(this.copy_fields[e].lead_config.title_sort+=1,this.copy_fields[e+1].lead_config.title_sort-=1),this.update_field(e,["lead_config"]),t?this.update_field(e-1,["lead_config"]):this.update_field(e+1,["lead_config"]),this.get_fields()},add_selector_option(e){null==this.copy_fields[e].data&&(this.copy_fields[e].data=[]),this.copy_fields[e].data.push("")},remove_selector_option(e,t){this.copy_fields[e].data.splice(t,1)},add_new_fields_selector_option(e){this.new_fields[e].data.push("")},remove_new_fields_selector_option(e,t){this.new_fields[e].data.splice(t,1)},close_product_properties(){this.$store.commit("open_close_product_properties",!1)}}};const _a=(0,q.Z)(ha,[["render",fa],["__scopeId","data-v-684e82af"]]);var ma=_a,ga=i.p+"img/genezis.b493be58.jpg",va=i.p+"img/lo.12da3521.jpg";i.p;const ba=e=>((0,n.dD)("data-v-4eaed5ef"),e=e(),(0,n.Cn)(),e),wa={class:"wrapper"},ya={class:"container"},Ca={class:"header"},ka=ba((()=>(0,n._)("div",{class:"icon"},null,-1))),Sa=[ka],xa={class:"content"},Da={class:"item relative"},Ta={class:"relative"},Ea=ba((()=>(0,n._)("img",{class:"absolute -bottom-3 -left-3 rounded-full w-10",src:"https://wp.static-cdn-shsp.com/wp-content/uploads/2017/06/amo_fon.png"},null,-1))),Oa={href:" https://www.amocrm.ru/oauth/?state=%7B%22external_source%22:%22gosklad%22%7D&client_id=d9322b36-0001-4269-bb61-976571e8a51a",target:"blank"},Fa=["disabled"],Ia={key:0},La=["disabled"],Aa={class:"item"},Na=ba((()=>(0,n._)("div",{class:"relative"},[(0,n._)("img",{class:"icon",src:va}),(0,n._)("img",{class:"absolute -bottom-3 -left-3 rounded-full w-10",src:"https://wp.static-cdn-shsp.com/wp-content/uploads/2017/06/amo_fon.png"})],-1))),Pa={href:"https://www.amocrm.ru/oauth/?client_id=a4864c29-6b9b-470b-bb0e-9a1c22496087",target:"blank"},Ma={class:"btn btn_dark_blue"},ja={class:"item"},$a=ba((()=>(0,n._)("img",{class:"icon",src:"https://wp.static-cdn-shsp.com/wp-content/uploads/2017/06/amo_fon.png"},null,-1))),Ua=["href","inert"],qa=["disabled"],Va={key:0},Ba={class:"btn btn_dark_blue"},Ha=ba((()=>(0,n._)("div",{class:"footer"},null,-1)));function Wa(e,t,i,o,s,a){return(0,n.wg)(),(0,n.iD)("div",wa,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>o.close())}),(0,n._)("div",ya,[(0,n._)("div",Ca,[(0,n._)("label",null,(0,b.zw)(e.$t("Integrations.header")),1),(0,n._)("button",{class:"btn_del",onClick:t[1]||(t[1]=e=>o.close())},Sa)]),(0,n._)("div",xa,[o.account.install?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",Da,[(0,n._)("div",Ta,[(0,n._)("img",{class:"icon",src:ga,onClick:t[2]||(t[2]=e=>o.route("genezis"))}),Ea]),(0,n._)("a",Oa,[(0,n._)("button",{class:"btn btn_dark_blue",disabled:o.account?.g_install},(0,b.zw)(o.account?.g_install?e.$t("Integrations.btnInstalled"):e.$t("Integrations.btnInstall")),9,Fa)]),o.account?.g_install?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("small",Ia,(0,b.zw)(e.$t("Integrations.oneCText")),1)),(0,n._)("a",{onClick:t[3]||(t[3]=e=>o.route("genezis"))},[(0,n._)("button",{class:"btn btn_dark_blue",disabled:!o.account?.g_install},(0,b.zw)(e.$t("Integrations.btnSettings")),9,La)])]),(0,n._)("div",Aa,[Na,(0,n._)("a",Pa,[(0,n._)("button",Ma,(0,b.zw)(e.$t("Integrations.btnInstall")),1)]),(0,n._)("small",null,(0,b.zw)(e.$t("Integrations.free")),1)]),(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),(0,n._)("div",ja,[$a,(0,n._)("a",{href:o.urlSutupInAmoCrm,target:"blank",inert:o.account?.install},[(0,n._)("button",{class:"btn btn_dark_blue",disabled:o.account?.install},(0,b.zw)(o.account?.install?e.$t("Integrations.btnInstalled"):e.$t("Integrations.btnInstall")),9,qa)],8,Ua),o.account?.install?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("small",Va,(0,b.zw)(e.$t("Integrations.amoError")),1)),o.account?.install?((0,n.wg)(),(0,n.iD)("a",{key:1,onClick:t[4]||(t[4]=e=>o.route("amoCRM"))},[(0,n._)("button",Ba,(0,b.zw)(e.$t("Integrations.btnSettings")),1)])):(0,n.kq)("",!0)])]),Ha])])}var Za=i(678),za=i(1952),Ra={setup(){const e=(0,Za.tv)(),t=(0,n.Fl)((()=>M.Z.state.account.account?.config?.g_enabled)),i=(0,n.Fl)((()=>M.Z.state.account.account)),o=(0,n.Fl)((()=>M.Z.state.account.user)),s=t=>{a(),e.push("/"+t)},a=()=>M.Z.commit("openCloseThirdPpartyIntegrations",!1),l=encodeURI(`https://www.amocrm.ru/oauth/?state={"external_source":"gs", "user_id":${o.value?.id}, "account_id:${i.value?.id}"}&client_id=5cd3ee16-5f4c-4b3f-828f-9f575bcaeb2e`),r=(0,n.Fl)((()=>454==M.Z.state.account?.account?.id));return{oneC:t,account:i,route:s,close:a,urlSutupInAmoCrm:l,amoTest:r,inFrame:za.V}}};const Ya=(0,q.Z)(Ra,[["render",Wa],["__scopeId","data-v-4eaed5ef"]]);var Ka=Ya;const Ga=e=>((0,n.dD)("data-v-8812bfcc"),e=e(),(0,n.Cn)(),e),Xa={class:"wrapper"},Ja={class:"bgc"},Qa={class:"container"},el={class:"header"},tl=Ga((()=>(0,n._)("label",null,"Настройки синхронизации GoСклад с товарами amoCRM",-1))),il={class:"content"},nl={class:"sync"},ol={class:"list"},sl={class:"label_input"},al=Ga((()=>(0,n._)("label",null," Выберите список товаров из amoCRM для синхронизации ",-1))),ll={class:"label_input"},rl=Ga((()=>(0,n._)("label",null," Скрытие штатной вкладки amoCRM с товарами. В штатной вкладке с товарами так же можно прикреплять товары к сделкам, но количество товара на GoСклад учитываться не будет. ",-1))),cl={class:"autosync"},dl=["id","onUpdate:modelValue"],ul=["for"],pl={class:"fields"},fl=Ga((()=>(0,n._)("h6",null," Настройка соответствий полей amoCRM-товаров и свойств товаров на GoСклад ",-1))),hl=Ga((()=>(0,n._)("p",{class:"small"}," Указание полей сравнения нужно для того, чтобы по этим полям искать дубли товаров в процессе синхронизации списков товаров amoCRM и GoСклад, которые были добавлены вручную. Если не будет указано ни одного поля, товары будут добавляться без поиска дублей ",-1))),_l=Ga((()=>(0,n._)("div",{class:"row"},[(0,n._)("span",null,"Имя поля amoCRM-товара"),(0,n._)("span",null,"Имя поля товара на GoСклад"),(0,n._)("span",{class:"center"},"Сравнение")],-1))),ml=["onUpdate:modelValue"],gl={class:"checkbox_input"},vl=["id","onUpdate:modelValue","disabled"],bl=["for"],wl={class:"footer"};function yl(e,t,i,s,a,l){const r=(0,n.up)("btns-save-close"),c=(0,n.up)("SelectorVue");return(0,n.wg)(),(0,n.iD)("div",Xa,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close())}),(0,n._)("div",Ja,[(0,n._)("div",Qa,[(0,n._)("div",el,[tl,(0,n.Wm)(r,{onClose:l.close,onSave:l.save},(0,n.Nv)({close:(0,n.w5)((()=>[(0,n.Uk)("Назад")])),_:2},[void 0]),1032,["onClose","onSave"])]),(0,n._)("div",il,[(0,n._)("div",nl,[(0,n._)("div",ol,[(0,n._)("div",sl,[al,(0,n.Wm)(c,{options_props:a.copyProductLists,onSelect:t[2]||(t[2]=e=>l.optionSelectSync(e,"amo_product_list")),selected_option:a.selectedAmoProductList},null,8,["options_props","selected_option"])]),(0,n._)("div",ll,[rl,(0,n.Wm)(c,{options_props:[{name:"Не выбрано",value:""},...a.copyLeadFieldGroupsList],onSelect:t[3]||(t[3]=e=>l.optionSelectSync(e,"amo_leads_group_hide")),selected_option:a.selectedAmoLeadsGroupHide},null,8,["options_props","selected_option"])])])]),-1!=a.selectedAmoProductList.value?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",cl,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.autosyncValues,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"list",key:e},[!e.test?.value||s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("h6",null,(0,b.zw)(e.label),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.autosyncProducts,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"row",key:t.id},[e.test?.id!==t.id||s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:t.id+e.value,"onUpdate:modelValue":i=>t[e.value]=i},null,8,dl),[[o.e8,t[e.value]]]),(0,n._)("label",{for:t.id+e.value},(0,b.zw)(t.label),9,ul)],64)):(0,n.kq)("",!0)])))),128))],64)):(0,n.kq)("",!0)])))),128))]),(0,n._)("div",pl,[fl,hl,_l,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.copySyncFields.amoFields,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"row",key:e.field},[(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.name=t,disabled:""},null,8,ml),[[o.nr,e.name]]),(0,n.Wm)(c,{class:"selector",options_props:e.fields,onSelect:e=>l.select(e,t),selected_option:e.selected,disabled:e.disabled},null,8,["options_props","onSelect","selected_option","disabled"]),(0,n._)("div",gl,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:e.field,"onUpdate:modelValue":t=>e.product_comparison=t,disabled:e?.product_comparison_disabled},null,8,vl),[[o.e8,e.product_comparison]]),(0,n._)("label",{for:e.field},null,8,bl)])])))),128))])],64)):(0,n.kq)("",!0)]),(0,n._)("div",wl,[(0,n.Wm)(r,{onClose:l.close,onSave:l.save},(0,n.Nv)({close:(0,n.w5)((()=>[(0,n.Uk)("Назад")])),_:2},[void 0]),1032,["onClose","onSave"])])])])])}var Cl={components:{BtnsSaveClose:A.Z,SelectorVue:Ht.Z},setup(){return{isTest:_e.Y}},data(){return{copySyncFields:{fields:[],amoFields:[]},copyConfing:{reserve_off:[],write_off:[]},copyLeadFieldGroupsList:[],copyProductLists:[],selectedAmoProductList:{name:"Не выбрано",value:-1},amoLeadsGroupHide:[],selectedAmoLeadsGroupHide:{name:"Не выбрано",value:""},fieldsProductComparison:[{name:"по названию",value:1},{name:"по названию и артикулу",value:2},{name:"по названию, артикулу и партии",value:3}],productComparisonSelectedField:{name:"по названию",value:1},autosyncProducts:[{id:1,productValue:!1,listProductValue:!1,label:"GoСклад -> amoCRM"},{id:2,productValue:!1,listProductValue:!1,label:"amoCRM -> GoСклад"}],autosyncValues:[{value:"productValue",label:"Автосинхронизация товаров"},{value:"listProductValue",label:"Автосинхронизация списка товаров в сделке",test:{value:!1,id:2}}]}},async mounted(){await Promise.all([this.$store.dispatch("get_account"),this.$store.dispatch("getProductLists"),this.$store.dispatch("getLeadFieldsList"),this.$store.dispatch("getLeadFieldGroupsList")]),this.copyLeadFieldsList=this.leadFieldsList,this.copyLeadFieldGroupsList=this.leadFieldGroupsList,this.copyConfing=this.$store.state.account.account.config,this.updateFields(),this.fillCopyProductLists(),this.fillAmoLeadsGroupHide(),this.searchSelectedAmoProductList(),this.searchSelectedAmoLeadsGroupHide(),this.searchAutosyncProducts()},computed:{account(){return this.$store.state.account.account},productLists(){return this.$store.state.account.productLists},leadFieldsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldsList).map((t=>{const i=[];Object.entries(t[1].fields).forEach((e=>i.push({name:e[1],value:e[0]}))),t[1].fields=i,t[1].fields.unshift({name:"Не выбрано",value:-1}),t[1].selected={name:"Не выбрано",value:-1},e.push({value:t[0],...t[1]})})),e},leadFieldGroupsList(){const e=[];return Object.entries(this.$store.state.account.leadFieldGroupsList).forEach((t=>e.push({name:t[1],value:t[0]}))),e}},methods:{save(){const e={auto_sync_products_gs_amo:this.autosyncProducts[0].productValue?1:0,auto_sync_products_amo_gs:this.autosyncProducts[1].productValue?1:0,auto_sync_orders_gs_amo:this.autosyncProducts[0].listProductValue?1:0,auto_sync_orders_amo_gs:this.autosyncProducts[1].listProductValue?1:0};if(-1!=this.selectedAmoProductList.value){const t=[];this.copySyncFields.amoFields.forEach((e=>-1!=e.selected.value?t.push({field:e.field,value:e.selected.value,compare:e.product_comparison?1:0}):null)),t.length&&(e.sync_products_fields=t)}this.$store.dispatch("update_account",Object.assign(this.copyConfing,e)),this.close()},close(){this.$store.commit("openCloseSyncSettings",!1)},async updateFields(){await Promise.all([this.$store.dispatch("getSyncFields"),this.$store.dispatch("get_account")]),this.fillCopySyncFields(),this.searchSelectedSyncFields()},select(e,t){this.copySyncFields.amoFields[t].selected=e},searchSelectedSyncFields(){this.copySyncFields.amoFields.map((e=>{this.$store.state.account.account?.config?.sync_products_fields.forEach((t=>{if(t.field==e.field){const i=this.copySyncFields.fields[e.type].filter((e=>e.value==t.value));i.length&&(e.selected=i[0],e.product_comparison=!!t?.compare)}}))}))},fillCopySyncFields(){const e=this.$store.state.account.syncFields,t=e.fields,i=[];Object.entries(t).forEach((e=>{const t=[{name:"Не выбрано",value:-1}];Object.entries(e[1]).forEach((e=>t.push({name:e[1],value:e[0]}))),i[e[0]]=t})),this.copySyncFields.fields=i;const n=e.amo_fields,o=[];Object.entries(n).forEach((e=>o.push({name:e[1].name,type:e[1].type,fields:i[e[1].type],field:e[0],selected:{name:"Не выбрано",value:-1},disabled:0,product_comparison:!1}))),this.copySyncFields.amoFields=o},fillCopyProductLists(){const e=[{name:"Не выбрано",value:-1}];Object.entries(this.productLists).forEach((t=>e.push({name:t[1],value:t[0]}))),this.copyProductLists=e},searchSelectedAmoProductList(){this.copyProductLists.forEach((e=>{e.value==this.copyConfing.amo_product_list&&(this.selectedAmoProductList=e)}))},optionSelectSync(e,t){-1==e.value?this.copyConfing[t]="0":this.copyConfing[t]=e.value,"amo_leads_group_hide"==t&&(this.selectedAmoLeadsGroupHide=e),"amo_product_list"==t&&(this.selectedAmoProductList=e)},fillAmoLeadsGroupHide(){this.amoLeadsGroupHide.push({name:"Не выбрано",value:""}),this.copyLeadFieldsList.forEach((e=>{this.amoLeadsGroupHide.push({name:e.name,value:e.value})}))},searchSelectedAmoLeadsGroupHide(){this.leadFieldGroupsList.forEach((e=>{e.value==this.copyConfing?.amo_leads_group_hide&&(this.selectedAmoLeadsGroupHide=e)}))},searchAutosyncProducts(){this.autosyncProducts[0].productValue=!!this.account?.config?.auto_sync_products_gs_amo,this.autosyncProducts[1].productValue=!!this.account?.config?.auto_sync_products_amo_gs,this.autosyncProducts[0].listProductValue=!!this.account?.config?.auto_sync_orders_gs_amo,this.autosyncProducts[1].listProductValue=!!this.account?.config?.auto_sync_orders_amo_gs},selectProductComparisonField(e){this.productComparisonSelectedField=e}}};const kl=(0,q.Z)(Cl,[["render",yl],["__scopeId","data-v-8812bfcc"]]);var Sl=kl;const xl={class:"wrapper"},Dl={class:"container"},Tl={class:"header"},El={class:"content"},Ol={class:"table"},Fl={class:"row title"},Il={class:"item"},Ll=["onUpdate:modelValue"],Al={class:"item"},Nl=["onUpdate:modelValue"],Pl={class:"item"},Ml={class:"select_input"},jl={class:"item"},$l={class:"select_input"},Ul={class:"item"},ql={class:"select_input"},Vl={class:"item"},Bl=["onUpdate:modelValue","max","disabled"],Hl={class:"item"},Wl=["onUpdate:modelValue","disabled"],Zl={class:"item"},zl=["onClick"],Rl={class:"w-full my-2 flex justify-end items-center"},Yl={class:"footer"};function Kl(e,t,i,s,a,l){const r=(0,n.up)("AppInputSelect"),c=(0,n.up)("selector-vue"),d=(0,n.up)("btns-save-close");return(0,n.wg)(),(0,n.iD)("div",xl,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close_modal())}),(0,n._)("div",Dl,[(0,n._)("div",Tl,[(0,n._)("label",null,(0,b.zw)(e.$t("ostatki.per")),1)]),(0,n._)("div",El,[(0,n._)("table",Ol,[(0,n._)("thead",null,[(0,n._)("tr",Fl,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.title,(e=>((0,n.wg)(),(0,n.iD)("td",{class:"item",key:e},(0,b.zw)(e),1)))),128))])]),(0,n._)("tbody",null,[(0,n.Wm)(o.W3,{name:"row"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.itemsForMove,((i,s)=>((0,n.wg)(),(0,n.iD)("tr",{class:"row",key:i},[(0,n._)("td",Il,[i.isNew?((0,n.wg)(),(0,n.j4)(r,{key:0,list:a.autocomplete.list,countLettersReq:3,onChangeInputValue:t[1]||(t[1]=e=>a.autocomplete.getList("article",e)),onSelect:e=>l.autocompleteSelect(e,s)},null,8,["list","onSelect"])):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text","onUpdate:modelValue":e=>i.fields.article=e,class:"input",disabled:""},null,8,Ll)),[[o.nr,i.fields.article]])]),(0,n._)("td",Al,[i.isNew?((0,n.wg)(),(0,n.j4)(r,{key:0,list:a.autocomplete.list,countLettersReq:3,onChangeInputValue:t[2]||(t[2]=e=>a.autocomplete.getList("name",e)),onSelect:e=>l.autocompleteSelect(e,s)},null,8,["list","onSelect"])):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text","onUpdate:modelValue":e=>i.fields.name=e,class:"input",disabled:""},null,8,Nl)),[[o.nr,i.fields.name]])]),(0,n._)("td",Pl,[(0,n._)("div",Ml,[(0,n.Wm)(c,{options_props:[],onSelect:e.option_select1,selected_option:{name:i.fields?.batch,value:-1},disabled:!0},null,8,["onSelect","selected_option"])])]),(0,n._)("td",jl,[(0,n._)("div",$l,[(0,n.Wm)(c,{options_props:l.calcWhsOptions[i.id],onSelect:t[3]||(t[3]=(...e)=>l.option_select("cancel",...e)),selected_option:i.fields?.whToCancel,class:(0,b.C_)({not_valid_selector:-1==i.fields.whToCancel?.value&&a.try_accept}),disabled:i.isNew,idx:s},null,8,["options_props","selected_option","class","disabled","idx"])])]),(0,n._)("td",Ul,[(0,n._)("div",ql,[(0,n.Wm)(c,{options_props:l.calcWhsOptions[i.id],onSelect:t[4]||(t[4]=(...e)=>l.option_select("move",...e)),selected_option:i.fields?.whToMove,class:(0,b.C_)({not_valid_selector:(i.fields.whToCancel?.value==i.fields.whToMove?.value||-1==i.fields.whToMove?.value)&&a.try_accept}),disabled:i.isNew,idx:s},null,8,["options_props","selected_option","class","disabled","idx"])])]),(0,n._)("td",Vl,[(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":e=>i.fields.countToMove=e,max:i.fields?.countToMove?.count,class:(0,b.C_)(["input",{not_valid:""==i.fields?.countToMove&&a.try_accept}]),disabled:i.isNew},null,10,Bl),[[o.nr,i.fields.countToMove]])]),(0,n._)("td",Hl,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":e=>i.fields.reason=e,class:(0,b.C_)(["input",{not_valid:""==i.fields?.reason&&a.try_accept}]),disabled:i.isNew},null,10,Wl),[[o.nr,i.fields.reason]])]),(0,n._)("td",Zl,[(0,n._)("button",{class:"del_btn",onClick:e=>l.delItem(s)},null,8,zl)])])))),128))])),_:1})])]),(0,n._)("div",Rl,[(0,n._)("button",{class:"add_new_button",onClick:t[5]||(t[5]=e=>l.pushNewItem())},"+")])]),(0,n._)("div",Yl,[(0,n.Wm)(d,{onClose:l.close_modal,onSave:l.save},null,8,["onClose","onSave"])])])])}var Gl=i(8890);const{t:Xl}=(0,me.j)();var Jl={components:{SelectorVue:Ht.Z,AppInputSelect:Gl.Z,BtnsSaveClose:A.Z},props:{currentItems:{type:Array,required:!0,default(){return[]}}},setup(){return{t:Xl}},data(){return{title:[Xl("ostatki.art"),Xl("ostatki.name"),Xl("ostatki.batch"),Xl("ostatki.wh1"),Xl("ostatki.wh2"),Xl("ostatki.count"),Xl("ostatki.reason"),""],itemsForMove:[],whs_options:[],try_accept:!1,autocomplete:{list:[],value:"",getList:async function(e,t){this.value=t;const i=await M.Z.dispatch("autocomplete_"+e,this.value);void 0!=i&&(this.list=[...i],this.list.map((t=>{t.name=t.fields[e],t.value=t.id})))}}}},async mounted(){await Promise.all([this.$store.dispatch("get_fields_properties"),this.$store.dispatch("get_all_fields")]),(0,n.Y3)((()=>{this.itemsForMove=[...this.currentItems],this.itemsForMove.map((e=>{e.fields.countToMove=0,e.fields.reason="",e.fields.whs_options=[],e.fields.whToCancel={name:Xl("global.notSelected"),value:-1},e.fields.whToMove={name:Xl("global.notSelected"),value:-1}})),this.fillWhs()}))},computed:{fields(){return this.$store.state.fields.all_fields},itemsCountToMove(){const e=[];return this.itemsForMove.forEach((t=>e.push(t.fields.countToMove))),e},allow_add_reserve(){return this.$store.state.account.account.config.allow_add_reserve},calcWhsOptions(){const e={};return this.itemsForMove.forEach((t=>{const i=[];t.fields.whs_options.forEach((e=>{const n={};if(t.fields[e.value]){const i=this.allow_add_reserve?t.fields[e.value].count:t.fields[e.value].count-t.fields[e.value].reserve;n.name=e.name+" | "+i,n.value=e.value}i.push(n)})),e[t.id]=i})),e}},watch:{itemsCountToMove:{handler:function(){this.itemsForMove.map((e=>{if(e.fields.whToCancel){const t=e.fields?.[e.fields.whToCancel?.value]?.count;e.fields.countToMove>t&&(e.fields.countToMove=t),e.fields.countToMove<0&&(e.fields.countToMove=0)}}))},deep:!0}},methods:{delItem(e){this.itemsForMove.splice(e,1)},autocompleteSelect(e,t){e.fields.countToMove=0,e.fields.reason="",e.fields.whs_options=[],e.fields.whToCancel={name:Xl("global.notSelected"),value:-1},e.fields.whToMove={name:Xl("global.notSelected"),value:-1},this.itemsForMove.splice(t,1,e),this.fillWhs()},pushNewItem(){this.itemsForMove.push({isNew:!0,fields:{countToMove:0,reason:"",whs_options:[],whToCancel:{name:Xl("global.notSelected"),value:-1},whToMove:{name:Xl("global.notSelected"),value:-1}}})},fillWhs(){this.fields.filter((e=>13==e.type&&"whs"!=e.code)).forEach((e=>this.whs_options.push({name:e.name,value:e.code}))),this.itemsForMove.map((e=>{e.fields.whs_options=this.searchCatArr(this.whs_options,this.searchParentsCat(e.fields.category))}))},async save(){this.try_accept=!0;let e=!0;if(this.itemsForMove.forEach((t=>{e=e&&""!=t.fields.countToMove&&""!=t.fields.reason&&void 0!=t.fields.countToMove&&void 0!=t.fields.reason&&t.fields.whToCancel.value!=t.fields.whToMove.value&&-1!=t.fields.whToCancel.value&&-1!=t.fields.whToMove.value})),e){const e={products:[]};this.itemsForMove.forEach((t=>{const i={id:t.id,wh_from:t.fields.whToCancel.value,wh_to:t.fields.whToMove.value,count:t.fields.countToMove,comment:t.fields.reason};e.products.push(i)})),await this.$store.dispatch("transfer_product",e),this.$emit("save"),this.close_modal()}},searchCatArr(e,t){const i=[];return e.forEach((e=>{t.includes(this.fields.find((t=>e.value==t.code)).category_id)&&i.push(e)})),i},searchParentsCat(e){let t=[];this.$store.state.categories.fields_properties.forEach((i=>{i.id==e&&(t=[...i.levels])}));const i=t.indexOf(0);return t=t.slice(0,i),t},close_modal(){this.try_accept=!1,this.$emit("close"),this.$store.commit("openCloseMoveProductsBetweenWhs",!1)},option_select(e,t,i){"cancel"==e&&(this.itemsForMove[i].fields.whToCancel=t,this.itemsForMove[i].fields.countToMove=0),"move"==e&&(this.itemsForMove[i].fields.whToMove=t)}}};const Ql=(0,q.Z)(Jl,[["render",Kl],["__scopeId","data-v-2644ac8a"]]);var er=Ql;const tr={class:"wrapper"},ir={class:"bgc"},nr={class:"header"},or={class:"main"},sr={class:"small"},ar={class:"top"},lr={class:"template"},rr=["title"],cr={key:0,class:"compare"},dr={class:"table",ref:"gridRef"},ur=["id","onUpdate:modelValue"],pr=["for"],fr=["id","onUpdate:modelValue"],hr=["for"],_r={class:"footer"};function mr(e,t,i,s,a,l){const r=(0,n.up)("SelectorVue"),c=(0,n.up)("ImportStuffSelector"),d=(0,n.up)("BtnsSaveClose");return(0,n.wg)(),(0,n.iD)("div",tr,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>s.close())}),(0,n._)("div",ir,[(0,n._)("header",nr,[(0,n._)("h1",null,(0,b.zw)(e.$t("import.header")),1),(0,n._)("button",{class:"btn cross",onClick:t[1]||(t[1]=e=>s.close())})]),(0,n._)("main",or,[(0,n._)("small",sr,(0,b.zw)(e.$t("import.max",{count:s.max_import_product})),1),(0,n._)("div",ar,[(0,n._)("div",lr,[(0,n.Wm)(r,{options_props:s.templates.list,selected_option:s.templates.selected,onSelect:s.selectTemplate},null,8,["options_props","selected_option","onSelect"]),s.templates.selected.showTemplateName?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:0,class:"input",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.templates.newTemplateName=e),title:s.t("import.inf")},null,8,rr)),[[o.nr,s.templates.newTemplateName]]):(0,n.kq)("",!0)]),s.isAnyCompares?((0,n.wg)(),(0,n.iD)("div",cr,[(0,n.Wm)(r,{options_props:s.addOrUpdateFields.list,selected_option:s.templates.selected.addOrUpdateFields.selected,onSelect:s.addOrUpdateFields.select},null,8,["options_props","selected_option","onSelect"])])):(0,n.kq)("",!0)]),(0,n._)("div",dr,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.tableData,((e,t)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,b.C_)(["item",{title:0==t}]),key:e},(0,b.zw)(null===e||void 0===e?e:String(e).slice(0,200)),3)))),128))],64)))),256)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.gridCount,(i=>((0,n.wg)(),(0,n.iD)("div",{class:"item",key:i},[(0,n.Wm)(c,{options_props:s.importStuffFields,selected_option:s.selectedFields?s.selectedFields[i-1]:{},onToggleShowOptions:s.toggleShowOptions,onSelect:e=>s.selectStuffField(e,i-1)},null,8,["options_props","selected_option","onToggleShowOptions","onSelect"]),-1!==s.selectedFields[i-1]?.value?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"ImportStuffCompares"+i,"onUpdate:modelValue":e=>s.templates.selected.compares[i-1]=e,onChange:t[3]||(t[3]=e=>s.checkIsSavedTemplate())},null,40,ur),[[o.e8,s.templates.selected.compares[i-1]]]),(0,n._)("label",{for:"ImportStuffCompares"+i},(0,b.zw)(e.$t("import.sr")),9,pr)],64)):(0,n.kq)("",!0),s.selectedFields[i-1]?.isList?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:"ImportStuffListAdd"+i,"onUpdate:modelValue":e=>s.selectedFields[i-1].listAdd=e,onChange:t[4]||(t[4]=e=>s.checkIsSavedTemplate())},null,40,fr),[[o.e8,s.selectedFields[i-1].listAdd]]),(0,n._)("label",{for:"ImportStuffListAdd"+i},(0,b.zw)(e.$t("import.dob")),9,hr)],64)):(0,n.kq)("",!0)])))),128))],512)]),(0,n._)("footer",_r,[(0,n.Wm)(d,{onClose:s.close,onSave:s.save,disabledSave:s.noOneSelectedFields||s.disabledSave},{save:(0,n.w5)((()=>[(0,n.Uk)((0,b.zw)(e.$t("import.im")),1)])),_:1},8,["onClose","onSave","disabledSave"])])])])}function gr(){const{t:e}=(0,me.j)(),t=(0,P.qj)([]),i=(0,P.qj)([]),n=async()=>{i.push({name:e("import.noimp"),value:-1,code:"not to import"}),await M.Z.dispatch("get_types");const t=M.Z.state.fields.types,n=Object.entries(await M.Z.dispatch("importStuffFields"));n.forEach((e=>{i.push({name:t[e[0]],value:"optgroup"});const n=5==e[0]||6==e[0];e[1].map((e=>{e.value=e.code,e.optgroup=!0,e.isList=n,n&&(e.listAdd=!1)})),i.push(...e[1])}))};n();const o=e=>{for(let n=0;n<e;n++)t.push(i[0])};return{selectedImportStuffFields:t,importStuffFields:i,fillSelectedImportStuffFields:o}}var vr=i(2524);const br={components:{SelectorVue:Ht.Z,ImportStuffSelector:ht.Z,BtnsSaveClose:A.Z},setup(){const{addNotification:e}=(0,vr.l)(),{t:t}=(0,me.j)(),{selectedImportStuffFields:i,importStuffFields:o,fillSelectedImportStuffFields:s}=gr(),a=(0,P.qj)({newTemplateName:"",selected:{name:t("import.bes"),value:0,showTemplateName:!1,compares:[],selectedFields:[],addOrUpdateFields:{selected:{name:t("import.add"),value:"add"}}},list:[{name:t("import.bes"),value:0,showTemplateName:!1,compares:[],selectedFields:[],addOrUpdateFields:{selected:{name:t("import.add"),value:"add"}}},{name:t("import.new"),value:1,showTemplateName:!0,compares:[],selectedFields:[],addOrUpdateFields:{selected:{name:"Только добавлять",value:"add"}}}]});(0,n.YP)(a,(()=>a.selected?.showTemplateName?null:a.newTemplateName=""));const l=(0,n.Fl)((()=>a.selected.selectedFields)),r=(0,n.Fl)((()=>l.value.every((e=>-1===e.value))));a.selected=a.list[0],a.list.find((e=>1==e.value)).selectedFields=i,a.list.find((e=>0==e.value)).selectedFields=i;const c=(0,P.iH)("false"),d=e=>{c.value=!0,a.selected=JSON.parse(JSON.stringify(e)),(0,n.Y3)((()=>c.value=!1))};(0,n.bv)((async()=>{const e=await M.Z.dispatch("importStuffTemplates");e.map((e=>{e.addOrUpdateFields={selected:k.searchOptionByValue(e.mode)},e.showTemplateName=!1,e.value=Math.round(1e5*Math.random()),e.selectedFields=e.fields,e.compares=[],e.selectedFields?.map((i=>{""===i.name&&""===i.code||null===i.name&&null===i.code?(i.name=t("import.noimp"),i.value=-1,i.code="not to import"):(i.value=i.code,void 0!=i.add&&(i.listAdd=i.add,i.isList=!0)),e.compares.push(i.compare)}));const i=_-e.selectedFields.length;if(i>0)for(let n=0;n<i;n++)e.selectedFields.push({name:t("import.noimp"),value:-1,code:"not to import"});a.list.push(e)}))}));const u=(0,n.Fl)((()=>0!==a.selected.value&&1!==a.selected.value)),p=(0,P.iH)(null),f=(0,n.Fl)((()=>M.Z.state.products.importStuff)),h=(0,n.Fl)((()=>f.value.data)),_=h.value[0].length;s(_);const m=e=>{p.value.style.overflowX=e?"hidden":"scroll"},g=()=>{if(u.value&&!c.value){a.newTemplateName=a.selected.name;const e=a.selected;a.selected=a.list.find((e=>1==e.value)),a.selected.compares=[...e.compares],a.selected.selectedFields=[...e.selectedFields],a.selected.addOrUpdateFields.selected=e.addOrUpdateFields.selected}},v=(e,t)=>{g(),a.selected.selectedFields[t]=e},b=()=>M.Z.commit("openCloseImportStuff"),w=()=>{y.value=!0;const i=[];a.selected.selectedFields.forEach(((e,t)=>{const n={name:e.name,code:e.code,compare:!!a.selected.compares[t]};e.isList&&(n["add"]=e.listAdd),-1!==e.value?i.push(n):i.push({name:"",code:""})}));const n={file:f.value.file,isNewTemplate:1==a.selected.value&&""!==a.newTemplateName,selectedFields:i,addOrUpdateFields:a.selected.addOrUpdateFields.selected.value};0!==a.selected.value&&""!==a.newTemplateName&&(n["templateName"]=a.newTemplateName?a.newTemplateName:a.selected.name),M.Z.dispatch("importStart",n),e(0,t("import.notifH"),t("import.notifT")),b(),y.value=!1},y=(0,P.iH)(!1),C=(0,n.Fl)((()=>a.selected.compares.some((e=>e)))),k=(0,P.qj)({list:[{name:t("import.add"),value:"add"},{name:t("import.update"),value:"update"},{name:t("import.add_update"),value:"add_update"}],select:e=>(a.selected.addOrUpdateFields.selected=e,g()),searchOptionByValue:e=>k.list.find((t=>t.value==e))}),S=(0,n.Fl)((()=>M.Z.state.account?.account?.max_import_product));return{gridCount:_,templates:a,selectTemplate:d,close:b,toggleShowOptions:m,gridRef:p,tableData:h,selectStuffField:v,selectedImportStuffFields:i,importStuffFields:o,save:w,isAnyCompares:C,addOrUpdateFields:k,checkIsSavedTemplate:g,selectedFields:l,noOneSelectedFields:r,max_import_product:S,disabledSave:y,t:t}}},wr=()=>{(0,o.sj)((e=>({e40fe43a:e.gridCount})))},yr=br.setup;br.setup=yr?(e,t)=>(wr(),yr(e,t)):wr;var Cr=br;const kr=(0,q.Z)(Cr,[["render",mr],["__scopeId","data-v-283e93ca"]]);var Sr=kr;const xr=e=>((0,n.dD)("data-v-59ff3212"),e=e(),(0,n.Cn)(),e),Dr={class:"wrapper"},Tr={class:"container"},Er={class:"header"},Or=xr((()=>(0,n._)("label",null,"Настройки полей клиентов",-1))),Fr=xr((()=>(0,n._)("div",{class:"icon"},null,-1))),Ir=[Fr],Lr={class:"content"},Ar={class:"footer"};function Nr(e,t,i,o,s,a){const l=(0,n.up)("AppRadioBtnsGroupUnderlined"),r=(0,n.up)("ClientsFieldsSettingsTable"),c=(0,n.up)("BtnsSaveClose");return(0,n.wg)(),(0,n.iD)("div",Dr,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>o.close())}),(0,n._)("div",Tr,[(0,n._)("div",Er,[Or,(0,n._)("button",{class:"btn_del",onClick:t[1]||(t[1]=e=>o.close())},Ir)]),(0,n._)("div",Lr,[(0,n.Wm)(l,{class:"w-1/2 mx-auto",list:o.tabs.list,selected:o.tabs.selected,onSelect:t[2]||(t[2]=e=>o.tabs.select(e))},null,8,["list","selected"]),(0,n.Wm)(r,{selectedTab:o.tabs.selected},null,8,["selectedTab"])]),(0,n._)("div",Ar,[(0,n.Wm)(c,{onSave:o.save,onClose:o.close,show_save:!1},{close:(0,n.w5)((()=>[(0,n.Uk)("Назад")])),_:1},8,["onSave","onClose"])])])])}var Pr=i(969);const Mr=e=>((0,n.dD)("data-v-204eaf28"),e=e(),(0,n.Cn)(),e),jr={class:"relative mb-14"},$r={class:"rows"},Ur={class:"row"},qr=Mr((()=>(0,n._)("th",{class:"item item_field title"},[(0,n._)("span",null,"Поле")],-1))),Vr=Mr((()=>(0,n._)("th",{class:"item item_type"},"Тип",-1))),Br={class:"item"},Hr={class:"item"},Wr={key:0},Zr=["onUpdate:modelValue","onKeyup","onChange"],zr={class:"item selectors"},Rr={key:0,class:"type_selector_options"},Yr=["onUpdate:modelValue","onChange"],Kr=["onClick"],Gr=["onClick"],Xr={class:"item del_sell"},Jr=["onClick"],Qr=["onClick"],ec={class:"item"},tc=["onUpdate:modelValue","onKeyup"],ic={class:"item selectors"},nc={key:0,class:"type_selector_options"},oc=["onUpdate:modelValue"],sc=["onClick"],ac=["onClick"],lc={class:"item del_sell"},rc=["onClick"],cc=["onClick"];function dc(e,t,i,s,a,l){const r=(0,n.up)("SelectorVue");return(0,n.wg)(),(0,n.iD)("div",jr,[(0,n._)("table",$r,[(0,n._)("tr",Ur,[qr,Vr,(0,n._)("th",Br,[s.showUpdateAllFieldsBtn?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save_all btn_yellow",onClick:t[0]||(t[0]=e=>s.updateAllFields())}," Сохранить все поля ")):(0,n.kq)("",!0)])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.copy_fields,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{class:(0,b.C_)(["row",{load:s.is_loading}]),key:e.id},[(0,n._)("td",Hr,[e.is_system?((0,n.wg)(),(0,n.iD)("span",Wr,(0,b.zw)(e.name),1)):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text",class:(0,b.C_)(["input new_item_input",{error:e.nameError}]),"onUpdate:modelValue":t=>e.name=t,onKeyup:(0,o.D2)((e=>s.update_field(t,["name"])),["enter"]),onChange:t=>e.changeName=!0},null,42,Zr)),[[o.nr,e.name]])]),(0,n._)("td",zr,[(0,n.Wm)(r,{options_props:s.types,onSelect:s.option_select_type,selected_option:s.search_type(e.type),disabled:!0,idx:t},null,8,["options_props","onSelect","selected_option","idx"]),5==e.type||6==e.type?((0,n.wg)(),(0,n.iD)("div",Rr,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.data,((i,a)=>((0,n.wg)(),(0,n.iD)("div",{class:"type_selector_option",key:a},[(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.data[a]=t,onChange:t=>e.changeData=!0},null,40,Yr),[[o.nr,e.data[a]]]),(0,n._)("button",{class:"del_button",onClick:i=>(s.remove_selector_option(t,a),e.changeData=!0)},null,8,Kr)])))),128)),(0,n._)("button",{onClick:i=>(s.add_selector_option(t),e.changeData=!0),class:"add_button"},null,8,Gr)])):(0,n.kq)("",!0)]),(0,n._)("td",Xr,[(0,n.wy)((0,n._)("button",{class:"del_btn",onClick:t=>s.delete_field(e.id)},null,8,Jr),[[o.F8,!e.is_system]]),e.changeName||e.changeData||e.changeLeadConfig||e.changeConfig?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save btn_blue",onClick:i=>s.update_field(t,[e.changeName?"name":null,e.changeData?"data":null,e.changeLeadConfig?"lead_config":null,e.changeConfig?"config":null])}," Сохранить ",8,Qr)):(0,n.kq)("",!0)])],2)))),128)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.new_fields,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{class:"row",key:e.id},[(0,n._)("td",ec,[(0,n.wy)((0,n._)("input",{type:"text",class:(0,b.C_)(["input new_item_input",{error:e.nameError}]),"onUpdate:modelValue":t=>e.name=t,onKeyup:(0,o.D2)((i=>s.add_new(e,t)),["enter"])},null,42,tc),[[o.nr,e.name]])]),(0,n._)("td",ic,[(0,n.Wm)(r,{options_props:s.types,onSelect:s.option_select_new_field_type,selected_option:s.search_type(e.type),idx:t},null,8,["options_props","onSelect","selected_option","idx"]),5==s.new_fields[t].type||6==s.new_fields[t].type?((0,n.wg)(),(0,n.iD)("div",nc,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.data,((i,a)=>((0,n.wg)(),(0,n.iD)("div",{class:"type_selector_option",key:a},[(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.data[a]=t},null,8,oc),[[o.nr,e.data[a]]]),(0,n._)("button",{class:"del_button",onClick:e=>s.remove_new_fields_selector_option(t,a)},null,8,sc)])))),128)),(0,n._)("button",{onClick:e=>s.add_new_fields_selector_option(t),class:"add_button"},null,8,ac)])):(0,n.kq)("",!0)]),(0,n._)("td",lc,[(0,n._)("button",{class:"del_btn",onClick:e=>s.delete_new_field(t)},null,8,rc),""!=e.name?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save btn_blue",onClick:i=>s.add_new(e,t)}," Сохранить ",8,cc)):(0,n.kq)("",!0)])])))),128))]),(0,n._)("button",{onClick:t[1]||(t[1]=e=>s.add_new_field()),class:"add_new_button"})])}var uc={components:{SelectorVue:Ht.Z},props:{selectedTab:Object},setup(e){const t=(0,P.qj)([]),i=(0,P.qj)([]),o=(0,P.iH)(!1),s=()=>{t.map(((e,t)=>{const i=e.changeName||e.changeData;i&&a(t,[e.changeName?"name":null,e.changeData?"data":null]),e.changeName=!1,e.changeData=!1}))},a=async(i,n)=>{const o={};o["id"]=t[i]["id"],n.forEach((e=>{null!=e&&(o[e]=t[i][e])})),t[i]?.is_system&&delete o?.name;const s=await M.Z.dispatch(`updateClients${e.selectedTab.value}Field`,o),a="This field name exist."==s?.error;t[i]["nameError"]=a,s?.error||(t[i].changeName=!1,t[i].changeData=!1)};(0,n.bv)((()=>{l()}));const l=async()=>{o.value=!0,await M.Z.dispatch(`getClients${e.selectedTab.value}Types`),f(),setTimeout((()=>{o.value&&(o.value=!1)}),5e3)},r=(0,n.Fl)((()=>e.selectedTab));(0,n.YP)(r,(()=>{l()}));const c=(0,n.Fl)((()=>{let e=!1;return t.forEach((t=>{e=e||t.changeName||t.changeData})),e})),d=(0,n.Fl)((()=>{const t=[];return Object.entries(M.Z.state[`clients${e.selectedTab.value}`].types).forEach((([e,i])=>{t.push({name:i,value:e})})),t})),u=()=>{const e={id:t.length+1,type:3,name:"",data:[],nameError:!1};i.push(e)},p=async(t,n)=>{const o={type:t.type,name:t.name,data:t.data},s=await M.Z.dispatch(`addClients${e.selectedTab.value}Field`,o),a="This field name exist."==s?.error;a&&(i[n]["nameError"]=!0),s?.error||(i.splice(i.indexOf(t),1),f())},f=async()=>{o.value=!0,await M.Z.dispatch(`getClients${e.selectedTab.value}Fields`),t.length=0,Object.assign(t,[...M.Z.state[`clients${e.selectedTab.value}`].fields]),t.map((e=>{e["nameError"]=!1,e["changeName"]=!1,e["changeData"]=!1})),o.value=!1},h=e=>d.value.find((t=>t.value==e)),_=e=>{i.splice(e,1)},m=async t=>{await M.Z.dispatch(`deleteClients${e.selectedTab.value}Field`,t),f()},g=(e,i)=>{t[i].type=e},v=(e,t)=>{i[t].type=e.value},b=e=>{null==t[e].data&&(t[e].data=[]),t[e].data.push("")},w=(e,i)=>{t[e].data.splice(i,1)},y=e=>{i[e].data.push("")},C=(e,t)=>{i[e].data.splice(t,1)};return{copy_fields:t,new_fields:i,is_loading:o,updateAllFields:s,update_field:a,showUpdateAllFieldsBtn:c,types:d,isTest:_e.Y,add_new_field:u,add_new:p,get_fields:f,search_type:h,delete_new_field:_,delete_field:m,option_select_type:g,option_select_new_field_type:v,add_selector_option:b,remove_selector_option:w,add_new_fields_selector_option:y,remove_new_fields_selector_option:C}}};const pc=(0,q.Z)(uc,[["render",dc],["__scopeId","data-v-204eaf28"]]);var fc=pc,hc=i(6963),_c={components:{BtnsSaveClose:A.Z,AppRadioBtnsGroupUnderlined:Pr.Z,ClientsFieldsSettingsTable:fc},setup(){const{tabs:e}=(0,hc.j)();(0,n.bv)((async()=>{}));const t=()=>{i()},i=()=>{M.Z.commit("openCloseClientsFieldsSettings",!1)};return{close:i,save:t,tabs:e}}};const mc=(0,q.Z)(_c,[["render",Nr],["__scopeId","data-v-59ff3212"]]);var gc=mc;const vc=e=>((0,n.dD)("data-v-31493d1b"),e=e(),(0,n.Cn)(),e),bc={class:"wrapper"},wc={class:"container"},yc={class:"header"},Cc=vc((()=>(0,n._)("div",{class:"icon"},null,-1))),kc=[Cc],Sc={class:"content"},xc={key:1,class:"w-full"},Dc={class:"footer"};function Tc(e,t,i,o,s,a){const l=(0,n.up)("AppRadioBtnsGroupUnderlined"),r=(0,n.up)("SettingEntitiesCategories"),c=(0,n.up)("SettingEntitiesStatuses"),d=(0,n.up)("SettingEntitiesFieldsProperties"),u=(0,n.up)("SettingEntitiesTable"),p=(0,n.up)("BtnsSaveClose");return(0,n.wg)(),(0,n.iD)("div",bc,[(0,n._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>o.close())}),(0,n._)("div",wc,[(0,n._)("div",yc,[(0,n._)("label",null,(0,b.zw)(e.$t("SettingEntities.header")),1),(0,n._)("button",{class:"close",onClick:t[1]||(t[1]=e=>o.close())},kc)]),(0,n._)("div",Sc,[(0,n.Wm)(l,{class:"w-full mx-auto",list:o.tabs.list,selected:o.tabs.selected,onSelect:t[2]||(t[2]=e=>{o.tabs.select(e),o.closeAllSubTabs()})},null,8,["list","selected"]),o.showCategories?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[o.tabs.selected.haveCategories?((0,n.wg)(),(0,n.j4)(r,{key:0,onToggleCategories:o.toggleCategories},null,8,["onToggleCategories"])):(0,n.kq)("",!0)],64)):o.showStatuses?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[o.tabs.selected.haveStatuses?((0,n.wg)(),(0,n.j4)(c,{key:0,onToggleStatuses:o.toggleStatuses},null,8,["onToggleStatuses"])):(0,n.kq)("",!0)],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:2},[o.tabs.selected.haveFieldsProperties?((0,n.wg)(),(0,n.j4)(d,{key:0,onToggleCategories:o.toggleCategories},null,8,["onToggleCategories"])):(0,n.kq)("",!0),o.tabs.selected.haveStatuses&&!o.showStatuses?((0,n.wg)(),(0,n.iD)("div",xc,[(0,n._)("button",{class:"btn pointer-events-auto w-full relative inline-flex justify-center rounded-md bg-white text-[0.8125rem] font-medium leading-5 text-slate-700 shadow-sm ring-1 ring-slate-700/10 hover:bg-slate-50 hover:text-slate-900",onClick:t[3]||(t[3]=e=>o.toggleStatuses(!0))},(0,b.zw)(e.$t("SettingEntities.statBtn")),1)])):(0,n.kq)("",!0),((0,n.wg)(),(0,n.j4)(u,{selectedTab:o.tabs.selected,key:o.tabs.selected.value},null,8,["selectedTab"]))],64))]),(0,n._)("div",Dc,[(0,n.Wm)(p,{onSave:o.save,onClose:o.close,show_save:!1},{close:(0,n.w5)((()=>[(0,n.Uk)((0,b.zw)(e.$t("global.back")),1)])),_:1},8,["onSave","onClose"])])])])}const Ec=e=>((0,n.dD)("data-v-177e0ab0"),e=e(),(0,n.Cn)(),e),Oc={class:"relative mb-14 mt-7"},Fc={class:"rows"},Ic={class:"row"},Lc={key:0,class:"item_sort"},Ac={class:"item item_field title"},Nc={class:"copy_fields"},Pc={class:"item item_type"},Mc={key:1,class:"item item_icon title"},jc={class:"w-min mx-auto"},$c=Ec((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," visibility ",-1))),Uc={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},qc={key:2,class:"item item_icon title"},Vc={class:"w-min mx-auto"},Bc=Ec((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," edit ",-1))),Hc={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},Wc={key:3,class:"item item_icon title"},Zc={class:"w-min mx-auto"},zc=Ec((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," title ",-1))),Rc={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},Yc={key:0,class:"item item_icon title"},Kc={class:"w-min mx-auto"},Gc=Ec((()=>(0,n._)("span",{class:"material-icons-outlined opacity-50"}," content_copy ",-1))),Xc={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},Jc={key:0,class:"item item_icon title"},Qc={class:"w-min mx-auto"},ed=Ec((()=>(0,n._)("span",{class:"text-black opacity-50"},[(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",viewBox:"0 0 24 24"},[(0,n._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm6 8H7m6-3H7m4-3H7"})])],-1))),td={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},id={key:0,class:"item item_icon title"},nd={class:"w-min mx-auto"},od=Ec((()=>(0,n._)("span",{class:"material-icons-round opacity-50"}," segment ",-1))),sd={key:0,class:"absolute top-[120%] bg-slate-700 text-slate-100 text-xs p-2 rounded-md z-10"},ad={class:"item"},ld=["disabled"],rd={key:0,class:"p-[10px] border border-[#c9c9c9] w-min"},cd={class:"flex flex-row"},dd=["disabled","onClick"],ud=["disabled","onClick"],pd={class:"item"},fd={key:0},hd=["onUpdate:modelValue","onKeyup","onInput"],_d={class:"item selectors"},md={key:0,class:"type_selector_options"},gd=["onUpdate:modelValue","onChange"],vd=["onClick"],bd=["onClick"],wd={key:1,class:"box item text-lg"},yd=["id","disabled","onUpdate:modelValue","onChange"],Cd=["for"],kd={key:2,class:"box item text-lg"},Sd=["id","disabled","onUpdate:modelValue","onChange"],xd=["for"],Dd={key:3,class:"box item text-lg"},Td=["id","disabled","onUpdate:modelValue","onChange"],Ed=["for"],Od={key:0,class:"box item text-lg"},Fd=["id","disabled","onUpdate:modelValue","onChange"],Id=["for"],Ld={key:0,class:"box item text-lg"},Ad=["id","disabled","onUpdate:modelValue","onChange"],Nd=["for"],Pd=["onClick"],Md=Ec((()=>(0,n._)("span",{id:"catBtn",class:"material-icons-round opacity-70",style:{"font-size":"20px"}}," open_in_full ",-1))),jd=[Md],$d={class:"item del_sell"},Ud=["disabled","onClick"],qd=["disabled","onClick"],Vd={key:0,class:"p-[10px] border border-[#c9c9c9]"},Bd={class:"item"},Hd=["onUpdate:modelValue","onKeyup"],Wd={class:"item selectors"},Zd={key:0,class:"type_selector_options"},zd=["onUpdate:modelValue"],Rd=["onClick"],Yd=["onClick"],Kd={key:1,class:"box item text-lg"},Gd=["id","disabled","onUpdate:modelValue"],Xd=["for"],Jd={key:2,class:"box item text-lg"},Qd=["id","disabled","onUpdate:modelValue"],eu=["for"],tu={key:3,class:"box item text-lg"},iu=["id","disabled","onUpdate:modelValue"],nu=["for"],ou={key:0,class:"box item text-lg"},su=["id","disabled","onUpdate:modelValue"],au=["for"],lu={key:0,class:"box item text-lg"},ru=["id","disabled","onUpdate:modelValue"],cu=["for"],du={key:0,class:"box item text-lg relative"},uu={class:"item del_sell"},pu=["onClick"],fu=["onClick","bisabled"];function hu(e,t,i,s,a,l){const r=(0,n.up)("SelectorVue"),c=(0,n.up)("AppMultiSelect");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",Oc,[(0,n._)("table",Fc,[(0,n.Wm)(o.W3,{name:"list",mode:"out-in"},{default:(0,n.w5)((()=>[(0,n._)("tr",Ic,[s.isTest&&s.selectedFieldPropertyIsBasic&&i.selectedTab.haveSort?((0,n.wg)(),(0,n.iD)("th",Lc)):(0,n.kq)("",!0),(0,n._)("th",Ac,[(0,n._)("div",Nc,[(0,n._)("span",null,(0,b.zw)(e.$t("SettingEntities.table.field")),1)])]),(0,n._)("th",Pc,(0,b.zw)(e.$t("SettingEntities.table.type")),1),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("th",Mc,[(0,n._)("div",jc,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[0]||(t[0]=e=>s.toolTips.visibility=!0),onMouseleave:t[1]||(t[1]=e=>s.toolTips.visibility=!1)},[$c,s.toolTips.visibility?((0,n.wg)(),(0,n.iD)("div",Uc,(0,b.zw)(e.$t("SettingEntities.table.visible")),1)):(0,n.kq)("",!0)],32)])])):(0,n.kq)("",!0),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("th",qc,[(0,n._)("div",Vc,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[2]||(t[2]=e=>s.toolTips.edit=!0),onMouseleave:t[3]||(t[3]=e=>s.toolTips.edit=!1)},[Bc,s.toolTips.edit?((0,n.wg)(),(0,n.iD)("div",Hc,(0,b.zw)(e.$t("SettingEntities.table.edit")),1)):(0,n.kq)("",!0)],32)])])):(0,n.kq)("",!0),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("th",Wc,[(0,n._)("div",Zc,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[4]||(t[4]=e=>s.toolTips.title=!0),onMouseleave:t[5]||(t[5]=e=>s.toolTips.title=!1)},[zc,s.toolTips.title?((0,n.wg)(),(0,n.iD)("div",Rc,(0,b.zw)(e.$t("SettingEntities.table.headerDeal")),1)):(0,n.kq)("",!0)],32)])])):(0,n.kq)("",!0),s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:4},[i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("th",Yc,[(0,n._)("div",Kc,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[6]||(t[6]=e=>s.toolTips.content_copy=!0),onMouseleave:t[7]||(t[7]=e=>s.toolTips.content_copy=!1)},[Gc,s.toolTips.content_copy?((0,n.wg)(),(0,n.iD)("div",Xc,(0,b.zw)(e.$t("SettingEntities.table.double")),1)):(0,n.kq)("",!0)],32)])])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:5},[i.selectedTab.havePublicOrderConfig&&s.isTest?((0,n.wg)(),(0,n.iD)("th",Jc,[(0,n._)("div",Qc,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[8]||(t[8]=e=>s.toolTips.publicOrderVisibility=!0),onMouseleave:t[9]||(t[9]=e=>s.toolTips.publicOrderVisibility=!1)},[ed,s.toolTips.publicOrderVisibility?((0,n.wg)(),(0,n.iD)("div",td,(0,b.zw)(e.$t("SettingEntities.table.PubOrdVisible")),1)):(0,n.kq)("",!0)],32)])])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),s.isTest2?((0,n.wg)(),(0,n.iD)(n.HY,{key:6},[i.selectedTab.haveFieldsProperties?((0,n.wg)(),(0,n.iD)("th",id,[(0,n._)("div",nd,[(0,n._)("div",{class:"flex items-center relative",onMouseenter:t[10]||(t[10]=e=>s.toolTips.categories=!0),onMouseleave:t[11]||(t[11]=e=>s.toolTips.categories=!1)},[od,s.toolTips.categories?((0,n.wg)(),(0,n.iD)("div",sd,(0,b.zw)(e.$t("SettingEntities.table.bind")),1)):(0,n.kq)("",!0)],32)])])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),(0,n._)("th",ad,[s.showUpdateAllFieldsBtn?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save_all btn_yellow",disabled:s.IBL("updAllF"),onClick:t[12]||(t[12]=e=>s.LB("updAllF",s.updateAllFields()))},(0,b.zw)(e.$t("SettingEntities.table.btnSaveAll")),9,ld)):(0,n.kq)("",!0)])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.copy_fields,((t,a)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("tr",{class:(0,b.C_)(["row",{load:s.is_loading}]),key:t.id},[s.isTest&&s.selectedFieldPropertyIsBasic&&i.selectedTab.haveSort?((0,n.wg)(),(0,n.iD)("th",rd,[(0,n._)("div",cd,[(0,n._)("button",{class:"bar_item_icon bar_item_icon_up",disabled:0===a||s.IBL("changeTSU"+t.id),onClick:e=>s.LB("changeTSU"+t.id,s.changeTitleSort(a,!0))},null,8,dd),(0,n._)("button",{class:"bar_item_icon bar_item_icon_down",disabled:a===s.copy_fields.length-1||s.IBL("changeTSD"+t.id),onClick:e=>s.LB("changeTSD"+t.id,s.changeTitleSort(a,!1))},null,8,ud)])])):(0,n.kq)("",!0),(0,n._)("td",pd,[t.is_system?((0,n.wg)(),(0,n.iD)("span",fd,(0,b.zw)(t.name),1)):(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:1,type:"text",class:(0,b.C_)(["input new_item_input",{error:t.nameError}]),"onUpdate:modelValue":e=>t.name=e,onKeyup:(0,o.D2)((e=>s.update_field(a,["name"])),["enter"]),onInput:e=>1==t.changeName},null,42,hd)),[[o.nr,t.name]])]),(0,n._)("td",_d,[(0,n.Wm)(r,{options_props:s.types,onSelect:s.option_select_type,selected_option:s.search_type(t.type),disabled:!0,idx:a},null,8,["options_props","onSelect","selected_option","idx"]),5==t.type||6==t.type?((0,n.wg)(),(0,n.iD)("div",md,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,((e,i)=>((0,n.wg)(),(0,n.iD)("div",{class:"type_selector_option",key:i},[(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":e=>t.data[i]=e,onChange:e=>1==t.changeData},null,40,gd),[[o.nr,t.data[i]]]),(0,n._)("button",{class:"del_button",onClick:e=>(s.remove_selector_option(a,i),1==t.changeData)},null,8,vd)])))),128)),(0,n._)("button",{onClick:e=>(s.add_selector_option(a),1==t.changeData),class:"add_button"},null,8,bd)])):(0,n.kq)("",!0)]),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",wd,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"nb",disabled:t.lead_config.visible.disabled,"onUpdate:modelValue":e=>t.lead_config.visible.value=e,onChange:e=>1==t.changeLeadConfig},null,40,yd),[[o.e8,t.lead_config.visible.value]]),(0,n._)("label",{for:a+"nb"},null,8,Cd)])):(0,n.kq)("",!0),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",kd,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"n",disabled:t.lead_config.editable.disabled,"onUpdate:modelValue":e=>t.lead_config.editable.value=e,onChange:e=>1==t.changeLeadConfig},null,40,Sd),[[o.e8,t.lead_config.editable.value]]),(0,n._)("label",{for:a+"n"},null,8,xd)])):(0,n.kq)("",!0),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",Dd,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"nt",disabled:t.lead_config.title_visible.disabled,"onUpdate:modelValue":e=>t.lead_config.title_visible.value=e,onChange:e=>1==t.changeLeadConfig},null,40,Td),[[o.e8,t.lead_config.title_visible.value]]),(0,n._)("label",{for:a+"nt"},null,8,Ed)])):(0,n.kq)("",!0),s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:4},[i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",Od,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"nd",disabled:t.config.double_in_new_bath.disabled,"onUpdate:modelValue":e=>t.config.double_in_new_bath.value=e,onChange:e=>1==t.changeConfig},null,40,Fd),[[o.e8,t.config.double_in_new_bath.value]]),(0,n._)("label",{for:a+"nd"},null,8,Id)])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:5},[i.selectedTab.havePublicOrderConfig&&s.isTest?((0,n.wg)(),(0,n.iD)("td",Ld,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"pov",disabled:t[i.selectedTab.publicOrderConfigField].public_order_visible.disabled,"onUpdate:modelValue":e=>t[i.selectedTab.publicOrderConfigField].public_order_visible.value=e,onChange:e=>1==t.changeLeadConfig},null,40,Ad),[[o.e8,t[i.selectedTab.publicOrderConfigField].public_order_visible.value]]),(0,n._)("label",{for:a+"pov"},null,8,Nd)])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),s.isTest2?((0,n.wg)(),(0,n.iD)(n.HY,{key:6},[i.selectedTab.haveFieldsProperties?((0,n.wg)(),(0,n.iD)("td",{key:0,class:"box item text-lg relative",ref_for:!0,ref:e=>s.categories.selected===t?s.categories.ref=e:null},[t.is_system?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,id:"catBtn",onClick:e=>s.categories.selected=t,class:"pointer-events-auto relative inline-flex w-fit h-fit p-1 rounded-md bg-white text-[0.8125rem] font-medium leading-5 text-slate-700 shadow-sm ring-1 ring-slate-700/10 hover:bg-slate-50 hover:text-slate-900"},jd,8,Pd))],512)):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),(0,n._)("td",$d,[(0,n.wy)((0,n._)("button",{class:"del_btn",disabled:s.IBL("DelF"+t.id),onClick:e=>s.LB("DelF"+t.id,s.delete_field(t.id))},null,8,Ud),[[o.F8,!t.is_system]]),t.changeName||t.changeData||t.changeCats||t.changeLeadConfig||t.changeConfig?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save btn_blue",disabled:s.IBL("updF"+t.id),onClick:e=>s.LB("updF"+t.id,s.update_field(a,[t.changeName?"name":null,t.changeData?"data":null,t.changeCats?"categories_id":null,t.changeLeadConfig?"lead_config":null,t.changeConfig?"config":null]))},(0,b.zw)(e.$t("global.save")),9,qd)):(0,n.kq)("",!0)])],2)),[[o.F8,s.selectedFieldProperty?.id===t.category_id||!i.selectedTab.haveFieldsProperties]]))),128)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.new_fields,((t,a)=>((0,n.wg)(),(0,n.iD)("tr",{class:"row",key:t.id},[s.isTest&&s.selectedFieldPropertyIsBasic&&i.selectedTab.haveSort?((0,n.wg)(),(0,n.iD)("th",Vd)):(0,n.kq)("",!0),(0,n._)("td",Bd,[(0,n.wy)((0,n._)("input",{type:"text",class:(0,b.C_)(["input new_item_input",{error:t.nameError}]),"onUpdate:modelValue":e=>t.name=e,onKeyup:(0,o.D2)((e=>s.add_new(t,a)),["enter"])},null,42,Hd),[[o.nr,t.name]])]),(0,n._)("td",Wd,[(0,n.Wm)(r,{options_props:s.types,onSelect:s.option_select_new_field_type,selected_option:s.search_type(t.type),idx:a},null,8,["options_props","onSelect","selected_option","idx"]),5==s.new_fields[a].type||6==s.new_fields[a].type?((0,n.wg)(),(0,n.iD)("div",Zd,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.data,((e,i)=>((0,n.wg)(),(0,n.iD)("div",{class:"type_selector_option",key:i},[(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":e=>t.data[i]=e},null,8,zd),[[o.nr,t.data[i]]]),(0,n._)("button",{class:"del_button",onClick:e=>s.remove_new_fields_selector_option(a,i)},null,8,Rd)])))),128)),(0,n._)("button",{onClick:e=>s.add_new_fields_selector_option(a),class:"add_button"},null,8,Yd)])):(0,n.kq)("",!0)]),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",Kd,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"nb1",disabled:s.new_fields[a].disabled?.visible.value,"onUpdate:modelValue":e=>s.new_fields[a].lead_config.visible.value=e},null,8,Gd),[[o.e8,s.new_fields[a].lead_config.visible.value]]),(0,n._)("label",{for:a+"nb1"},null,8,Xd)])):(0,n.kq)("",!0),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",Jd,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"n1",disabled:s.new_fields[a].disabled?.editable.value,"onUpdate:modelValue":e=>s.new_fields[a].lead_config.editable.value=e},null,8,Qd),[[o.e8,s.new_fields[a].lead_config.editable.value]]),(0,n._)("label",{for:a+"n1"},null,8,eu)])):(0,n.kq)("",!0),i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",tu,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"n2",disabled:s.new_fields[a].lead_config.title_visible.disabled,"onUpdate:modelValue":e=>s.new_fields[a].lead_config.title_visible.value=e},null,8,iu),[[o.e8,s.new_fields[a].lead_config.title_visible.value]]),(0,n._)("label",{for:a+"n2"},null,8,nu)])):(0,n.kq)("",!0),s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:4},[i.selectedTab.haveLeadConfig?((0,n.wg)(),(0,n.iD)("td",ou,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"n3",disabled:s.new_fields[a].config.double_in_new_bath.disabled,"onUpdate:modelValue":e=>s.new_fields[a].config.double_in_new_bath.value=e},null,8,su),[[o.e8,s.new_fields[a].config.double_in_new_bath.value]]),(0,n._)("label",{for:a+"n3"},null,8,au)])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),s.isTest?((0,n.wg)(),(0,n.iD)(n.HY,{key:5},[i.selectedTab.havePublicOrderConfig&&s.isTest?((0,n.wg)(),(0,n.iD)("td",lu,[(0,n.wy)((0,n._)("input",{type:"checkbox",class:"checkbox",id:a+"n4",disabled:s.new_fields[a][i.selectedTab.publicOrderConfigField].public_order_visible.disabled,"onUpdate:modelValue":e=>s.new_fields[a][i.selectedTab.publicOrderConfigField].public_order_visible.value=e},null,8,ru),[[o.e8,s.new_fields[a][i.selectedTab.publicOrderConfigField].public_order_visible.value]]),(0,n._)("label",{for:a+"n4"},null,8,cu)])):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),s.isTest2?((0,n.wg)(),(0,n.iD)(n.HY,{key:6},[i.selectedTab.haveFieldsProperties?((0,n.wg)(),(0,n.iD)("td",du)):(0,n.kq)("",!0)],64)):(0,n.kq)("",!0),(0,n._)("td",uu,[(0,n._)("button",{class:"del_btn",onClick:e=>s.delete_new_field(a)},null,8,pu),""!=t.name?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn_save btn_blue",onClick:e=>s.LB(t.id+"addNew",s.add_new(t,a)),bisabled:s.IBL(t.id+"addNew")},(0,b.zw)(e.$t("global.save")),9,fu)):(0,n.kq)("",!0)])])))),128))])),_:1})]),(0,n._)("button",{onClick:t[13]||(t[13]=e=>s.add_new_field()),class:"add_new_button"})]),(0,n.Wm)(o.uT,{name:"fade"},{default:(0,n.w5)((()=>[s.categories.ref?((0,n.wg)(),(0,n.j4)(n.lR,{key:0,to:s.categories.ref},[(0,n._)("div",{ref:"modalRef",class:(0,b.C_)(["absolute top-1/2 right-0 origin-top-right rounded-[4px] w-fit h-fit -translate-y-1/2 shadow-md z-10",s.animationStarted?"in":"out"])},[(0,n.Wm)(c,{list:s.categories.newList,placeholder:s.t("SettingEntities.table.titCat"),rightSideSticky:!0,withTick:!0,onSelect:t[14]||(t[14]=e=>s.categories.select(e))},null,8,["list","placeholder"])],2)],8,["to"])):(0,n.kq)("",!0)])),_:1})],64)}const _u=(0,P.qj)([]);function mu(){const{t:e}=(0,me.j)(),t=(0,P.qj)([]),i=(0,P.qj)({items:null,selected:{name:e("SettingEntities.fieldsProp.selectCat"),value:-1}});(0,n.bv)((async()=>{M.Z.state.categories.fields_properties.length||await M.Z.dispatch("get_fields_properties"),Object.assign(t,[...M.Z.state.categories.fields_properties]),d.fillList(),_u.length=0,o({value:t.find((e=>0===e.parent_id))})}));const o=e=>{const t=JSON.parse(JSON.stringify(e));_u.push(t.value),s(e.value.id)},s=e=>{i.items=a(e)},a=e=>{const i=[],n=t.filter((t=>t.parent_id==e));return n.forEach((e=>i.push({name:e.name,value:e}))),i},l=e=>{_u.splice(e+1),s(r.value.id)},r=(0,n.Fl)((()=>_u.at(-1))),c=(0,n.Fl)((()=>0===r.value?.parent_id)),d=(0,P.qj)({list:[],newList:function(e){const t=[];this.list.forEach((i=>{let n=!1;e.forEach((e=>n=n||i.levels.includes(e))),t.push({selected:n})}));const i=this.list.reduce(((e,i,n)=>[...e,{...i,...t[n]}]),[]);return i},fillList:function(){this.list=[],t.forEach((e=>{let t="";for(let i=1;i<e.level;i++)t+="    ";this.list.push({name:t+e.name,value:e.id,id:e.id,level:e.level,levels:e.levels,parent_id:e.parent_id})}))}});return{copy_fields_properties:t,selected_fields_properties:_u,data_fields_properties:i,option_select_fields_properties:o,prev_cat:l,selectedFieldProperty:r,selectedFieldPropertyIsBasic:c,copyFieldsPropertiesWithSpace:d}}var gu=i(6367),vu=i(2518),bu={components:{SelectorVue:Ht.Z,AppMultiSelect:vu.Z},props:{selectedTab:Object},setup(e){const{selectedFieldProperty:t,selectedFieldPropertyIsBasic:i,copyFieldsPropertiesWithSpace:o}=mu();(0,n.YP)(t,(()=>{t.value&&y()}));const{t:s}=(0,me.j)(),{lockBtn:a,isBtnLocked:l}=(0,Un.L)(),r=(0,P.qj)({visibility:!1,edit:!1,title:!1,content_copy:!1,categories:!1,publicOrderVisibility:!1}),c=(0,P.qj)([]),d=(0,P.qj)([]),u=(0,P.iH)(!1);(0,n.bv)((async()=>{p()}));const p=async()=>{u.value=!0,await M.Z.dispatch(f.value.getTypesName),e.selectedTab.haveFieldsProperties||await y(),setTimeout((()=>{u.value&&(u.value=!1)}),5e3)},f=(0,n.Fl)((()=>e.selectedTab));(0,n.YP)(f,(()=>{p()}));const h=(0,n.Fl)((()=>{let e=!1;return c.forEach((t=>{e=e||t.changeName||t.changeData||t.changeCats||t.changeLeadConfig||t.changeConfig})),e})),_=(0,n.Fl)((()=>{const e=[],t=["12","16","17","18"];return Object.entries(M.Z.state[f.value.storeName]?.[f.value.typesName]).forEach((([i,n])=>{t.includes(i)||e.push({name:n,value:i})})),e})),m=(0,n.Fl)((()=>{const e=[];return Object.entries(M.Z.state[f.value.storeName]?.[f.value.typesName]).forEach((([t,i])=>{e.push({name:i,value:t})})),e})),g=()=>{const e={id:c.length+1,category_id:t.value?.id,type:3,name:"",data:[],nameError:!1,lead_config:{visible:{disabled:!1,value:!1},editable:{disabled:!1,value:!1},title_visible:{disabled:!1,value:!1}},config:{double_in_new_bath:{disabled:!1,value:!1}}};e[f.value.publicOrderConfigField].public_order_visible={disabled:!1,value:!1},f.value.haveLeadConfig||f.value.havePublicOrderConfig||delete e.lead_config,d.push(e)},v=async(e,t)=>{const i=(e,t)=>{let i=0;return e&&t&&(i=2),e&&!t&&(i=1),e||t||(i=0),!e&&t&&(i=-1),i},n={type:e.type,name:e.name,category_id:e.category_id,data:e.data};if(f.value.haveLeadConfig){const t={visible:i(e.lead_config.visible.value,e.lead_config.visible.disabled),editable:i(e.lead_config.editable.value,e.lead_config.editable.disabled)};n.lead_config=t}const{data:o}=await M.Z.dispatch(f.value.addName,n),s="This field name exist."==o.error;s&&(d[t]["nameError"]=!0),o.error||(d.splice(d.indexOf(e),1),await y())},b=async()=>{const e=[];c.map(((t,i)=>{const n=t.changeName||t.changeData||t.changeCats||t.changeLeadConfig||t.changeConfig;n&&e.push(w(i,[t.changeName?"name":null,t.changeData?"data":null,t.changeCats?"categories_id":null,t.changeLeadConfig?"lead_config":null,t.changeConfig?"config":null]))})),await Promise.all(e)},w=async(e,t)=>{const i={};i["id"]=c[e]["id"],t.forEach((t=>{null!=t&&(i[t]={},"lead_config"==t?(f.value.haveLeadConfig&&(i[t].visible=Number(c[e][t].visible.value),i[t].editable=Number(c[e][t].editable.value),i[t].title_visible=Number(c[e][t].title_visible.value),i[t].title_sort=c[e][t].title_sort),f.value.havePublicOrderConfig&&(i[t].public_order_visible=Number(c[e][f.value.publicOrderConfigField].public_order_visible.value))):"config"==t?(i[t]=c[e][t],c[e][t].double_in_new_bath&&Number(i[t].double_in_new_bath=c[e][t].double_in_new_bath.value),c[e][t]&&(i[t].sort=c[e][t].sort,i[t].table=c[e][t].table),f.value.havePublicOrderConfig&&(i[t].public_order_visible=Number(c[e][f.value.publicOrderConfigField].public_order_visible.value))):i[t]=c[e][t])})),c[e]?.is_system&&delete i?.name,console.log(i);const n=await M.Z.dispatch(f.value.updateName,i),o="This field name exist."==n?.error;c[e]["nameError"]=o,n?.error||Object.keys(C).forEach((t=>c[e][t]&&k(c[e],JSON.parse(JSON.stringify(c[e])),t)))},y=async()=>{u.value=!0,await M.Z.dispatch(f.value.getFieldsName,-1),c.length=0,Object.assign(c,[...M.Z.state[f.value.storeName]?.[f.value.fieldsName].filter((e=>!(f.value.haveVirtual&&e.is_virtual)))]);const e=JSON.parse(JSON.stringify(c));e.map((e=>{if(f.value.haveLeadConfig){const t=e.lead_config.visible;e.lead_config.visible={disabled:-1==t||2==t,value:t>0};const i=e.lead_config.editable;e.lead_config.editable={disabled:-1==i||2==i,value:i>0};const n=e.lead_config.title_visible;e.lead_config.title_visible={disabled:-1==n||2==n,value:n>0};const o=void 0===e.config.double_in_new_bath?0:e.config.double_in_new_bath;e.config.double_in_new_bath={disabled:-1==o||2==o,value:o>0}}if(f.value.havePublicOrderConfig){const t=void 0===e[f.value.publicOrderConfigField]?.public_order_visible?0:e[f.value.publicOrderConfigField]?.public_order_visible;void 0===e[f.value.publicOrderConfigField]&&(e[f.value.publicOrderConfigField]={}),e[f.value.publicOrderConfigField].public_order_visible={disabled:-1==t||2==t,value:t>0}}})),c.map(((t,i)=>{if(t["nameError"]=!1,Object.keys(C).forEach((n=>k(t,e[i],n))),f.value.haveLeadConfig){const e=t.lead_config.visible;t.lead_config.visible={disabled:-1==e||2==e,value:e>0};const i=t.lead_config.editable;t.lead_config.editable={disabled:-1==i||2==i,value:i>0};const n=t.lead_config.title_visible;t.lead_config.title_visible={disabled:-1==n||2==n,value:n>0};const o=void 0===t.config.double_in_new_bath?0:t.config.double_in_new_bath;t.config.double_in_new_bath={disabled:-1==o||2==o,value:o>0}}if(f.value.havePublicOrderConfig){const e=void 0===t[f.value.publicOrderConfigField]?.public_order_visible?0:t[f.value.publicOrderConfigField]?.public_order_visible;void 0===t[f.value.publicOrderConfigField]&&(t[f.value.publicOrderConfigField]={}),t[f.value.publicOrderConfigField].public_order_visible={disabled:-1==e||2==e,value:e>0}}})),u.value=!1},C=(0,P.qj)({changeName:"name",changeData:"data",changeCats:"categories_id",changeLeadConfig:"lead_config",changeConfig:"config"}),k=(e,t,i)=>{const o=C[i];e[i]=(0,n.Fl)((()=>JSON.stringify(e[o])!==JSON.stringify(t[o])))},S=e=>m.value.find((t=>t.value==e)),x=e=>{d.splice(e,1)},D=async e=>{await M.Z.dispatch(f.value.deleteName,{id:e}),y()},T=(e,t)=>{c[t].type=e},E=(e,t)=>{d[t].type=e.value},O=async(e,t)=>{const i=c[e].config?.sort;void 0===c[e].config?.sort||void 0===c[e-1]?.config?.sort&&t||void 0===c[e+1]?.config?.sort&&!t||(t?(c[e].config.sort=c[e-1].config?.sort,c[e-1].config.sort=i):(c[e].config.sort=c[e+1].config?.sort,c[e+1].config.sort=i),await w(e,["config"]),t?await w(e-1,["config"]):await w(e+1,["config"]),y())},F=e=>{null==c[e].data&&(c[e].data=[]),c[e].data.push("")},I=(e,t)=>{c[e].data.splice(t,1)},L=e=>{d[e].data.push("")},A=(e,t)=>{d[e].data.splice(t,1)},N=(0,P.qj)({selected:{},ref:null,list:[],newList:[],select:function(e){if(this.checkIsParentSelected(e))return;this.selected.categories_id||(this.selected.categories_id=[]);const t=this.selected.categories_id.indexOf(e.value);-1===t?this.selected.categories_id.push(e.value):this.selected.categories_id.splice(t,1),this.removeSubCats(e),this.getCats(this.selected.id)},getCats:async function(e,t){if(t){const t=await M.Z.dispatch("getCatsField",{id:e});this.selected.categories_id||(this.selected.categories_id=t||[]),k(this.selected,JSON.parse(JSON.stringify(this.selected)),"changeCats")}this.newList=o.newList(this.selected.categories_id)},checkIsParentSelected:function(e){return 1!==e.level&&this.newList.find((t=>t.id===e.levels[e.level-2])).selected},removeSubCats:function(e){const t=this.newList.filter((t=>t.levels.includes(e.value)&&t.id!==e.value));this.selected.categories_id=this.selected.categories_id.filter((e=>!t.some((t=>t.id===e))))}}),j=(0,P.iH)(null);(0,gu.i9H)(j,(e=>{const t="catBtn"===e?.target?.attributes?.id?.value;N.selected.specialList=N.list,N.selected={},t?N.ref=null:setTimeout((()=>N.ref=null),150)}));const $=(0,P.iH)(!1);return(0,n.YP)((()=>N.selected),(e=>{$.value=!!e.id,e.id&&N.getCats(N.selected.id,!Array.isArray(e.categories_id)),e.id?N.selected.specialList?.length&&(N.list=N.selected.specialList):N.list=[]})),{toolTips:r,copy_fields:c,new_fields:d,is_loading:u,showUpdateAllFieldsBtn:h,types:_,isTest:_e.Y,isTest2:_e.h,add_new_field:g,add_new:v,updateAllFields:b,update_field:w,get_fields:y,search_type:S,delete_new_field:x,delete_field:D,option_select_type:T,option_select_new_field_type:E,changeTitleSort:O,add_selector_option:F,remove_selector_option:I,add_new_fields_selector_option:L,remove_new_fields_selector_option:A,selectedFieldProperty:t,selectedFieldPropertyIsBasic:i,copyFieldsPropertiesWithSpace:o,categories:N,modalRef:j,animationStarted:$,t:s,LB:a,IBL:l}}};const wu=(0,q.Z)(bu,[["render",hu],["__scopeId","data-v-177e0ab0"]]);var yu=wu;const Cu={class:"flex flex-row justify-between items-center"};function ku(e,t,i,o,s,a){(0,n.up)("SelectorVue");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.kq)("",!0),(0,n._)("div",Cu,[(0,n.kq)("",!0),(0,n._)("button",{class:"btn pointer-events-auto w-full justify-center relative inline-flex rounded-md bg-white text-[0.8125rem] font-medium leading-5 text-slate-700 shadow-sm ring-1 ring-slate-700/10 hover:bg-slate-50 hover:text-slate-900",onClick:t[0]||(t[0]=e=>o.openCategories())},(0,b.zw)(e.$t("SettingEntities.fieldsProp.btnCats")),1)])],64)}var Su={components:{SelectorVue:Ht.Z},setup(e,t){const i=()=>t.emit("toggleCategories",!0);return{...mu(),openCategories:i}}};const xu=(0,q.Z)(Su,[["render",ku],["__scopeId","data-v-563aec23"]]);var Du=xu;function Tu(){const{t:e}=(0,me.j)(),t=(0,P.qj)({selected:{},list:[{name:e("SettingEntities.tabs.orders"),value:"Orders",storeName:"orders",fieldsName:"fields",typesName:"types",getTypesName:"getOrdersTypes",getFieldsName:"getOrdersFields",addName:"addOrdersField",updateName:"updateOrdersField",deleteName:"deleteOrdersField",isBase:!0,haveStatuses:!0,haveSort:!0,haveVirtual:!0,havePublicOrderConfig:!0,publicOrderConfigField:"config"},{name:e("SettingEntities.tabs.company"),value:"Company",storeName:"clientsCompany",fieldsName:"fields",typesName:"types",getTypesName:"getClientsCompanyTypes",getFieldsName:"getClientsCompanyFields",addName:"addClientsCompanyField",updateName:"updateClientsCompanyField",deleteName:"deleteClientsCompanyField",haveSort:!0},{name:e("SettingEntities.tabs.contacts"),value:"Contacts",storeName:"clientsContacts",fieldsName:"fields",typesName:"types",getTypesName:"getClientsContactsTypes",getFieldsName:"getClientsContactsFields",addName:"addClientsContactsField",updateName:"updateClientsContactsField",deleteName:"deleteClientsContactsField",haveSort:!0},{name:e("SettingEntities.tabs.products"),value:"Products",storeName:"fields",fieldsName:"fields",typesName:"types",getTypesName:"get_types",getFieldsName:"get_fields",addName:"add_field",updateName:"update_fields",deleteName:"delete_field",haveLeadConfig:!0,haveFieldsProperties:!0,haveCategories:!0,haveSort:!0,havePublicOrderConfig:!0,publicOrderConfigField:"lead_config"}],select:function(e){this.selected=e}});return t.select(t.list.find((e=>e.isBase))),{tabs:t}}const Eu=e=>((0,n.dD)("data-v-a9c23370"),e=e(),(0,n.Cn)(),e),Ou={class:"bgc"},Fu=Eu((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[(0,n._)("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 18h3.75a5.25 5.25 0 1 0 0-10.5H5M7.5 4L4 7.5L7.5 11"})],-1))),Iu=[Fu],Lu={class:"container"},Au={class:"header"},Nu={class:"top"},Pu=Eu((()=>(0,n._)("br",null,null,-1))),Mu={class:"bottom"},ju=["title"],$u=["disabled"],Uu={class:"content"},qu=Eu((()=>(0,n._)("div",{class:"flex flex-row items-center justify-end gap-1 min-w-[84px] ml-4"},[(0,n._)("button",{disabled:"",class:"w-10 h-10 p-1 pointer transition-all overflow-hidden duration-200 relative bg-slate-50 text-slate-700/70 hover:bg-valencia-50 hover:text-valencia-500 rounded-lg inline-flex justify-center items-center"},[(0,n._)("span",{class:"material-icons-round absolute",style:{"font-size":"30px","font-weight":"bold"}}," close ")]),(0,n._)("button",{disabled:"",class:"w-10 h-10 p-1 pointer justify-self-end transition-all duration-200 relative bg-slate-50 text-slate-700/70 hover:bg-fruit-salad-100/80 hover:text-fruit-salad-500 rounded-lg inline-flex justify-center items-center"},[(0,n._)("span",{class:"material-icons-round absolute",style:{"font-size":"38px","font-weight":"400"}}," add ")])],-1))),Vu={class:"input_name"},Bu=["title"],Hu=["onKeyup","onUpdate:modelValue","disabled"],Wu=["onClick","disabled","title"],Zu=["onClick","title"],zu=Eu((()=>(0,n._)("div",{class:"rename btn"},null,-1))),Ru=[zu],Yu=["onUpdate:modelValue","placeholder","onInput"],Ku={class:"flex flex-row items-center justify-end gap-1 min-w-[84px]"},Gu=["onClick","title"],Xu=Eu((()=>(0,n._)("span",{class:"material-icons-round absolute",style:{"font-size":"30px","font-weight":"bold"}}," close ",-1))),Ju=[Xu],Qu=["id","onClick","title"],ep=Eu((()=>(0,n._)("span",{class:"material-icons-round absolute",style:{"font-size":"38px","font-weight":"400"}}," add ",-1))),tp=[ep];function ip(e,t,i,s,a,l){const r=(0,n.up)("ProductsCategoryRemoveModal"),c=(0,n.up)("SettingEntitiesCategoriesSkeleton"),d=(0,n.up)("AppDrag");return(0,n.wg)(),(0,n.iD)("div",Ou,[(0,n._)("button",{class:"bg-slate-400 bg-opacity-90 p-2 h-fit w-fit rounded-xl absolute left-0 hover:shadow-sm hover:drop-shadow-md outline-none focus-visible:drop-shadow-md",onClick:t[0]||(t[0]=e=>s.close())},Iu),(0,n._)("div",Lu,[(0,n._)("div",Au,[(0,n._)("div",Nu,[(0,n._)("label",null,(0,b.zw)(e.$t("SettingEntities.entCats.header")),1)]),Pu,(0,n._)("div",Mu,[s.del_modal_config.show?((0,n.wg)(),(0,n.j4)(n.lR,{key:0,to:"body"},[(0,n.Wm)(r,{disabled:s.IBL("del"),onRemove:t[1]||(t[1]=()=>s.LB("del",s.remove())),onClose:s.closeRemoveModal},null,8,["disabled","onClose"])])):(0,n.kq)("",!0),null!==s.target?((0,n.wg)(),(0,n.j4)(n.lR,{key:1,to:s.target},[(0,n._)("div",{class:"backdrop",onClick:t[2]||(t[2]=(0,o.iM)((e=>s.reset_fields_cat_name()),["stop"])),style:{"z-index":"99"}}),(0,n._)("div",{class:"add_teleport",style:{"z-index":"100"},title:s.t("SettingEntities.entCats.titleAdd")},[(0,n.wy)((0,n._)("input",{type:"text",class:"input_teleport","onUpdate:modelValue":t[3]||(t[3]=e=>s.fields_cat_name=e),ref:"input",onKeyup:[t[4]||(t[4]=(0,o.D2)((e=>s.LB("addNew"+s.selected_category_id,s.add_new())),["enter"])),t[5]||(t[5]=(0,o.D2)((e=>s.reset_fields_cat_name()),["esc"]))]},null,544),[[o.nr,s.fields_cat_name]]),(0,n._)("button",{class:"button_teleport",onClick:t[6]||(t[6]=e=>s.LB("addNew"+s.selected_category_id,s.add_new())),disabled:s.IBL("addNew"+s.selected_category_id)},(0,b.zw)(e.$t("global.ok")),9,$u)],8,ju)],8,["to"])):(0,n.kq)("",!0)])]),(0,n._)("div",Uu,[s.isLoading?((0,n.wg)(),(0,n.j4)(c,{key:0},{btns:(0,n.w5)((()=>[qu])),_:1})):((0,n.wg)(),(0,n.j4)(d,{key:1,list:s.copy_fields_properties,onCustomMove:t[7]||(t[7]=(e,t)=>s.customMove(e,t))},{default:(0,n.w5)((({element:t})=>[(0,n._)("div",Vu,[(0,n._)("div",{title:s.t("SettingEntities.entCats.titleChangeName"),class:"text_block"},[(0,n.wy)((0,n._)("input",{type:"text",class:"input_uderline",onKeyup:(0,o.D2)((e=>s.LB("rename"+t.id,s.rename(t.id))),["enter"]),"onUpdate:modelValue":e=>t.name=e,disabled:0===t.parent_id},null,40,Hu),[[o.nr,t.name]])],8,Bu),!s.all_old?.name?.includes(t.name)&&s.all_old?.id?.includes(t.id)?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e=>s.LB("rename"+t.id,s.rename(t.id)),disabled:s.IBL("rename"+t.id),class:"btns",title:s.t("SettingEntities.entCats.titleSave")},[(0,n._)("div",{class:(0,b.C_)(["btn",{apply:!s.confirm,confirm:s.confirm}])},null,2)],8,Wu)):(0,n.kq)("",!0),!s.all_old?.name?.includes(t.name)&&s.all_old?.id?.includes(t.id)?((0,n.wg)(),(0,n.iD)("button",{key:1,onClick:e=>s.prevname(t.id),class:"btns",title:s.t("SettingEntities.entCats.titleChange")},Ru,8,Zu)):(0,n.kq)("",!0),s.isTest2&&1!==t.level?(0,n.wy)(((0,n.wg)(),(0,n.iD)("input",{key:2,type:"text",class:"input input_uderline ml-2","onUpdate:modelValue":e=>t.img_url=e,placeholder:s.t("SettingEntities.entCats.url"),onInput:()=>s.changeImgUrl(t)},null,40,Yu)),[[o.nr,t.img_url]]):(0,n.kq)("",!0)]),(0,n._)("div",Ku,[0!==t.parent_id&&(!s.copy_fields_properties[e.idx+1]||s.copy_fields_properties[e.idx+1]?.level<=t.level)?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:(0,o.iM)((e=>s.setRemoveModalConfig(t.id,t.level)),["stop"]),class:"w-10 h-10 p-1 pointer transition-all overflow-hidden duration-200 relative bg-slate-50 text-slate-700/70 hover:bg-valencia-50 hover:text-valencia-500 rounded-lg inline-flex justify-center items-center",title:s.t("SettingEntities.entCats.del")},Ju,8,Gu)):(0,n.kq)("",!0),(0,n._)("button",{id:t.id,onClick:e=>s.selected_category_id=t.id,class:"w-10 h-10 p-1 pointer justify-self-end transition-all duration-200 relative bg-slate-50 text-slate-700/70 hover:bg-fruit-salad-100/80 hover:text-fruit-salad-500 rounded-lg inline-flex justify-center items-center",ref:e=>t.id===s.selected_category_id?s.target=e:null,title:null===s.target?s.t("SettingEntities.entCats.add"):null},tp,8,Qu)])])),_:1},8,["list"]))])])])}const np=["onDragstart"];function op(e,t,i,o,s,a){const l=(0,n.up)("AppDrag",!0),r=(0,n.up)("draggable");return(0,n.wg)(),(0,n.j4)(r,{class:"flex flex-col h-full p-0 ml-4 min-h-[8px] level",list:i.list,group:"pe","item-key":e.id,onEnd:o.moveItem},{item:(0,n.w5)((({element:i})=>[(0,n._)("div",{onDragstart:e=>o.isDragged=i.id,onDragend:t[1]||(t[1]=e=>o.isDragged=null)},[(0,n._)("div",{class:(0,b.C_)(["rounded-md cursor-move bg-white flex flex-row items-center justify-between gap-4 px-4 py-2 border border-slate-300",{darag:o.isDragged==i.id}])},[(0,n.WI)(e.$slots,"default",{element:i},(()=>[(0,n.Uk)((0,b.zw)(i.name),1)]),!0)],2),(0,n.Wm)(l,{list:i.list,class:(0,b.C_)({"mt-2":i.list.length}),onCustomMove:t[0]||(t[0]=(e,t)=>o.customMove(e,t))},{default:(0,n.w5)((({element:t})=>[(0,n.WI)(e.$slots,"default",{element:t},(()=>[(0,n.Uk)((0,b.zw)(i.name),1)]),!0)])),_:2},1032,["list","class"])],40,np)])),_:3},8,["list","item-key","onEnd"])}var sp=i(6983),ap=i.n(sp),lp={components:{draggable:ap(),AppDrag:cp},props:{list:Array},setup(e,t){const i=(0,P.iH)(null),n=e=>{const i=e?.to?.parentElement?.__draggable_context?.element?.id,n=e?.item?._underlying_vm_?.id;t.emit("customMove",n,i)},o=(e,i)=>{t.emit("customMove",e,i)};return{isDragged:i,moveItem:n,customMove:o}}};const rp=(0,q.Z)(lp,[["render",op],["__scopeId","data-v-c84fb472"]]);var cp=rp;const dp={class:"list flex flex-col items-end gap-2 w-full ml-4"};function up(e,t,i,o,s,a){return(0,n.wg)(),(0,n.iD)("div",dp,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.list,((t,i)=>((0,n.wg)(),(0,n.iD)("div",{class:"item flex flex-row items-center justify-between w-full rounded-md h-[58px] py-2 px-4 border border-slate-300",style:(0,b.j5)({width:`calc(100% - ${16*t}px )`}),key:i},[(0,n._)("div",{class:"w-full skeleton_categories",style:(0,b.j5)({animationDelay:.1*(t+i+1)/2+"s"})},null,4),(0,n._)("div",{class:"w-5/6 skeleton_categories",style:(0,b.j5)({animationDelay:.1*(t+.5+i+1)/2+"s"})},null,4),(0,n.WI)(e.$slots,"btns",{},void 0,!0)],4)))),128))])}var pp={setup(){const e=(0,n.Fl)((()=>M.Z.state.categories.fields_properties.reduce(((e,t)=>(e.push(t.level-1),e)),[])||[0,1,2,1,2,3,1,1]));return{list:e}}};const fp=(0,q.Z)(pp,[["render",up],["__scopeId","data-v-1fc6c4f4"]]);var hp=fp,_p={components:{ProductsCategoryRemoveModal:Io,AppDrag:cp,SettingEntitiesCategoriesSkeleton:hp},setup(e,t){const{t:i}=(0,me.j)(),{lockBtn:o,isBtnLocked:s}=(0,Un.L)(),a=(0,P.iH)(""),l=(0,P.iH)(null),r=(0,P.iH)(null),c=(0,P.qj)({}),d=(0,P.iH)(null),u=(0,P.iH)(!1),p=(0,P.qj)({show:!1,id:null,level:null}),f=(0,P.iH)(null);(0,n.bv)((async()=>{await M.Z.dispatch("get_fields_properties"),_(),y()}));const h=(0,P.iH)([]),_=()=>{h.value=[],h.value=m(M.Z.state.categories.fields_properties)},m=e=>{const t=[],i=t=>{const n=[];return e.forEach((e=>{e.parent_id===t&&n.push({...e,list:i(e.id)})})),n},n=e.find((e=>0===e.parent_id));return t.push({...n,list:i(n.id)}),t},g=(e,t)=>{const i=(e,t)=>{let n=null;return e.forEach((e=>{if(e.id===t&&(n=e),e.list.length){const o=i(e.list,t);o&&(n=o)}})),n};return i([{list:e}],t)},v=async(e,t)=>{const i=g(h.value,e);if(i.parent_id===t)return;const n={id:e,parent_id:t,name:"",sort:13};await M.Z.dispatch("update_fields_properties",n),_()},b=e=>{const t=[];function i(e){const n={...e},o=n.list;delete n.list,t.push(n),o.length&&o.forEach((e=>{i(e)}))}return e.forEach((e=>{i(e)})),t},w=e=>{clearTimeout(f.value),f.value=setTimeout((()=>{const t={id:e.id,name:e.name,parent_id:e.parent_id,img_url:e.img_url};M.Z.dispatch("update_fields_properties",t)}),1e3)},y=()=>{const e={name:[],id:[],parent_id:[],fields_id:[],level:[],levels:[]};b(h.value).forEach((t=>Object.entries(t).forEach((([t,i])=>e[t]?.push(i))))),Object.assign(c,e)},C=async()=>{const e=g(h.value,l.value);e.level+1<=10&&""!=a.value&&(await M.Z.dispatch("add_fields_properties",{name:a.value,parent_id:e.id}),x(),_())},k=async e=>{const t=g(h.value,e),i={id:t.id,parent_id:"",name:t.name};await M.Z.dispatch("update_fields_properties",i),u.value=!0,await new Promise((e=>setTimeout((()=>{u.value=!1,y(),e()}),1e3)))},S=e=>{const t=g(h.value,e),i=()=>{let t="";return c.id.forEach(((i,n)=>i===e?t=c.name[n]:null)),t};t&&(t.name=i())},x=()=>{l.value=null,a.value="",r.value=null},D=(e,t)=>{p.level=t,p.id=e,p.show=!0},T=async()=>{1!=p.level&&await M.Z.dispatch("delete_fields_properties",{id:p.id}),E(),_()},E=()=>{p.show=!1},O=()=>{t.emit("toggleCategories",!1)},F=(0,P.iH)(null);(0,n.YP)(r,(()=>{(0,n.Y3)((()=>{null!==r.value&&F.value.focus()}))}),{deep:!0});const I=(0,n.Fl)((()=>M.Z.state.categories.isLoading));return{fields_cat_name:a,selected_category_id:l,target:r,all_old:c,isDragged:d,confirm:u,del_modal_config:p,timer:f,copy_fields_properties:h,isTest2:_e.h,changeImgUrl:w,get_all_old:y,add_new:C,rename:k,prevname:S,reset_fields_cat_name:x,setRemoveModalConfig:D,remove:T,closeRemoveModal:E,close:O,input:F,t:i,LB:o,IBL:s,customMove:v,isLoading:I}}};const mp=(0,q.Z)(_p,[["render",ip],["__scopeId","data-v-a9c23370"]]);var gp=mp;const vp=e=>((0,n.dD)("data-v-7817cf17"),e=e(),(0,n.Cn)(),e),bp={class:"bgc"},wp=["disabled"],yp=vp((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[(0,n._)("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 18h3.75a5.25 5.25 0 1 0 0-10.5H5M7.5 4L4 7.5L7.5 11"})],-1))),Cp=[yp],kp={class:"container"},Sp={class:"header"},xp={class:"top"},Dp={class:"content"},Tp={class:"rows"},Ep={class:"row"},Op={class:"item item_field title"},Fp={class:"copy_fields"},Ip={class:"item item_type"},Lp=vp((()=>(0,n._)("th",{class:"item"},null,-1))),Ap={class:"item"},Np=["onUpdate:modelValue"],Pp={class:"item selectors"},Mp={class:"type_selector_options pt-6"},jp={key:0,class:"type_selector_option gap-2"},$p={class:"grid grid-cols-2 min-w-[40px]"},Up=["onClick"],qp=vp((()=>(0,n._)("span",{class:"material-icons-outlined text-[#757575]"}," expand_less ",-1))),Vp=[qp],Bp={key:1},Hp=["onClick"],Wp=vp((()=>(0,n._)("span",{class:"material-icons-outlined rotate-180 text-[#757575]"}," expand_less ",-1))),Zp=[Wp],zp={key:3},Rp=["onUpdate:modelValue"],Yp={class:"relative"},Kp=["title"],Gp=vp((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[(0,n._)("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"1.5"},[(0,n._)("path",{d:"M21 7v-.63c0-1.193 0-1.79-.158-2.27a3.045 3.045 0 0 0-1.881-1.937C18.493 2 17.914 2 16.755 2h-9.51c-1.159 0-1.738 0-2.206.163a3.046 3.046 0 0 0-1.881 1.936C3 4.581 3 5.177 3 6.37V15m18-4v9.374c0 .858-.985 1.314-1.608.744a.946.946 0 0 0-1.284 0l-.483.442a1.657 1.657 0 0 1-2.25 0a1.657 1.657 0 0 0-2.25 0a1.657 1.657 0 0 1-2.25 0a1.657 1.657 0 0 0-2.25 0a1.657 1.657 0 0 1-2.25 0l-.483-.442a.946.946 0 0 0-1.284 0c-.623.57-1.608.114-1.608-.744V19"}),(0,n._)("path",{"stroke-linejoin":"round",d:"m9.5 10.4l1.429 1.6L14.5 8"}),(0,n._)("path",{d:"M7.5 15.5H9m7.5 0H12"})])],-1))),Xp=[Gp],Jp=["id","disabled","checked","onChange"],Qp=["for"],ef={class:"relative"},tf=["title"],nf=vp((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},[(0,n._)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-width":"1.5",d:"m14 8l-4 4m0-4l4 4m-6.5 3.5H9m7.5 0H12M21 7v-.63c0-1.193 0-1.79-.158-2.27a3.045 3.045 0 0 0-1.881-1.937C18.493 2 17.914 2 16.755 2h-9.51c-1.159 0-1.738 0-2.206.163a3.046 3.046 0 0 0-1.881 1.936C3 4.581 3 5.177 3 6.37V15m18-4v9.374c0 .858-.985 1.314-1.608.744a.946.946 0 0 0-1.284 0l-.483.442a1.657 1.657 0 0 1-2.25 0a1.657 1.657 0 0 0-2.25 0a1.657 1.657 0 0 1-2.25 0a1.657 1.657 0 0 0-2.25 0a1.657 1.657 0 0 1-2.25 0l-.483-.442a.946.946 0 0 0-1.284 0c-.623.57-1.608.114-1.608-.744V19"})],-1))),of=[nf],sf=["id","disabled","checked","onChange"],af=["for"],lf=["onClick","disabled"],rf=["onClick","disabled"],cf={class:"item del_sell"},df=["onClick","disabled"],uf=["onClick","disabled"];function pf(e,t,i,s,a,l){const r=(0,n.up)("AppErrorText");return(0,n.wg)(),(0,n.iD)("div",bp,[(0,n._)("button",{onClick:t[0]||(t[0]=e=>s.LB("addNew",s.addStatuses())),disabled:s.IBL("addNew"),class:"add_new_button"},null,8,wp),(0,n._)("button",{class:"bg-slate-400 bg-opacity-90 p-2 h-fit w-fit rounded-xl absolute left-0 hover:shadow-sm hover:drop-shadow-md outline-none focus-visible:drop-shadow-md",onClick:t[1]||(t[1]=e=>s.close())},Cp),(0,n._)("div",kp,[(0,n._)("div",Sp,[(0,n._)("div",xp,[(0,n._)("label",null,(0,b.zw)(e.$t("SettingEntities.entStats.header")),1)])]),(0,n._)("div",Dp,[(0,n._)("table",Tp,[(0,n._)("tr",Ep,[(0,n._)("th",Op,[(0,n._)("div",Fp,[(0,n._)("span",null,(0,b.zw)(e.$t("SettingEntities.entStats.name")),1)])]),(0,n._)("th",Ip,(0,b.zw)(e.$t("SettingEntities.entStats.stat")),1),Lp]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.statusesList,(({statuses:t,statusesIsChange:i,saveStatuses:a,delErrorText:l})=>((0,n.wg)(),(0,n.iD)("tr",{class:(0,b.C_)(["row",{load:e.is_loading}]),key:t.id},[(0,n._)("td",Ap,[(0,n.wy)((0,n._)("input",{type:"text",class:"input new_item_input","onUpdate:modelValue":e=>t.name=e},null,8,Np),[[o.nr,t.name]]),(0,n.Wm)(r,{text:l,show:l},null,8,["text","show"])]),(0,n._)("td",Pp,[(0,n._)("div",Mp,[(0,n.Wm)(o.W3,{name:"list",mode:"out-in"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.list,((e,i)=>((0,n.wg)(),(0,n.iD)(n.HY,{key:e.value},[3!==e.type?((0,n.wg)(),(0,n.iD)("div",jp,[(0,n._)("div",$p,[e.is_system?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[1!==i?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"up leading-[1] h-min flex justify-center items-center w-fit",onClick:e=>(t.sort(i,"up"),s.toggleNeedUpdateStatuses(!0))},Vp,8,Up)):((0,n.wg)(),(0,n.iD)("div",Bp)),t.list[i+1].sort<100?((0,n.wg)(),(0,n.iD)("button",{key:2,class:"down leading-[1] h-min flex justify-center items-center w-fit",onClick:e=>(t.sort(i,"down"),s.toggleNeedUpdateStatuses(!0))},Zp,8,Hp)):((0,n.wg)(),(0,n.iD)("div",zp))],64))]),(0,n.wy)((0,n._)("input",{type:"text",class:"input","onUpdate:modelValue":t=>e.name=t},null,8,Rp),[[o.nr,e.name]]),(0,n._)("div",Yp,[0===i?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"absolute -top-full -translate-y-2 left-1/2 -translate-x-1/2 text-slate-600",title:s.t("SettingEntities.entStats.titRes")},Xp,8,Kp)):(0,n.kq)("",!0),(0,n._)("input",{type:"checkbox",class:"checkbox",id:i+"nb1"+t.id,disabled:e.sort>99,checked:t.reservation.includes(e.value),onChange:i=>(t.changeVal("reservation",e.value),s.toggleNeedUpdateStatuses(!0))},null,40,Jp),(0,n._)("label",{for:i+"nb1"+t.id},null,8,Qp)]),(0,n._)("div",ef,[0===i?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"absolute -top-full -translate-y-2 left-1/2 -translate-x-1/2 text-slate-600",title:s.t("SettingEntities.entStats.titWO")},of,8,tf)):(0,n.kq)("",!0),(0,n._)("input",{type:"checkbox",class:"checkbox",id:i+"nb2"+t.id,disabled:t.resIdx>i-1,checked:t.write_off===e.value,onChange:i=>(t.changeVal("write_off",e.value),s.toggleNeedUpdateStatuses(!0))},null,40,sf),(0,n._)("label",{for:i+"nb2"+t.id},null,8,af)]),(0,n._)("button",{class:"del_button",style:(0,b.j5)({visibility:e.is_system?"hidden":"visible"}),onClick:i=>(s.LB("del"+e.id,t.del(e.id)),s.toggleNeedUpdateStatuses(!0)),disabled:s.IBL("del"+e.id)},null,12,lf)])):(0,n.kq)("",!0)],64)))),128))])),_:2},1024),(0,n._)("button",{onClick:e=>(s.LB("add",t.add()),s.toggleNeedUpdateStatuses(!0)),disabled:s.IBL("add"),class:"add_button"},null,8,rf)])]),(0,n._)("td",cf,[t.isNew?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"del_btn",onClick:e=>(s.LB("remove"+t.id,s.removeStatuses(t.id)),s.toggleNeedUpdateStatuses(!0)),disabled:s.IBL("remove"+t.id)},null,8,df)):(0,n.kq)("",!0),i?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn btn_save btn_blue",onClick:e=>(s.LB("save",a()),s.toggleNeedUpdateStatuses(!0)),disabled:s.IBL("save")},(0,b.zw)(e.$t("global.save")),9,uf)):(0,n.kq)("",!0)])],2)))),128))])])])])}function ff(e,t){const{t:i}=(0,me.j)(),o=(0,P.qj)({id:e.id,name:e.name,isNew:!e.is_system,list:e.statuses,reservation:[],write_off:null,resIdx:(0,n.Fl)((()=>o.list.indexOf([...o.list].reverse().find((e=>o.reservation.includes(e.value)))))),woIdx:(0,n.Fl)((()=>o.list.indexOf(o.list.find((e=>e.value===o.write_off))))),add:async function(){await f(),await M.Z.dispatch("ordersPipelinesStatusesAdd",{pipeline_id:this.id,name:i("SettingEntities.entStats.new"),sort:this.list.at(-4).sort+1}),await t(!0)},del:async function(e){await f(),await M.Z.dispatch("ordersPipelinesStatusesDelete",{id:e}),await t(!0)},changeVal:function(e,t){if("reservation"===e){this.resIdx>this.woIdx&&(this.write_off=null);const e=this.reservation.indexOf(t);e>-1?this.reservation.splice(e,1):this.reservation.push(t)}else this[e]===t?this[e]=null:this[e]=t},sort:function(e,t){const i=e-1,n=e+1,o=this.list[e].sort,s=this.list[e];"up"===t&&void 0!==this.list[i].sort&&(this.list[e].sort=this.list[i].sort,this.list[i].sort=o,this.list[e]=this.list[i],this.list[i]=s),"down"===t&&this.list[n].sort<100&&(this.list[e].sort=this.list[n].sort,this.list[n].sort=o,this.list[e]=this.list[n],this.list[n]=s)}}),s=()=>{const e=[];o.list.forEach((t=>{t.is_write_off&&(o.write_off=t.id),t.is_reserve&&e.push(t.id)})),e.length&&(o.reservation=e)};s();const a=(0,P.iH)(""),l=(0,P.iH)([]),r=()=>{o.list.map((e=>{const t=e.name,i=e.sort;e.statNameIsChange=(0,n.Fl)((()=>e.name!=t)),e.statSortIsChange=(0,n.Fl)((()=>e.sort!=i))})),a.value=JSON.parse(JSON.stringify(o.name)),l.value=JSON.parse(JSON.stringify([o.reservation,o.write_off]))};r();const c=(0,n.Fl)((()=>d.value||u.value)),d=(0,n.Fl)((()=>a.value!=o.name)),u=(0,n.Fl)((()=>o.list.some((e=>e.statNameIsChange||e.statSortIsChange))||p.value)),p=(0,n.Fl)((()=>JSON.stringify(l.value)!=JSON.stringify([o.reservation,o.write_off]))),f=async()=>{if(c.value){if(d.value&&await M.Z.dispatch("ordersPipelinesUpdate",{id:o.id,name:o.name}),u.value){const e=[];o.list.forEach((t=>{if(!t.statNameIsChange&&!t.statSortIsChange&&!p.value)return;const i={id:t.id};t.statNameIsChange&&(i.name=t.name),t.statSortIsChange&&(i.sort=t.sort),p.value&&(i.is_write_off=Number(t.id==o.write_off),i.is_reserve=Number(o.reservation.includes(t.id))),e.push(i)})),await M.Z.dispatch("ordersPipelinesStatusesUpdate",{statuses:e})}r()}},h=(0,P.iH)("");return{statuses:o,statusesIsChange:c,nameIsChange:d,statsIsChange:u,saveStatuses:f,delErrorText:h}}const hf={key:0,class:"text-red-700 text-sm origin-top"};function _f(e,t,i,s,a,l){return(0,n.wg)(),(0,n.j4)(o.uT,{name:"fade"},{default:(0,n.w5)((()=>[i.show?((0,n.wg)(),(0,n.iD)("small",hf,(0,b.zw)(i.text),1)):(0,n.kq)("",!0)])),_:1})}var mf={props:{text:String,show:Boolean}};const gf=(0,q.Z)(mf,[["render",_f],["__scopeId","data-v-c7785ef8"]]);var vf=gf,bf=i(7048),wf=i(6413),yf={components:{AppErrorText:vf},setup(e,t){const{t:i}=(0,me.j)(),{lockBtn:o,isBtnLocked:s}=(0,Un.L)();(0,n.bv)((()=>{a()}));const a=async(e,t)=>{const i=await M.Z.dispatch("ordersPipelinesList",{isUpdate:Boolean(e)});if(i.forEach((e=>e.statuses?.map((e=>e.value=e.id)))),void 0!==t){const e=i.reduce(((e,t)=>(e.push(t.id),e)),[]),o=l.reduce(((e,t)=>(e.push(t.statuses.id),e)),[]),s=(0,n.Fl)((()=>String(Number(e.includes(t)))+String(Number(o.includes(t)))));if("10"===s.value){const e=i.find((e=>e.id===t));l.push(ff(e,a))}else{if("01"!==s.value)return;{const e=l.find((e=>e.statuses.id===t)),i=l.indexOf(e);if(i<0)return;l.splice(i,1)}}}else l.length=0,i.forEach((e=>-1!==e.value&&l.push(ff(e,a))))},l=(0,P.qj)([]),r=async()=>{const e=await M.Z.dispatch("ordersPipelinesAdd",{name:i("SettingEntities.entStats.newStatName",{count:l.length})});a(!1,e.id)},c=async e=>{const t=await M.Z.dispatch("ordersPipelinesDelete",{id:e});if(t.error){const n=l.find((t=>t.statuses?.id==e));n&&"There are orders in this pipeline."==t.error&&(n.delErrorText=i("message.OrdersInPipeline"))}else await a(!1,e)},{OrderViewKey:d}=(0,bf.X)(),[u,p]=(0,wf.OT)(!1),f=()=>t.emit("toggleStatuses");return(0,n.Ah)((async()=>{u.value&&(await M.Z.dispatch("ordersPipelinesList",{isUpdate:!0}),d.value++)})),{statusesList:l,addStatuses:r,removeStatuses:c,close:f,t:i,toggleNeedUpdateStatuses:p,LB:o,IBL:s}}};const Cf=(0,q.Z)(yf,[["render",pf],["__scopeId","data-v-7817cf17"]]);var kf=Cf,Sf={components:{BtnsSaveClose:A.Z,AppRadioBtnsGroupUnderlined:Pr.Z,SettingEntitiesTable:yu,SettingEntitiesFieldsProperties:Du,SettingEntitiesCategories:gp,SettingEntitiesStatuses:kf},setup(){const{tabs:e}=Tu(),t=()=>{i()},i=()=>{M.Z.commit("toggleSettingEntities",!1)},[n,o]=(0,wf.OT)(!1),[s,a]=(0,wf.OT)(!1),l=()=>{o(!1),a(!1)};return{close:i,save:t,tabs:e,showCategories:n,toggleCategories:o,showStatuses:s,toggleStatuses:a,closeAllSubTabs:l}}};const xf=(0,q.Z)(Sf,[["render",Tc],["__scopeId","data-v-31493d1b"]]);var Df=xf,Tf=i(65),Ef={components:{TableSettings:B,EditStuff:we,NewPosition:Ct,CancelPosition:Rt,DocumentSetting:Rn,ProductCategory:No,ProductProperties:ma,ThirdPpartyIntegrations:Ka,SyncSettings:Sl,MoveProductsBetweenWhs:er,ImportStuff:Sr,ClientsFieldsSettings:gc,SettingEntities:Df},props:{selectedWH:Object,currentItems:Array},computed:{...(0,Tf.Se)(["show_table_settings","show_filter","show_edit_stuff","show_new_position","show_cancel_position","show_document_setting","show_product_category","show_product_properties","showThirdPpartyIntegrations","showAccountSattings","showSyncSettings","showEditPrice","showMoveProductsBetweenWhs","showImportStuff","showClientsFieldsSettings","showSettingEntities"])},methods:{updateProducts(){this.$emit("updateProducts")}}};const Of=(0,q.Z)(Ef,[["render",v],["__scopeId","data-v-a9647fa2"]]);var Ff=Of},1922:function(e,t,i){"use strict";i.d(t,{Z:function(){return g}});var n=i(3396),o=i(7139),s=i(9242);const a={class:"v-select"},l={class:"options",key:"a1"},r=["onClick"];function c(e,t,i,c,d,u){return(0,n.wg)(),(0,n.iD)("div",a,[(0,n._)("div",{class:(0,o.C_)(["title",{title_checked:c.show_options,disabled:i.disabled}]),onClick:t[0]||(t[0]=e=>c.open_close_options()),ref:"title",tabindex:"0"},[(0,n._)("p",null,(0,o.zw)(i.selected_option.name),1),i.disabled?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,o.C_)(["arrow",{rotate_arrow:c.show_options}])},null,2))],2),c.show_options?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",{class:"backdrop",onClick:t[1]||(t[1]=(0,s.iM)((e=>c.handleFocusOut()),["stop"]))}),(0,n.Wm)(s.uT,{name:"list"},{default:(0,n.w5)((()=>[(0,n._)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.options,(e=>((0,n.wg)(),(0,n.iD)("p",{key:e.value,class:(0,o.C_)({optgroup:"optgroup"===e.value,selected:e.value==i.selected_option.value}),onClick:t=>c.select_option(e)},[e.optgroup?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Uk)("     "+(0,o.zw)(e.name),1)],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.Uk)((0,o.zw)(e.name),1)],64))],10,r)))),128))])])),_:1})],64)):(0,n.kq)("",!0)])}var d=i(4870);const u={props:{options_props:{type:Array,default(){return[]},required:!0},selected_option:{type:Object,required:!0,default(){return{}}},disabled:{type:Boolean,required:!1,default:!1},idx:{type:Number,required:!1}},emits:{select:null,toggleShowOptions:null},setup(e,t){const i=(0,d.iH)([]);(0,n.bv)((()=>{window.addEventListener("scroll",u),(0,n.Y3)((()=>{o()}))}));const o=()=>{i.value=[],e.options_props?.forEach((e=>i.value.push(e)))};(0,n.YP)((()=>e.options_props),(()=>{o()}),{deep:!0});const s=(0,d.iH)(!1);(0,n.YP)(s,(()=>t.emit("toggleShowOptions",s.value)));const a=()=>{s.value=!1},l=()=>{e.disabled||(u(),s.value=!s.value)},r=()=>{a()},c=i=>{"optgroup"!=i.value&&(t.emit("select",i,e.idx),a())};(0,n.Ah)((()=>window.removeEventListener("scroll",u)));const u=()=>{const e=p.value?.getBoundingClientRect();f.value=e.width-2+"px",h.value=e.x+"px",_.value=e.bottom+"px"},p=(0,d.iH)(null),f=(0,d.iH)(null),h=(0,d.iH)(null),_=(0,d.iH)(null);return{open_close_options:l,handleFocusOut:r,show_options:s,options:i,select_option:c,title:p,optionsWidth:f,optionsX:h,optionsY:_}}},p=()=>{(0,s.sj)((e=>({"77739cb6":e.optionsWidth,"1eaa6852":e.optionsX,"1eaa6850":e.optionsY})))},f=u.setup;u.setup=f?(e,t)=>(p(),f(e,t)):p;var h=u,_=i(89);const m=(0,_.Z)(h,[["render",c],["__scopeId","data-v-1235c32f"]]);var g=m},3768:function(e,t,i){"use strict";i.d(t,{Z:function(){return y}});var n=i(3396),o=i(4870),s=i(7139),a=i(9242),l=i(4581),r=i(1120),c=i(3704),d=i(6367),u=i(6413),p=i(5310),f=i(2489);const h=e=>((0,n.dD)("data-v-36d8cb3e"),e=e(),(0,n.Cn)(),e),_=h((()=>(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 16 16",class:"text-[#757575]"},[(0,n._)("path",{fill:"currentColor",d:"M2 3.75A.75.75 0 0 1 2.75 3h10.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 3.75Zm0 4A.75.75 0 0 1 2.75 7h10.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 7.75Zm0 4a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H2.75a.75.75 0 0 1-.75-.75Z"})],-1))),m=[_],g=["onClick","disabled"];var v={__name:"NavBar",setup(e){const{t:t}=(0,f.j)(),i=(0,n.Fl)((()=>l.Z.state.account?.account?.id)),h=(0,n.Fl)((()=>void 0===l.Z.state.account?.user?.isAdmin||l.Z.state.account?.user?.isAdmin)),_=(0,o.qj)([{name:p.b.value?.names?.orders_deals?t("NavBar.deals"):t("NavBar.orders"),value:"orders",isTest:!1,hideId:[148],testOrder:1},{name:t("NavBar.documents"),value:"documents",isTest:!1,testOrder:4},{name:p.b.value?.names?.remnants_objects?t("NavBar.objects"):t("NavBar.remnants"),value:"remnants",testOrder:2},{name:t("NavBar.analytics"),value:"analytics",isAdmin:!0,testOrder:5},{name:t("NavBar.archive"),value:"archive",isProduction:!0},{name:t("NavBar.clients"),value:"clients",isTest:!0,testOrder:3}]),v=(0,n.Fl)((()=>l.Z.state.data.isNavBarDisabled)),b=e=>{y(!1),r.Z.push("/"+e)},[w,y]=(0,u.OT)(!1);(0,n.m0)((()=>{w.value?document.body.style.overflowY="hidden":document.body.style.overflowY="auto"}));const C=(0,o.iH)(null);return(0,d.i9H)(C,(()=>y(!1))),(e,t)=>((0,n.wg)(),(0,n.iD)("div",{ref_key:"list",ref:C},[(0,n._)("button",{onClick:t[0]||(t[0]=e=>(0,o.SU)(y)()),class:"md:hidden z-[49]"},m),(0,o.SU)(w)?((0,n.wg)(),(0,n.j4)(n.lR,{key:0,to:"body"},[(0,n._)("div",{class:"backdrop !bg-black/20 dark:!bg-black/60",onClick:t[1]||(t[1]=e=>(0,o.SU)(y)(!1))})])):(0,n.kq)("",!0),(0,n._)("div",{class:(0,s.C_)(["btns flex flex-col md:flex-row w-full sm:w-full md:w-full gap-2 justify-start fixed left-0 top-0 md:static h-fit md:bg-transparent p-4 md:p-0 md:border-none z-50 mt-12 font-medium border border-gray-100 rounded-lg bg-gray-50 md:mt-0 md:border-0 dark:bg-gray-800 dark:border-gray-700",[(0,o.SU)(w)?"flex":"hidden md:flex"]])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(_,(t=>((0,n.wg)(),(0,n.iD)(n.HY,{key:t},[(0,o.SU)(p.b).pages[t.value]?.deny?(0,n.kq)("",!0):(0,n.wy)(((0,n.wg)(),(0,n.iD)("button",{key:0,class:(0,s.C_)(["btns_btn py-2 px-3 md:px-2 md:py-0.5 text-lg text-gray-900 hover:bg-gray-100 md:hover:text-[#396f93] md:hover:border-[#396f93] md:bg-transparent md:hover:bg-transparent dark:text-white dark:hover:bg-gray-700 dark:hover:text-white dark:border-gray-700 md:text-[#1b3546] rounded border-[#1b3546] md:border",{selected_catalog:e.$route.path==="/"+t.value}]),onClick:e=>b(t.value),disabled:v.value,style:(0,s.j5)({order:(0,o.SU)(c.h)?t.testOrder:"unset"})},(0,s.zw)(t.name),15,g)),[[a.F8,!(t.isTest&&!(0,o.SU)(c.h))&&!(t.isProduction&&(0,o.SU)(c.h))&&!(t.isAdmin&&!h.value)&&!t.hideId?.includes(i.value)]])],64)))),128))],2)],512))}},b=i(89);const w=(0,b.Z)(v,[["__scopeId","data-v-36d8cb3e"]]);var y=w}}]);
//# sourceMappingURL=221.83494926.js.map