(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[403],{6135:function(e,t,a){"use strict";var s=a(4948),l=a(3070),n=a(9114);e.exports=function(e,t,a){var r=s(t);r in e?l.f(e,r,n(0,a)):e[r]=a}},2914:function(e,t,a){var s=a(7293),l=a(9114);e.exports=!s((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",l(1,7)),7!==e.stack)}))},9974:function(e,t,a){var s=a(1702),l=a(9662),n=a(4374),r=s(s.bind);e.exports=function(e,t){return l(e),void 0===t?e:n?r(e,t):function(){return e.apply(t,arguments)}}},1246:function(e,t,a){var s=a(648),l=a(8173),n=a(7497),r=a(5112),o=r("iterator");e.exports=function(e){if(void 0!=e)return l(e,o)||l(e,"@@iterator")||n[s(e)]}},8554:function(e,t,a){var s=a(6916),l=a(9662),n=a(9670),r=a(6330),o=a(1246),i=TypeError;e.exports=function(e,t){var a=arguments.length<2?o(e):t;if(l(a))return n(s(a,e));throw i(r(e)+" is not iterable")}},7659:function(e,t,a){var s=a(5112),l=a(7497),n=s("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(l.Array===e||r[n]===e)}},4411:function(e,t,a){var s=a(1702),l=a(7293),n=a(614),r=a(648),o=a(5005),i=a(2788),c=function(){},u=[],p=o("Reflect","construct"),d=/^\s*(?:class|function)\b/,m=s(d.exec),h=!d.exec(c),v=function(e){if(!n(e))return!1;try{return p(c,u,e),!0}catch(t){return!1}},y=function(e){if(!n(e))return!1;switch(r(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!m(d,i(e))}catch(t){return!0}};y.sham=!0,e.exports=!p||l((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?y:v},408:function(e,t,a){var s=a(9974),l=a(6916),n=a(9670),r=a(6330),o=a(7659),i=a(6244),c=a(7976),u=a(8554),p=a(1246),d=a(9212),m=TypeError,h=function(e,t){this.stopped=e,this.result=t},v=h.prototype;e.exports=function(e,t,a){var y,g,f,w,b,_,k,S=a&&a.that,R=!(!a||!a.AS_ENTRIES),C=!(!a||!a.IS_ITERATOR),D=!(!a||!a.INTERRUPTED),T=s(t,S),A=function(e){return y&&d(y,"normal",e),new h(!0,e)},F=function(e){return R?(n(e),D?T(e[0],e[1],A):T(e[0],e[1])):D?T(e,A):T(e)};if(C)y=e;else{if(g=p(e),!g)throw m(r(e)+" is not iterable");if(o(g)){for(f=0,w=i(e);w>f;f++)if(b=F(e[f]),b&&c(v,b))return b;return new h(!1)}y=u(e,g)}_=y.next;while(!(k=l(_,y)).done){try{b=F(k.value)}catch(I){d(y,"throw",I)}if("object"==typeof b&&b&&c(v,b))return b}return new h(!1)}},9212:function(e,t,a){var s=a(6916),l=a(9670),n=a(8173);e.exports=function(e,t,a){var r,o;l(e);try{if(r=n(e,"return"),!r){if("throw"===t)throw a;return a}r=s(r,e)}catch(i){o=!0,r=i}if("throw"===t)throw a;if(o)throw r;return l(r),a}},7497:function(e){e.exports={}},7066:function(e,t,a){"use strict";var s=a(9670);e.exports=function(){var e=s(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},4706:function(e,t,a){var s=a(6916),l=a(2597),n=a(7976),r=a(7066),o=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in o||l(e,"flags")||!n(o,e)?t:s(r,e)}},8053:function(e){var t=TypeError;e.exports=function(e,a){if(e<a)throw t("Not enough arguments");return e}},1295:function(e,t,a){var s=a(1913),l=a(2109),n=a(7854),r=a(5005),o=a(1702),i=a(7293),c=a(9711),u=a(614),p=a(4411),d=a(111),m=a(2190),h=a(408),v=a(9670),y=a(648),g=a(2597),f=a(6135),w=a(8880),b=a(6244),_=a(8053),k=a(4706),S=a(2914),R=n.Object,C=n.Date,D=n.Error,T=n.EvalError,A=n.RangeError,F=n.ReferenceError,I=n.SyntaxError,L=n.TypeError,E=n.URIError,q=n.PerformanceMark,M=n.WebAssembly,x=M&&M.CompileError||D,O=M&&M.LinkError||D,B=M&&M.RuntimeError||D,j=r("DOMException"),P=r("Set"),z=r("Map"),H=z.prototype,Z=o(H.has),$=o(H.get),Y=o(H.set),U=o(P.prototype.add),V=r("Object","keys"),G=o([].push),N=o((!0).valueOf),W=o(1..valueOf),K=o("".valueOf),J=o(C.prototype.getTime),Q=c("structuredClone"),X="DataCloneError",ee="Transferring",te=function(e){return!i((function(){var t=new n.Set([7]),a=e(t),s=e(R(7));return a==t||!a.has(7)||"object"!=typeof s||7!=s}))&&e},ae=function(e){return!i((function(){var t=new D,a=e({a:t,b:t});return!(a&&a.a===a.b&&a.a instanceof D)}))},se=function(e){return!i((function(){var t=e(new n.AggregateError([1],Q,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=Q||3!=t.cause}))},le=n.structuredClone,ne=s||!ae(le)||!se(le),re=!le&&te((function(e){return new q(Q,{detail:e}).detail})),oe=te(le)||re,ie=function(e){throw new j("Uncloneable type: "+e,X)},ce=function(e,t){throw new j((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",X)},ue=function(e,t){if(m(e)&&ie("Symbol"),!d(e))return e;if(t){if(Z(t,e))return $(t,e)}else t=new z;var a,s,l,o,i,c,h,v,_,q,M=y(e),H=!1;switch(M){case"Array":l=[],H=!0;break;case"Object":l={},H=!0;break;case"Map":l=new z,H=!0;break;case"Set":l=new P,H=!0;break;case"RegExp":l=new RegExp(e.source,k(e));break;case"Error":switch(s=e.name,s){case"AggregateError":l=r("AggregateError")([]);break;case"EvalError":l=T();break;case"RangeError":l=A();break;case"ReferenceError":l=F();break;case"SyntaxError":l=I();break;case"TypeError":l=L();break;case"URIError":l=E();break;case"CompileError":l=x();break;case"LinkError":l=O();break;case"RuntimeError":l=B();break;default:l=D()}H=!0;break;case"DOMException":l=new j(e.message,e.name),H=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":a=n[M],d(a)||ce(M),l=new a(ue(e.buffer,t),e.byteOffset,"DataView"===M?e.byteLength:e.length);break;case"DOMQuad":try{l=new DOMQuad(ue(e.p1,t),ue(e.p2,t),ue(e.p3,t),ue(e.p4,t))}catch(G){oe?l=oe(e):ce(M)}break;case"FileList":if(a=n.DataTransfer,p(a)){for(o=new a,i=0,c=b(e);i<c;i++)o.items.add(ue(e[i],t));l=o.files}else oe?l=oe(e):ce(M);break;case"ImageData":try{l=new ImageData(ue(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(G){oe?l=oe(e):ce(M)}break;default:if(oe)l=oe(e);else switch(M){case"BigInt":l=R(e.valueOf());break;case"Boolean":l=R(N(e));break;case"Number":l=R(W(e));break;case"String":l=R(K(e));break;case"Date":l=new C(J(e));break;case"ArrayBuffer":a=n.DataView,a||"function"==typeof e.slice||ce(M);try{if("function"==typeof e.slice)l=e.slice(0);else for(c=e.byteLength,l=new ArrayBuffer(c),_=new a(e),q=new a(l),i=0;i<c;i++)q.setUint8(i,_.getUint8(i))}catch(G){throw new j("ArrayBuffer is detached",X)}break;case"SharedArrayBuffer":l=e;break;case"Blob":try{l=e.slice(0,e.size,e.type)}catch(G){ce(M)}break;case"DOMPoint":case"DOMPointReadOnly":a=n[M];try{l=a.fromPoint?a.fromPoint(e):new a(e.x,e.y,e.z,e.w)}catch(G){ce(M)}break;case"DOMRect":case"DOMRectReadOnly":a=n[M];try{l=a.fromRect?a.fromRect(e):new a(e.x,e.y,e.width,e.height)}catch(G){ce(M)}break;case"DOMMatrix":case"DOMMatrixReadOnly":a=n[M];try{l=a.fromMatrix?a.fromMatrix(e):new a(e)}catch(G){ce(M)}break;case"AudioData":case"VideoFrame":u(e.clone)||ce(M);try{l=e.clone()}catch(G){ie(M)}break;case"File":try{l=new File([e],e.name,e)}catch(G){ce(M)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ce(M);default:ie(M)}}if(Y(t,e,l),H)switch(M){case"Array":case"Object":for(h=V(e),i=0,c=b(h);i<c;i++)v=h[i],f(l,v,ue(e[v],t));break;case"Map":e.forEach((function(e,a){Y(l,ue(a,t),ue(e,t))}));break;case"Set":e.forEach((function(e){U(l,ue(e,t))}));break;case"Error":w(l,"message",ue(e.message,t)),g(e,"cause")&&w(l,"cause",ue(e.cause,t)),"AggregateError"==s&&(l.errors=ue(e.errors,t));case"DOMException":S&&w(l,"stack",ue(e.stack,t))}return l},pe=le&&!i((function(){var e=new ArrayBuffer(8),t=le(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),de=function(e,t){if(!d(e))throw L("Transfer option cannot be converted to a sequence");var a=[];h(e,(function(e){G(a,v(e))}));var s,l,r,o,i,c,m,g=0,f=b(a);if(pe){o=le(a,{transfer:a});while(g<f)Y(t,a[g],o[g++])}else while(g<f){if(s=a[g++],Z(t,s))throw new j("Duplicate transferable",X);switch(l=y(s),l){case"ImageBitmap":r=n.OffscreenCanvas,p(r)||ce(l,ee);try{c=new r(s.width,s.height),m=c.getContext("bitmaprenderer"),m.transferFromImageBitmap(s),i=c.transferToImageBitmap()}catch(w){}break;case"AudioData":case"VideoFrame":u(s.clone)&&u(s.close)||ce(l,ee);try{i=s.clone(),s.close()}catch(w){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ce(l,ee)}if(void 0===i)throw new j("This object cannot be transferred: "+l,X);Y(t,s,i)}};l({global:!0,enumerable:!0,sham:!pe,forced:ne},{structuredClone:function(e){var t,a=_(arguments.length,1)>1&&null!=arguments[1]?v(arguments[1]):void 0,s=a?a.transfer:void 0;return void 0!==s&&(t=new z,de(s,t)),ue(e,t)}})},1897:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var s=a(3396);const l=e=>((0,s.dD)("data-v-580fb103"),e=e(),(0,s.Cn)(),e),n={class:"date_range"},r=["value"],o=l((()=>(0,s._)("span",null," - ",-1))),i=["value"];function c(e,t,a,l,c,u){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("input",{type:"date",value:a.dateStart?l.pattern("/","-",a.dateStart):l.pattern("/","-",a.dateRange?.split("-")[0]),onInput:t[0]||(t[0]=t=>(e.$emit("update:dateStart",l.pattern("-","/",t.target.value)?.split("-").join("/")),e.$emit("update:dateRange",l.pattern("-","/",t.target.value)?.split("-").join("/")+"-"+a.dateRange?.split("-")[1])))},null,40,r),o,(0,s._)("input",{type:"date",value:a.dateEnd?l.pattern("/","-",a.dateEnd):l.pattern("/","-",a.dateRange?.split("-")[1]),onInput:t[1]||(t[1]=t=>(e.$emit("update:dateEnd",l.pattern("-","/",t.target.value)?.split("-").join("/")),e.$emit("update:dateRange",a.dateRange?.split("-")[0]+"-"+l.pattern("-","/",t.target.value)?.split("-").join("/"))))},null,40,i)])}var u={props:{dateStart:{type:String,required:!1},dateEnd:{type:String,required:!1},dateRange:{type:String,required:!1}},setup(){const e=(e,t,a)=>a?.split(e)?.join(t);return{pattern:e}}},p=a(89);const d=(0,p.Z)(u,[["render",c],["__scopeId","data-v-580fb103"]]);var m=d},2357:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var s=a(3396);function l(e,t,a,l,n,r){const o=(0,s.up)("NavBar"),i=(0,s.up)("HomeMenu"),c=(0,s.up)("HomeModals");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",null,[(0,s.Wm)(o),(0,s.Wm)(i)]),(0,s.Wm)(c,{selectedWH:a.selectedWH},null,8,["selectedWH"])],64)}var n=a(6833),r=a(1624),o=a(2145),i={components:{NavBar:n.Z,HomeMenu:r.Z,HomeModals:o.Z},props:{selectedWH:{type:Object,required:!1}},setup(){}},c=a(89);const u=(0,c.Z)(i,[["render",l],["__scopeId","data-v-3b484666"]]);var p=u},1725:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var s=a(3396),l=a(7139);const n={class:"grid gap-3"},r={class:"current d"};function o(e,t,a,o,i,c){return(0,s.wg)(),(0,s.iD)("div",n,[a.page.current!=a.page.first&&null!=a.page.prev?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>o.prev()),class:"a"},(0,l.zw)("<"))):(0,s.kq)("",!0),a.page.current!=a.page.first&&a.page.prev!=a.page.first?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:t[1]||(t[1]=e=>o.first()),class:"b"},(0,l.zw)(a.page.first),1)):(0,s.kq)("",!0),a.page.current!=a.page.first&&null!=a.page.prev?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:t[2]||(t[2]=e=>o.prev()),class:"c"},(0,l.zw)(a.page.prev),1)):(0,s.kq)("",!0),(0,s._)("button",r,(0,l.zw)(a.page.current),1),a.page.current!=a.page.last&&null!=a.page.next?((0,s.wg)(),(0,s.iD)("button",{key:3,onClick:t[3]||(t[3]=e=>o.next()),class:"e"},(0,l.zw)(a.page.next),1)):(0,s.kq)("",!0),a.page.current!=a.page.last&&a.page.next!=a.page.last?((0,s.wg)(),(0,s.iD)("button",{key:4,onClick:t[4]||(t[4]=e=>o.last()),class:"f"},(0,l.zw)(a.page.last),1)):(0,s.kq)("",!0),a.page.current!=a.page.last&&null!=a.page.next?((0,s.wg)(),(0,s.iD)("button",{key:5,onClick:t[5]||(t[5]=e=>o.next()),class:"g"},(0,l.zw)(">"))):(0,s.kq)("",!0)])}var i={props:{page:Object},emits:{changePage(e){return e>0&&"number"===typeof e}},setup(e,t){const a=()=>t.emit("changePage",e.page.first),s=()=>t.emit("changePage",e.page.current-1),l=()=>t.emit("changePage",e.page.current+1),n=()=>t.emit("changePage",e.page.last);return{prev:s,first:a,next:l,last:n}}},c=a(89);const u=(0,c.Z)(i,[["render",o],["__scopeId","data-v-30638d00"]]);var p=u},9669:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var s=a(3396),l=a(7139);const n=["onClick","disabled"];function r(e,t,a,r,o,i){return(0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["btns_group",{small:a.small}])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.list,((t,o)=>((0,s.wg)(),(0,s.iD)("button",{class:(0,l.C_)(["btn",{selected:a.selected.value===t.value,small_btn:a.small}]),key:t.value,onClick:e=>r.select(t),disabled:a.disabled},[(0,s.Uk)((0,l.zw)(t.name)+" ",1),(0,s.WI)(e.$slots,"item"+o,{},void 0,!0)],10,n)))),128))],2)}var o={props:{list:Array,selected:Object,disabled:{type:Boolean,required:!1},small:{type:Boolean,required:!1}},setup(e,t){const a=e=>t.emit("select",e);return{select:a}}},i=a(89);const c=(0,i.Z)(o,[["render",r],["__scopeId","data-v-40c3e70c"]]);var u=c},0:function(e,t,a){"use strict";a.d(t,{Z:function(){return d}});var s=a(3396),l=a(7139),n=a(9242);const r={class:"filter"},o=["placeholder"];function i(e,t,a,i,c,u){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("button",{onClick:t[0]||(t[0]=e=>4==c.option?c.option=0:c.option+=1),class:"type_btn"},[(0,s._)("span",{class:(0,l.C_)({big:0==c.option})},(0,l.zw)(c.options[c.option]),3)]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.filterValue=e),type:"number",placeholder:a.item.placeholder},null,8,o),[[n.nr,c.filterValue]])])}var c={props:{item:{type:Object,required:!0},idx:{type:Number,required:!0}},data(){return{option:0,filterValue:null,options:["=",">",">=","<","<="]}},computed:{option_value(){return{option:this.options[this.option],value:this.filterValue}}},watch:{option_value:{handler(){this.emit_value()},deep:!0},item(){this.change_value()}},mounted(){this.change_value()},methods:{change_value(){(0,s.Y3)((()=>{this.filterValue=this.item.value,null==this.item.value&&(this.option=0)}))},emit_value(){this.$emit("change_filter_value",this.option_value,this.idx)}}},u=a(89);const p=(0,u.Z)(c,[["render",i],["__scopeId","data-v-a23c7acc"]]);var d=p},8697:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var s=a(3396),l=a(7139);function n(e,t,a,n,r,o){const i=(0,s.up)("AppPaginator"),c=(0,s.up)("selector-vue");return a.show?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,l.C_)(["bottom",{blur:a.blur}])},[a.showBtns?((0,s.wg)(),(0,s.j4)(i,{key:0,page:a.page,onChangePage:o.changePage},null,8,["page","onChangePage"])):(0,s.kq)("",!0),a.showSelector?((0,s.wg)(),(0,s.j4)(c,{key:1,class:"count",options_props:r.count_values,selected_option:{name:a.count,value:-1},onSelect:o.change_count},null,8,["options_props","selected_option","onSelect"])):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)}var r=a(7720),o=a(1725),i={components:{SelectorVue:r.Z,AppPaginator:o.Z},props:{previous:{type:Boolean,required:!1},next:{type:Boolean,required:!1},page:{type:Object,required:!1,default(){return{first:1,prev:null,current:1,next:null,last:1}}},count:{type:Number,required:!0},blur:{type:Boolean,required:!1,default:!1},show:{type:Boolean,required:!1,default:!0},showBtns:{type:Boolean,required:!1,default:!0},showSelector:{type:Boolean,required:!1,default:!0}},emits:{changePage:null,changeCount:null},data(){return{count_values:[]}},async mounted(){await this.$store.dispatch("get_account"),this.$store.state.account.user.config.per_pages&&(this.count_values=[...this.$store.state.account.user.config.per_pages].map(((e,t)=>({name:e,value:t}))))},computed:{},methods:{changePage(e){this.$emit("changePage",e)},change_count(e){this.$emit("changeCount",e.name)}}},c=a(89);const u=(0,c.Z)(i,[["render",n],["__scopeId","data-v-53e878de"]]);var p=u},5403:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return it}});var s=a(3396),l=a(7139);const n=e=>((0,s.dD)("data-v-fae34214"),e=e(),(0,s.Cn)(),e),r={class:"header"},o={class:"content"},i={class:"top"},c={class:"filters"},u={class:"row"},p={class:"type self-start items-center"},d=["onClick"],m={key:0,class:"material-icons-round"},h=n((()=>(0,s._)("span",{class:"material-icons-outlined"}," upload_file ",-1))),v=[h],y={key:0,class:"inline-flex items-center gap-2"},g=n((()=>(0,s._)("span",null,"Группировать по: ",-1)));function f(e,t,a,n,h,f){const w=(0,s.up)("ReportCreateModal"),b=(0,s.up)("AppHeader"),_=(0,s.up)("AppRadioBtnsGroupUnderlined"),k=(0,s.up)("ReportFIlters"),S=(0,s.up)("ReportChartsFilter"),R=(0,s.up)("ReportGrid"),C=(0,s.up)("GridBottom"),D=(0,s.up)("ReportCharts"),T=(0,s.up)("AppRadioBtnsGroup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[e.showReportCreate?((0,s.wg)(),(0,s.j4)(w,{key:0})):(0,s.kq)("",!0),(0,s._)("div",{class:(0,l.C_)(["app",{blur:h.openSelectedReportModal}])},[(0,s._)("div",r,[(0,s.Wm)(b)]),(0,s._)("div",o,[(0,s._)("div",i,[f.isChartsView?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(_,{key:0,class:"w-full",list:h.reportType.list,selected:h.reportType.selected,onSelect:f.changeReportType},null,8,["list","selected","onSelect"]))]),(0,s._)("div",c,[(0,s._)("div",u,[(0,s._)("div",p,[f.isTest?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(h.view.list,((e,t)=>((0,s.wg)(),(0,s.iD)("button",{class:(0,l.C_)(["btn",{selected:h.view.selected.value===e.value}]),key:e.value,onClick:t=>h.view.select(e)},[(h.view.list.indexOf(h.view.list.find((e=>e.value===h.view.selected.value)))+1)%h.view.list.length==t?((0,s.wg)(),(0,s.iD)("span",m,(0,l.zw)(e.class),1)):(0,s.kq)("",!0)],10,d)))),128)):(0,s.kq)("",!0),(0,s._)("button",{class:"test_btn",title:"Экспорт в xlsx",onClick:t[0]||(t[0]=e=>f.exportXlsx())},v)]),(0,s.Wm)(k,{reportType:h.reportType.selected.value,ref:"filters",onGetFilter:f.getFilter},null,8,["reportType","onGetFilter"])]),f.isChartsView?((0,s.wg)(),(0,s.j4)(S,{key:0,ref:"ChartsFilters",onGetFilter:f.getFilter},null,8,["onGetFilter"])):(0,s.kq)("",!0)]),"table"===h.view.selected.value?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(R,{title:h.title,reportsData:h.reports,reportType:h.reportType.selected.value,isLoading:h.isLoading,total:h.total,onUpdateOpenSelectedReportModal:f.updateOpenSelectedReportModal,onUpdateOpenedRows:f.updateOpenedRows,onUpdateSelectedReport:f.updateSelectedReport,onSort:f.sort,ref:"grid"},null,8,["title","reportsData","reportType","isLoading","total","onUpdateOpenSelectedReportModal","onUpdateOpenedRows","onUpdateSelectedReport","onSort"]),(0,s.Wm)(C,{page:f.page,show:0!=h.reports.data?.length,count:e.count,showBtns:f.showGridBottom,showSelector:!1,onChangePage:f.changePage,onChangeCount:e.changeCount},null,8,["page","show","count","showBtns","onChangePage","onChangeCount"])],64)):((0,s.wg)(),(0,s.j4)(D,{key:1,chartType:h.view.selected.value},null,8,["chartType"]))])],2),((0,s.wg)(),(0,s.j4)(s.lR,{to:"#report_count_area"},["customers"===h.reportType.selected.value?((0,s.wg)(),(0,s.iD)("div",y,[g,(0,s.Wm)(T,{list:h.groupBy.list,selected:h.groupBy.selected,small:!0,onSelect:h.groupBy.select},null,8,["list","selected","onSelect"])])):(0,s.kq)("",!0)]))],64)}var w=a(65),b=a(9242);const _=e=>((0,s.dD)("data-v-e7c5da94"),e=e(),(0,s.Cn)(),e),k={class:"flex flex-col gap-5 w-full"},S={class:"row"},R={class:"left"},C={class:"flex flex-col w-full gap-3"},D={class:"filters"},T=_((()=>(0,s._)("span",{class:"material-icons-outlined"}," add ",-1))),A=[T],F={class:"btns"},I={class:"row selected_row"},L=["onClick"],E=_((()=>(0,s._)("div",{class:"icon"},null,-1)));function q(e,t,a,n,r,o){const i=(0,s.up)("AppDateRange"),c=(0,s.up)("AppInputSelect"),u=(0,s.up)("AppMultiSelect"),p=(0,s.up)("FilterNumber"),d=(0,s.up)("SelectorVue");return(0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("div",S,[(0,s._)("div",R,[(0,s._)("div",C,[(0,s._)("div",D,[(0,s.Wm)(i,{dateStart:n.dateStart,"onUpdate:dateStart":t[0]||(t[0]=e=>n.dateStart=e),dateEnd:n.dateEnd,"onUpdate:dateEnd":t[1]||(t[1]=e=>n.dateEnd=e)},null,8,["dateStart","dateEnd"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.fields,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(c,{list:n.selected_field_autocomplete_list,countLettersReq:e.minLength,placeholder:e.placeholder,onChangeInputValue:t=>n.changeInputValue(t,e.name),onSelect:t=>n.selectField(t,e.name,e.id),onFocusin:t=>n.selected_field_autocomplete=e.name,onFocusout:t[2]||(t[2]=e=>n.selected_field_autocomplete=null),key:e.id},null,8,["list","countLettersReq","placeholder","onChangeInputValue","onSelect","onFocusin"])),[[b.F8,e.typesShow.includes(a.reportType)]]))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.multiSelectorData,(e=>((0,s.wg)(),(0,s.j4)(u,{key:e.id,list:e.list,placeholder:e.placeholder,onSelect:t=>e.select(t,e.id)},null,8,["list","placeholder","onSelect"])))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.numberData,(e=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(p,{key:e.id,idx:e.id,item:e.selected,onChange_filter_value:t=>e.select(t,e.id)},null,8,["idx","item","onChange_filter_value"])),[[b.F8,e.typesShow.includes(a.reportType)]]))),128)),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.selectorData,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e.id,options_props:e.list,selected_option:e.selected,onSelect:t=>e.select(t,e.id)},null,8,["options_props","selected_option","onSelect"])))),128))]),n.isTest?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(n.filteringSystems,((e,a)=>((0,s.wg)(),(0,s.iD)("div",{class:"filters",key:e},[a===n.filteringSystems.length-1?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"add_new_button",onClick:t[3]||(t[3]=e=>n.addFilteringSystem())},A)):(0,s.kq)("",!0),(0,s.Wm)(c,{list:e.filterList(e.SystemInputValue,e.systems),selected:e.selectedSystem,countLettersReq:0,placeholder:"Система",requestDelay:0,SelectedInTitle:!0,onFocusOut:()=>e.changeSystemInputValue(""),onChangeInputValue:e.changeSystemInputValue,onSelect:t=>e.selectSystem(t)},null,8,["list","selected","onFocusOut","onChangeInputValue","onSelect"]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.selectedSystem?.filtersList,(t=>(0,s.wy)(((0,s.wg)(),(0,s.j4)((0,s.LL)(t.type),{key:t.id,list:e.filterList(t.value,t.list),selected:t.selected,countLettersReq:t.minLength,placeholder:t.placeholder,requestDelay:0,SelectedInTitle:!0,dateRange:t.selected,"onUpdate:dateRange":e=>t.selected=e,onChangeInputValue:e=>t.value=e,onSelect:a=>"AppMultiSelect"===t.type?e.selectMulti(a,t.id):t.selected=a},null,40,["list","selected","countLettersReq","placeholder","dateRange","onUpdate:dateRange","onChangeInputValue","onSelect"])),[[b.F8,t.show?.value]]))),128))])))),128)):(0,s.kq)("",!0)]),(0,s._)("div",F,[(0,s._)("button",{class:"btn btn_blue",onClick:t[4]||(t[4]=e=>n.apply())},"Применить"),!n.coincideSelectedItems&&n.isTest?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn_yellow",style:{"border-radius":"0"},onClick:t[5]||(t[5]=e=>n.createReport())}," Создать шаблон ")):(0,s.kq)("",!0),(0,s._)("button",{class:"btn btn_grey",onClick:t[6]||(t[6]=e=>n.clearAllFields())}," Очистить ")])])]),(0,s._)("div",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.fields,((e,t)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{class:"selected",key:e.id},[(0,s._)("span",null,(0,l.zw)(e.placeholder)+": ",1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.selected,((e,a)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"item",onClick:e=>n.deleteField(t,a)},[(0,s.Uk)((0,l.zw)(e.name)+" ",1),E],8,L)))),128))])),[[b.F8,e.selected.length]]))),128))])])}a(2801),a(1295);var M=a(1897),x=a(5477),O=a(7720),B=a(8731),j=a(0),P=a(4870);function z(){const e=(0,P.qj)([{id:0,name:"amoCRM",value:"amoCRM",filtersList:[{id:1235674,name:"entities",type:"AppInputSelect",value:"",minLength:0,show:{value:!0},placeholder:"Сущность",selected:{},list:[{name:"Сделка",value:"trade"},{name:"Контакт",value:"contact"},{name:"Компания",value:"company"}]},{id:0,name:"data",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"any")))},placeholder:"Данные",selected:{},list:[{name:"События",value:"event"},{name:"Данные",value:"data"}]},{id:1,name:"trade",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"trade")&&t(0,"event")))},placeholder:"Сделки",selected:{},list:[{name:"Создание",value:1},{name:"Смена этапа",value:2},{name:"смена ответственного",value:3},{name:"добавление примечания",value:4},{name:"изменение поля",value:5},{name:"привязка компании",value:6},{name:"привязка контакта",value:7}]},{id:2,name:"trade",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"trade")&&t(0,"data")))},placeholder:"Сделки",selected:{},list:[{name:"связанные контакты",value:1},{name:"связанная компания",value:2},{name:"примечания",value:3},{name:"дата создания",value:4},{name:"дата закрытия (успешно, не успешно этапы)",value:5},{name:"теги",value:6},{name:"список задач",value:7}]},{id:3,name:"contact",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"contact")&&t(0,"event")))},placeholder:"Контакты",selected:{},list:[{name:"создание (дата)",value:1},{name:"звонок",value:2},{name:"новый чат (сообщение) - список чатов: вк, фб, инста, вотсап, телега, прочие",value:3},{name:"отправлено смс",value:4},{name:"отправлено письмо / получено письмо",value:5},{name:"смена ответственного",value:6},{name:"изменение поля / тега",value:7},{name:"привязка к сделке",value:8},{name:"привязка к контакту",value:9}]},{id:4,name:"contact",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"contact")&&t(0,"data")))},placeholder:"Контакты",selected:{},list:[{name:"ответственный",value:1},{name:"телефон",value:2},{name:"почта",value:3},{name:"связанные сделки",value:4},{name:"связанная компания",value:5},{name:"должность",value:6},{name:"пользовательские поля (id)",value:7},{name:"примечания",value:8},{name:"теги",value:9},{name:"список задач",value:10}]},{id:5,name:"company",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"company")&&t(0,"event")))},placeholder:"Компании",selected:{},list:[{name:"привязка к сделке)",value:1},{name:"привязка к контакту",value:2},{name:"создание (дата)",value:3},{name:"звонок",value:4},{name:"отправлено письмо / получено письмо",value:5},{name:"изменение поля / тега",value:6}]},{id:6,name:"company",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"company")&&t(0,"data")))},placeholder:"Компании",selected:{},list:[{name:"ответственный",value:1},{name:"телефон",value:2},{name:"почта",value:3},{name:"сайт",value:4},{name:"связанные контакты",value:5},{name:"связанные сделки",value:6},{name:"пользовательские поля (id)",value:7},{name:"теги",value:8},{name:"примечания",value:9},{name:"список задач",value:10}]},{id:7,name:"task",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"contact")&&t(0,"data1")))},placeholder:"Задачи",selected:{},list:[{name:"создание задачи",value:1},{name:"изменение задачи (срок)",value:2},{name:"изменение задачи (тип)",value:3},{name:"изменение задачи (содержимое)",value:4},{name:"закрытие задачи (с результатом или без ???)",value:5}]},{id:8,name:"task",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>t(1235674,"contact")&&t(0,"data1")))},placeholder:"Задачи",selected:{},list:[{name:"ответственный",value:1},{name:"дата создания",value:2},{name:"дата изменения",value:3},{name:"дата завершения",value:4},{name:"тип задачи",value:5},{name:"содержимое задачи",value:6},{name:"результат выполнения",value:7},{name:"связаные компании / контакты / сделки",value:8}]},{id:200,name:"date",type:"AppDateRange",value:"",minLength:0,show:{value:(0,s.Fl)((()=>(t(1,"any")||t(2,"any")||t(3,"any")||t(4,"any")||t(5,"any")||t(6,"any")||t(7,"any")||t(8,"any"))&&t(0,"any")&&t(1235674,"any")))},placeholder:"Интервал дат",selected:"-",list:[]},{id:201,name:"vortexAndPhase",type:"AppMultiSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>(t(1,"any")||t(2,"any")||t(3,"any")||t(4,"any")||t(5,"any")||t(6,"any")||t(7,"any")||t(8,"any"))&&t(0,"any")&&t(1235674,"any")))},placeholder:"Воронка и этап",selected:{},list:[{name:"Все",value:"all",selected:!1},{name:"Этап 1",value:1,selected:!1},{name:"Этап 2",value:2,selected:!1},{name:"Этап 3",value:3,selected:!1},{name:"Этап 4",value:4,selected:!1},{name:"Воронка 1",value:5,selected:!1},{name:"Воронка 2",value:6,selected:!1},{name:"Воронка 3",value:7,selected:!1},{name:"Воронка 4",value:8,selected:!1}]},{id:202,name:"responsible",type:"AppMultiSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>(t(1,"any")||t(2,"any")||t(3,"any")||t(4,"any")||t(5,"any")||t(6,"any")||t(7,"any")||t(8,"any"))&&t(0,"any")&&t(1235674,"any")))},placeholder:"Отвественный",selected:{},list:[{name:"Отвественный 1",value:1},{name:"Отвественный 2",value:2},{name:"Отвественный 3",value:3},{name:"Отвественный 4",value:4},{name:"Отвественный 5",value:5}]},{id:203,name:"tags",type:"AppMultiSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>(t(1,"any")||t(2,"any")||t(3,"any")||t(4,"any")||t(5,"any")||t(6,"any")||t(7,"any")||t(8,"any"))&&t(0,"any")&&t(1235674,"any")))},placeholder:"Теги",selected:{},list:[{name:"Тег 1",value:1},{name:"Тег 2",value:2},{name:"Тег 3",value:3},{name:"Тег 4",value:4},{name:"Тег 5",value:5}]},{id:204,name:"initiator",type:"AppInputSelect",value:"",minLength:0,show:{value:(0,s.Fl)((()=>(t(1,"any")||t(2,"any")||t(3,"any")||t(4,"any")||t(5,"any")||t(6,"any")||t(7,"any")||t(8,"any"))&&t(0,"any")&&t(1235674,"any")))},placeholder:"Инициатор события",selected:{},list:[{name:"Инициатор 1",value:1},{name:"Инициатор 2",value:2},{name:"Инициатор 3",value:3},{name:"Инициатор 4",value:4},{name:"Инициатор 5",value:5}]},{id:302,name:"before",type:"AppInputSelect",value:"",placeholder:"До",minLength:0,show:{value:(0,s.Fl)((()=>t(1,2)||t(1,3)||t(1,5)||t(3,6)||t(3,7)||t(5,6)))},selected:{},list:[{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5}]},{id:303,name:"after",type:"AppInputSelect",value:"",placeholder:"После",minLength:0,show:{value:(0,s.Fl)((()=>t(1,2)||t(1,3)||t(1,5)||t(3,6)||t(3,7)||t(5,6)))},selected:{},list:[{name:"1",value:1},{name:"2",value:2},{name:"3",value:3},{name:"4",value:4},{name:"5",value:5}]},{id:304,name:"taskStatus",type:"AppInputSelect",value:"",placeholder:"Статус задачи",minLength:0,show:{value:(0,s.Fl)((()=>(t(2,7)||t(4,10)||t(6,10))&&t(0,"data")))},selected:{},list:[{name:"Открытый",value:0},{name:"Успешный",value:1},{name:"Отменен",value:2},{name:"Удален",value:3}]},{id:305,name:"taskType",type:"AppInputSelect",value:"",placeholder:"Тип задачи",minLength:0,show:{value:(0,s.Fl)((()=>(t(2,7)||t(4,10)||t(6,10))&&t(0,"data")))},selected:{},list:[{name:"Открытый",value:0},{name:"Успешный",value:1},{name:"Отменен",value:2},{name:"Удален",value:3}]},{id:306,name:"messageType",type:"AppInputSelect",value:"",placeholder:"Тип сообщения",minLength:0,show:{value:(0,s.Fl)((()=>t(3,2)||t(3,3)||t(3,5)||t(5,4)))},selected:{},list:[{name:"Входящий",value:1},{name:"Исходящий",value:2}]}]}]),t=(e,t)=>{const a=o.filtersList?.find((t=>t.id===e));return"any"===t?!!a?.selected?.value:a?.selected?.value===t},a=(e,t)=>t.filter((t=>t?.name?.toLowerCase()?.includes(e?.toLowerCase()))),l=(0,P.iH)(""),n=(0,s.Fl)((()=>e.filter((e=>e?.name?.toLowerCase()?.includes(l.value?.toLowerCase()))))),r=e=>{l.value=e},o=(0,P.qj)({}),i=e=>Object.assign(o,e),c=(0,s.Fl)((()=>{const e=[];return o.filtersList?.forEach((t=>e.push(t))),e}));(0,s.YP)(c,(()=>{o.filtersList?.map((e=>{!1===e.show.value&&("AppInputSelect"==e.type&&e.selected.value&&(e.selected={}),"AppDateRange"==e.type&&"-"!==e.selected&&(e.selected="-"),"AppMultiSelect"==e.type&&e.selected.length&&(e.selected=[],e.list.map((e=>e.selected=!1))))}))}),{deep:!0});const u=(e,t)=>{if("all"===e.value){const a=o.filtersList?.find((e=>e.id===t));a?.list?.forEach((t=>{"all"!==t.value&&(t.selected=!e.selected)}))}e.selected=!e.selected};return{systems:e,changeSystemInputValue:r,sortedSystems:n,selectedSystem:o,SystemInputValue:l,selectSystem:i,filterList:a,selectMulti:u}}var H=a(9299),Z=a(678),$={components:{AppInputSelect:x.Z,AppMultiSelect:B.Z,SelectorVue:O.Z,AppDateRange:M.Z,FilterNumber:j.Z},props:{reportType:{type:String,required:!0}},setup(e,t){const a=(0,P.qj)([z()]),l=()=>a.push(z()),n=(0,Z.yj)(),r=(0,s.Fl)((()=>1==H.Z.state.account?.account?.id||"salesUp"===n.query.test)),o=(0,P.iH)(null),i=(0,P.iH)([]),c=(0,P.iH)([]),u=(0,P.iH)(""),p=(0,P.iH)(""),d=(0,P.qj)([{id:0,name:"product",value:"",minLength:3,placeholder:"Артикулы/Названия",typesShow:["sales","stuffMove"],selected:[]},{id:4,name:"responsible",value:"",minLength:0,placeholder:"Ответственные",typesShow:["customers","sales"],selected:[]},{id:1,name:"pipeline",value:"",minLength:0,placeholder:"Воронки",typesShow:["customers"],selected:[]},{id:2,name:"company",value:"",minLength:3,placeholder:"Компании",typesShow:["customers"],selected:[]},{id:3,name:"contact",value:"",minLength:3,placeholder:"Контакты",typesShow:["customers"],selected:[]},{id:10,name:"users",value:"",minLength:0,placeholder:"Пользователи",typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"users"},{id:5,name:"event_type",value:"",minLength:0,placeholder:"Тип события",typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"types"},{id:6,name:"product/batch",value:"",minLength:3,placeholder:"Партия",typesShow:["stuffMove"],selected:[]},{id:7,name:"initial_warehouse",value:"",minLength:0,placeholder:"Начальный склад\t",typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"whs"},{id:8,name:"final_warehouse",value:"",minLength:0,placeholder:"Итоговый склад\t",typesShow:["stuffMove"],selected:[],haveTheirOwnLists:!0,listName:"whs"}]),m=(0,P.qj)([]),h=(0,P.qj)([]),v=(0,P.qj)([{id:1,name:"quantity",selected:{option:"=",value:"",placeholder:"Колличество"},list:[],typesShow:["stuffMove"],select:(e,t)=>{const a=v.find((e=>e.id===t));a.selected=e}}]),y=(0,s.Fl)((()=>{const e=[];return d.forEach((t=>e.push(t.selected))),m.forEach((t=>e.push(t.list.some((e=>e.selected))))),h.forEach((t=>e.push(t.selected))),a.forEach((t=>{e.push(t.selectedSystem),t?.systems?.forEach((t=>t?.filtersList?.forEach((t=>e.push(t.selected)))))})),e})),g=(0,s.Fl)((()=>JSON.stringify(c.value)==JSON.stringify(y.value)));(0,s.bv)((()=>{(0,s.Y3)((()=>{c.value=structuredClone(y.value)}))})),(0,s.YP)(o,(()=>{i.value=[]}));const f=()=>{alert("потом будем сохранять шаблон")},w=async(e,t)=>{const a=d.find((e=>e.name===t)),s=e=>" "!=e.split("").at(-1)&&" "!=e.split("")[0]&&!a?.haveTheirOwnLists;if(i.value=[],s(e)&&o.value==t){await H.Z.dispatch("getAutocompleteAnalytics",{field:t,value:{query:e}});const a=H.Z.state.analytics.autocomplete;void 0!=a&&(a.map((e=>e.name=e.value)),i.value=[...a])}else if(a?.haveTheirOwnLists){const e=H.Z.state.analytics.stuffMove[a?.listName];void 0!=e&&(i.value=[...e])}},b=(e,t,a)=>{d.forEach((s=>{s.name!==t||s.id!==a||s.selected.filter((t=>t.value==e.value)).length||s.selected.push(e)}))},_=(e,t)=>{d[e].selected.splice(t,1)},k=()=>{u.value="",p.value="",a.length=0,l(),d.map((e=>e.selected=[])),S()},S=()=>{const a=e=>{const t=e.split("-"),a=t[0];t.splice(0,1),t.push(a);let s=t.join("/");const[l,n,r]=s.split("/");return s=l&&n&&r?n+"/"+r+"/"+l:"",s},s={date:a(u.value)+"-"+a(p.value)};"-"==s.date&&delete s.date,v.forEach((e=>{s[e.name]={compare:e.selected.option,query:e.selected.value}})),d.forEach((t=>{const a=[];t.selected.forEach((e=>a.push(e.value))),t.typesShow.includes(e.reportType)&&0!=a.length&&(s[t.name]=a)})),t.emit("getFilter",s)};return{selected_field_autocomplete:o,selected_field_autocomplete_list:i,copySelectedItems:c,dateStart:u,dateEnd:p,fields:d,multiSelectorData:m,selectorData:h,coincideSelectedItems:g,createReport:f,changeInputValue:w,selectField:b,deleteField:_,clearAllFields:k,apply:S,...z(),filteringSystems:a,addFilteringSystem:l,numberData:v,isTest:r}}},Y=a(89);const U=(0,Y.Z)($,[["render",q],["__scopeId","data-v-e7c5da94"]]);var V=U;const G=e=>((0,s.dD)("data-v-faae344a"),e=e(),(0,s.Cn)(),e),N={class:"wrapper"},W={class:"container"},K={class:"header"},J=G((()=>(0,s._)("label",null,"Новый отчет",-1))),Q=G((()=>(0,s._)("span",{class:"material-icons-round"}," close ",-1))),X=[Q],ee={class:"content"},te={class:"label_input"},ae=G((()=>(0,s._)("label",null,"Название отчета",-1))),se={class:"footer"};function le(e,t,a,l,n,r){const o=(0,s.up)("BtnsSaveClose");return(0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[(0,s._)("div",N,[(0,s._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>l.close())}),(0,s._)("div",W,[(0,s._)("header",K,[J,(0,s._)("button",{class:"btn cross",onClick:t[1]||(t[1]=e=>l.close())},X)]),(0,s._)("main",ee,[(0,s._)("form",null,[(0,s._)("div",te,[ae,(0,s.wy)((0,s._)("input",{class:"input",type:"text",placeholder:"По продажам","onUpdate:modelValue":t[2]||(t[2]=e=>l.newReport.name=e)},null,512),[[b.nr,l.newReport.name]])])])]),(0,s._)("footer",se,[(0,s.Wm)(o,{onSave:e.save,onClose:l.close},null,8,["onSave","onClose"])])])])])}var ne=a(4038),re={components:{BtnsSaveClose:ne.Z},props:{},setup(){const e=(0,P.qj)({name:"По "}),t=()=>H.Z.commit("toggleReportCreate",!1);return{close:t,newReport:e}}};const oe=(0,Y.Z)(re,[["render",le],["__scopeId","data-v-faae344a"]]);var ie=oe;const ce={class:"wrapper"};function ue(e,t,a,l,n,r){const o=(0,s.up)("apexchart");return(0,s.wg)(),(0,s.iD)("div",ce,["bar"===a.chartType?((0,s.wg)(),(0,s.j4)(o,{key:0,type:l.bar.type,width:l.clientWidth>400?600:300,options:l.bar.chartOptions,series:l.bar.series},null,8,["type","width","options","series"])):"doughnut"===a.chartType?((0,s.wg)(),(0,s.j4)(o,{key:1,type:l.doughnut.type,width:l.clientWidth>400?600:300,options:l.doughnut.chartOptions,series:l.doughnut.series},null,8,["type","width","options","series"])):(0,s.kq)("",!0)])}var pe={components:{},props:{chartType:String},setup(){const e=(0,s.Fl)((()=>document.documentElement.clientWidth)),t=(0,P.qj)({type:"bar",series:[{name:"Free Cash Flow",data:[35,41,36,26,45,48,52,53,41,31,44,39]}],chartOptions:{chart:{type:"bar"},plotOptions:{bar:{horizontal:!1,columnWidth:"65%",endingShape:"rounded"}},responsive:[{breakpoint:880,options:{chart:{width:320},xaxis:{labels:{rotateAlways:!0,show:!0,rotate:-45}}}}],dataLabels:{enabled:!1},xaxis:{categories:["Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jen"]},yaxis:{title:{text:""}},fill:{opacity:1},colors:[function({value:e}){return e>50?"#00E396":e>35?"#FEB019":"#FF4560"}],legend:{position:"bottom"},tooltip:{y:{formatter:function(e){const t=["тысяча","тысячи","тысяч"];return"₽ "+e+" "+t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?Math.abs(e)%10:5]]}}}}}),a=(0,P.qj)({type:"donut",series:[44,55,41,17,15],chartOptions:{chart:{type:"donut"},theme:{mode:"light",palette:"palette2"},responsive:[{breakpoint:880,options:{chart:{width:320},legend:{position:"bottom",fontSize:"12px"},dataLabels:{style:{fontSize:"10px"}}}}],stroke:{show:!1},labels:["Feb","Mar","Apr","May","Jun"],legend:{fontSize:"16px"}}});return{bar:t,doughnut:a,clientWidth:e}}};const de=(0,Y.Z)(pe,[["render",ue],["__scopeId","data-v-6bbd62e4"]]);var me=de;const he=e=>((0,s.dD)("data-v-75b1a858"),e=e(),(0,s.Cn)(),e),ve={class:"top",id:"report_count_area"},ye={class:"count"},ge={class:"row title"},fe=["onClick"],we=he((()=>(0,s._)("tr",{class:"space"},null,-1))),be={class:"row title"},_e=he((()=>(0,s._)("tr",{class:"space"},null,-1))),ke={key:0},Se={key:1},Re=["href"],Ce=["onClick"],De={key:0},Te={key:0,class:"space"},Ae=he((()=>(0,s._)("tr",{class:"space"},null,-1))),Fe={class:"row title",ref:"total"};function Ie(e,t,a,n,r,o){const i=(0,s.up)("ReportGridModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",ve,[(0,s._)("p",ye,"Найдено: "+(0,l.zw)(a.reportsData.total),1)]),(0,s._)("table",{class:(0,l.C_)(["table",{blur:o.openSelectedReportModal||a.isLoading}])},[(0,s._)("thead",null,[(0,s._)("tr",ge,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.title,(e=>((0,s.wg)(),(0,s.iD)("td",{class:(0,l.C_)(["item",{pointer:o.sortable}]),key:e,onClick:t=>o.sortable?o.sort(e?.code):null},[(0,s.Uk)((0,l.zw)(e.name)+" ",1),o.sortable?((0,s.wg)(),(0,s.iD)("button",{key:0,class:(0,l.C_)(["bar_item_icon",{bar_item_icon_up:r.order.code===e?.code&&"desc"===r.order.prev_order,bar_item_icon_down:r.order.code===e?.code&&"asc"===r.order.prev_order}])},null,2)):(0,s.kq)("",!0)],10,fe)))),128))])]),(0,s._)("tbody",null,[r.showTopTitle?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[we,(0,s._)("tr",be,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.title,(e=>((0,s.wg)(),(0,s.iD)("td",{class:"item",key:e},(0,l.zw)(a.total[e?.code]),1)))),128))]),_e],64)):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.copyReports,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:e},[(0,s._)("tr",{class:(0,l.C_)(["row",{row_odd:t%2==0}])},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.title,(t=>((0,s.wg)(),(0,s.iD)("td",{class:(0,l.C_)(["item",{center:t.type}]),key:t},[t.type||"customers"!==a.reportType&&"leads"==t?.code?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",ke,(0,l.zw)(e[t?.code]),1)),t.type||"leads"!=t?.code||"sales"!==a.reportType?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Se,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e[t?.code],((a,n)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:a},[(0,s._)("a",{class:"underline text-[#8cb4ff] decoration-[#3f3f3faf] underline-offset-2 hover:no-underline",target:"black",href:"https://"+o.accountSubdomain+".amocrm.ru/leads/detail/"+a},(0,l.zw)(a),9,Re),(0,s._)("span",null,(0,l.zw)(n<e[t?.code].length-1?", ":""),1)],64)))),128))])),t.type?(0,s.wy)(((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn",onClick:a=>e[t?.code].value=!e[t?.code]?.value},(0,l.zw)(e[t?.code]?.value?"Скрыть":"Показать"),9,Ce)),[[b.F8,e[t?.code]]]):(0,s.kq)("",!0)],2)))),128))],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e[o.buttonInTitle?.code]?.list,(t=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("tr",{class:"hiden",key:t.id},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.title,(e=>((0,s.wg)(),(0,s.iD)("td",{class:"item",key:e},[t[e?.code]?((0,s.wg)(),(0,s.iD)("span",De,(0,l.zw)(t[e?.code]),1)):(0,s.kq)("",!0)])))),128))])),[[b.F8,e[o.buttonInTitle?.code]?.value]]))),128)),e[o.buttonInTitle?.code]?.value?((0,s.wg)(),(0,s.iD)("tr",Te)):(0,s.kq)("",!0)],64)))),128)),Ae,(0,s._)("tr",Fe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.title,(e=>((0,s.wg)(),(0,s.iD)("td",{class:"item",key:e},(0,l.zw)(a.total[e?.code]),1)))),128))],512)])],2),((0,s.wg)(),(0,s.j4)(s.lR,{to:"body"},[o.selectedReport?.value?((0,s.wg)(),(0,s.j4)(i,{key:0,title:o.selectedReport?.title,list:o.selectedReport?.list,company:o.selectedReport?.company,onClose:o.closeReportGridModal},null,8,["title","list","company","onClose"])):(0,s.kq)("",!0)]))],64)}const Le=e=>((0,s.dD)("data-v-4940571a"),e=e(),(0,s.Cn)(),e),Ee={class:"background"},qe={class:"container"},Me={class:"header"},xe=Le((()=>(0,s._)("div",{class:"icon"},null,-1))),Oe=[xe],Be=Le((()=>(0,s._)("div",{class:"hr"},null,-1))),je={class:"content"},Pe={key:0,class:"text"},ze={key:1,class:"table"},He={class:"row title"},Ze=Le((()=>(0,s._)("div",{class:"hr"},null,-1))),$e={class:"footer"};function Ye(e,t,a,n,r,o){const i=(0,s.up)("BtnsSaveClose");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:"backdrop_with_filter",onClick:t[0]||(t[0]=e=>o.close())}),(0,s._)("div",Ee,[(0,s._)("div",qe,[(0,s._)("div",Me,[(0,s._)("h5",null,[(0,s.WI)(e.$slots,"title",{},(()=>[(0,s.Uk)('Позиции компании "'+(0,l.zw)(a.company)+'"',1)]),!0)]),(0,s._)("button",{class:"btn_del",onClick:t[1]||(t[1]=e=>o.close())},Oe)]),Be,(0,s._)("div",je,[0==a.list.length?((0,s.wg)(),(0,s.iD)("label",Pe," Ничего не найдено ")):((0,s.wg)(),(0,s.iD)("table",ze,[(0,s._)("thead",null,[(0,s._)("tr",He,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.title,(e=>((0,s.wg)(),(0,s.iD)("td",{class:"item",key:e},(0,l.zw)(e.name),1)))),128))])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.list,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{class:(0,l.C_)(["row",{row_odd:t%2==0}]),key:e.id},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.title,(t=>((0,s.wg)(),(0,s.iD)("td",{class:"item",key:t},(0,l.zw)(e[t.code]),1)))),128))],2)))),128))])]))]),Ze,(0,s._)("div",$e,[(0,s.Wm)(i,{show_save:!1,onClose:o.close},null,8,["onClose"])])])])],64)}var Ue={components:{BtnsSaveClose:ne.Z},props:{title:{type:Array,required:!0},list:{type:Array,required:!0},company:{type:String,required:!1}},methods:{close(){this.$emit("close")}}};const Ve=(0,Y.Z)(Ue,[["render",Ye],["__scopeId","data-v-4940571a"]]);var Ge=Ve,Ne={components:{ReportGridModal:Ge},props:{title:{type:Array,required:!0},reportsData:{type:Object,required:!0},total:{type:Object,required:!1},reportType:{type:String,required:!0},isLoading:{type:Boolean,required:!0}},data(){return{copyReports:[],showTopTitle:!0,order:{code:"",prev_order:""}}},mounted(){this.copy()},computed:{sortable(){return"stuffMove"===this.reportType},isTest(){return 1==this.$store.state.account?.account?.id||"salesUp"===this.$route.query.test},accountSubdomain(){return this.$store.state.account.account.subdomain},buttonInTitle(){return this.title?.find((e=>1==e?.type))},modalInTitle(){return this.title?.find((e=>2==e?.type))},openedRows(){return this.copyReports.filter((e=>e[this.buttonInTitle?.code]?.value))},selectedReport(){const e=this.copyReports.find((e=>{if(e[this.modalInTitle?.code])return e[this.modalInTitle?.code].value}));let t={value:!1};return e&&(t={company:e.company,value:e[this.modalInTitle?.code].value,list:e[this.modalInTitle?.code].list,title:e[this.modalInTitle?.code].title}),t},openSelectedReportModal(){return this.selectedReport.value}},watch:{openSelectedReportModal(){this.openSelectedReportModal&&window.scrollTo(0,0),this.$emit("updateOpenSelectedReportModal",this.openSelectedReportModal)},reportsData:{handler:function(){this.copy()},deep:!0},openedRows:{handler:function(e,t){let a="";a="customers"===this.reportType?"company":"name";const s=[];e.forEach((e=>s.push(e[a])));const l=[];t.forEach((e=>l.push(e[a])));let n=!1;s.length>l.length&&s.forEach((e=>{l.includes(e)||(n=!0)})),s.length<l.length&&l.forEach((e=>{s.includes(e)||(n=!0)})),n&&this.$emit("updateOpenedRows",this.openedRows)},deep:!0},selectedReport:{handler:function(e,t){e.company==t.company&&e.value==t.value||this.$emit("updateSelectedReport",this.selectedReport)},deep:!0}},methods:{calcShowTopTitle(){this.showTopTitle=document.body.clientHeight<this.$refs.total?.getBoundingClientRect()?.y},copy(){this.reportsData.data&&(this.copyReports=JSON.parse(JSON.stringify(this.reportsData.data)))},closeReportGridModal(){this.copyReports.map((e=>e[this.modalInTitle?.code].value=!1))},sort(e){const t=["asc","desc"];let a="";a=this.order.code===e&&this.order.prev_order==t[0]?t[1]:t[0],this.order={code:e,prev_order:a},this.$emit("sort",e,a)}}};const We=(0,Y.Z)(Ne,[["render",Ie],["__scopeId","data-v-75b1a858"]]);var Ke=We;const Je={class:"row"};function Qe(e,t,a,l,n,r){const o=(0,s.up)("AppRadioBtnsGroup");return(0,s.wg)(),(0,s.iD)("div",Je,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.fields,(e=>((0,s.wg)(),(0,s.j4)(o,{key:e.value,list:e.list,selected:e.selected,onSelect:e.select},null,8,["list","selected","onSelect"])))),128))])}var Xe=a(9669),et={components:{AppRadioBtnsGroup:Xe.Z},props:{},setup(e,t){const a=(0,P.qj)([{value:"date",name:"Тип отчета",selected:{name:"По дням",value:"days"},list:[{name:"По дням",value:"days"},{name:"По месяцам",value:"months"},{name:"По годам",value:"years"}],select(e){a[0].selected=e,s()}},{value:"type",name:"Тип отчета",selected:{name:"Всего продаж",value:"total"},list:[{name:"Всего продаж",value:"total"},{name:"По клиентам",value:"customers"},{name:"По продажам",value:"sales"}],select(e){a[1].selected=e,s()}}]),s=()=>{const e={};a.forEach((t=>e[t.value]=t.selected.value)),t.emit("getFilter",e)};return{fields:a}}};const tt=(0,Y.Z)(et,[["render",Qe],["__scopeId","data-v-811b73e6"]]);var at=tt,st=a(2357),lt=a(8697),nt=a(906),rt={name:"AnalyticsView",components:{ReportFIlters:V,ReportCreateModal:ie,ReportCharts:me,ReportGrid:Ke,ReportChartsFilter:at,AppHeader:st.Z,GridBottom:lt.Z,AppRadioBtnsGroupUnderlined:nt.Z,AppRadioBtnsGroup:Xe.Z},data(){return{openSelectedReportModal:!1,isLoading:!1,title:[],reports:[],isClient:!0,reportType:{selected:{name:"Отчет по клиентам",value:"customers"},list:[{name:"Отчет по клиентам",value:"customers"},{name:"Отчет по продажам",value:"sales"},{name:"Движение товаров",value:"stuffMove",value2:"movement"}]},titles:{customers:[{name:"Компания",code:"company",type:0},{name:"Контакт",code:"contact",type:0},{name:"Сделки",code:"leads",type:0},{name:"Оборот",code:"sum",type:0},{name:"Прибыль",code:"prib",type:0},{name:"Ответственные",code:"otv",type:1},{name:"Позиции",code:"poz",type:2}],sales:[{name:"Название",code:"name",type:0},{name:"Кол-во",code:"count",type:0},{name:"Оборот",code:"sum",type:0},{name:"Себестоимость",code:"cost_sum",type:0},{name:"Прибыль",code:"prib",type:0},{name:"Сделки",code:"leads",type:0},{name:"Позиции",code:"poz",type:1}],stuffMove:[{name:"Дата события",code:"event_date",type:0},{name:"Тип события",code:"event_type",type:0},{name:"Артикул",code:"article_number",type:0},{name:"Название",code:"title",type:0},{name:"Партия",code:"party",type:0},{name:"Колличество",code:"quantity",type:0},{name:"Себестоимость",code:"cost_price",type:0},{name:"Начальный склад",code:"initial_warehouse",type:0},{name:"Итоговый склад",code:"final_warehouse",type:0},{name:"Пользователь",code:"user",type:0},{name:"Комментарий",code:"comment",type:0}]},openedRows:[],selectedReport:{},filter:{},sorted:{},total:{},newPage:1,view:{selected:{name:"table",value:"table",class:"font_download"},list:[{name:"table",value:"table",class:"font_download"},{name:"bar",value:"bar",class:"poll"},{name:"doughnut",value:"doughnut",class:"donut_small"}],select:function(e){this.selected=e}},groupBy:{selected:{name:"Компании",value:"companies"},list:[{name:"Компаниям",value:"companies"},{name:"Контактам",value:"contacts"}],select:e=>{this.groupBy.selected=e,localStorage.setItem("AnalyticsLastGroupBy",JSON.stringify(e)),this.getTitile()}}}},computed:{...(0,w.Se)(["catalog","showReportCreate"]),refFilters(){return this.$refs.filters},showGridBottom(){let e=!1;return e="stuffMove"===this.reportType.selected.value?this.reports?.meta?.total>=this.reports?.meta?.per_page:this.reports.total>=this.reports.per_page,e},refGrid(){return this.$refs.grid},isTest(){return 1==this.$store.state.account?.account?.id},isChartsView(){return"table"!==this.view.selected.value},page(){let e={};return e="stuffMove"===this.reportType.selected.value?{first:this.getPageFromLink(this.reports?.links?.first),prev:this.getPageFromLink(this.reports?.links?.prev),current:this.reports?.meta?.current_page,next:this.getPageFromLink(this.reports?.links?.next),last:this.getPageFromLink(this.reports?.links?.last)}:{first:this.getPageFromLink(this.reports?.first_page_url),prev:this.getPageFromLink(this.reports?.prev_page_url),current:this.reports?.current_page,next:this.getPageFromLink(this.reports?.next_page_url),last:this.getPageFromLink(this.reports?.last_page_url)},e}},created(){this.getAnalyticsLastGroupBy(),this.getTitile(),this.$store.dispatch("get_account")},methods:{getPageFromLink(e){return e?e.split("?page=")[1]:null},openReportCreate(){this.$store.commit("toggleReportCreate",!0)},updateOpenSelectedReportModal(e){this.openSelectedReportModal=e},calcTotal(){this.total["prib"]=this.total.sum-this.total.cost_sum,this.total.sum=this.round(this.total.sum),this.total.cost_sum=this.round(this.total.cost_sum),this.total.prib=this.round(this.total.prib),"sales"==this.reportType.selected.value&&(this.total.leads=this.total?.leads_count),this.total["name"]="Общее",this.total["company"]="Общее",this.total["poz"]=""},async updateOpenedRows(e){const t="customers"===this.reportType.selected.value?"company":"name",a=e.map((e=>e[t]));this.reports.data.map((e=>{"customers"===this.reportType.selected.value&&e.otv?e.otv.value=!!a.includes(e[t])&&e.otv.value:"sales"===this.reportType.selected.value&&e.poz&&(e.poz.value=!!a.includes(e[t])&&e.poz.value)})),await e.forEach((async e=>{if(!this.openedRows.includes(e[t])){this.openedRows.push(e[t]);let a={code:"",label:"",resName:""};"customers"===this.reportType.selected.value?a={code:"otv",label:"company",resName:"getCustomersResponsible"}:"sales"===this.reportType.selected.value&&(a={code:"poz",label:"name",resName:"getSalesProducts"});const s=a.resName?await this.$store.dispatch(a.resName,{filter:this.filter,product:e.name,company:e.company}):[];this.reports.data.map((t=>{t[[a.label]]===e[[a.label]]&&t[a.code]&&(t[a.code].value=e[a.code].value,t[a.code].list=s.map((e=>{const t={...e};return t.prib=t.sum-t.cost_sum,t.sum=this.round(t.sum),t.cost_sum=this.round(t.cost_sum),t.prib=this.round(t.prib),t[a.code]=e.user,t})))}))}}))},async updateSelectedReport(e){e.value||this.reports.data.map((e=>e.poz.value=!1)),this.reports.data.find((t=>t.company==e.company))?.poz.list.length||(await this.$store.dispatch("getCustomersProducts",{filter:this.filter,company:e.company}),this.reports.data.map((t=>{t.company==e.company&&t.poz&&e.value&&(t.poz.value=e.value,t.poz.list=[...this.$store.state.analytics.customersProducts],t.poz.list.map((e=>{e["prib"]=e.sum-e.cost_sum,e.sum=this.round(e.sum),e.cost_sum=this.round(e.cost_sum),e.prib=this.round(e.prib)})))}))),this.selectedReport={...e}},async getReports(){try{const e=async(e,t)=>{const a={filter:this.filter,page:this.newPage,sort:this.sorted};"customers"===this.reportType.selected.value&&(a.group_by=this.groupBy.selected.value),await this.$store.dispatch(`get${t}`,a),this.reports=this.$store.state.analytics[e],"stuffMove"!==this.reportType.selected.value?(await this.$store.dispatch(`get${t}Total`,a),this.total=this.$store.state.analytics[`${e}Total`]):this.total=this.$store.state.analytics[`${e}Total`],this.applyReportsTransformations(e),(0,s.Y3)((()=>this.refGrid?.calcShowTopTitle()))};this.reports.data=[],this.total=[],await e(this.reportType.selected.value,this.capitalize(this.reportType.selected.value)),this.calcTotal()}catch(e){console.error(e)}},changeReportType(e){this.reportType.selected=e,this.newPage=1,this.refFilters?.clearAllFields()},async getTitile(){this.isLoading=!0,this.openedRows=[],this.title=this.titles[this.reportType.selected.value],await this.getReports(),this.isLoading=!1},changePage(e){this.newPage=e,this.getTitile()},getFilter(e){this.filter=e,this.newPage=1,this.getTitile()},sort(e,t){this.newPage=1,this.sorted={by:e,order:t},this.getTitile()},round(e){return e=Number(e),Math.round(100*e)/100+" р."},capitalize(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},applyReportsTransformations(e){"customers"==e&&this.reports.data.map((e=>{e["otv"]={value:!1,list:[]},e["poz"]={value:!1,list:[],title:[{name:"Название",code:"name"},{name:"Кол-во",code:"count"},{name:"Оборот",code:"sum"},{name:"Прибыль",code:"prib"}]},e["prib"]=e.sum-e.cost_sum,e.sum=this.round(e.sum),e.cost_sum=this.round(e.cost_sum),e.prib=this.round(e.prib)})),"sales"==e&&this.reports.data.map((e=>{e["poz"]={value:!1,list:[]},e["prib"]=e.sum-e.cost_sum,e.leads=e.leads.split(","),e.sum=this.round(e.sum),e.cost_sum=this.round(e.cost_sum),e.prib=this.round(e.prib)})),"stuffMove"==e&&this.reports.data.map((e=>{e.event_type=this.reports.types[e.event_type].name}))},exportXlsx(){const e={filter:this.filter,type:this.reportType.selected?.value2?this.reportType.selected.value2:this.reportType.selected.value};this.$store.dispatch("analyticsExport",e)},getAnalyticsLastGroupBy(){const e=JSON.parse(localStorage.getItem("AnalyticsLastGroupBy"));e&&(this.groupBy.selected=e)}}};const ot=(0,Y.Z)(rt,[["render",f],["__scopeId","data-v-fae34214"]]);var it=ot}}]);
//# sourceMappingURL=403.1427d512.js.map