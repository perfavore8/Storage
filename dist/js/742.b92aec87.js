"use strict";(self["webpackChunkstorage"]=self["webpackChunkstorage"]||[]).push([[742],{2357:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(3396);function n(e,t,a,n,i,r){const o=(0,s.up)("NavBar"),l=(0,s.up)("HomeMenu"),c=(0,s.up)("HomeModals");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("header",null,[(0,s.Wm)(o),(0,s.Wm)(l)]),(0,s.Wm)(c,{selectedWH:a.selectedWH},null,8,["selectedWH"])],64)}var i=a(6833),r=a(1624),o=a(2145),l={components:{NavBar:i.Z,HomeMenu:r.Z,HomeModals:o.Z},props:{selectedWH:{type:Object,required:!1}},setup(){}},c=a(89);const d=(0,c.Z)(l,[["render",n],["__scopeId","data-v-3b484666"]]);var u=d},1725:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(3396),n=a(7139);const i={class:"grid gap-3"},r={class:"current d"};function o(e,t,a,o,l,c){return(0,s.wg)(),(0,s.iD)("div",i,[a.page.current!=a.page.first&&null!=a.page.prev?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:t[0]||(t[0]=e=>o.prev()),class:"a"},(0,n.zw)("<"))):(0,s.kq)("",!0),a.page.current!=a.page.first&&a.page.prev!=a.page.first?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:t[1]||(t[1]=e=>o.first()),class:"b"},(0,n.zw)(a.page.first),1)):(0,s.kq)("",!0),a.page.current!=a.page.first&&null!=a.page.prev?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:t[2]||(t[2]=e=>o.prev()),class:"c"},(0,n.zw)(a.page.prev),1)):(0,s.kq)("",!0),(0,s._)("button",r,(0,n.zw)(a.page.current),1),a.page.current!=a.page.last&&null!=a.page.next?((0,s.wg)(),(0,s.iD)("button",{key:3,onClick:t[3]||(t[3]=e=>o.next()),class:"e"},(0,n.zw)(a.page.next),1)):(0,s.kq)("",!0),a.page.current!=a.page.last&&a.page.next!=a.page.last?((0,s.wg)(),(0,s.iD)("button",{key:4,onClick:t[4]||(t[4]=e=>o.last()),class:"f"},(0,n.zw)(a.page.last),1)):(0,s.kq)("",!0),a.page.current!=a.page.last&&null!=a.page.next?((0,s.wg)(),(0,s.iD)("button",{key:5,onClick:t[5]||(t[5]=e=>o.next()),class:"g"},(0,n.zw)(">"))):(0,s.kq)("",!0)])}var l={props:{page:Object},emits:{changePage(e){return e>0&&"number"===typeof e}},setup(e,t){const a=()=>t.emit("changePage",e.page.first),s=()=>t.emit("changePage",e.page.current-1),n=()=>t.emit("changePage",e.page.current+1),i=()=>t.emit("changePage",e.page.last);return{prev:s,first:a,next:n,last:i}}},c=a(89);const d=(0,c.Z)(l,[["render",o],["__scopeId","data-v-30638d00"]]);var u=d},8697:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(3396),n=a(7139);function i(e,t,a,i,r,o){const l=(0,s.up)("AppPaginator"),c=(0,s.up)("selector-vue");return a.show?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,n.C_)(["bottom",{blur:a.blur}])},[a.showBtns?((0,s.wg)(),(0,s.j4)(l,{key:0,page:a.page,onChangePage:o.changePage},null,8,["page","onChangePage"])):(0,s.kq)("",!0),a.showSelector?((0,s.wg)(),(0,s.j4)(c,{key:1,class:"count",options_props:r.count_values,selected_option:{name:a.count,value:-1},onSelect:o.change_count},null,8,["options_props","selected_option","onSelect"])):(0,s.kq)("",!0)],2)):(0,s.kq)("",!0)}var r=a(7720),o=a(1725),l={components:{SelectorVue:r.Z,AppPaginator:o.Z},props:{previous:{type:Boolean,required:!1},next:{type:Boolean,required:!1},page:{type:Object,required:!1,default(){return{first:1,prev:null,current:1,next:null,last:1}}},count:{type:Number,required:!0},blur:{type:Boolean,required:!1,default:!1},show:{type:Boolean,required:!1,default:!0},showBtns:{type:Boolean,required:!1,default:!0},showSelector:{type:Boolean,required:!1,default:!0}},emits:{changePage:null,changeCount:null},data(){return{count_values:[]}},async mounted(){await this.$store.dispatch("get_account"),this.$store.state.account.user.config.per_pages&&(this.count_values=[...this.$store.state.account.user.config.per_pages].map(((e,t)=>({name:e,value:t}))))},computed:{},methods:{changePage(e){this.$emit("changePage",e)},change_count(e){this.$emit("changeCount",e.name)}}},c=a(89);const d=(0,c.Z)(l,[["render",i],["__scopeId","data-v-53e878de"]]);var u=d},5742:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var s=a(3396),n=a(7139);const i=e=>((0,s.dD)("data-v-6cd523a1"),e=e(),(0,s.Cn)(),e),r={class:"app min-h-screen px-4 md:px-[30px] dark:bg-slate-900"},o={class:"header w-full"},l=i((()=>(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"},[(0,s._)("path",{fill:"none",stroke:"#fff","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 18h3.75a5.25 5.25 0 1 0 0-10.5H5M7.5 4L4 7.5L7.5 11"})],-1))),c=[l],d={class:"content w-full mt-2 md:mt-12"},u={class:"top"},g={class:"my-2 md:my-4 text-sm md:text-base text-slate-500 dark:text-slate-300"};function p(e,t,a,i,l,p){const h=(0,s.up)("AppHeader"),m=(0,s.up)("archive-grid");return(0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)({dark:i.isDarkTest})},[(0,s._)("div",r,[(0,s._)("div",o,[i.isTest?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"bg-slate-400 bg-opacity-90 p-2 h-fit w-fit rounded-xl hover:shadow-sm hover:drop-shadow-md outline-none focus-visible:drop-shadow-md",onClick:t[0]||(t[0]=e=>i.back())},c)):((0,s.wg)(),(0,s.j4)(h,{key:1}))]),(0,s._)("div",d,[(0,s._)("div",u,[(0,s._)("p",g," Найдено: "+(0,n.zw)(i.count_archive),1)]),(0,s.Wm)(m,{class:"grid"})])])],2)}var h=a(9242);const m=e=>((0,s.dD)("data-v-1124ef37"),e=e(),(0,s.Cn)(),e),w={key:0,class:"text"},_={class:"table2 hidden md:table"},v={class:"row title"},k=m((()=>(0,s._)("td",{class:"item dark:bg-slate-800"},null,-1))),f={key:0,class:"item dark:bg-slate-700"},b={key:0},y={key:1},D={class:"item dark:bg-slate-700"},x=["onClick"],C=m((()=>(0,s._)("span",{class:"material-icons"}," ios_share ",-1))),P=[C],q={class:"md:hidden mx-auto grid grid-cols-1 gap-6 mt-3 sm:grid-cols-2"},H=["onClick"],$=m((()=>(0,s._)("span",{class:"material-icons dark:text-slate-300",style:{"font-size":"18px"}}," ios_share ",-1))),Z=[$],B={class:"flex flex-row gap-4"},z={class:"font-bold"},L={class:"text-sm"};function j(e,t,a,i,r,o){const l=(0,s.up)("grid-bottom");return(0,s.wg)(),(0,s.iD)("div",{class:(0,n.C_)(["grid",{blur:o.isDataLoading}])},[0==o.archive_list.length?((0,s.wg)(),(0,s.iD)("label",w," Ничего не найдено ")):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("table",_,[(0,s._)("thead",null,[(0,s._)("tr",v,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tableConfig,(e=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("td",{key:e[0],class:"item dark:bg-slate-800"},(0,n.zw)(e[1].name),1)),[[h.F8,e[1].visible]]))),128)),k])]),(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.archive_list,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id,class:"row"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.tableConfig,(t=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[t[1].visible?((0,s.wg)(),(0,s.iD)("td",f,[t[0].split(".").length<2?((0,s.wg)(),(0,s.iD)("span",b,(0,n.zw)(e.fields[t[0]]),1)):((0,s.wg)(),(0,s.iD)("span",y,[e.fields[t[0].split(".")[0]]?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)((0,n.zw)("cost"==t[0].split(".")[1]?e.fields[t[0].split(".")[0]][t[0].split(".")[1]]+" "+e.fields[t[0].split(".")[0]].currency:e.fields[t[0].split(".")[0]][t[0].split(".")[1]]),1)],64)):(0,s.kq)("",!0)]))])):(0,s.kq)("",!0)],64)))),128)),(0,s._)("td",D,[(0,s._)("div",{class:"edit_icon",onClick:t=>o.unarchive_data(e),title:"Разархивирование товара"},P,8,x)])])))),128))])]),(0,s._)("div",q,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(10,(e=>((0,s.wg)(),(0,s.iD)(s.HY,{key:e},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.archive_list,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"container px-5 py-3 max-w-xs rounded-xl bg-gray-50 dark:bg-slate-800 dark:text-slate-100 shadow-md flex flex-col items-center gap-y-3 relative"},[(0,s._)("div",{class:"edit_icon absolute right-3 top-3",onClick:t=>o.unarchive_data(e)},Z,8,H),(0,s._)("div",B,[(0,s._)("h6",z,(0,n.zw)(e.fields.article),1),(0,s._)("span",null,"№ "+(0,n.zw)(e.fields.batch),1)]),(0,s._)("div",L,[(0,s._)("span",null,(0,n.zw)(e.fields.name),1)])])))),128))],64)))),64))])],64)),o.showGridBottom?((0,s.wg)(),(0,s.j4)(l,{key:2,class:"bottom",page:o.page,blur:e.show_edit_modal,show:0!=e.products?.length,count:e.count,onChangePage:o.changePage,onChangeCount:o.changeCount},null,8,["page","blur","show","count","onChangePage","onChangeCount"])):(0,s.kq)("",!0)],2)}var Y=a(8697),F={components:{GridBottom:Y.Z},data(){return{isLoading:!1}},async mounted(){this.$store.commit("toggleIsNavBarDisabled",!0),await Promise.all([this.$store.dispatch("get_account"),this.$store.dispatch("get_products",{is_archive:1}),this.$store.dispatch("getTableConfig",""),this.$store.dispatch("get_all_fields")]),this.$store.commit("toggleIsNavBarDisabled",!1)},computed:{tableConfig(){return Object.entries(this.$store.state.account.tableConfig)},meta(){return this.$store.state.products.meta},all_fields(){return this.$store.state.fields.all_fields},archive_list(){return this.$store.state.products.products},showGridBottom(){return this.meta.meta.total>=this.meta.meta.per_page},isDataLoading(){return this.$store.state.products.isLoading},page(){const e={first:this.getPageFromLink(this.meta?.links?.first),prev:this.getPageFromLink(this.meta?.links?.prev),current:this.meta?.meta?.current_page,next:this.getPageFromLink(this.meta?.links?.next),last:this.getPageFromLink(this.meta?.links?.last)};return e}},watch:{},methods:{getPageFromLink(e){return e?e.split("?page=")[1]:null},async changeCount(e){await this.$store.dispatch("update_user",{per_page:e}),this.drop_page()},drop_page(){this.changePage(1)},changePage(e){this.$store.dispatch("get_products",{is_archive:1,page:e})},async unarchive_data(e){if(!this.isLoading){this.isLoading=!0;const t={products:[{id:e.id,fields:e.fields,is_archive:0}]};await this.$store.dispatch("update_product",t),await this.$store.dispatch("get_products",{is_archive:1}),this.isLoading=!1}}}},W=a(89);const I=(0,W.Z)(F,[["render",j],["__scopeId","data-v-1124ef37"]]);var A=I,M=a(2357),K=a(9299),N=a(678),S=a(4870),T=a(1120),G={name:"ArchiveView",components:{ArchiveGrid:A,AppHeader:M.Z},setup(){const e=(0,N.yj)(),t=(0,S.Fl)((()=>1==K.Z.state.account?.account?.id)),a=(0,S.Fl)((()=>K.Z.state.products.meta.meta.total)),s=(0,S.Fl)((()=>"dark"===e.query.test)),n=()=>T.Z.push("/remnants");return{isTest:t,count_archive:a,isDarkTest:s,back:n}}};const O=(0,W.Z)(G,[["render",p],["__scopeId","data-v-6cd523a1"]]);var V=O}}]);
//# sourceMappingURL=742.b92aec87.js.map